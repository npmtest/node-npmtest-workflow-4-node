{"/home/travis/build/npmtest/node-npmtest-workflow-4-node/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_workflow_4_node */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/lib.npmtest_workflow_4_node.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/lib.npmtest_workflow_4_node.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":60}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":66}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_workflow_4_node */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_workflow_4_node = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_workflow_4_node = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":314,"loc":{"start":{"line":314,"column":32},"end":{"line":314,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":325,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":324,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":294,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":302,"column":8},"end":{"line":302,"column":82},"skip":true},"70":{"start":{"line":305,"column":8},"end":{"line":307,"column":9},"skip":true},"71":{"start":{"line":306,"column":12},"end":{"line":306,"column":82},"skip":true},"72":{"start":{"line":309,"column":8},"end":{"line":311,"column":9},"skip":true},"73":{"start":{"line":310,"column":12},"end":{"line":310,"column":18},"skip":true},"74":{"start":{"line":312,"column":8},"end":{"line":312,"column":54},"skip":true},"75":{"start":{"line":313,"column":8},"end":{"line":313,"column":69},"skip":true},"76":{"start":{"line":314,"column":8},"end":{"line":322,"column":36},"skip":true},"77":{"start":{"line":315,"column":12},"end":{"line":315,"column":61},"skip":true},"78":{"start":{"line":316,"column":12},"end":{"line":319,"column":13},"skip":true},"79":{"start":{"line":317,"column":16},"end":{"line":317,"column":75},"skip":true},"80":{"start":{"line":318,"column":16},"end":{"line":318,"column":23},"skip":true},"81":{"start":{"line":320,"column":12},"end":{"line":320,"column":38},"skip":true},"82":{"start":{"line":321,"column":12},"end":{"line":321,"column":27},"skip":true},"83":{"start":{"line":323,"column":8},"end":{"line":323,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":59}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":323,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":73},"skip":true},{"start":{"line":296,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":43},"end":{"line":302,"column":75},"skip":true},{"start":{"line":302,"column":79},"end":{"line":302,"column":81},"skip":true}]},"25":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true},{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true}]},"26":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true},{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true}]},"27":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":27},"end":{"line":312,"column":43},"skip":true},{"start":{"line":312,"column":47},"end":{"line":312,"column":53},"skip":true}]},"28":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true},{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-workflow-4-node && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_workflow_4_node */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_workflow_4_node","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_workflow_4_node.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        local.assetsDict['/assets.npmtest_workflow_4_node.rollup.js'] =","            local.assetsDict['/assets.npmtest_workflow_4_node.rollup.js'] ||","            local.fs.readFileSync(","                // buildCustomOrg-hack","                local.npmtest_workflow_4_node.__dirname +","                    '/lib.npmtest_workflow_4_node.js',","                'utf8'","            ).replace((/^#!/), '//');","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"294":1,"302":1,"305":1,"306":1,"309":1,"310":1,"312":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"320":1,"321":1,"323":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/index.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":1,"7":0,"8":1},"b":{"1":[1,0],"2":[0,1]},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":15}},"2":{"start":{"line":2,"column":0},"end":{"line":6,"column":1}},"3":{"start":{"line":3,"column":4},"end":{"line":3,"column":25}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":16}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"6":{"start":{"line":10,"column":0},"end":{"line":12,"column":1}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":30}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":36}}},"branchMap":{"1":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":15},"end":{"line":8,"column":20}},{"start":{"line":8,"column":23},"end":{"line":8,"column":28}}]},"2":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":0},"end":{"line":10,"column":0}},{"start":{"line":10,"column":0},"end":{"line":10,"column":0}}]}},"code":["var es6 = true;","try {","    eval(\"(() => {})()\");","} catch (err) {","    es6 = false;","}","","var es = es6 ? \"es6\" : \"es5\";","","if (!es6) {","    require(\"babel-polyfill\");","}","","module.exports = require(\"./\" + es);"],"l":{"1":1,"2":1,"3":1,"5":0,"8":1,"10":1,"11":0,"14":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":2}}},"branchMap":{},"code":["module.exports = {","    common: require(\"./common\"),","    activities: require(\"./activities\"),","    hosting: require(\"./hosting\")","};"],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":8,"column":2}}},"branchMap":{},"code":["module.exports = {","    enums: require(\"./enums\"),","    errors: require(\"./errors\"),","    asyncHelpers: require(\"./asyncHelpers\"),","    SimpleProxy: require(\"./simpleProxy\"),","    is: require(\"./is\"),","    converters: require(\"./converters\")","};"],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/enums.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/enums.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":22,"column":2}}},"branchMap":{},"code":["\"use strict\";","","module.exports = {","    activityStates: {","        run: \"run\",","        end: \"end\",","        complete: \"complete\",","        cancel: \"cancel\",","        idle: \"idle\",","        fail: \"fail\"","    },","    workflowEvents: {","        start: \"start\",","        invoke: \"invoke\",","        end: \"end\",","        warn: \"warn\",","        workflowEvent: \"workflowEvent\"","    },","    events: {","        workflowEvent: \"workflowEvent\"","    }","};",""],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/errors.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/errors.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":1,"11":1,"12":0,"13":1,"14":1,"15":0,"16":0,"17":0,"18":1,"19":1,"20":0,"21":0,"22":0,"23":1,"24":1,"25":0,"26":0,"27":0,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":0,"38":0,"39":0,"40":1,"41":1,"42":0,"43":0,"44":0,"45":1,"46":1,"47":0,"48":0,"49":0,"50":1,"51":1,"52":0,"53":0,"54":0,"55":1,"56":1,"57":0,"58":0,"59":0,"60":1,"61":1,"62":0,"63":0,"64":0,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"ActivityStateExceptionError","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}}},"2":{"name":"Cancelled","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":21}}},"3":{"name":"Idle","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":23}}},"4":{"name":"ActivityMarkupError","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}}},"5":{"name":"ActivityRuntimeError","line":34,"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":39}}},"6":{"name":"BookmarkNotFoundError","line":42,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":40}}},"7":{"name":"AggregateError","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":32}}},"8":{"name":"ValidationError","line":61,"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":34}}},"9":{"name":"TimeoutError","line":69,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":31}}},"10":{"name":"WorkflowError","line":77,"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":32}}},"11":{"name":"MethodNotFoundError","line":85,"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":38}}},"12":{"name":"MethodIsNotAccessibleError","line":93,"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":45}}},"13":{"name":"WorkflowNotFoundError","line":101,"loc":{"start":{"line":101,"column":0},"end":{"line":101,"column":40}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":39}},"3":{"start":{"line":6,"column":0},"end":{"line":10,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":21}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":52}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":27}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":50}},"8":{"start":{"line":14,"column":0},"end":{"line":16,"column":1}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":85}},"10":{"start":{"line":18,"column":0},"end":{"line":18,"column":54}},"11":{"start":{"line":20,"column":0},"end":{"line":22,"column":1}},"12":{"start":{"line":21,"column":4},"end":{"line":21,"column":75}},"13":{"start":{"line":24,"column":0},"end":{"line":24,"column":49}},"14":{"start":{"line":26,"column":0},"end":{"line":30,"column":1}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":21}},"16":{"start":{"line":28,"column":4},"end":{"line":28,"column":52}},"17":{"start":{"line":29,"column":4},"end":{"line":29,"column":27}},"18":{"start":{"line":32,"column":0},"end":{"line":32,"column":42}},"19":{"start":{"line":34,"column":0},"end":{"line":38,"column":1}},"20":{"start":{"line":35,"column":4},"end":{"line":35,"column":21}},"21":{"start":{"line":36,"column":4},"end":{"line":36,"column":52}},"22":{"start":{"line":37,"column":4},"end":{"line":37,"column":27}},"23":{"start":{"line":40,"column":0},"end":{"line":40,"column":43}},"24":{"start":{"line":42,"column":0},"end":{"line":46,"column":1}},"25":{"start":{"line":43,"column":4},"end":{"line":43,"column":36}},"26":{"start":{"line":44,"column":4},"end":{"line":44,"column":52}},"27":{"start":{"line":45,"column":4},"end":{"line":45,"column":27}},"28":{"start":{"line":48,"column":0},"end":{"line":48,"column":59}},"29":{"start":{"line":50,"column":0},"end":{"line":57,"column":1}},"30":{"start":{"line":51,"column":4},"end":{"line":51,"column":21}},"31":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"32":{"start":{"line":53,"column":8},"end":{"line":53,"column":49}},"33":{"start":{"line":55,"column":4},"end":{"line":55,"column":71}},"34":{"start":{"line":56,"column":4},"end":{"line":56,"column":25}},"35":{"start":{"line":59,"column":0},"end":{"line":59,"column":52}},"36":{"start":{"line":61,"column":0},"end":{"line":65,"column":1}},"37":{"start":{"line":62,"column":4},"end":{"line":62,"column":21}},"38":{"start":{"line":63,"column":4},"end":{"line":63,"column":52}},"39":{"start":{"line":64,"column":4},"end":{"line":64,"column":27}},"40":{"start":{"line":67,"column":0},"end":{"line":67,"column":38}},"41":{"start":{"line":69,"column":0},"end":{"line":73,"column":1}},"42":{"start":{"line":70,"column":4},"end":{"line":70,"column":21}},"43":{"start":{"line":71,"column":4},"end":{"line":71,"column":52}},"44":{"start":{"line":72,"column":4},"end":{"line":72,"column":27}},"45":{"start":{"line":75,"column":0},"end":{"line":75,"column":35}},"46":{"start":{"line":77,"column":0},"end":{"line":81,"column":1}},"47":{"start":{"line":78,"column":4},"end":{"line":78,"column":21}},"48":{"start":{"line":79,"column":4},"end":{"line":79,"column":52}},"49":{"start":{"line":80,"column":4},"end":{"line":80,"column":27}},"50":{"start":{"line":83,"column":0},"end":{"line":83,"column":36}},"51":{"start":{"line":85,"column":0},"end":{"line":89,"column":1}},"52":{"start":{"line":86,"column":4},"end":{"line":86,"column":29}},"53":{"start":{"line":87,"column":4},"end":{"line":87,"column":52}},"54":{"start":{"line":88,"column":4},"end":{"line":88,"column":27}},"55":{"start":{"line":91,"column":0},"end":{"line":91,"column":50}},"56":{"start":{"line":93,"column":0},"end":{"line":97,"column":1}},"57":{"start":{"line":94,"column":4},"end":{"line":94,"column":29}},"58":{"start":{"line":95,"column":4},"end":{"line":95,"column":52}},"59":{"start":{"line":96,"column":4},"end":{"line":96,"column":27}},"60":{"start":{"line":99,"column":0},"end":{"line":99,"column":57}},"61":{"start":{"line":101,"column":0},"end":{"line":105,"column":1}},"62":{"start":{"line":102,"column":4},"end":{"line":102,"column":29}},"63":{"start":{"line":103,"column":4},"end":{"line":103,"column":52}},"64":{"start":{"line":104,"column":4},"end":{"line":104,"column":27}},"65":{"start":{"line":107,"column":0},"end":{"line":107,"column":52}},"66":{"start":{"line":109,"column":0},"end":{"line":109,"column":73}},"67":{"start":{"line":110,"column":0},"end":{"line":110,"column":68}},"68":{"start":{"line":111,"column":0},"end":{"line":111,"column":37}},"69":{"start":{"line":112,"column":0},"end":{"line":112,"column":27}},"70":{"start":{"line":113,"column":0},"end":{"line":113,"column":47}},"71":{"start":{"line":114,"column":0},"end":{"line":114,"column":57}},"72":{"start":{"line":115,"column":0},"end":{"line":115,"column":59}},"73":{"start":{"line":116,"column":0},"end":{"line":116,"column":49}},"74":{"start":{"line":117,"column":0},"end":{"line":117,"column":43}},"75":{"start":{"line":118,"column":0},"end":{"line":118,"column":45}},"76":{"start":{"line":119,"column":0},"end":{"line":119,"column":57}},"77":{"start":{"line":120,"column":0},"end":{"line":120,"column":71}},"78":{"start":{"line":121,"column":0},"end":{"line":121,"column":61}},"79":{"start":{"line":122,"column":0},"end":{"line":122,"column":61}}},"branchMap":{"1":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":43},"end":{"line":21,"column":50}},{"start":{"line":21,"column":54},"end":{"line":21,"column":73}}]},"2":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]}},"code":["\"use strict\";","","let util = require(\"util\");","let constants = require(\"./constants\");","","function ActivityStateExceptionError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(ActivityStateExceptionError, Error);","","function Cancelled() {","    ActivityStateExceptionError.call(this, \"Activity execution has been cancelled.\");","}","","util.inherits(Cancelled, ActivityStateExceptionError);","","function Idle(message) {","    ActivityStateExceptionError.call(this, message || \"Activity is idle.\");","}","","util.inherits(Idle, ActivityStateExceptionError);","","function ActivityMarkupError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(ActivityMarkupError, Error);","","function ActivityRuntimeError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(ActivityRuntimeError, Error);","","function BookmarkNotFoundError(message) {","    ActivityRuntimeError.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(BookmarkNotFoundError, ActivityRuntimeError);","","function AggregateError(errors) {","    let message = \"\";","    if (errors.length) {","        message = \" First: \" + errors[0].message;","    }","    ActivityRuntimeError.call(this, \"Many errors occurred.\" + message);","    this.errors = errors;","}","","util.inherits(AggregateError, ActivityRuntimeError);","","function ValidationError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(ValidationError, Error);","","function TimeoutError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(TimeoutError, Error);","","function WorkflowError(message) {","    Error.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(WorkflowError, Error);","","function MethodNotFoundError(message) {","    WorkflowError.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(MethodNotFoundError, WorkflowError);","","function MethodIsNotAccessibleError(message) {","    WorkflowError.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(MethodIsNotAccessibleError, WorkflowError);","","function WorkflowNotFoundError(message) {","    WorkflowError.call(this);","    Error.captureStackTrace(this, this.constructor);","    this.message = message;","}","","util.inherits(WorkflowNotFoundError, WorkflowError);","","module.exports.ActivityStateExceptionError = ActivityStateExceptionError;","module.exports.ActivityExceptionError = ActivityStateExceptionError;","module.exports.Cancelled = Cancelled;","module.exports.Idle = Idle;","module.exports.AggregateError = AggregateError;","module.exports.ActivityMarkupError = ActivityMarkupError;","module.exports.ActivityRuntimeError = ActivityRuntimeError;","module.exports.ValidationError = ValidationError;","module.exports.TimeoutError = TimeoutError;","module.exports.WorkflowError = WorkflowError;","module.exports.MethodNotFoundError = MethodNotFoundError;","module.exports.MethodIsNotAccessibleError = MethodIsNotAccessibleError;","module.exports.WorkflowNotFoundError = WorkflowNotFoundError;","module.exports.BookmarkNotFoundError = BookmarkNotFoundError;"],"l":{"3":1,"4":1,"6":1,"7":0,"8":0,"9":0,"12":1,"14":1,"15":0,"18":1,"20":1,"21":0,"24":1,"26":1,"27":0,"28":0,"29":0,"32":1,"34":1,"35":0,"36":0,"37":0,"40":1,"42":1,"43":0,"44":0,"45":0,"48":1,"50":1,"51":0,"52":0,"53":0,"55":0,"56":0,"59":1,"61":1,"62":0,"63":0,"64":0,"67":1,"69":1,"70":0,"71":0,"72":0,"75":1,"77":1,"78":0,"79":0,"80":0,"83":1,"85":1,"86":0,"87":0,"88":0,"91":1,"93":1,"94":0,"95":0,"96":0,"99":1,"101":1,"102":0,"103":0,"104":0,"107":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/constants.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/constants.js","s":{"1":1,"2":1,"3":1,"4":1,"5":17,"6":17,"7":2,"8":15,"9":220,"10":17,"11":1,"12":1},"b":{"1":[2,15]},"f":{"1":17},"fnMap":{"1":{"name":"make","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"4":{"start":{"line":8,"column":0},"end":{"line":17,"column":1}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":48}},"6":{"start":{"line":10,"column":4},"end":{"line":15,"column":5}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":40}},"8":{"start":{"line":13,"column":9},"end":{"line":15,"column":5}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":21}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":28}},"11":{"start":{"line":19,"column":0},"end":{"line":44,"column":2}},"12":{"start":{"line":46,"column":0},"end":{"line":46,"column":27}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","","const maxLen = \"collectingCompletedBookmark\".length;","const identity = \"-:\\|$WF4N$|/:-\";","","function make(name) {","    let inner = _.snakeCase(name).toUpperCase();","    if (inner.length > maxLen) {","        inner = inner.substr(0, maxLen);","    }","    else while (inner.length < maxLen) {","        inner += \"_\";","    }","    return identity + inner;","}","","let constants = {","    identity: identity,","    markers: {","        valueCollectedBookmark: make(\"mValueCollectedBookmark\"),","        collectingCompletedBookmark: make(\"mCollectingCompletedBookmark\"),","        beginMethodBookmark: make(\"mBeginMethodBookmark\"),","        activityProperty: make(\"mActivityProperty\"),","        activityInstance: make(\"mActivityInstance\"),","        keySeparator: make(\"mKeySeparator\"),","        nope: make(\"mNope\"),","        delayToMethodNamePrefix: make(\"mDelayToMethodNamePrefix\"),","        $parent: make(\"mParent\")","    },","    ids: {","        initialScope: make(\"mInitialScope\")","    },","    types: {","        error: make(\"mError\"),","        schedulingState: make(\"mSchedulingState\"),","        date: make(\"mDate\"),","        set: make(\"mSet\"),","        map: make(\"mMap\"),","        rex: make(\"mRex\"),","        object: make(\"mObject\")","    }","};","","module.exports = constants;",""],"l":{"3":1,"5":1,"6":1,"8":1,"9":17,"10":17,"11":2,"13":15,"14":220,"16":17,"19":1,"46":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/asyncHelpers.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/asyncHelpers.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":79}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":39},"end":{"line":10,"column":51}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":35}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":25}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"4":{"start":{"line":6,"column":0},"end":{"line":25,"column":1}},"5":{"start":{"line":10,"column":8},"end":{"line":12,"column":10}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":47}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":45}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":25}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":26}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":39}},"11":{"start":{"line":17,"column":8},"end":{"line":22,"column":9}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":81}},"13":{"start":{"line":18,"column":60},"end":{"line":18,"column":81}},"14":{"start":{"line":19,"column":12},"end":{"line":19,"column":43}},"15":{"start":{"line":20,"column":12},"end":{"line":20,"column":57}},"16":{"start":{"line":21,"column":12},"end":{"line":21,"column":39}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":22}},"18":{"start":{"line":27,"column":0},"end":{"line":27,"column":30}}},"branchMap":{"1":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":35}},{"start":{"line":10,"column":39},"end":{"line":12,"column":9}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":12}},{"start":{"line":18,"column":12},"end":{"line":18,"column":12}}]}},"code":["var Bluebird = require(\"bluebird\");","var is = require(\"./is\");","","var async = Bluebird.coroutine;","","var asyncHelpers = {","    async: async,","","    aggressiveRetry: async(function* (asyncFunc, until, timeout, timeoutError) {","        timeoutError = timeoutError || function () {","            return new Error(\"Retry timeout.\");","        };","        var startTime = new Date().getTime();","        var waitTime = 0;","        var waitCount = 0;","        var result = yield asyncFunc();","        while (!until(result)) {","            if (new Date().getTime() - startTime > timeout) throw timeoutError();","            yield Bluebird.delay(waitTime);","            waitTime = Math.min(++waitCount * 250, 3000);","            result = yield asyncFunc();","        }","        return result;","    })","}","","module.exports = asyncHelpers;"],"l":{"1":1,"2":1,"4":1,"6":1,"10":0,"11":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"23":0,"27":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/is.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/is.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":12},"end":{"line":8,"column":18}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":18}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":34}},"3":{"start":{"line":7,"column":0},"end":{"line":14,"column":2}},"4":{"start":{"line":9,"column":8},"end":{"line":9,"column":71}},"5":{"start":{"line":12,"column":8},"end":{"line":12,"column":71}}},"branchMap":{"1":{"line":9,"type":"binary-expr","locations":[{"start":{"line":9,"column":15},"end":{"line":9,"column":18}},{"start":{"line":9,"column":22},"end":{"line":9,"column":70}}]},"2":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":15},"end":{"line":12,"column":18}},{"start":{"line":12,"column":22},"end":{"line":12,"column":70}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","","let genRegex = /^function[\\s]*\\*/;","","module.exports = {","    activity(obj) {","        return obj && obj instanceof require(\"../activities/activity\");","    },","    template(obj) {","        return obj && obj instanceof require(\"../activities/template\");","    }","};",""],"l":{"3":1,"5":1,"7":1,"9":0,"12":0}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/simpleProxy.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/simpleProxy.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"SimpleProxy","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":25}}},"3":{"name":"(anonymous_3)","line":42,"loc":{"start":{"line":42,"column":15},"end":{"line":42,"column":30}}},"4":{"name":"(anonymous_4)","line":54,"loc":{"start":{"line":54,"column":37},"end":{"line":54,"column":49}}},"5":{"name":"(anonymous_5)","line":57,"loc":{"start":{"line":57,"column":37},"end":{"line":57,"column":54}}},"6":{"name":"(anonymous_6)","line":77,"loc":{"start":{"line":77,"column":37},"end":{"line":77,"column":49}}},"7":{"name":"(anonymous_7)","line":80,"loc":{"start":{"line":80,"column":37},"end":{"line":80,"column":54}}},"8":{"name":"(anonymous_8)","line":110,"loc":{"start":{"line":110,"column":37},"end":{"line":110,"column":49}}},"9":{"name":"(anonymous_9)","line":113,"loc":{"start":{"line":113,"column":37},"end":{"line":113,"column":54}}},"10":{"name":"(anonymous_10)","line":133,"loc":{"start":{"line":133,"column":41},"end":{"line":133,"column":53}}},"11":{"name":"(anonymous_11)","line":136,"loc":{"start":{"line":136,"column":41},"end":{"line":136,"column":58}}},"12":{"name":"(anonymous_12)","line":156,"loc":{"start":{"line":156,"column":15},"end":{"line":156,"column":29}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":26}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"3":{"start":{"line":5,"column":0},"end":{"line":25,"column":1}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":32}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":20}},"6":{"start":{"line":9,"column":4},"end":{"line":12,"column":7}},"7":{"start":{"line":13,"column":4},"end":{"line":17,"column":7}},"8":{"start":{"line":18,"column":4},"end":{"line":23,"column":7}},"9":{"start":{"line":21,"column":12},"end":{"line":21,"column":41}},"10":{"start":{"line":24,"column":4},"end":{"line":24,"column":45}},"11":{"start":{"line":27,"column":0},"end":{"line":31,"column":2}},"12":{"start":{"line":33,"column":0},"end":{"line":161,"column":3}},"13":{"start":{"line":43,"column":12},"end":{"line":43,"column":28}},"14":{"start":{"line":44,"column":12},"end":{"line":150,"column":13}},"15":{"start":{"line":45,"column":16},"end":{"line":63,"column":17}},"16":{"start":{"line":46,"column":20},"end":{"line":62,"column":21}},"17":{"start":{"line":47,"column":24},"end":{"line":47,"column":55}},"18":{"start":{"line":48,"column":24},"end":{"line":61,"column":26}},"19":{"start":{"line":55,"column":36},"end":{"line":55,"column":80}},"20":{"start":{"line":58,"column":36},"end":{"line":58,"column":80}},"21":{"start":{"line":65,"column":17},"end":{"line":150,"column":13}},"22":{"start":{"line":66,"column":16},"end":{"line":66,"column":75}},"23":{"start":{"line":67,"column":16},"end":{"line":90,"column":17}},"24":{"start":{"line":68,"column":20},"end":{"line":89,"column":21}},"25":{"start":{"line":70,"column":24},"end":{"line":70,"column":69}},"26":{"start":{"line":71,"column":24},"end":{"line":84,"column":26}},"27":{"start":{"line":78,"column":36},"end":{"line":78,"column":77}},"28":{"start":{"line":81,"column":36},"end":{"line":81,"column":77}},"29":{"start":{"line":85,"column":24},"end":{"line":85,"column":52}},"30":{"start":{"line":88,"column":24},"end":{"line":88,"column":52}},"31":{"start":{"line":91,"column":16},"end":{"line":93,"column":17}},"32":{"start":{"line":92,"column":20},"end":{"line":92,"column":40}},"33":{"start":{"line":96,"column":16},"end":{"line":96,"column":65}},"34":{"start":{"line":97,"column":16},"end":{"line":97,"column":75}},"35":{"start":{"line":98,"column":16},"end":{"line":98,"column":43}},"36":{"start":{"line":100,"column":16},"end":{"line":120,"column":17}},"37":{"start":{"line":101,"column":20},"end":{"line":119,"column":21}},"38":{"start":{"line":103,"column":24},"end":{"line":103,"column":69}},"39":{"start":{"line":104,"column":24},"end":{"line":117,"column":26}},"40":{"start":{"line":111,"column":36},"end":{"line":111,"column":77}},"41":{"start":{"line":114,"column":36},"end":{"line":114,"column":77}},"42":{"start":{"line":118,"column":24},"end":{"line":118,"column":44}},"43":{"start":{"line":122,"column":16},"end":{"line":122,"column":45}},"44":{"start":{"line":123,"column":16},"end":{"line":146,"column":17}},"45":{"start":{"line":124,"column":20},"end":{"line":145,"column":21}},"46":{"start":{"line":125,"column":24},"end":{"line":125,"column":55}},"47":{"start":{"line":126,"column":24},"end":{"line":144,"column":25}},"48":{"start":{"line":127,"column":28},"end":{"line":140,"column":30}},"49":{"start":{"line":134,"column":40},"end":{"line":134,"column":84}},"50":{"start":{"line":137,"column":40},"end":{"line":137,"column":84}},"51":{"start":{"line":143,"column":28},"end":{"line":143,"column":59}},"52":{"start":{"line":147,"column":16},"end":{"line":149,"column":17}},"53":{"start":{"line":148,"column":20},"end":{"line":148,"column":40}},"54":{"start":{"line":157,"column":12},"end":{"line":157,"column":29}},"55":{"start":{"line":158,"column":12},"end":{"line":158,"column":44}},"56":{"start":{"line":163,"column":0},"end":{"line":163,"column":29}}},"branchMap":{"1":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":44,"column":12}},{"start":{"line":44,"column":12},"end":{"line":44,"column":12}}]},"2":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":20},"end":{"line":46,"column":20}},{"start":{"line":46,"column":20},"end":{"line":46,"column":20}}]},"3":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":17},"end":{"line":65,"column":17}},{"start":{"line":65,"column":17},"end":{"line":65,"column":17}}]},"4":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":20},"end":{"line":68,"column":20}},{"start":{"line":68,"column":20},"end":{"line":68,"column":20}}]},"5":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":20},"end":{"line":101,"column":20}},{"start":{"line":101,"column":20},"end":{"line":101,"column":20}}]},"6":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":24},"end":{"line":101,"column":49}},{"start":{"line":101,"column":53},"end":{"line":101,"column":78}}]},"7":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":20},"end":{"line":124,"column":20}},{"start":{"line":124,"column":20},"end":{"line":124,"column":20}}]},"8":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":24},"end":{"line":126,"column":24}},{"start":{"line":126,"column":24},"end":{"line":126,"column":24}}]},"9":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":28},"end":{"line":126,"column":56}},{"start":{"line":126,"column":60},"end":{"line":126,"column":83}}]}},"code":["\"use strict\";","let _ = require(\"lodash\");","let assert = require(\"better-assert\");","","function SimpleProxy(backend) {","    assert(_.isObject(backend));","    let self = this;","","    Object.defineProperty(this, \"_backend\", {","        enumerable: false,","        value: backend","    });","    Object.defineProperty(this, \"_backendKeys\", {","        enumerable: false,","        writable: false,","        value: []","    });","    Object.defineProperty(this, \"$keys\", {","        enumerable: false,","        get: function () {","            return backend.getKeys(self);","        }","    });","    this.update(SimpleProxy.updateMode.init);","}","","SimpleProxy.updateMode = {","    twoWay: 0,","    oneWay: 1,","    init: 2","};","","Object.defineProperties(SimpleProxy.prototype, {","    _skipKeys: {","        enumerable: false,","        writable: false,","        value: new Set([\"getKeys\", \"getValue\", \"setValue\"])","    },","    update: {","        enumerable: false,","        writable: false,","        value: function(mode) {","            let self = this;","            if (mode === SimpleProxy.updateMode.init) {","                for (let newKey of this._backend.getKeys(this)) {","                    if (_.isUndefined(this[newKey])) { // This makes the list as unique","                        this._backendKeys.push(newKey);","                        Object.defineProperty(","                            self,","                            newKey,","                            {","                                enumerable: true,","                                configurable: true,","                                get: function () {","                                    return self._backend.getValue(self, newKey);","                                },","                                set: function (value) {","                                    self._backend.setValue(self, newKey, value);","                                }","                            }","                        );","                    }","                }","            }","            else if (mode === SimpleProxy.updateMode.oneWay) {","                let currBackendKeys = new Set(this._backend.getKeys(this));","                for (let key in this) {","                    if (!currBackendKeys.has(key)) {","                        // new key on proxy, and not defined on backend:","                        this._backend.setValue(self, key, this[key]);","                        Object.defineProperty(","                            self,","                            key,","                            {","                                enumerable: true,","                                configurable: true,","                                get: function () {","                                    return self._backend.getValue(self, key);","                                },","                                set: function (value) {","                                    self._backend.setValue(self, key, value);","                                }","                            }","                        );","                        this._backendKeys.push(key);","                    }","                    else {","                        currBackendKeys.delete(key);","                    }","                }","                for (let oldKey of currBackendKeys) {","                    delete this[oldKey];","                }","            }","            else {","                let prevBackendKeys = new Set(this._backendKeys);","                let currBackendKeys = new Set(this._backend.getKeys(this));","                let backedKeys = new Set();","","                for (let key in this) {","                    if (!prevBackendKeys.has(key) && !currBackendKeys.has(key)) {","                        // new key on proxy, and not defined on backend:","                        this._backend.setValue(self, key, this[key]);","                        Object.defineProperty(","                            self,","                            key,","                            {","                                enumerable: true,","                                configurable: true,","                                get: function () {","                                    return self._backend.getValue(self, key);","                                },","                                set: function (value) {","                                    self._backend.setValue(self, key, value);","                                }","                            }","                        );","                        backedKeys.add(key);","                    }","                }","","                this._backendKeys.length = 0;","                for (let newKey of currBackendKeys) {","                    if (!this._skipKeys.has(newKey)) {","                        this._backendKeys.push(newKey);","                        if (!prevBackendKeys.has(newKey) && !backedKeys.has(newKey)) {","                            Object.defineProperty(","                                self,","                                newKey,","                                {","                                    enumerable: true,","                                    configurable: true,","                                    get: function () {","                                        return self._backend.getValue(self, newKey);","                                    },","                                    set: function (value) {","                                        self._backend.setValue(self, newKey, value);","                                    }","                                }","                            );","                        }","                        else {","                            prevBackendKeys.delete(newKey);","                        }","                    }","                }","                for (let oldKey of prevBackendKeys) {","                    delete this[oldKey];","                }","            }","        }","    },","    delete: {","        enumerable: false,","        writable: false,","        value: function(key) {","            delete this[key];","            this._backend.delete(this, key);","        }","    }","});","","module.exports = SimpleProxy;"],"l":{"2":1,"3":1,"5":1,"6":0,"7":0,"9":0,"13":0,"18":0,"21":0,"24":0,"27":1,"33":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"55":0,"58":0,"65":0,"66":0,"67":0,"68":0,"70":0,"71":0,"78":0,"81":0,"85":0,"88":0,"91":0,"92":0,"96":0,"97":0,"98":0,"100":0,"101":0,"103":0,"104":0,"111":0,"114":0,"118":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"134":0,"137":0,"143":0,"147":0,"148":0,"157":0,"158":0,"163":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/converters.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/converters.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":31}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":32}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":31}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":16},"end":{"line":39,"column":32}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":38}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"3":{"start":{"line":5,"column":0},"end":{"line":50,"column":2}},"4":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"5":{"start":{"line":8,"column":12},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":35}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":22}},"8":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"9":{"start":{"line":13,"column":12},"end":{"line":13,"column":27}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":20}},"11":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":24}},"13":{"start":{"line":21,"column":8},"end":{"line":21,"column":32}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":28}},"15":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"16":{"start":{"line":24,"column":12},"end":{"line":24,"column":36}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":19}},"18":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"19":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":35}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":22}},"22":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"23":{"start":{"line":35,"column":12},"end":{"line":35,"column":27}},"24":{"start":{"line":37,"column":8},"end":{"line":37,"column":20}},"25":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"26":{"start":{"line":41,"column":12},"end":{"line":41,"column":24}},"27":{"start":{"line":43,"column":8},"end":{"line":43,"column":32}},"28":{"start":{"line":44,"column":8},"end":{"line":44,"column":28}},"29":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"30":{"start":{"line":46,"column":12},"end":{"line":46,"column":25}},"31":{"start":{"line":48,"column":8},"end":{"line":48,"column":19}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":7,"column":8}},{"start":{"line":7,"column":8},"end":{"line":7,"column":8}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]}},"code":["\"use strict\";","let assert = require(\"better-assert\");","let _ = require(\"lodash\");","","module.exports = {","    mapToArray: function (map) {","        if (!map) {","            return null;","        }","        assert(map instanceof Map);","        let json = [];","        for (let kvp of map.entries()) {","            json.push(kvp);","        }","        return json;","    },","    arrayToMap: function (json) {","        if (!json) {","            return null;","        }","        assert(_.isArray(json));","        let map = new Map();","        for (let kvp of json) {","            map.set(kvp[0], kvp[1]);","        }","        return map;","    },","    setToArray: function (set) {","        if (!set) {","            return null;","        }","        assert(set instanceof Set);","        let json = [];","        for (let val of set.values()) {","            json.push(val);","        }","        return json;","    },","    arrayToSet: function (json) {","        if (!json) {","            return null;","        }","        assert(_.isArray(json));","        let set = new Set();","        for (let val of json) {","            set.add(val);","        }","        return set;","    }","};"],"l":{"2":1,"3":1,"5":1,"7":0,"8":0,"10":0,"11":0,"12":0,"13":0,"15":0,"18":0,"19":0,"21":0,"22":0,"23":0,"24":0,"26":0,"29":0,"30":0,"32":0,"33":0,"34":0,"35":0,"37":0,"40":0,"41":0,"43":0,"44":0,"45":0,"46":0,"48":0}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":51,"column":2}}},"branchMap":{},"code":["\"use strict\";","","module.exports = {","    Activity: require(\"./activity\"),","    ActivityExecutionEngine: require(\"./activityExecutionEngine\"),","    activityMarkup: require(\"./activityMarkup\"),","    Assign: require(\"./assign\"),","    BeginMethod: require(\"./beginMethod\"),","    Block: require(\"./block\"),","    ConsoleTracker: require(\"./consoleTracker\"),","    Declarator: require(\"./declarator\"),","    EndMethod: require(\"./endMethod\"),","    Expression: require(\"./expression\"),","    Func: require(\"./func\"),","    Parallel: require(\"./parallel\"),","    Pick: require(\"./pick\"),","    ResumeBookmark: require(\"./resumeBookmark\"),","    WaitForBookmark: require(\"./waitForBookmark\"),","    Workflow: require(\"./workflow\"),","    If: require(\"./if\"),","    While: require(\"./while\"),","    Method: require(\"./method\"),","    Composite: require(\"./composite\"),","    Template: require(\"./template\"),","    Thruthy: require(\"./truthy\"),","    Falsy: require(\"./falsy\"),","    Equals: require(\"./equals\"),","    NotEquals: require(\"./notEquals\"),","    Not: require(\"./not\"),","    And: require(\"./and\"),","    Or: require(\"./or\"),","    For: require(\"./for\"),","    ForEach: require(\"./forEach\"),","    Merge: require(\"./merge\"),","    Switch: require(\"./switch\"),","    Case: require(\"./case\"),","    Default: require(\"./default\"),","    WithBody: require(\"./withBody\"),","    When: require(\"./when\"),","    Console: require(\"./console\"),","    Obj: require(\"./obj\"),","    DelayTo: require(\"./delayTo\"),","    Delay: require(\"./delay\"),","    Repeat: require(\"./repeat\"),","    Try: require(\"./try\"),","    Throw: require(\"./throw\"),","    Emit: require(\"./emit\"),","    Cancel: require(\"./cancel\"),","    CancellationScope: require(\"./cancellationScope\"),","    instanceData: require(\"./instanceData\")","};"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activity.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activity.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":1,"63":0,"64":1,"65":0,"66":1,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":1,"92":0,"93":1,"94":0,"95":0,"96":0,"97":1,"98":1,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":1,"149":1,"150":1,"151":0,"152":1,"153":0,"154":1,"155":0,"156":1,"157":0,"158":1,"159":0,"160":1,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":1,"189":0,"190":1,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":1,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":1,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":1,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":1,"366":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0,0,0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0,0,0],"62":[0,0],"63":[0,0],"64":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},"fnMap":{"1":{"name":"Activity","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":20}}},"2":{"name":"(anonymous_2)","line":75,"loc":{"start":{"line":75,"column":13},"end":{"line":75,"column":24}}},"3":{"name":"(anonymous_3)","line":81,"loc":{"start":{"line":81,"column":13},"end":{"line":81,"column":29}}},"4":{"name":"(anonymous_4)","line":87,"loc":{"start":{"line":87,"column":30},"end":{"line":87,"column":42}}},"5":{"name":"(anonymous_5)","line":92,"loc":{"start":{"line":92,"column":25},"end":{"line":92,"column":49}}},"6":{"name":"(anonymous_6)","line":96,"loc":{"start":{"line":96,"column":30},"end":{"line":96,"column":54}}},"7":{"name":"(anonymous_7)","line":100,"loc":{"start":{"line":100,"column":39},"end":{"line":100,"column":63}}},"8":{"name":"(anonymous_8)","line":104,"loc":{"start":{"line":104,"column":31},"end":{"line":104,"column":78}}},"9":{"name":"(anonymous_9)","line":150,"loc":{"start":{"line":150,"column":37},"end":{"line":150,"column":57}}},"10":{"name":"(anonymous_10)","line":154,"loc":{"start":{"line":154,"column":42},"end":{"line":154,"column":65}}},"11":{"name":"(anonymous_11)","line":163,"loc":{"start":{"line":163,"column":27},"end":{"line":163,"column":39}}},"12":{"name":"makeClone","line":164,"loc":{"start":{"line":164,"column":4},"end":{"line":164,"column":46}}},"13":{"name":"(anonymous_13)","line":206,"loc":{"start":{"line":206,"column":27},"end":{"line":206,"column":50}}},"14":{"name":"(anonymous_14)","line":222,"loc":{"start":{"line":222,"column":28},"end":{"line":222,"column":68}}},"15":{"name":"(anonymous_15)","line":241,"loc":{"start":{"line":241,"column":8},"end":{"line":241,"column":20}}},"16":{"name":"(anonymous_16)","line":257,"loc":{"start":{"line":257,"column":25},"end":{"line":257,"column":54}}},"17":{"name":"(anonymous_17)","line":261,"loc":{"start":{"line":261,"column":30},"end":{"line":261,"column":61}}},"18":{"name":"(anonymous_18)","line":265,"loc":{"start":{"line":265,"column":28},"end":{"line":265,"column":51}}},"19":{"name":"(anonymous_19)","line":269,"loc":{"start":{"line":269,"column":26},"end":{"line":269,"column":49}}},"20":{"name":"(anonymous_20)","line":273,"loc":{"start":{"line":273,"column":26},"end":{"line":273,"column":52}}},"21":{"name":"(anonymous_21)","line":277,"loc":{"start":{"line":277,"column":25},"end":{"line":277,"column":64}}},"22":{"name":"(anonymous_22)","line":307,"loc":{"start":{"line":307,"column":26},"end":{"line":307,"column":37}}},"23":{"name":"(anonymous_23)","line":310,"loc":{"start":{"line":310,"column":20},"end":{"line":310,"column":32}}},"24":{"name":"(anonymous_24)","line":333,"loc":{"start":{"line":333,"column":41},"end":{"line":333,"column":80}}},"25":{"name":"(anonymous_25)","line":337,"loc":{"start":{"line":337,"column":30},"end":{"line":337,"column":71}}},"26":{"name":"(anonymous_26)","line":347,"loc":{"start":{"line":347,"column":28},"end":{"line":347,"column":56}}},"27":{"name":"(anonymous_27)","line":348,"loc":{"start":{"line":348,"column":21},"end":{"line":348,"column":33}}},"28":{"name":"(anonymous_28)","line":388,"loc":{"start":{"line":388,"column":27},"end":{"line":388,"column":44}}},"29":{"name":"(anonymous_29)","line":456,"loc":{"start":{"line":456,"column":37},"end":{"line":456,"column":86}}},"30":{"name":"(anonymous_30)","line":532,"loc":{"start":{"line":532,"column":23},"end":{"line":532,"column":35}}},"31":{"name":"(anonymous_31)","line":541,"loc":{"start":{"line":541,"column":31},"end":{"line":541,"column":43}}},"32":{"name":"(anonymous_32)","line":551,"loc":{"start":{"line":551,"column":31},"end":{"line":551,"column":43}}},"33":{"name":"(anonymous_33)","line":572,"loc":{"start":{"line":572,"column":35},"end":{"line":572,"column":47}}},"34":{"name":"(anonymous_34)","line":586,"loc":{"start":{"line":586,"column":37},"end":{"line":586,"column":49}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":47}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":51}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":27}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":33}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":43}},"9":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}},"10":{"start":{"line":14,"column":0},"end":{"line":14,"column":52}},"11":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}},"12":{"start":{"line":16,"column":0},"end":{"line":16,"column":49}},"13":{"start":{"line":17,"column":0},"end":{"line":17,"column":34}},"14":{"start":{"line":18,"column":0},"end":{"line":18,"column":37}},"15":{"start":{"line":20,"column":0},"end":{"line":65,"column":1}},"16":{"start":{"line":21,"column":4},"end":{"line":21,"column":21}},"17":{"start":{"line":22,"column":4},"end":{"line":22,"column":28}},"18":{"start":{"line":23,"column":4},"end":{"line":23,"column":24}},"19":{"start":{"line":24,"column":4},"end":{"line":24,"column":28}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":39}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":27}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":37}},"23":{"start":{"line":28,"column":4},"end":{"line":28,"column":28}},"24":{"start":{"line":31,"column":4},"end":{"line":31,"column":45}},"25":{"start":{"line":34,"column":4},"end":{"line":34,"column":41}},"26":{"start":{"line":35,"column":4},"end":{"line":35,"column":56}},"27":{"start":{"line":36,"column":4},"end":{"line":36,"column":60}},"28":{"start":{"line":37,"column":4},"end":{"line":37,"column":52}},"29":{"start":{"line":38,"column":4},"end":{"line":38,"column":45}},"30":{"start":{"line":39,"column":4},"end":{"line":39,"column":39}},"31":{"start":{"line":40,"column":4},"end":{"line":40,"column":48}},"32":{"start":{"line":41,"column":4},"end":{"line":41,"column":41}},"33":{"start":{"line":42,"column":4},"end":{"line":42,"column":48}},"34":{"start":{"line":43,"column":4},"end":{"line":43,"column":45}},"35":{"start":{"line":44,"column":4},"end":{"line":44,"column":43}},"36":{"start":{"line":45,"column":4},"end":{"line":45,"column":41}},"37":{"start":{"line":46,"column":4},"end":{"line":46,"column":41}},"38":{"start":{"line":47,"column":4},"end":{"line":47,"column":40}},"39":{"start":{"line":48,"column":4},"end":{"line":48,"column":45}},"40":{"start":{"line":49,"column":4},"end":{"line":49,"column":51}},"41":{"start":{"line":50,"column":4},"end":{"line":50,"column":51}},"42":{"start":{"line":51,"column":4},"end":{"line":51,"column":52}},"43":{"start":{"line":52,"column":4},"end":{"line":52,"column":51}},"44":{"start":{"line":53,"column":4},"end":{"line":53,"column":56}},"45":{"start":{"line":54,"column":4},"end":{"line":54,"column":57}},"46":{"start":{"line":55,"column":4},"end":{"line":55,"column":58}},"47":{"start":{"line":56,"column":4},"end":{"line":56,"column":42}},"48":{"start":{"line":57,"column":4},"end":{"line":57,"column":47}},"49":{"start":{"line":58,"column":4},"end":{"line":58,"column":57}},"50":{"start":{"line":59,"column":4},"end":{"line":59,"column":45}},"51":{"start":{"line":60,"column":4},"end":{"line":60,"column":51}},"52":{"start":{"line":61,"column":4},"end":{"line":61,"column":53}},"53":{"start":{"line":63,"column":4},"end":{"line":63,"column":36}},"54":{"start":{"line":64,"column":4},"end":{"line":64,"column":45}},"55":{"start":{"line":67,"column":0},"end":{"line":85,"column":3}},"56":{"start":{"line":76,"column":12},"end":{"line":78,"column":13}},"57":{"start":{"line":77,"column":16},"end":{"line":77,"column":40}},"58":{"start":{"line":79,"column":12},"end":{"line":79,"column":95}},"59":{"start":{"line":82,"column":12},"end":{"line":82,"column":37}},"60":{"start":{"line":87,"column":0},"end":{"line":89,"column":2}},"61":{"start":{"line":88,"column":4},"end":{"line":88,"column":114}},"62":{"start":{"line":92,"column":0},"end":{"line":94,"column":2}},"63":{"start":{"line":93,"column":4},"end":{"line":93,"column":58}},"64":{"start":{"line":96,"column":0},"end":{"line":98,"column":2}},"65":{"start":{"line":97,"column":4},"end":{"line":97,"column":58}},"66":{"start":{"line":100,"column":0},"end":{"line":102,"column":2}},"67":{"start":{"line":101,"column":4},"end":{"line":101,"column":53}},"68":{"start":{"line":104,"column":0},"end":{"line":146,"column":2}},"69":{"start":{"line":105,"column":4},"end":{"line":105,"column":134}},"70":{"start":{"line":106,"column":4},"end":{"line":106,"column":35}},"71":{"start":{"line":107,"column":4},"end":{"line":107,"column":20}},"72":{"start":{"line":108,"column":4},"end":{"line":145,"column":5}},"73":{"start":{"line":109,"column":8},"end":{"line":109,"column":26}},"74":{"start":{"line":112,"column":8},"end":{"line":112,"column":47}},"75":{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},"76":{"start":{"line":115,"column":12},"end":{"line":115,"column":23}},"77":{"start":{"line":118,"column":8},"end":{"line":144,"column":9}},"78":{"start":{"line":119,"column":12},"end":{"line":143,"column":13}},"79":{"start":{"line":120,"column":16},"end":{"line":120,"column":49}},"80":{"start":{"line":121,"column":16},"end":{"line":142,"column":17}},"81":{"start":{"line":122,"column":20},"end":{"line":141,"column":21}},"82":{"start":{"line":123,"column":24},"end":{"line":132,"column":25}},"83":{"start":{"line":124,"column":28},"end":{"line":131,"column":29}},"84":{"start":{"line":125,"column":32},"end":{"line":130,"column":33}},"85":{"start":{"line":126,"column":36},"end":{"line":126,"column":94}},"86":{"start":{"line":129,"column":36},"end":{"line":129,"column":46}},"87":{"start":{"line":134,"column":25},"end":{"line":141,"column":21}},"88":{"start":{"line":135,"column":24},"end":{"line":140,"column":25}},"89":{"start":{"line":136,"column":28},"end":{"line":136,"column":93}},"90":{"start":{"line":139,"column":28},"end":{"line":139,"column":45}},"91":{"start":{"line":150,"column":0},"end":{"line":152,"column":2}},"92":{"start":{"line":151,"column":4},"end":{"line":151,"column":46}},"93":{"start":{"line":154,"column":0},"end":{"line":159,"column":2}},"94":{"start":{"line":155,"column":4},"end":{"line":158,"column":5}},"95":{"start":{"line":156,"column":8},"end":{"line":156,"column":46}},"96":{"start":{"line":157,"column":8},"end":{"line":157,"column":42}},"97":{"start":{"line":161,"column":0},"end":{"line":161,"column":48}},"98":{"start":{"line":163,"column":0},"end":{"line":203,"column":2}},"99":{"start":{"line":164,"column":4},"end":{"line":190,"column":5}},"100":{"start":{"line":165,"column":8},"end":{"line":189,"column":9}},"101":{"start":{"line":166,"column":12},"end":{"line":166,"column":33}},"102":{"start":{"line":168,"column":13},"end":{"line":189,"column":9}},"103":{"start":{"line":169,"column":12},"end":{"line":169,"column":35}},"104":{"start":{"line":170,"column":12},"end":{"line":172,"column":13}},"105":{"start":{"line":171,"column":16},"end":{"line":171,"column":33}},"106":{"start":{"line":173,"column":12},"end":{"line":173,"column":26}},"107":{"start":{"line":175,"column":13},"end":{"line":189,"column":9}},"108":{"start":{"line":176,"column":12},"end":{"line":185,"column":13}},"109":{"start":{"line":177,"column":16},"end":{"line":177,"column":34}},"110":{"start":{"line":178,"column":16},"end":{"line":180,"column":17}},"111":{"start":{"line":179,"column":20},"end":{"line":179,"column":58}},"112":{"start":{"line":181,"column":16},"end":{"line":181,"column":32}},"113":{"start":{"line":184,"column":16},"end":{"line":184,"column":29}},"114":{"start":{"line":188,"column":12},"end":{"line":188,"column":25}},"115":{"start":{"line":192,"column":4},"end":{"line":192,"column":39}},"116":{"start":{"line":193,"column":4},"end":{"line":193,"column":36}},"117":{"start":{"line":194,"column":4},"end":{"line":201,"column":5}},"118":{"start":{"line":195,"column":8},"end":{"line":200,"column":9}},"119":{"start":{"line":196,"column":12},"end":{"line":196,"column":34}},"120":{"start":{"line":197,"column":12},"end":{"line":199,"column":13}},"121":{"start":{"line":198,"column":16},"end":{"line":198,"column":54}},"122":{"start":{"line":202,"column":4},"end":{"line":202,"column":19}},"123":{"start":{"line":206,"column":0},"end":{"line":220,"column":2}},"124":{"start":{"line":207,"column":4},"end":{"line":209,"column":5}},"125":{"start":{"line":208,"column":8},"end":{"line":208,"column":94}},"126":{"start":{"line":211,"column":4},"end":{"line":211,"column":13}},"127":{"start":{"line":212,"column":4},"end":{"line":217,"column":5}},"128":{"start":{"line":213,"column":8},"end":{"line":213,"column":18}},"129":{"start":{"line":214,"column":8},"end":{"line":216,"column":9}},"130":{"start":{"line":215,"column":12},"end":{"line":215,"column":36}},"131":{"start":{"line":219,"column":4},"end":{"line":219,"column":41}},"132":{"start":{"line":222,"column":0},"end":{"line":251,"column":2}},"133":{"start":{"line":223,"column":4},"end":{"line":223,"column":20}},"134":{"start":{"line":225,"column":4},"end":{"line":227,"column":5}},"135":{"start":{"line":226,"column":8},"end":{"line":226,"column":31}},"136":{"start":{"line":229,"column":4},"end":{"line":231,"column":5}},"137":{"start":{"line":230,"column":8},"end":{"line":230,"column":22}},"138":{"start":{"line":233,"column":4},"end":{"line":233,"column":58}},"139":{"start":{"line":234,"column":4},"end":{"line":234,"column":45}},"140":{"start":{"line":235,"column":4},"end":{"line":237,"column":5}},"141":{"start":{"line":236,"column":8},"end":{"line":236,"column":56}},"142":{"start":{"line":240,"column":4},"end":{"line":250,"column":11}},"143":{"start":{"line":242,"column":12},"end":{"line":242,"column":78}},"144":{"start":{"line":243,"column":12},"end":{"line":249,"column":13}},"145":{"start":{"line":244,"column":16},"end":{"line":244,"column":62}},"146":{"start":{"line":245,"column":16},"end":{"line":245,"column":72}},"147":{"start":{"line":248,"column":16},"end":{"line":248,"column":44}},"148":{"start":{"line":253,"column":0},"end":{"line":253,"column":43}},"149":{"start":{"line":255,"column":0},"end":{"line":255,"column":45}},"150":{"start":{"line":257,"column":0},"end":{"line":259,"column":2}},"151":{"start":{"line":258,"column":4},"end":{"line":258,"column":53}},"152":{"start":{"line":261,"column":0},"end":{"line":263,"column":2}},"153":{"start":{"line":262,"column":4},"end":{"line":262,"column":60}},"154":{"start":{"line":265,"column":0},"end":{"line":267,"column":2}},"155":{"start":{"line":266,"column":4},"end":{"line":266,"column":50}},"156":{"start":{"line":269,"column":0},"end":{"line":271,"column":2}},"157":{"start":{"line":270,"column":4},"end":{"line":270,"column":48}},"158":{"start":{"line":273,"column":0},"end":{"line":275,"column":2}},"159":{"start":{"line":274,"column":4},"end":{"line":274,"column":51}},"160":{"start":{"line":277,"column":0},"end":{"line":331,"column":2}},"161":{"start":{"line":278,"column":4},"end":{"line":285,"column":5}},"162":{"start":{"line":279,"column":8},"end":{"line":279,"column":70}},"163":{"start":{"line":282,"column":8},"end":{"line":282,"column":112}},"164":{"start":{"line":283,"column":8},"end":{"line":283,"column":38}},"165":{"start":{"line":284,"column":8},"end":{"line":284,"column":19}},"166":{"start":{"line":287,"column":4},"end":{"line":287,"column":43}},"167":{"start":{"line":289,"column":4},"end":{"line":292,"column":5}},"168":{"start":{"line":291,"column":8},"end":{"line":291,"column":15}},"169":{"start":{"line":294,"column":4},"end":{"line":294,"column":29}},"170":{"start":{"line":296,"column":4},"end":{"line":296,"column":49}},"171":{"start":{"line":297,"column":4},"end":{"line":297,"column":51}},"172":{"start":{"line":298,"column":4},"end":{"line":298,"column":39}},"173":{"start":{"line":299,"column":4},"end":{"line":299,"column":53}},"174":{"start":{"line":300,"column":4},"end":{"line":300,"column":43}},"175":{"start":{"line":302,"column":4},"end":{"line":329,"column":5}},"176":{"start":{"line":303,"column":8},"end":{"line":319,"column":9}},"177":{"start":{"line":304,"column":12},"end":{"line":304,"column":92}},"178":{"start":{"line":305,"column":12},"end":{"line":315,"column":13}},"179":{"start":{"line":306,"column":16},"end":{"line":313,"column":23}},"180":{"start":{"line":308,"column":24},"end":{"line":308,"column":60}},"181":{"start":{"line":311,"column":24},"end":{"line":311,"column":60}},"182":{"start":{"line":312,"column":24},"end":{"line":312,"column":44}},"183":{"start":{"line":314,"column":16},"end":{"line":314,"column":23}},"184":{"start":{"line":318,"column":12},"end":{"line":318,"column":32}},"185":{"start":{"line":325,"column":8},"end":{"line":328,"column":9}},"186":{"start":{"line":327,"column":12},"end":{"line":327,"column":19}},"187":{"start":{"line":330,"column":4},"end":{"line":330,"column":40}},"188":{"start":{"line":333,"column":0},"end":{"line":335,"column":2}},"189":{"start":{"line":334,"column":4},"end":{"line":334,"column":36}},"190":{"start":{"line":337,"column":0},"end":{"line":454,"column":2}},"191":{"start":{"line":338,"column":4},"end":{"line":338,"column":20}},"192":{"start":{"line":339,"column":4},"end":{"line":339,"column":34}},"193":{"start":{"line":340,"column":4},"end":{"line":340,"column":51}},"194":{"start":{"line":341,"column":4},"end":{"line":341,"column":40}},"195":{"start":{"line":343,"column":4},"end":{"line":345,"column":5}},"196":{"start":{"line":344,"column":8},"end":{"line":344,"column":44}},"197":{"start":{"line":347,"column":4},"end":{"line":351,"column":6}},"198":{"start":{"line":348,"column":8},"end":{"line":350,"column":11}},"199":{"start":{"line":349,"column":12},"end":{"line":349,"column":74}},"200":{"start":{"line":353,"column":4},"end":{"line":356,"column":5}},"201":{"start":{"line":354,"column":8},"end":{"line":354,"column":98}},"202":{"start":{"line":355,"column":8},"end":{"line":355,"column":15}},"203":{"start":{"line":357,"column":4},"end":{"line":357,"column":32}},"204":{"start":{"line":358,"column":4},"end":{"line":361,"column":5}},"205":{"start":{"line":359,"column":8},"end":{"line":359,"column":79}},"206":{"start":{"line":360,"column":8},"end":{"line":360,"column":15}},"207":{"start":{"line":363,"column":4},"end":{"line":367,"column":5}},"208":{"start":{"line":364,"column":8},"end":{"line":364,"column":89}},"209":{"start":{"line":365,"column":8},"end":{"line":365,"column":110}},"210":{"start":{"line":366,"column":8},"end":{"line":366,"column":15}},"211":{"start":{"line":369,"column":4},"end":{"line":369,"column":95}},"212":{"start":{"line":371,"column":4},"end":{"line":382,"column":6}},"213":{"start":{"line":384,"column":4},"end":{"line":384,"column":27}},"214":{"start":{"line":385,"column":4},"end":{"line":453,"column":5}},"215":{"start":{"line":386,"column":8},"end":{"line":386,"column":31}},"216":{"start":{"line":387,"column":8},"end":{"line":387,"column":22}},"217":{"start":{"line":388,"column":8},"end":{"line":416,"column":10}},"218":{"start":{"line":389,"column":12},"end":{"line":389,"column":59}},"219":{"start":{"line":390,"column":12},"end":{"line":390,"column":43}},"220":{"start":{"line":391,"column":12},"end":{"line":397,"column":13}},"221":{"start":{"line":392,"column":16},"end":{"line":392,"column":33}},"222":{"start":{"line":394,"column":17},"end":{"line":397,"column":13}},"223":{"start":{"line":395,"column":16},"end":{"line":395,"column":42}},"224":{"start":{"line":396,"column":16},"end":{"line":396,"column":81}},"225":{"start":{"line":398,"column":12},"end":{"line":415,"column":13}},"226":{"start":{"line":399,"column":16},"end":{"line":399,"column":53}},"227":{"start":{"line":400,"column":16},"end":{"line":400,"column":91}},"228":{"start":{"line":401,"column":16},"end":{"line":403,"column":17}},"229":{"start":{"line":402,"column":20},"end":{"line":402,"column":129}},"230":{"start":{"line":404,"column":16},"end":{"line":404,"column":77}},"231":{"start":{"line":405,"column":16},"end":{"line":405,"column":153}},"232":{"start":{"line":406,"column":16},"end":{"line":406,"column":56}},"233":{"start":{"line":407,"column":16},"end":{"line":407,"column":34}},"234":{"start":{"line":408,"column":16},"end":{"line":408,"column":53}},"235":{"start":{"line":409,"column":16},"end":{"line":409,"column":41}},"236":{"start":{"line":410,"column":16},"end":{"line":410,"column":30}},"237":{"start":{"line":413,"column":16},"end":{"line":413,"column":63}},"238":{"start":{"line":414,"column":16},"end":{"line":414,"column":42}},"239":{"start":{"line":417,"column":8},"end":{"line":426,"column":9}},"240":{"start":{"line":418,"column":12},"end":{"line":418,"column":67}},"241":{"start":{"line":419,"column":12},"end":{"line":422,"column":13}},"242":{"start":{"line":420,"column":16},"end":{"line":420,"column":36}},"243":{"start":{"line":421,"column":16},"end":{"line":421,"column":24}},"244":{"start":{"line":425,"column":12},"end":{"line":425,"column":30}},"245":{"start":{"line":427,"column":8},"end":{"line":438,"column":9}},"246":{"start":{"line":428,"column":12},"end":{"line":428,"column":106}},"247":{"start":{"line":429,"column":12},"end":{"line":429,"column":71}},"248":{"start":{"line":430,"column":12},"end":{"line":430,"column":64}},"249":{"start":{"line":433,"column":12},"end":{"line":433,"column":111}},"250":{"start":{"line":434,"column":12},"end":{"line":434,"column":87}},"251":{"start":{"line":435,"column":12},"end":{"line":435,"column":87}},"252":{"start":{"line":436,"column":12},"end":{"line":436,"column":42}},"253":{"start":{"line":437,"column":12},"end":{"line":437,"column":44}},"254":{"start":{"line":439,"column":8},"end":{"line":439,"column":52}},"255":{"start":{"line":442,"column":8},"end":{"line":442,"column":65}},"256":{"start":{"line":443,"column":8},"end":{"line":446,"column":9}},"257":{"start":{"line":444,"column":12},"end":{"line":444,"column":74}},"258":{"start":{"line":445,"column":12},"end":{"line":445,"column":53}},"259":{"start":{"line":447,"column":8},"end":{"line":447,"column":42}},"260":{"start":{"line":448,"column":8},"end":{"line":448,"column":67}},"261":{"start":{"line":449,"column":8},"end":{"line":449,"column":51}},"262":{"start":{"line":452,"column":8},"end":{"line":452,"column":103}},"263":{"start":{"line":456,"column":0},"end":{"line":568,"column":2}},"264":{"start":{"line":457,"column":4},"end":{"line":457,"column":40}},"265":{"start":{"line":458,"column":4},"end":{"line":458,"column":51}},"266":{"start":{"line":459,"column":4},"end":{"line":459,"column":55}},"267":{"start":{"line":460,"column":4},"end":{"line":460,"column":144}},"268":{"start":{"line":462,"column":4},"end":{"line":462,"column":24}},"269":{"start":{"line":463,"column":4},"end":{"line":463,"column":39}},"270":{"start":{"line":464,"column":4},"end":{"line":464,"column":21}},"271":{"start":{"line":465,"column":4},"end":{"line":567,"column":5}},"272":{"start":{"line":466,"column":8},"end":{"line":468,"column":9}},"273":{"start":{"line":467,"column":12},"end":{"line":467,"column":107}},"274":{"start":{"line":469,"column":8},"end":{"line":469,"column":47}},"275":{"start":{"line":470,"column":8},"end":{"line":472,"column":9}},"276":{"start":{"line":471,"column":12},"end":{"line":471,"column":128}},"277":{"start":{"line":474,"column":8},"end":{"line":474,"column":72}},"278":{"start":{"line":476,"column":8},"end":{"line":501,"column":9}},"279":{"start":{"line":478,"column":16},"end":{"line":478,"column":84}},"280":{"start":{"line":479,"column":16},"end":{"line":479,"column":46}},"281":{"start":{"line":480,"column":16},"end":{"line":480,"column":61}},"282":{"start":{"line":481,"column":16},"end":{"line":481,"column":46}},"283":{"start":{"line":482,"column":16},"end":{"line":482,"column":39}},"284":{"start":{"line":483,"column":16},"end":{"line":483,"column":22}},"285":{"start":{"line":485,"column":16},"end":{"line":485,"column":67}},"286":{"start":{"line":486,"column":16},"end":{"line":486,"column":28}},"287":{"start":{"line":487,"column":16},"end":{"line":487,"column":46}},"288":{"start":{"line":488,"column":16},"end":{"line":488,"column":22}},"289":{"start":{"line":490,"column":16},"end":{"line":490,"column":66}},"290":{"start":{"line":491,"column":16},"end":{"line":491,"column":36}},"291":{"start":{"line":492,"column":16},"end":{"line":492,"column":61}},"292":{"start":{"line":493,"column":16},"end":{"line":493,"column":46}},"293":{"start":{"line":494,"column":16},"end":{"line":494,"column":22}},"294":{"start":{"line":496,"column":16},"end":{"line":496,"column":64}},"295":{"start":{"line":497,"column":16},"end":{"line":497,"column":34}},"296":{"start":{"line":498,"column":16},"end":{"line":498,"column":22}},"297":{"start":{"line":500,"column":16},"end":{"line":500,"column":114}},"298":{"start":{"line":503,"column":8},"end":{"line":509,"column":29}},"299":{"start":{"line":511,"column":8},"end":{"line":511,"column":102}},"300":{"start":{"line":512,"column":8},"end":{"line":554,"column":9}},"301":{"start":{"line":513,"column":12},"end":{"line":518,"column":13}},"302":{"start":{"line":514,"column":16},"end":{"line":514,"column":123}},"303":{"start":{"line":517,"column":16},"end":{"line":517,"column":91}},"304":{"start":{"line":519,"column":12},"end":{"line":519,"column":97}},"305":{"start":{"line":520,"column":12},"end":{"line":520,"column":25}},"306":{"start":{"line":521,"column":12},"end":{"line":528,"column":13}},"307":{"start":{"line":522,"column":16},"end":{"line":522,"column":29}},"308":{"start":{"line":523,"column":16},"end":{"line":523,"column":72}},"309":{"start":{"line":524,"column":16},"end":{"line":524,"column":67}},"310":{"start":{"line":525,"column":16},"end":{"line":525,"column":84}},"311":{"start":{"line":526,"column":16},"end":{"line":526,"column":84}},"312":{"start":{"line":527,"column":16},"end":{"line":527,"column":52}},"313":{"start":{"line":529,"column":12},"end":{"line":529,"column":51}},"314":{"start":{"line":530,"column":12},"end":{"line":530,"column":63}},"315":{"start":{"line":531,"column":12},"end":{"line":531,"column":96}},"316":{"start":{"line":532,"column":12},"end":{"line":532,"column":126}},"317":{"start":{"line":532,"column":37},"end":{"line":532,"column":123}},"318":{"start":{"line":535,"column":12},"end":{"line":535,"column":26}},"319":{"start":{"line":536,"column":12},"end":{"line":536,"column":69}},"320":{"start":{"line":537,"column":12},"end":{"line":553,"column":13}},"321":{"start":{"line":538,"column":16},"end":{"line":538,"column":133}},"322":{"start":{"line":539,"column":16},"end":{"line":552,"column":17}},"323":{"start":{"line":540,"column":20},"end":{"line":540,"column":96}},"324":{"start":{"line":541,"column":20},"end":{"line":541,"column":142}},"325":{"start":{"line":541,"column":45},"end":{"line":541,"column":139}},"326":{"start":{"line":543,"column":21},"end":{"line":552,"column":17}},"327":{"start":{"line":544,"column":20},"end":{"line":544,"column":96}},"328":{"start":{"line":545,"column":20},"end":{"line":545,"column":38}},"329":{"start":{"line":546,"column":20},"end":{"line":546,"column":112}},"330":{"start":{"line":549,"column":20},"end":{"line":549,"column":75}},"331":{"start":{"line":550,"column":20},"end":{"line":550,"column":129}},"332":{"start":{"line":551,"column":20},"end":{"line":551,"column":152}},"333":{"start":{"line":551,"column":45},"end":{"line":551,"column":149}},"334":{"start":{"line":557,"column":8},"end":{"line":557,"column":28}},"335":{"start":{"line":558,"column":8},"end":{"line":558,"column":41}},"336":{"start":{"line":561,"column":8},"end":{"line":566,"column":9}},"337":{"start":{"line":562,"column":12},"end":{"line":562,"column":69}},"338":{"start":{"line":563,"column":12},"end":{"line":563,"column":45}},"339":{"start":{"line":565,"column":12},"end":{"line":565,"column":23}},"340":{"start":{"line":572,"column":0},"end":{"line":584,"column":2}},"341":{"start":{"line":573,"column":4},"end":{"line":573,"column":20}},"342":{"start":{"line":574,"column":4},"end":{"line":582,"column":5}},"343":{"start":{"line":575,"column":8},"end":{"line":575,"column":29}},"344":{"start":{"line":576,"column":8},"end":{"line":581,"column":9}},"345":{"start":{"line":577,"column":12},"end":{"line":580,"column":13}},"346":{"start":{"line":579,"column":16},"end":{"line":579,"column":42}},"347":{"start":{"line":583,"column":4},"end":{"line":583,"column":27}},"348":{"start":{"line":586,"column":0},"end":{"line":615,"column":2}},"349":{"start":{"line":587,"column":4},"end":{"line":589,"column":5}},"350":{"start":{"line":588,"column":8},"end":{"line":588,"column":108}},"351":{"start":{"line":591,"column":4},"end":{"line":612,"column":5}},"352":{"start":{"line":592,"column":8},"end":{"line":592,"column":25}},"353":{"start":{"line":593,"column":8},"end":{"line":593,"column":29}},"354":{"start":{"line":594,"column":8},"end":{"line":602,"column":9}},"355":{"start":{"line":595,"column":12},"end":{"line":600,"column":13}},"356":{"start":{"line":596,"column":16},"end":{"line":596,"column":30}},"357":{"start":{"line":599,"column":16},"end":{"line":599,"column":29}},"358":{"start":{"line":601,"column":12},"end":{"line":601,"column":49}},"359":{"start":{"line":603,"column":8},"end":{"line":603,"column":19}},"360":{"start":{"line":605,"column":8},"end":{"line":611,"column":9}},"361":{"start":{"line":606,"column":12},"end":{"line":606,"column":65}},"362":{"start":{"line":609,"column":12},"end":{"line":609,"column":57}},"363":{"start":{"line":610,"column":12},"end":{"line":610,"column":20}},"364":{"start":{"line":614,"column":4},"end":{"line":614,"column":46}},"365":{"start":{"line":618,"column":0},"end":{"line":618,"column":39}},"366":{"start":{"line":620,"column":0},"end":{"line":620,"column":26}}},"branchMap":{"1":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":76,"column":12}},{"start":{"line":76,"column":12},"end":{"line":76,"column":12}}]},"2":{"line":88,"type":"cond-expr","locations":[{"start":{"line":88,"column":32},"end":{"line":88,"column":54}},{"start":{"line":88,"column":58},"end":{"line":88,"column":60}}]},"3":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":14},"end":{"line":106,"column":21}},{"start":{"line":106,"column":25},"end":{"line":106,"column":34}}]},"4":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":4},"end":{"line":108,"column":4}},{"start":{"line":108,"column":4},"end":{"line":108,"column":4}}]},"5":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":114,"column":8}},{"start":{"line":114,"column":8},"end":{"line":114,"column":8}}]},"6":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":119,"column":12}},{"start":{"line":119,"column":12},"end":{"line":119,"column":12}}]},"7":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":16},"end":{"line":121,"column":16}},{"start":{"line":121,"column":16},"end":{"line":121,"column":16}}]},"8":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":20},"end":{"line":122,"column":20}},{"start":{"line":122,"column":20},"end":{"line":122,"column":20}}]},"9":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":28},"end":{"line":124,"column":28}},{"start":{"line":124,"column":28},"end":{"line":124,"column":28}}]},"10":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":32},"end":{"line":125,"column":32}},{"start":{"line":125,"column":32},"end":{"line":125,"column":32}}]},"11":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":25},"end":{"line":134,"column":25}},{"start":{"line":134,"column":25},"end":{"line":134,"column":25}}]},"12":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":24},"end":{"line":135,"column":24}},{"start":{"line":135,"column":24},"end":{"line":135,"column":24}}]},"13":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":155,"column":4}},{"start":{"line":155,"column":4},"end":{"line":155,"column":4}}]},"14":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":165,"column":8}},{"start":{"line":165,"column":8},"end":{"line":165,"column":8}}]},"15":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":13},"end":{"line":168,"column":13}},{"start":{"line":168,"column":13},"end":{"line":168,"column":13}}]},"16":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":13},"end":{"line":175,"column":13}},{"start":{"line":175,"column":13},"end":{"line":175,"column":13}}]},"17":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":12},"end":{"line":176,"column":12}},{"start":{"line":176,"column":12},"end":{"line":176,"column":12}}]},"18":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":8},"end":{"line":195,"column":8}},{"start":{"line":195,"column":8},"end":{"line":195,"column":8}}]},"19":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":12},"end":{"line":197,"column":12}},{"start":{"line":197,"column":12},"end":{"line":197,"column":12}}]},"20":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":4},"end":{"line":207,"column":4}},{"start":{"line":207,"column":4},"end":{"line":207,"column":4}}]},"21":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":4},"end":{"line":212,"column":4}},{"start":{"line":212,"column":4},"end":{"line":212,"column":4}}]},"22":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":4},"end":{"line":225,"column":4}},{"start":{"line":225,"column":4},"end":{"line":225,"column":4}}]},"23":{"line":226,"type":"binary-expr","locations":[{"start":{"line":226,"column":15},"end":{"line":226,"column":24}},{"start":{"line":226,"column":28},"end":{"line":226,"column":30}}]},"24":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":4},"end":{"line":229,"column":4}},{"start":{"line":229,"column":4},"end":{"line":229,"column":4}}]},"25":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":4},"end":{"line":235,"column":4}},{"start":{"line":235,"column":4},"end":{"line":235,"column":4}}]},"26":{"line":289,"type":"if","locations":[{"start":{"line":289,"column":4},"end":{"line":289,"column":4}},{"start":{"line":289,"column":4},"end":{"line":289,"column":4}}]},"27":{"line":289,"type":"binary-expr","locations":[{"start":{"line":289,"column":8},"end":{"line":289,"column":50}},{"start":{"line":289,"column":54},"end":{"line":289,"column":94}}]},"28":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":4},"end":{"line":302,"column":4}},{"start":{"line":302,"column":4},"end":{"line":302,"column":4}}]},"29":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":12},"end":{"line":305,"column":12}},{"start":{"line":305,"column":12},"end":{"line":305,"column":12}}]},"30":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":8},"end":{"line":325,"column":8}},{"start":{"line":325,"column":8},"end":{"line":325,"column":8}}]},"31":{"line":325,"type":"binary-expr","locations":[{"start":{"line":325,"column":12},"end":{"line":325,"column":18}},{"start":{"line":325,"column":22},"end":{"line":325,"column":62}}]},"32":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":4},"end":{"line":343,"column":4}},{"start":{"line":343,"column":4},"end":{"line":343,"column":4}}]},"33":{"line":353,"type":"if","locations":[{"start":{"line":353,"column":4},"end":{"line":353,"column":4}},{"start":{"line":353,"column":4},"end":{"line":353,"column":4}}]},"34":{"line":358,"type":"if","locations":[{"start":{"line":358,"column":4},"end":{"line":358,"column":4}},{"start":{"line":358,"column":4},"end":{"line":358,"column":4}}]},"35":{"line":363,"type":"if","locations":[{"start":{"line":363,"column":4},"end":{"line":363,"column":4}},{"start":{"line":363,"column":4},"end":{"line":363,"column":4}}]},"36":{"line":391,"type":"if","locations":[{"start":{"line":391,"column":12},"end":{"line":391,"column":12}},{"start":{"line":391,"column":12},"end":{"line":391,"column":12}}]},"37":{"line":394,"type":"if","locations":[{"start":{"line":394,"column":17},"end":{"line":394,"column":17}},{"start":{"line":394,"column":17},"end":{"line":394,"column":17}}]},"38":{"line":394,"type":"binary-expr","locations":[{"start":{"line":394,"column":21},"end":{"line":394,"column":38}},{"start":{"line":394,"column":42},"end":{"line":394,"column":76}}]},"39":{"line":396,"type":"cond-expr","locations":[{"start":{"line":396,"column":58},"end":{"line":396,"column":73}},{"start":{"line":396,"column":76},"end":{"line":396,"column":80}}]},"40":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":12},"end":{"line":398,"column":12}},{"start":{"line":398,"column":12},"end":{"line":398,"column":12}}]},"41":{"line":401,"type":"if","locations":[{"start":{"line":401,"column":16},"end":{"line":401,"column":16}},{"start":{"line":401,"column":16},"end":{"line":401,"column":16}}]},"42":{"line":417,"type":"if","locations":[{"start":{"line":417,"column":8},"end":{"line":417,"column":8}},{"start":{"line":417,"column":8},"end":{"line":417,"column":8}}]},"43":{"line":427,"type":"if","locations":[{"start":{"line":427,"column":8},"end":{"line":427,"column":8}},{"start":{"line":427,"column":8},"end":{"line":427,"column":8}}]},"44":{"line":429,"type":"cond-expr","locations":[{"start":{"line":429,"column":38},"end":{"line":429,"column":51}},{"start":{"line":429,"column":54},"end":{"line":429,"column":70}}]},"45":{"line":443,"type":"if","locations":[{"start":{"line":443,"column":8},"end":{"line":443,"column":8}},{"start":{"line":443,"column":8},"end":{"line":443,"column":8}}]},"46":{"line":466,"type":"if","locations":[{"start":{"line":466,"column":8},"end":{"line":466,"column":8}},{"start":{"line":466,"column":8},"end":{"line":466,"column":8}}]},"47":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":8},"end":{"line":470,"column":8}},{"start":{"line":470,"column":8},"end":{"line":470,"column":8}}]},"48":{"line":476,"type":"switch","locations":[{"start":{"line":477,"column":12},"end":{"line":483,"column":22}},{"start":{"line":484,"column":12},"end":{"line":488,"column":22}},{"start":{"line":489,"column":12},"end":{"line":494,"column":22}},{"start":{"line":495,"column":12},"end":{"line":498,"column":22}},{"start":{"line":499,"column":12},"end":{"line":500,"column":114}}]},"49":{"line":511,"type":"binary-expr","locations":[{"start":{"line":511,"column":34},"end":{"line":511,"column":66}},{"start":{"line":511,"column":70},"end":{"line":511,"column":101}}]},"50":{"line":512,"type":"if","locations":[{"start":{"line":512,"column":8},"end":{"line":512,"column":8}},{"start":{"line":512,"column":8},"end":{"line":512,"column":8}}]},"51":{"line":512,"type":"binary-expr","locations":[{"start":{"line":512,"column":12},"end":{"line":512,"column":31}},{"start":{"line":512,"column":35},"end":{"line":512,"column":39}}]},"52":{"line":513,"type":"if","locations":[{"start":{"line":513,"column":12},"end":{"line":513,"column":12}},{"start":{"line":513,"column":12},"end":{"line":513,"column":12}}]},"53":{"line":537,"type":"if","locations":[{"start":{"line":537,"column":12},"end":{"line":537,"column":12}},{"start":{"line":537,"column":12},"end":{"line":537,"column":12}}]},"54":{"line":539,"type":"if","locations":[{"start":{"line":539,"column":16},"end":{"line":539,"column":16}},{"start":{"line":539,"column":16},"end":{"line":539,"column":16}}]},"55":{"line":543,"type":"if","locations":[{"start":{"line":543,"column":21},"end":{"line":543,"column":21}},{"start":{"line":543,"column":21},"end":{"line":543,"column":21}}]},"56":{"line":549,"type":"cond-expr","locations":[{"start":{"line":549,"column":42},"end":{"line":549,"column":55}},{"start":{"line":549,"column":58},"end":{"line":549,"column":74}}]},"57":{"line":561,"type":"if","locations":[{"start":{"line":561,"column":8},"end":{"line":561,"column":8}},{"start":{"line":561,"column":8},"end":{"line":561,"column":8}}]},"58":{"line":574,"type":"if","locations":[{"start":{"line":574,"column":4},"end":{"line":574,"column":4}},{"start":{"line":574,"column":4},"end":{"line":574,"column":4}}]},"59":{"line":574,"type":"binary-expr","locations":[{"start":{"line":574,"column":8},"end":{"line":574,"column":24}},{"start":{"line":574,"column":28},"end":{"line":574,"column":55}}]},"60":{"line":577,"type":"if","locations":[{"start":{"line":577,"column":12},"end":{"line":577,"column":12}},{"start":{"line":577,"column":12},"end":{"line":577,"column":12}}]},"61":{"line":577,"type":"binary-expr","locations":[{"start":{"line":577,"column":16},"end":{"line":577,"column":50}},{"start":{"line":578,"column":17},"end":{"line":578,"column":55}},{"start":{"line":578,"column":59},"end":{"line":578,"column":88}},{"start":{"line":578,"column":92},"end":{"line":578,"column":119}}]},"62":{"line":587,"type":"if","locations":[{"start":{"line":587,"column":4},"end":{"line":587,"column":4}},{"start":{"line":587,"column":4},"end":{"line":587,"column":4}}]},"63":{"line":591,"type":"if","locations":[{"start":{"line":591,"column":4},"end":{"line":591,"column":4}},{"start":{"line":591,"column":4},"end":{"line":591,"column":4}}]},"64":{"line":595,"type":"if","locations":[{"start":{"line":595,"column":12},"end":{"line":595,"column":12}},{"start":{"line":595,"column":12},"end":{"line":595,"column":12}}]}},"code":["/*jshint -W054 */","","\"use strict\";","","let constants = require(\"../common/constants\");","let errors = require(\"../common/errors\");","let enums = require(\"../common/enums\");","let _ = require(\"lodash\");","let specStrings = require(\"../common/specStrings\");","let util = require(\"util\");","let is = require(\"../common/is\");","let CallContext = require(\"./callContext\");","let uuid = require('node-uuid');","let async = require(\"../common/asyncHelpers\").async;","let assert = require(\"better-assert\");","let debug = require(\"debug\")(\"wf4node:Activity\");","let common = require(\"../common\");","let SimpleProxy = common.SimpleProxy;","","function Activity() {","    this.args = null;","    this.displayName = null;","    this.id = uuid.v4();","    this._instanceId = null;","    this._structureInitialized = false;","    this._scopeKeys = null;","    this._createScopePartImpl = null;","    this[\"@require\"] = null;","","    // Properties not serialized:","    this.nonSerializedProperties = new Set();","","    // Properties are not going to copied in the scope:","    this.nonScopedProperties = new Set();","    this.nonScopedProperties.add(\"nonScopedProperties\");","    this.nonScopedProperties.add(\"nonSerializedProperties\");","    this.nonScopedProperties.add(\"arrayProperties\");","    this.nonScopedProperties.add(\"activity\");","    this.nonScopedProperties.add(\"id\");","    this.nonScopedProperties.add(\"_instanceId\");","    this.nonScopedProperties.add(\"args\");","    this.nonScopedProperties.add(\"displayName\");","    this.nonScopedProperties.add(\"complete\");","    this.nonScopedProperties.add(\"cancel\");","    this.nonScopedProperties.add(\"idle\");","    this.nonScopedProperties.add(\"fail\");","    this.nonScopedProperties.add(\"end\");","    this.nonScopedProperties.add(\"schedule\");","    this.nonScopedProperties.add(\"createBookmark\");","    this.nonScopedProperties.add(\"resumeBookmark\");","    this.nonScopedProperties.add(\"resultCollected\");","    this.nonScopedProperties.add(\"codeProperties\");","    this.nonScopedProperties.add(\"initializeStructure\");","    this.nonScopedProperties.add(\"_initializeStructure\");","    this.nonScopedProperties.add(\"_structureInitialized\");","    this.nonScopedProperties.add(\"clone\");","    this.nonScopedProperties.add(\"_scopeKeys\");","    this.nonScopedProperties.add(\"_createScopePartImpl\");","    this.nonScopedProperties.add(\"@require\");","    this.nonScopedProperties.add(\"initializeExec\");","    this.nonScopedProperties.add(\"unInitializeExec\");","","    this.codeProperties = new Set();","    this.arrayProperties = new Set([\"args\"]);","}","","Object.defineProperties(Activity.prototype, {","    collectAll: {","        value: true,","        writable: false,","        enumerable: false","    },","    instanceId: {","        enumerable: false,","        get: function() {","            if (this._instanceId) {","                return this._instanceId;","            }","            throw new errors.ActivityRuntimeError(\"Activity is not initialized in a context.\");","        },","        set: function(value) {","            this._instanceId = value;","        }","    }","});","","Activity.prototype.toString = function () {","    return (this.displayName ? (this.displayName + \" \") : \"\") + \"(\" + this.constructor.name + \":\" + this.id + \")\";","};","","/* forEach */","Activity.prototype.all = function* (execContext) {","    yield * this._children(true, null, execContext, null);","};","","Activity.prototype.children = function* (execContext) {","    yield * this._children(true, this, execContext, null);","};","","Activity.prototype.immediateChildren = function* (execContext) {","    yield * this._children(false, this, execContext);","};","","Activity.prototype._children = function* (deep, except, execContext, visited) {","    assert(execContext instanceof require(\"./activityExecutionContext\"), \"Cannot enumerate activities without an execution context.\");","    visited = visited || new Set();","    let self = this;","    if (!visited.has(self)) {","        visited.add(self);","","        // Ensure it's structure created:","        this._initializeStructure(execContext);","","        if (self !== except) {","            yield self;","        }","","        for (let fieldName in self) {","            if (self.hasOwnProperty(fieldName)) {","                let fieldValue = self[fieldName];","                if (fieldValue) {","                    if (_.isArray(fieldValue)) {","                        for (let obj of fieldValue) {","                            if (obj instanceof Activity) {","                                if (deep) {","                                    yield * obj._children(deep, except, execContext, visited);","                                }","                                else {","                                    yield obj;","                                }","                            }","                        }","                    }","                    else if (fieldValue instanceof Activity) {","                        if (deep) {","                            yield * fieldValue._children(deep, except, execContext, visited);","                        }","                        else {","                            yield fieldValue;","                        }","                    }","                }","            }","        }","    }","};","/* forEach */","","/* Structure */","Activity.prototype.isArrayProperty = function (propName) {","    return this.arrayProperties.has(propName);","};","","Activity.prototype._initializeStructure = function (execContext) {","    if (!this._structureInitialized) {","        this.initializeStructure(execContext);","        this._structureInitialized = true;","    }","};","","Activity.prototype.initializeStructure = _.noop;","","Activity.prototype.clone = function () {","    function makeClone(value, canCloneArrays) {","        if (value instanceof Activity) {","            return value.clone();","        }","        else if (value instanceof Set) {","            let newSet = new Set();","            for (let item of value.values()) {","                newSet.add(item);","            }","            return newSet;","        }","        else if (_.isArray(value)) {","            if (canCloneArrays) {","                let newArray = [];","                for (let item of value) {","                    newArray.push(makeClone(item, false));","                }","                return newArray;","            }","            else {","                return value;","            }","        }","        else {","            return value;","        }","    }","","    let Constructor = this.constructor;","    let newInst = new Constructor();","    for (let key in this) {","        if (this.hasOwnProperty(key)) {","            let value = this[key];","            if (newInst[key] !== value) {","                newInst[key] = makeClone(value, true);","            }","        }","    }","    return newInst;","};","","/* RUN */","Activity.prototype.start = function (callContext) {","    if (!(callContext instanceof CallContext)) {","        throw new Error(\"Argument 'context' is not an instance of ActivityExecutionContext.\");","    }","","    let args;","    if (arguments.length > 1) {","        args = [];","        for (let i = 1; i < arguments.length; i++) {","            args.push(arguments[i]);","        }","    }","","    this._start(callContext, null, args);","};","","Activity.prototype._start = function (callContext, variables, args) {","    let self = this;","","    if (_.isUndefined(args)) {","        args = this.args || [];","    }","","    if (!_.isArray(args)) {","        args = [args];","    }","","    let myCallContext = callContext.next(self, variables);","    let state = myCallContext.executionState;","    if (state.isRunning) {","        throw new Error(\"Activity is already running.\");","    }","","    // We should allow IO operations to execute:","    setImmediate(","        function () {","            state.reportState(Activity.states.run, null, myCallContext.scope);","            try {","                self.initializeExec.call(myCallContext.scope);","                self.run.call(myCallContext.scope, myCallContext, args);","            }","            catch (e) {","                self.fail(myCallContext, e);","            }","        });","};","","Activity.prototype.initializeExec = _.noop;","","Activity.prototype.unInitializeExec = _.noop;","","Activity.prototype.run = function (callContext, args) {","    callContext.activity.complete(callContext, args);","};","","Activity.prototype.complete = function (callContext, result) {","    this.end(callContext, Activity.states.complete, result);","};","","Activity.prototype.cancel = function (callContext) {","    this.end(callContext, Activity.states.cancel);","};","","Activity.prototype.idle = function (callContext) {","    this.end(callContext, Activity.states.idle);","};","","Activity.prototype.fail = function (callContext, e) {","    this.end(callContext, Activity.states.fail, e);","};","","Activity.prototype.end = function (callContext, reason, result) {","    try {","        this.unInitializeExec.call(callContext.scope, reason, result);","    }","    catch (e) {","        let message = `unInitializeExec failed. Reason of ending was '${reason}' and the result is '${result}.`;","        reason = Activity.states.fail;","        result = e;","    }","","    let state = callContext.executionState;","","    if (state.execState === Activity.states.cancel || state.execState === Activity.states.fail) {","        // It was cancelled or failed:","        return;","    }","","    state.execState = reason;","","    let inIdle = reason === Activity.states.idle;","    let execContext = callContext.executionContext;","    let savedScope = callContext.scope;","    savedScope.update(SimpleProxy.updateMode.oneWay);","    callContext = callContext.back(inIdle);","","    if (callContext) {","        try {","            let bmName = specStrings.activities.createValueCollectedBMName(this.instanceId);","            if (execContext.isBookmarkExists(bmName)) {","                execContext.resumeBookmarkInScope(callContext, bmName, reason, result)","                    .then(function() {","                        state.emitState(result, savedScope);","                    },","                    function(e) {","                        state.emitState(result, savedScope);","                        callContext.fail(e);","                    });","                return;","            }","        }","        catch (e) {","            callContext.fail(e);","        }","    }","    else {","        // We're on root, done.","        // If wf in idle, but there are internal bookmark resume request,","        // then instead of emitting done, we have to continue them.","        if (inIdle && execContext.processResumeBookmarkQueue()) {","            // We should not emmit idle event, because there was internal bookmark continutations, so we're done.","            return;","        }","    }","    state.emitState(result, savedScope);","};","","Activity.prototype._defaultEndCallback = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","Activity.prototype.schedule = function (callContext, obj, endCallback) {","    let self = this;","    let scope = callContext.scope;","    let execContext = callContext.executionContext;","    let selfId = callContext.instanceId;","","    if (!endCallback) {","        endCallback = \"_defaultEndCallback\";","    }","","    let invokeEndCallback = function (_reason, _result) {","        setImmediate(function () {","            scope[endCallback].call(scope, callContext, _reason, _result);","        });","    };","","    if (!_.isString(endCallback)) {","        callContext.fail(new TypeError(\"Provided argument 'endCallback' value is not a string.\"));","        return;","    }","    let cb = scope[endCallback];","    if (!_.isFunction(cb)) {","        callContext.fail(new TypeError(`'${endCallback}' is not a function.`));","        return;","    }","","    if (scope.__schedulingState) {","        debug(\"%s: Error, already existsing state: %j\", selfId, scope.__schedulingState);","        callContext.fail(new errors.ActivityStateExceptionError(\"There are already scheduled items exists.\"));","        return;","    }","","    debug(\"%s: Scheduling object(s) by using end callback '%s': %j\", selfId, endCallback, obj);","","    let state =","    {","        many: _.isArray(obj),","        indices: new Map(),","        results: [],","        total: 0,","        idleCount: 0,","        cancelCount: 0,","        completedCount: 0,","        endBookmarkName: null,","        endCallbackName: endCallback","    };","","    let bookmarkNames = [];","    try {","        let startedAny = false;","        let index = 0;","        let processValue = function (value) {","            debug(\"%s: Checking value: %j\", selfId, value);","            let activity, variables = null;","            if (value instanceof Activity) {","                activity = value;","            }","            else if (_.isObject(value) && value.activity instanceof Activity) {","                activity = value.activity;","                variables = _.isObject(value.variables) ? value.variables : null;","            }","            if (activity) {","                let instanceId = activity.instanceId;","                debug(\"%s: Value is an activity with instance id: %s\", selfId, instanceId);","                if (state.indices.has(instanceId)) {","                    throw new errors.ActivityStateExceptionError(`Activity instance '${instanceId} has been scheduled already.`);","                }","                debug(\"%s: Creating end bookmark, and starting it.\", selfId);","                bookmarkNames.push(execContext.createBookmark(selfId, specStrings.activities.createValueCollectedBMName(instanceId), \"resultCollected\"));","                activity._start(callContext, variables);","                startedAny = true;","                state.indices.set(instanceId, index);","                state.results.push(null);","                state.total++;","            }","            else {","                debug(\"%s: Value is not an activity.\", selfId);","                state.results.push(value);","            }","        };","        if (state.many) {","            debug(\"%s: There are many values, iterating.\", selfId);","            for (let value of obj) {","                processValue(value);","                index++;","            }","        }","        else {","            processValue(obj);","        }","        if (!startedAny) {","            debug(\"%s: No activity has been started, calling end callback with original object.\", selfId);","            let result = state.many ? state.results : state.results[0];","            invokeEndCallback(Activity.states.complete, result);","        }","        else {","            debug(\"%s: %d activities has been started. Registering end bookmark.\", selfId, state.indices.size);","            let endBM = specStrings.activities.createCollectingCompletedBMName(selfId);","            bookmarkNames.push(execContext.createBookmark(selfId, endBM, endCallback));","            state.endBookmarkName = endBM;","            scope.__schedulingState = state;","        }","        scope.update(SimpleProxy.updateMode.oneWay);","    }","    catch (e) {","        debug(\"%s: Runtime error happened: %s\", selfId, e.stack);","        if (bookmarkNames.length) {","            debug(\"%s: Set bookmarks to noop: $j\", selfId, bookmarkNames);","            execContext.noopCallbacks(bookmarkNames);","        }","        scope.delete(\"__schedulingState\");","        debug(\"%s: Invoking end callback with the error.\", selfId);","        invokeEndCallback(Activity.states.fail, e);","    }","    finally {","        debug(\"%s: Final state indices count: %d, total: %d\", selfId, state.indices.size, state.total);","    }","};","","Activity.prototype.resultCollected = function (callContext, reason, result, bookmark) {","    let selfId = callContext.instanceId;","    let execContext = callContext.executionContext;","    let childId = specStrings.getString(bookmark.name);","    debug(\"%s: Scheduling result item collected, childId: %s, reason: %s, result: %j, bookmark: %j\", selfId, childId, reason, result, bookmark);","","    let finished = null;","    let state = this.__schedulingState;","    let fail = false;","    try {","        if (!_.isObject(state)) {","            throw new errors.ActivityStateExceptionError(\"Value of __schedulingState is '\" + state + \"'.\");","        }","        let index = state.indices.get(childId);","        if (_.isUndefined(index)) {","            throw new errors.ActivityStateExceptionError(`Child activity of '${childId}' scheduling state index out of range.`);","        }","","        debug(\"%s: Finished child activity id is: %s\", selfId, childId);","","        switch (reason) {","            case Activity.states.complete:","                debug(\"%s: Setting %d. value to result: %j\", selfId, index, result);","                state.results[index] = result;","                debug(\"%s: Removing id from state.\", selfId);","                state.indices.delete(childId);","                state.completedCount++;","                break;","            case Activity.states.fail:","                debug(\"%s: Failed with: %s\", selfId, result.stack);","                fail = true;","                state.indices.delete(childId);","                break;","            case Activity.states.cancel:","                debug(\"%s: Incrementing cancel counter.\", selfId);","                state.cancelCount++;","                debug(\"%s: Removing id from state.\", selfId);","                state.indices.delete(childId);","                break;","            case Activity.states.idle:","                debug(\"%s: Incrementing idle counter.\", selfId);","                state.idleCount++;","                break;","            default:","                throw new errors.ActivityStateExceptionError(`Result collected with unknown reason '${reason}'.`);","        }","","        debug(\"%s: State so far = total: %s, indices count: %d, completed count: %d, cancel count: %d, error count: %d, idle count: %d\",","            selfId,","            state.total,","            state.indices.size,","            state.completedCount,","            state.cancelCount,","            state.idleCount);","","        let endWithNoCollectAll = !callContext.activity.collectAll && reason !== Activity.states.idle;","        if (endWithNoCollectAll || fail) {","            if (!fail) {","                debug(\"%s: ---- Collecting of values ended, because we're not collecting all values (eg.: Pick).\", selfId);","            }","            else {","                debug(\"%s: ---- Collecting of values ended, because of an error.\", selfId);","            }","            debug(\"%s: Shutting down %d other, running acitvities.\", selfId, state.indices.size);","            let ids = [];","            for (let id of state.indices.keys()) {","                ids.push(id);","                debug(\"%s: Deleting scope of activity: %s\", selfId, id);","                execContext.deleteScopeOfActivity(callContext, id);","                let ibmName = specStrings.activities.createValueCollectedBMName(id);","                debug(\"%s: Deleting value collected bookmark: %s\", selfId, ibmName);","                execContext.deleteBookmark(ibmName);","            }","            execContext.cancelExecution(this, ids);","            debug(\"%s: Activities cancelled: %j\", selfId, ids);","            debug(\"%s: Reporting the actual reason: %s and result: %j\", selfId, reason, result);","            finished = function () { execContext.resumeBookmarkInScope(callContext, state.endBookmarkName, reason, result); };","        }","        else {","            assert(!fail);","            let onEnd = (state.indices.size - state.idleCount) === 0;","            if (onEnd) {","                debug(\"%s: ---- Collecting of values ended (ended because of collect all is off: %s).\", selfId, endWithNoCollectAll);","                if (state.cancelCount) {","                    debug(\"%s: Collecting has been cancelled, resuming end bookmarks.\", selfId);","                    finished = function () { execContext.resumeBookmarkInScope(callContext, state.endBookmarkName, Activity.states.cancel); };","                }","                else if (state.idleCount) {","                    debug(\"%s: This entry has been gone to idle, propagating counter.\", selfId);","                    state.idleCount--; // Because the next call will wake up a thread.","                    execContext.resumeBookmarkInScope(callContext, state.endBookmarkName, Activity.states.idle);","                }","                else {","                    result = state.many ? state.results : state.results[0];","                    debug(\"%s: This entry has been completed, resuming collect bookmark with the result(s): %j\", selfId, result);","                    finished = function () { execContext.resumeBookmarkInScope(callContext, state.endBookmarkName, Activity.states.complete, result); };","                }","            }","        }","    }","    catch (e) {","        callContext.fail(e);","        this.delete(\"__schedulingState\");","    }","    finally {","        if (finished) {","            debug(\"%s: Schduling finished, removing state.\", selfId);","            this.delete(\"__schedulingState\");","","            finished();","        }","    }","};","/* RUN */","","/* SCOPE */","Activity.prototype._getScopeKeys = function () {","    let self = this;","    if (!self._scopeKeys || !self._structureInitialized) {","        self._scopeKeys = [];","        for (let key in self) {","            if (!self.nonScopedProperties.has(key) &&","                (_.isUndefined(Activity.prototype[key]) || key === \"_defaultEndCallback\" || key === \"_subActivitiesGot\")) {","                self._scopeKeys.push(key);","            }","        }","    }","    return self._scopeKeys;","};","","Activity.prototype.createScopePart = function () {","    if (!this._structureInitialized) {","        throw new errors.ActivityRuntimeError(\"Cannot create activity scope for uninitialized activities.\");","    }","","    if (this._createScopePartImpl === null) {","        let first = true;","        let src = \"return {\";","        for (let fieldName of this._getScopeKeys()) {","            if (first) {","                first = false;","            }","            else {","                src += \",\\n\";","            }","            src += fieldName + \":a.\" + fieldName;","        }","        src += \"}\";","","        try {","            this._createScopePartImpl = new Function(\"a,_\", src);","        }","        catch (e) {","            debug(\"Invalid scope part function:%s\", src);","            throw e;","        }","    }","","    return this._createScopePartImpl(this, _);","};","/* SCOPE */","","Activity.states = enums.activityStates;","","module.exports = Activity;",""],"l":{"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"31":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"63":0,"64":0,"67":1,"76":0,"77":0,"79":0,"82":0,"87":1,"88":0,"92":1,"93":0,"96":1,"97":0,"100":1,"101":0,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"112":0,"114":0,"115":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"129":0,"134":0,"135":0,"136":0,"139":0,"150":1,"151":0,"154":1,"155":0,"156":0,"157":0,"161":1,"163":1,"164":1,"165":0,"166":0,"168":0,"169":0,"170":0,"171":0,"173":0,"175":0,"176":0,"177":0,"178":0,"179":0,"181":0,"184":0,"188":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"202":0,"206":1,"207":0,"208":0,"211":0,"212":0,"213":0,"214":0,"215":0,"219":0,"222":1,"223":0,"225":0,"226":0,"229":0,"230":0,"233":0,"234":0,"235":0,"236":0,"240":0,"242":0,"243":0,"244":0,"245":0,"248":0,"253":1,"255":1,"257":1,"258":0,"261":1,"262":0,"265":1,"266":0,"269":1,"270":0,"273":1,"274":0,"277":1,"278":0,"279":0,"282":0,"283":0,"284":0,"287":0,"289":0,"291":0,"294":0,"296":0,"297":0,"298":0,"299":0,"300":0,"302":0,"303":0,"304":0,"305":0,"306":0,"308":0,"311":0,"312":0,"314":0,"318":0,"325":0,"327":0,"330":0,"333":1,"334":0,"337":1,"338":0,"339":0,"340":0,"341":0,"343":0,"344":0,"347":0,"348":0,"349":0,"353":0,"354":0,"355":0,"357":0,"358":0,"359":0,"360":0,"363":0,"364":0,"365":0,"366":0,"369":0,"371":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"394":0,"395":0,"396":0,"398":0,"399":0,"400":0,"401":0,"402":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"413":0,"414":0,"417":0,"418":0,"419":0,"420":0,"421":0,"425":0,"427":0,"428":0,"429":0,"430":0,"433":0,"434":0,"435":0,"436":0,"437":0,"439":0,"442":0,"443":0,"444":0,"445":0,"447":0,"448":0,"449":0,"452":0,"456":1,"457":0,"458":0,"459":0,"460":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"469":0,"470":0,"471":0,"474":0,"476":0,"478":0,"479":0,"480":0,"481":0,"482":0,"483":0,"485":0,"486":0,"487":0,"488":0,"490":0,"491":0,"492":0,"493":0,"494":0,"496":0,"497":0,"498":0,"500":0,"503":0,"511":0,"512":0,"513":0,"514":0,"517":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":0,"526":0,"527":0,"529":0,"530":0,"531":0,"532":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"543":0,"544":0,"545":0,"546":0,"549":0,"550":0,"551":0,"557":0,"558":0,"561":0,"562":0,"563":0,"565":0,"572":1,"573":0,"574":0,"575":0,"576":0,"577":0,"579":0,"583":0,"586":1,"587":0,"588":0,"591":0,"592":0,"593":0,"594":0,"595":0,"596":0,"599":0,"601":0,"603":0,"605":0,"606":0,"609":0,"610":0,"614":0,"618":1,"620":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/specStrings.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/common/specStrings.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"makeSpecString","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}}},"2":{"name":"isSpecString","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":34}}},"3":{"name":"getGuid","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":29}}},"4":{"name":"getString","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":31}}},"5":{"name":"splitSpecString","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":37}}},"6":{"name":"makSpecForActivity","line":49,"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":46}}},"7":{"name":"(anonymous_7)","line":62,"loc":{"start":{"line":62,"column":41},"end":{"line":62,"column":63}}},"8":{"name":"(anonymous_8)","line":65,"loc":{"start":{"line":65,"column":36},"end":{"line":65,"column":58}}},"9":{"name":"(anonymous_9)","line":70,"loc":{"start":{"line":70,"column":33},"end":{"line":70,"column":55}}},"10":{"name":"(anonymous_10)","line":73,"loc":{"start":{"line":73,"column":33},"end":{"line":73,"column":47}}},"11":{"name":"(anonymous_11)","line":76,"loc":{"start":{"line":76,"column":36},"end":{"line":76,"column":58}}},"12":{"name":"(anonymous_12)","line":79,"loc":{"start":{"line":79,"column":36},"end":{"line":79,"column":58}}},"13":{"name":"(anonymous_13)","line":82,"loc":{"start":{"line":82,"column":33},"end":{"line":82,"column":48}}},"14":{"name":"(anonymous_14)","line":89,"loc":{"start":{"line":89,"column":23},"end":{"line":89,"column":38}}},"15":{"name":"(anonymous_15)","line":96,"loc":{"start":{"line":96,"column":29},"end":{"line":96,"column":44}}},"16":{"name":"(anonymous_16)","line":100,"loc":{"start":{"line":100,"column":20},"end":{"line":100,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"4":{"start":{"line":8,"column":0},"end":{"line":10,"column":1}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":28}},"6":{"start":{"line":12,"column":0},"end":{"line":23,"column":1}},"7":{"start":{"line":13,"column":4},"end":{"line":21,"column":5}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":43}},"9":{"start":{"line":15,"column":8},"end":{"line":19,"column":9}},"10":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"11":{"start":{"line":17,"column":16},"end":{"line":17,"column":29}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":20}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":17}},"14":{"start":{"line":25,"column":0},"end":{"line":30,"column":1}},"15":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}},"17":{"start":{"line":29,"column":4},"end":{"line":29,"column":44}},"18":{"start":{"line":32,"column":0},"end":{"line":37,"column":1}},"19":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"20":{"start":{"line":34,"column":8},"end":{"line":34,"column":20}},"21":{"start":{"line":36,"column":4},"end":{"line":36,"column":45}},"22":{"start":{"line":39,"column":0},"end":{"line":47,"column":1}},"23":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"24":{"start":{"line":41,"column":8},"end":{"line":41,"column":20}},"25":{"start":{"line":43,"column":4},"end":{"line":46,"column":6}},"26":{"start":{"line":49,"column":0},"end":{"line":54,"column":1}},"27":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"28":{"start":{"line":51,"column":8},"end":{"line":51,"column":76}},"29":{"start":{"line":53,"column":4},"end":{"line":53,"column":44}},"30":{"start":{"line":56,"column":0},"end":{"line":104,"column":1}},"31":{"start":{"line":63,"column":12},"end":{"line":63,"column":97}},"32":{"start":{"line":66,"column":12},"end":{"line":66,"column":92}},"33":{"start":{"line":71,"column":12},"end":{"line":71,"column":85}},"34":{"start":{"line":74,"column":12},"end":{"line":74,"column":81}},"35":{"start":{"line":77,"column":12},"end":{"line":77,"column":82}},"36":{"start":{"line":80,"column":12},"end":{"line":80,"column":73}},"37":{"start":{"line":83,"column":12},"end":{"line":83,"column":45}},"38":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"39":{"start":{"line":85,"column":16},"end":{"line":85,"column":33}},"40":{"start":{"line":87,"column":12},"end":{"line":87,"column":24}},"41":{"start":{"line":90,"column":12},"end":{"line":90,"column":45}},"42":{"start":{"line":91,"column":12},"end":{"line":93,"column":13}},"43":{"start":{"line":92,"column":16},"end":{"line":92,"column":33}},"44":{"start":{"line":94,"column":12},"end":{"line":94,"column":24}},"45":{"start":{"line":97,"column":12},"end":{"line":97,"column":45}},"46":{"start":{"line":98,"column":12},"end":{"line":98,"column":85}},"47":{"start":{"line":101,"column":12},"end":{"line":101,"column":64}},"48":{"start":{"line":106,"column":0},"end":{"line":106,"column":29}}},"branchMap":{"1":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":13,"column":4}},{"start":{"line":13,"column":4},"end":{"line":13,"column":4}}]},"2":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":8},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":68}},{"start":{"line":13,"column":72},"end":{"line":13,"column":102}}]},"3":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":16,"column":12}},{"start":{"line":16,"column":12},"end":{"line":16,"column":12}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"5":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"7":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"8":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":84,"column":12}},{"start":{"line":84,"column":12},"end":{"line":84,"column":12}}]},"9":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":16},"end":{"line":84,"column":21}},{"start":{"line":84,"column":25},"end":{"line":84,"column":74}}]},"10":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":12}},{"start":{"line":91,"column":12},"end":{"line":91,"column":12}}]},"11":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":21}},{"start":{"line":91,"column":25},"end":{"line":91,"column":74}}]},"12":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":19},"end":{"line":98,"column":24}},{"start":{"line":98,"column":28},"end":{"line":98,"column":84}}]}},"code":["\"use strict\";","","let constants = require(\"./constants\");","let _ = require(\"lodash\");","","let guidLength = constants.markers.activityInstance.length;","","function makeSpecString(guid, str) {","    return guid + \":\" + str;","}","","function isSpecString(specString) {","    if (_.isString(specString) && specString.length > guidLength + 1 && specString[guidLength] === \":\") {","        let il = constants.identity.length;","        for (let i = 0; i < il; i++) {","            if (constants.identity[i] !== specString[i]) {","                return false;","            }","        }","        return true;","    }","    return false;","}","","function getGuid(specString) {","    if (!isSpecString(specString)) {","        return null;","    }","    return specString.substr(0, guidLength);","}","","function getString(specString) {","    if (!isSpecString(specString)) {","        return null;","    }","    return specString.substr(guidLength + 1);","}","","function splitSpecString(specString) {","    if (!isSpecString(specString)) {","        return null;","    }","    return {","        guid: specString.substr(0, guidLength),","        str: specString.substr(guidLength + 1)","    };","}","","function makSpecForActivity(guid, activityId) {","    if (!_.isString(activityId)) {","        throw new TypeError(`Activity id '${activityId}' is not a string.`);","    }","    return makeSpecString(guid, activityId);","}","","let specStrings = {","    is: isSpecString,","    getGuid: getGuid,","    getString: getString,","    split: splitSpecString,","    activities: {","        createCollectingCompletedBMName: function (activityId) {","            return makSpecForActivity(constants.markers.collectingCompletedBookmark, activityId);","        },","        createValueCollectedBMName: function (activityId) {","            return makSpecForActivity(constants.markers.valueCollectedBookmark, activityId);","        }","    },","    hosting: {","        createBeginMethodBMName: function (methodName) {","            return makeSpecString(constants.markers.beginMethodBookmark, methodName);","        },","        createDelayToMethodName: function (id) {","            return makeSpecString(constants.markers.delayToMethodNamePrefix, id);","        },","        createActivityPropertyPart: function (methodName) {","            return makeSpecString(constants.markers.activityProperty, methodName);","        },","        createActivityInstancePart: function (activityId) {","            return constants.markers.activityInstance + \":\" + activityId;","        },","        getActivityPropertyName: function (obj) {","            let parts = splitSpecString(obj);","            if (parts && parts.guid === constants.markers.activityProperty) {","                return parts.str;","            }","            return null;","        },","        getInstanceId: function (obj) {","            let parts = splitSpecString(obj);","            if (parts && parts.guid === constants.markers.activityInstance) {","                return parts.str;","            }","            return null;","        },","        isDelayToMethodName: function (obj) {","            let parts = splitSpecString(obj);","            return parts && parts.guid === constants.markers.delayToMethodNamePrefix;","        },","        doubleKeys: function (key1, key2) {","            return key1 + constants.markers.keySeparator + key2;","        }","    }","}","","module.exports = specStrings;",""],"l":{"3":1,"4":1,"6":1,"8":1,"9":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"20":0,"22":0,"25":1,"26":0,"27":0,"29":0,"32":1,"33":0,"34":0,"36":0,"39":1,"40":0,"41":0,"43":0,"49":1,"50":0,"51":0,"53":0,"56":1,"63":0,"66":0,"71":0,"74":0,"77":0,"80":0,"83":0,"84":0,"85":0,"87":0,"90":0,"91":0,"92":0,"94":0,"97":0,"98":0,"101":0,"106":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/callContext.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/callContext.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":1,"36":0,"37":1,"38":0,"39":1,"40":0,"41":1,"42":0,"43":1,"44":0,"45":1,"46":0,"47":1,"48":0,"49":1,"50":0,"51":1,"52":0,"53":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"CallContext","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":68}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":29}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":17},"end":{"line":25,"column":29}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":17},"end":{"line":34,"column":29}}},"5":{"name":"(anonymous_5)","line":39,"loc":{"start":{"line":39,"column":17},"end":{"line":39,"column":29}}},"6":{"name":"(anonymous_6)","line":44,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":29}}},"7":{"name":"(anonymous_7)","line":49,"loc":{"start":{"line":49,"column":17},"end":{"line":49,"column":29}}},"8":{"name":"(anonymous_8)","line":54,"loc":{"start":{"line":54,"column":17},"end":{"line":54,"column":29}}},"9":{"name":"(anonymous_9)","line":61,"loc":{"start":{"line":61,"column":29},"end":{"line":61,"column":77}}},"10":{"name":"(anonymous_10)","line":73,"loc":{"start":{"line":73,"column":29},"end":{"line":73,"column":50}}},"11":{"name":"(anonymous_11)","line":86,"loc":{"start":{"line":86,"column":36},"end":{"line":86,"column":68}}},"12":{"name":"(anonymous_12)","line":92,"loc":{"start":{"line":92,"column":33},"end":{"line":92,"column":51}}},"13":{"name":"(anonymous_13)","line":96,"loc":{"start":{"line":96,"column":31},"end":{"line":96,"column":43}}},"14":{"name":"(anonymous_14)","line":100,"loc":{"start":{"line":100,"column":29},"end":{"line":100,"column":41}}},"15":{"name":"(anonymous_15)","line":104,"loc":{"start":{"line":104,"column":29},"end":{"line":104,"column":42}}},"16":{"name":"(anonymous_16)","line":108,"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":54}}},"17":{"name":"(anonymous_17)","line":112,"loc":{"start":{"line":112,"column":42},"end":{"line":112,"column":58}}},"18":{"name":"(anonymous_18)","line":116,"loc":{"start":{"line":116,"column":33},"end":{"line":116,"column":61}}},"19":{"name":"(anonymous_19)","line":120,"loc":{"start":{"line":120,"column":39},"end":{"line":120,"column":65}}},"20":{"name":"(anonymous_20)","line":124,"loc":{"start":{"line":124,"column":39},"end":{"line":124,"column":71}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":19}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":14,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":46}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":90}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":81}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":39}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":32}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":27}},"11":{"start":{"line":16,"column":0},"end":{"line":59,"column":2}},"12":{"start":{"line":21,"column":16},"end":{"line":21,"column":48}},"13":{"start":{"line":26,"column":16},"end":{"line":28,"column":17}},"14":{"start":{"line":27,"column":20},"end":{"line":27,"column":32}},"15":{"start":{"line":29,"column":16},"end":{"line":29,"column":86}},"16":{"start":{"line":30,"column":16},"end":{"line":30,"column":46}},"17":{"start":{"line":35,"column":16},"end":{"line":35,"column":57}},"18":{"start":{"line":40,"column":16},"end":{"line":40,"column":38}},"19":{"start":{"line":45,"column":16},"end":{"line":45,"column":46}},"20":{"start":{"line":50,"column":16},"end":{"line":50,"column":156}},"21":{"start":{"line":55,"column":16},"end":{"line":55,"column":92}},"22":{"start":{"line":61,"column":0},"end":{"line":71,"column":2}},"23":{"start":{"line":62,"column":4},"end":{"line":62,"column":60}},"24":{"start":{"line":63,"column":4},"end":{"line":63,"column":39}},"25":{"start":{"line":64,"column":4},"end":{"line":66,"column":5}},"26":{"start":{"line":65,"column":8},"end":{"line":65,"column":34}},"27":{"start":{"line":67,"column":4},"end":{"line":70,"column":81}},"28":{"start":{"line":73,"column":0},"end":{"line":84,"column":2}},"29":{"start":{"line":74,"column":4},"end":{"line":74,"column":42}},"30":{"start":{"line":75,"column":4},"end":{"line":83,"column":5}},"31":{"start":{"line":76,"column":8},"end":{"line":79,"column":62}},"32":{"start":{"line":82,"column":8},"end":{"line":82,"column":20}},"33":{"start":{"line":86,"column":0},"end":{"line":88,"column":2}},"34":{"start":{"line":87,"column":4},"end":{"line":87,"column":133}},"35":{"start":{"line":92,"column":0},"end":{"line":94,"column":2}},"36":{"start":{"line":93,"column":4},"end":{"line":93,"column":41}},"37":{"start":{"line":96,"column":0},"end":{"line":98,"column":2}},"38":{"start":{"line":97,"column":4},"end":{"line":97,"column":31}},"39":{"start":{"line":100,"column":0},"end":{"line":102,"column":2}},"40":{"start":{"line":101,"column":4},"end":{"line":101,"column":29}},"41":{"start":{"line":104,"column":0},"end":{"line":106,"column":2}},"42":{"start":{"line":105,"column":4},"end":{"line":105,"column":32}},"43":{"start":{"line":108,"column":0},"end":{"line":110,"column":2}},"44":{"start":{"line":109,"column":4},"end":{"line":109,"column":44}},"45":{"start":{"line":112,"column":0},"end":{"line":114,"column":2}},"46":{"start":{"line":113,"column":4},"end":{"line":113,"column":50}},"47":{"start":{"line":116,"column":0},"end":{"line":118,"column":2}},"48":{"start":{"line":117,"column":4},"end":{"line":117,"column":51}},"49":{"start":{"line":120,"column":0},"end":{"line":122,"column":2}},"50":{"start":{"line":121,"column":4},"end":{"line":121,"column":82}},"51":{"start":{"line":124,"column":0},"end":{"line":126,"column":2}},"52":{"start":{"line":125,"column":4},"end":{"line":125,"column":78}},"53":{"start":{"line":128,"column":0},"end":{"line":128,"column":29}}},"branchMap":{"1":{"line":9,"type":"cond-expr","locations":[{"start":{"line":9,"column":44},"end":{"line":9,"column":82}},{"start":{"line":9,"column":85},"end":{"line":9,"column":89}}]},"2":{"line":10,"type":"cond-expr","locations":[{"start":{"line":10,"column":48},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":80}}]},"3":{"line":11,"type":"cond-expr","locations":[{"start":{"line":11,"column":26},"end":{"line":11,"column":31}},{"start":{"line":11,"column":34},"end":{"line":11,"column":38}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":16},"end":{"line":26,"column":16}},{"start":{"line":26,"column":16},"end":{"line":26,"column":16}}]},"5":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":23},"end":{"line":50,"column":43}},{"start":{"line":50,"column":48},"end":{"line":50,"column":154}}]},"6":{"line":50,"type":"cond-expr","locations":[{"start":{"line":50,"column":66},"end":{"line":50,"column":146}},{"start":{"line":50,"column":150},"end":{"line":50,"column":154}}]},"7":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":23},"end":{"line":55,"column":34}},{"start":{"line":55,"column":39},"end":{"line":55,"column":90}}]},"8":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"9":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"10":{"line":87,"type":"cond-expr","locations":[{"start":{"line":87,"column":47},"end":{"line":87,"column":67}},{"start":{"line":87,"column":70},"end":{"line":87,"column":132}}]}},"code":["\"use strict\";","","let common = require(\"../common\");","let is = common.is;","let _ = require(\"lodash\");","","function CallContext(executionContext, activityOrActivityId, scope) {","    this._executionContext = executionContext;","    this._activity = activityOrActivityId ? this._asActivity(activityOrActivityId) : null;","    this._activityInstanceId = this._activity ? this._activity.instanceId : null;","    this._scope = scope ? scope : null;","    this._executionState = null;","    this._scopePart = null;","}","","Object.defineProperties(","    CallContext.prototype,","    {","        instanceId: {","            get: function () {","                return this._activityInstanceId;","            }","        },","        _parentActivityId: {","            get: function () {","                if (!this._activity) {","                    return null;","                }","                let state = this._executionContext.getExecutionState(this.instanceId);","                return state.parentInstanceId;","            }","        },","        _scopeTree: {","            get: function () {","                return this._executionContext._scopeTree;","            }","        },","        activity: {","            get: function () {","                return this._activity;","            }","        },","        executionContext: {","            get: function () {","                return this._executionContext;","            }","        },","        executionState: {","            get: function () {","                return this._executionState || (this._activity ? (this._executionState = this._executionContext.getExecutionState(this.instanceId)) : null);","            }","        },","        scope: {","            get: function () {","                return this._scope || (this._scope = this._scopeTree.find(this.instanceId));","            }","        }","    }",");","","CallContext.prototype.next = function (childActivityOrActivityId, variables) {","    let child = this._asActivity(childActivityOrActivityId);","    let part = child.createScopePart();","    if (_.isObject(variables)) {","        _.extend(part, variables);","    }","    return new CallContext(","        this._executionContext,","        child,","        this._scopeTree.next(this.instanceId, child.instanceId, part, child.id));","};","","CallContext.prototype.back = function (keepScope) {","    let parentId = this._parentActivityId;","    if (parentId) {","        return new CallContext(","            this._executionContext,","            parentId,","            this._scopeTree.back(this.instanceId, keepScope));","    }","    else {","        return null;","    }","};","","CallContext.prototype._asActivity = function (activityOrActivityId) {","    return is.activity(activityOrActivityId) ? activityOrActivityId : this._executionContext._getKnownActivity(activityOrActivityId);","};","","/* Callbacks */","","CallContext.prototype.complete = function (result) {","    this.activity.complete(this, result);","};","","CallContext.prototype.cancel = function () {","    this.activity.cancel(this);","};","","CallContext.prototype.idle = function () {","    this.activity.idle(this);","};","","CallContext.prototype.fail = function (e) {","    this.activity.fail(this, e);","};","","CallContext.prototype.end = function (reason, result) {","    this.activity.end(this, reason, result);","};","","CallContext.prototype.emitWorkflowEvent = function (args) {","    this.executionContext.emitWorkflowEvent(args);","};","","CallContext.prototype.schedule = function (obj, endcallback) {","    this.activity.schedule(this, obj, endcallback);","};","","CallContext.prototype.createBookmark = function (name, callback) {","    return this._executionContext.createBookmark(this.instanceId, name, callback);","};","","CallContext.prototype.resumeBookmark = function (name, reason, result) {","    this._executionContext.resumeBookmarkInternal(this, name, reason, result);","};","","module.exports = CallContext;",""],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"16":1,"21":0,"26":0,"27":0,"29":0,"30":0,"35":0,"40":0,"45":0,"50":0,"55":0,"61":1,"62":0,"63":0,"64":0,"65":0,"67":0,"73":1,"74":0,"75":0,"76":0,"82":0,"86":1,"87":0,"92":1,"93":0,"96":1,"97":0,"100":1,"101":0,"104":1,"105":0,"108":1,"109":0,"112":1,"113":0,"116":1,"117":0,"120":1,"121":0,"124":1,"125":0,"128":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionEngine.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionEngine.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":1,"45":0,"46":1,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":1,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0,"157":0,"158":1,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"fnMap":{"1":{"name":"ActivityExecutionEngine","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":62}}},"2":{"name":"(anonymous_2)","line":52,"loc":{"start":{"line":52,"column":13},"end":{"line":52,"column":25}}},"3":{"name":"(anonymous_3)","line":62,"loc":{"start":{"line":62,"column":13},"end":{"line":62,"column":25}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":14},"end":{"line":69,"column":26}}},"5":{"name":"(anonymous_5)","line":74,"loc":{"start":{"line":74,"column":43},"end":{"line":74,"column":61}}},"6":{"name":"(anonymous_6)","line":78,"loc":{"start":{"line":78,"column":48},"end":{"line":78,"column":60}}},"7":{"name":"(anonymous_7)","line":85,"loc":{"start":{"line":85,"column":50},"end":{"line":85,"column":67}}},"8":{"name":"(anonymous_8)","line":90,"loc":{"start":{"line":90,"column":36},"end":{"line":90,"column":52}}},"9":{"name":"(anonymous_9)","line":94,"loc":{"start":{"line":94,"column":38},"end":{"line":94,"column":54}}},"10":{"name":"(anonymous_10)","line":98,"loc":{"start":{"line":98,"column":33},"end":{"line":98,"column":49}}},"11":{"name":"(anonymous_11)","line":103,"loc":{"start":{"line":103,"column":34},"end":{"line":103,"column":50}}},"12":{"name":"(anonymous_12)","line":107,"loc":{"start":{"line":107,"column":33},"end":{"line":107,"column":49}}},"13":{"name":"(anonymous_13)","line":111,"loc":{"start":{"line":111,"column":34},"end":{"line":111,"column":50}}},"14":{"name":"(anonymous_14)","line":117,"loc":{"start":{"line":117,"column":49},"end":{"line":117,"column":61}}},"15":{"name":"(anonymous_15)","line":121,"loc":{"start":{"line":121,"column":8},"end":{"line":121,"column":24}}},"16":{"name":"(anonymous_16)","line":128,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":24}}},"17":{"name":"(anonymous_17)","line":135,"loc":{"start":{"line":135,"column":8},"end":{"line":135,"column":23}}},"18":{"name":"(anonymous_18)","line":141,"loc":{"start":{"line":141,"column":47},"end":{"line":141,"column":66}}},"19":{"name":"(anonymous_19)","line":148,"loc":{"start":{"line":148,"column":50},"end":{"line":148,"column":69}}},"20":{"name":"(anonymous_20)","line":162,"loc":{"start":{"line":162,"column":48},"end":{"line":162,"column":61}}},"21":{"name":"(anonymous_21)","line":175,"loc":{"start":{"line":175,"column":43},"end":{"line":175,"column":55}}},"22":{"name":"(anonymous_22)","line":189,"loc":{"start":{"line":189,"column":24},"end":{"line":189,"column":51}}},"23":{"name":"(anonymous_23)","line":193,"loc":{"start":{"line":193,"column":37},"end":{"line":193,"column":54}}},"24":{"name":"(anonymous_24)","line":221,"loc":{"start":{"line":221,"column":54},"end":{"line":221,"column":66}}},"25":{"name":"(anonymous_25)","line":227,"loc":{"start":{"line":227,"column":51},"end":{"line":227,"column":83}}},"26":{"name":"(anonymous_26)","line":230,"loc":{"start":{"line":230,"column":24},"end":{"line":230,"column":51}}},"27":{"name":"(anonymous_27)","line":238,"loc":{"start":{"line":238,"column":20},"end":{"line":238,"column":36}}},"28":{"name":"(anonymous_28)","line":280,"loc":{"start":{"line":280,"column":58},"end":{"line":280,"column":98}}},"29":{"name":"(anonymous_29)","line":289,"loc":{"start":{"line":289,"column":45},"end":{"line":289,"column":73}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":69}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":61}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":39}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":35}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":53}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":31}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":49}},"15":{"start":{"line":18,"column":0},"end":{"line":46,"column":1}},"16":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"17":{"start":{"line":21,"column":4},"end":{"line":39,"column":5}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":46}},"19":{"start":{"line":23,"column":8},"end":{"line":23,"column":58}},"20":{"start":{"line":24,"column":8},"end":{"line":24,"column":36}},"21":{"start":{"line":26,"column":9},"end":{"line":39,"column":5}},"22":{"start":{"line":27,"column":8},"end":{"line":27,"column":59}},"23":{"start":{"line":28,"column":8},"end":{"line":28,"column":41}},"24":{"start":{"line":29,"column":8},"end":{"line":29,"column":35}},"25":{"start":{"line":30,"column":8},"end":{"line":30,"column":35}},"26":{"start":{"line":32,"column":9},"end":{"line":39,"column":5}},"27":{"start":{"line":33,"column":8},"end":{"line":33,"column":68}},"28":{"start":{"line":34,"column":8},"end":{"line":34,"column":58}},"29":{"start":{"line":35,"column":8},"end":{"line":35,"column":36}},"30":{"start":{"line":38,"column":8},"end":{"line":38,"column":101}},"31":{"start":{"line":41,"column":4},"end":{"line":41,"column":27}},"32":{"start":{"line":42,"column":4},"end":{"line":42,"column":24}},"33":{"start":{"line":43,"column":4},"end":{"line":43,"column":24}},"34":{"start":{"line":44,"column":4},"end":{"line":44,"column":26}},"35":{"start":{"line":45,"column":4},"end":{"line":45,"column":37}},"36":{"start":{"line":48,"column":0},"end":{"line":48,"column":53}},"37":{"start":{"line":50,"column":0},"end":{"line":66,"column":3}},"38":{"start":{"line":53,"column":12},"end":{"line":58,"column":13}},"39":{"start":{"line":54,"column":16},"end":{"line":54,"column":49}},"40":{"start":{"line":57,"column":16},"end":{"line":57,"column":28}},"41":{"start":{"line":63,"column":12},"end":{"line":63,"column":45}},"42":{"start":{"line":68,"column":0},"end":{"line":72,"column":2}},"43":{"start":{"line":70,"column":8},"end":{"line":70,"column":41}},"44":{"start":{"line":74,"column":0},"end":{"line":76,"column":2}},"45":{"start":{"line":75,"column":4},"end":{"line":75,"column":33}},"46":{"start":{"line":78,"column":0},"end":{"line":83,"column":2}},"47":{"start":{"line":79,"column":4},"end":{"line":82,"column":5}},"48":{"start":{"line":80,"column":8},"end":{"line":80,"column":51}},"49":{"start":{"line":81,"column":8},"end":{"line":81,"column":35}},"50":{"start":{"line":85,"column":0},"end":{"line":115,"column":2}},"51":{"start":{"line":86,"column":4},"end":{"line":86,"column":20}},"52":{"start":{"line":87,"column":4},"end":{"line":114,"column":5}},"53":{"start":{"line":88,"column":8},"end":{"line":88,"column":32}},"54":{"start":{"line":89,"column":8},"end":{"line":92,"column":15}},"55":{"start":{"line":91,"column":16},"end":{"line":91,"column":56}},"56":{"start":{"line":93,"column":8},"end":{"line":96,"column":15}},"57":{"start":{"line":95,"column":16},"end":{"line":95,"column":58}},"58":{"start":{"line":97,"column":8},"end":{"line":101,"column":15}},"59":{"start":{"line":99,"column":16},"end":{"line":99,"column":44}},"60":{"start":{"line":100,"column":16},"end":{"line":100,"column":53}},"61":{"start":{"line":102,"column":8},"end":{"line":105,"column":15}},"62":{"start":{"line":104,"column":16},"end":{"line":104,"column":54}},"63":{"start":{"line":106,"column":8},"end":{"line":109,"column":15}},"64":{"start":{"line":108,"column":16},"end":{"line":108,"column":53}},"65":{"start":{"line":110,"column":8},"end":{"line":113,"column":15}},"66":{"start":{"line":112,"column":16},"end":{"line":112,"column":54}},"67":{"start":{"line":117,"column":0},"end":{"line":139,"column":2}},"68":{"start":{"line":118,"column":4},"end":{"line":118,"column":20}},"69":{"start":{"line":119,"column":4},"end":{"line":125,"column":11}},"70":{"start":{"line":122,"column":12},"end":{"line":124,"column":13}},"71":{"start":{"line":123,"column":16},"end":{"line":123,"column":45}},"72":{"start":{"line":126,"column":4},"end":{"line":132,"column":11}},"73":{"start":{"line":129,"column":12},"end":{"line":131,"column":13}},"74":{"start":{"line":130,"column":16},"end":{"line":130,"column":45}},"75":{"start":{"line":133,"column":4},"end":{"line":138,"column":6}},"76":{"start":{"line":136,"column":12},"end":{"line":136,"column":56}},"77":{"start":{"line":141,"column":0},"end":{"line":146,"column":2}},"78":{"start":{"line":142,"column":4},"end":{"line":144,"column":5}},"79":{"start":{"line":143,"column":8},"end":{"line":143,"column":59}},"80":{"start":{"line":145,"column":4},"end":{"line":145,"column":59}},"81":{"start":{"line":148,"column":0},"end":{"line":160,"column":2}},"82":{"start":{"line":149,"column":4},"end":{"line":149,"column":17}},"83":{"start":{"line":150,"column":4},"end":{"line":156,"column":5}},"84":{"start":{"line":151,"column":8},"end":{"line":151,"column":34}},"85":{"start":{"line":152,"column":8},"end":{"line":155,"column":9}},"86":{"start":{"line":153,"column":12},"end":{"line":153,"column":20}},"87":{"start":{"line":154,"column":12},"end":{"line":154,"column":18}},"88":{"start":{"line":157,"column":4},"end":{"line":159,"column":5}},"89":{"start":{"line":158,"column":8},"end":{"line":158,"column":38}},"90":{"start":{"line":162,"column":0},"end":{"line":173,"column":3}},"91":{"start":{"line":163,"column":4},"end":{"line":163,"column":29}},"92":{"start":{"line":165,"column":4},"end":{"line":165,"column":23}},"93":{"start":{"line":167,"column":4},"end":{"line":167,"column":47}},"94":{"start":{"line":168,"column":4},"end":{"line":170,"column":5}},"95":{"start":{"line":169,"column":8},"end":{"line":169,"column":21}},"96":{"start":{"line":172,"column":4},"end":{"line":172,"column":85}},"97":{"start":{"line":175,"column":0},"end":{"line":219,"column":2}},"98":{"start":{"line":176,"column":4},"end":{"line":176,"column":20}},"99":{"start":{"line":178,"column":4},"end":{"line":178,"column":29}},"100":{"start":{"line":180,"column":4},"end":{"line":180,"column":23}},"101":{"start":{"line":182,"column":4},"end":{"line":182,"column":18}},"102":{"start":{"line":183,"column":4},"end":{"line":185,"column":5}},"103":{"start":{"line":184,"column":8},"end":{"line":184,"column":21}},"104":{"start":{"line":187,"column":4},"end":{"line":187,"column":48}},"105":{"start":{"line":189,"column":4},"end":{"line":218,"column":7}},"106":{"start":{"line":190,"column":8},"end":{"line":217,"column":9}},"107":{"start":{"line":191,"column":12},"end":{"line":191,"column":82}},"108":{"start":{"line":192,"column":12},"end":{"line":211,"column":19}},"109":{"start":{"line":194,"column":20},"end":{"line":194,"column":46}},"110":{"start":{"line":195,"column":20},"end":{"line":195,"column":46}},"111":{"start":{"line":196,"column":20},"end":{"line":210,"column":21}},"112":{"start":{"line":198,"column":28},"end":{"line":198,"column":44}},"113":{"start":{"line":199,"column":28},"end":{"line":199,"column":34}},"114":{"start":{"line":201,"column":28},"end":{"line":201,"column":59}},"115":{"start":{"line":202,"column":28},"end":{"line":202,"column":34}},"116":{"start":{"line":204,"column":28},"end":{"line":204,"column":48}},"117":{"start":{"line":205,"column":28},"end":{"line":205,"column":34}},"118":{"start":{"line":207,"column":28},"end":{"line":207,"column":97}},"119":{"start":{"line":208,"column":28},"end":{"line":208,"column":43}},"120":{"start":{"line":209,"column":28},"end":{"line":209,"column":34}},"121":{"start":{"line":213,"column":12},"end":{"line":213,"column":67}},"122":{"start":{"line":216,"column":12},"end":{"line":216,"column":22}},"123":{"start":{"line":221,"column":0},"end":{"line":225,"column":2}},"124":{"start":{"line":222,"column":4},"end":{"line":224,"column":5}},"125":{"start":{"line":223,"column":8},"end":{"line":223,"column":91}},"126":{"start":{"line":227,"column":0},"end":{"line":277,"column":2}},"127":{"start":{"line":228,"column":4},"end":{"line":228,"column":20}},"128":{"start":{"line":229,"column":4},"end":{"line":229,"column":23}},"129":{"start":{"line":230,"column":4},"end":{"line":276,"column":7}},"130":{"start":{"line":231,"column":8},"end":{"line":275,"column":9}},"131":{"start":{"line":232,"column":12},"end":{"line":232,"column":82}},"132":{"start":{"line":234,"column":12},"end":{"line":271,"column":13}},"133":{"start":{"line":235,"column":16},"end":{"line":235,"column":74}},"134":{"start":{"line":236,"column":16},"end":{"line":266,"column":23}},"135":{"start":{"line":239,"column":24},"end":{"line":239,"column":50}},"136":{"start":{"line":240,"column":24},"end":{"line":240,"column":50}},"137":{"start":{"line":241,"column":24},"end":{"line":265,"column":25}},"138":{"start":{"line":242,"column":28},"end":{"line":261,"column":29}},"139":{"start":{"line":243,"column":32},"end":{"line":243,"column":93}},"140":{"start":{"line":244,"column":32},"end":{"line":254,"column":33}},"141":{"start":{"line":245,"column":36},"end":{"line":250,"column":37}},"142":{"start":{"line":246,"column":40},"end":{"line":246,"column":151}},"143":{"start":{"line":249,"column":40},"end":{"line":249,"column":138}},"144":{"start":{"line":253,"column":36},"end":{"line":253,"column":46}},"145":{"start":{"line":256,"column":33},"end":{"line":261,"column":29}},"146":{"start":{"line":257,"column":32},"end":{"line":257,"column":143}},"147":{"start":{"line":259,"column":33},"end":{"line":261,"column":29}},"148":{"start":{"line":260,"column":32},"end":{"line":260,"column":48}},"149":{"start":{"line":264,"column":28},"end":{"line":264,"column":38}},"150":{"start":{"line":267,"column":16},"end":{"line":267,"column":74}},"151":{"start":{"line":270,"column":16},"end":{"line":270,"column":128}},"152":{"start":{"line":274,"column":12},"end":{"line":274,"column":22}},"153":{"start":{"line":280,"column":0},"end":{"line":287,"column":2}},"154":{"start":{"line":281,"column":4},"end":{"line":283,"column":5}},"155":{"start":{"line":282,"column":8},"end":{"line":282,"column":67}},"156":{"start":{"line":285,"column":4},"end":{"line":285,"column":23}},"157":{"start":{"line":286,"column":4},"end":{"line":286,"column":76}},"158":{"start":{"line":289,"column":0},"end":{"line":300,"column":2}},"159":{"start":{"line":290,"column":4},"end":{"line":292,"column":5}},"160":{"start":{"line":291,"column":8},"end":{"line":291,"column":67}},"161":{"start":{"line":293,"column":4},"end":{"line":295,"column":5}},"162":{"start":{"line":294,"column":8},"end":{"line":294,"column":65}},"163":{"start":{"line":297,"column":4},"end":{"line":297,"column":23}},"164":{"start":{"line":298,"column":4},"end":{"line":298,"column":32}},"165":{"start":{"line":299,"column":4},"end":{"line":299,"column":44}},"166":{"start":{"line":303,"column":0},"end":{"line":303,"column":41}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":9},"end":{"line":26,"column":9}},{"start":{"line":26,"column":9},"end":{"line":26,"column":9}}]},"3":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":9},"end":{"line":32,"column":9}},{"start":{"line":32,"column":9},"end":{"line":32,"column":9}}]},"4":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":20},"end":{"line":45,"column":28}},{"start":{"line":45,"column":32},"end":{"line":45,"column":36}}]},"5":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":12}},{"start":{"line":53,"column":12},"end":{"line":53,"column":12}}]},"6":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"7":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"8":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":4},"end":{"line":142,"column":4}},{"start":{"line":142,"column":4},"end":{"line":142,"column":4}}]},"9":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":8}},{"start":{"line":152,"column":8},"end":{"line":152,"column":8}}]},"10":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":4},"end":{"line":157,"column":4}},{"start":{"line":157,"column":4},"end":{"line":157,"column":4}}]},"11":{"line":196,"type":"switch","locations":[{"start":{"line":197,"column":24},"end":{"line":199,"column":34}},{"start":{"line":200,"column":24},"end":{"line":202,"column":34}},{"start":{"line":203,"column":24},"end":{"line":205,"column":34}},{"start":{"line":206,"column":24},"end":{"line":209,"column":34}}]},"12":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":37},"end":{"line":207,"column":43}},{"start":{"line":207,"column":47},"end":{"line":207,"column":96}}]},"13":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":4},"end":{"line":222,"column":4}},{"start":{"line":222,"column":4},"end":{"line":222,"column":4}}]},"14":{"line":222,"type":"binary-expr","locations":[{"start":{"line":222,"column":10},"end":{"line":222,"column":25}},{"start":{"line":222,"column":29},"end":{"line":222,"column":77}}]},"15":{"line":234,"type":"if","locations":[{"start":{"line":234,"column":12},"end":{"line":234,"column":12}},{"start":{"line":234,"column":12},"end":{"line":234,"column":12}}]},"16":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":28},"end":{"line":242,"column":28}},{"start":{"line":242,"column":28},"end":{"line":242,"column":28}}]},"17":{"line":242,"type":"binary-expr","locations":[{"start":{"line":242,"column":32},"end":{"line":242,"column":73}},{"start":{"line":242,"column":77},"end":{"line":242,"column":114}}]},"18":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":32},"end":{"line":244,"column":32}},{"start":{"line":244,"column":32},"end":{"line":244,"column":32}}]},"19":{"line":244,"type":"binary-expr","locations":[{"start":{"line":244,"column":36},"end":{"line":244,"column":50}},{"start":{"line":244,"column":54},"end":{"line":244,"column":84}}]},"20":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":36},"end":{"line":245,"column":36}},{"start":{"line":245,"column":36},"end":{"line":245,"column":36}}]},"21":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":33},"end":{"line":256,"column":33}},{"start":{"line":256,"column":33},"end":{"line":256,"column":33}}]},"22":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":33},"end":{"line":259,"column":33}},{"start":{"line":259,"column":33},"end":{"line":259,"column":33}}]},"23":{"line":281,"type":"if","locations":[{"start":{"line":281,"column":4},"end":{"line":281,"column":4}},{"start":{"line":281,"column":4},"end":{"line":281,"column":4}}]},"24":{"line":281,"type":"binary-expr","locations":[{"start":{"line":281,"column":8},"end":{"line":281,"column":18}},{"start":{"line":281,"column":22},"end":{"line":281,"column":45}}]},"25":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":4},"end":{"line":290,"column":4}},{"start":{"line":290,"column":4},"end":{"line":290,"column":4}}]},"26":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":18}},{"start":{"line":290,"column":22},"end":{"line":290,"column":45}}]},"27":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":4},"end":{"line":293,"column":4}},{"start":{"line":293,"column":4},"end":{"line":293,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let ActivityExecutionContext = require(\"./activityExecutionContext\");","let ActivityExecutionState = require(\"./activityExecutionState\");","let CallContext = require(\"./callContext\");","let EventEmitter = require('events').EventEmitter;","let util = require(\"util\");","let errors = require(\"../common/errors\");","let _ = require(\"lodash\");","let ActivityStateTracker = require(\"./activityStateTracker\");","let enums = require(\"../common/enums\");","let Bluebird = require(\"bluebird\");","let asyncHelpers = require(\"../common/asyncHelpers\");","let async = asyncHelpers.async;","let activityMarkup = require(\"./activityMarkup\");","","function ActivityExecutionEngine(contextOrActivity, instance) {","    EventEmitter.call(this);","    ","    if (contextOrActivity instanceof Activity) {","        this.rootActivity = contextOrActivity;","        this.context = new ActivityExecutionContext(this);","        this._isInitialized = false;","    }","    else if (contextOrActivity instanceof ActivityExecutionContext) {","        this.rootActivity = contextOrActivity.rootActivity;","        this.context = contextOrActivity;","        this.context.engine = this;","        this._isInitialized = true;","    }","    else if (_.isPlainObject(contextOrActivity)) {","        this.rootActivity = activityMarkup.parse(contextOrActivity);","        this.context = new ActivityExecutionContext(this);","        this._isInitialized = false;","    }","    else {","        throw new TypeError(\"Argument 'contextOrActivity' is not an activity, context or a markup.\");","    }","    ","    this._rootState = null;","    this._trackers = [];","    this._hookContext();","    this.updatedOn = null;","    this.instance = instance || null;","}","","util.inherits(ActivityExecutionEngine, EventEmitter);","","Object.defineProperties(ActivityExecutionEngine.prototype, {","    execState: {","        get: function () {","            if (this._rootState) {","                return this._rootState.execState;","            }","            else {","                return null;","            }","        }","    },","    version: {","        get: function () {","            return this.rootActivity.version;","        }","    }","});","","ActivityExecutionEngine.prototype._idle = {","    toString: function () {","        return enums.activityStates.idle;","    }","};","","ActivityExecutionEngine.prototype.isIdle = function (result) {","    return result === this._idle;","};","","ActivityExecutionEngine.prototype._initialize = function () {","    if (!this._isInitialized) {","        this.context.initialize(this.rootActivity);","        this._isInitialized = true;","    }","};","","ActivityExecutionEngine.prototype._setRootState = function (state) {","    let self = this;","    if (!self._rootState) {","        self._rootState = state;","        self._rootState.on(","            Activity.states.cancel, function (args) {","                self.emit(Activity.states.cancel, args);","            });","        self._rootState.on(","            Activity.states.complete, function (args) {","                self.emit(Activity.states.complete, args);","            });","        self._rootState.on(","            Activity.states.end, function (args) {","                self.updatedOn = new Date();","                self.emit(Activity.states.end, args);","            });","        self._rootState.on(","            Activity.states.fail, function (args) {","                self.emit(Activity.states.fail, args);","            });","        self._rootState.on(","            Activity.states.run, function (args) {","                self.emit(Activity.states.run, args);","            });","        self._rootState.on(","            Activity.states.idle, function (args) {","                self.emit(Activity.states.idle, args);","            });","    }","};","","ActivityExecutionEngine.prototype._hookContext = function () {","    let self = this;","    self.context.on(","        Activity.states.run,","        function (args) {","            for (let t of self._trackers) {","                t.activityStateChanged(args);","            }","        });","    self.context.on(","        Activity.states.end,","        function (args) {","            for (let t of self._trackers) {","                t.activityStateChanged(args);","            }","        });","    self.context.on(","        enums.events.workflowEvent,","        function(args) {","            self.emit(enums.events.workflowEvent, args);","        }","    );","};","","ActivityExecutionEngine.prototype.addTracker = function (tracker) {","    if (!_.isObject(tracker)) {","        throw new TypeError(\"Parameter is not an object.\");","    }","    this._trackers.push(new ActivityStateTracker(tracker));","};","","ActivityExecutionEngine.prototype.removeTracker = function (tracker) {","    let idx = -1;","    for (let i = 0; i < this._trackers.length; i++) {","        let t = this._trackers[i];","        if (t._impl === tracker) {","            idx = i;","            break;","        }","    }","    if (idx !== -1) {","        this._trackers.splice(idx, 1);","    }","};","","ActivityExecutionEngine.prototype.start = async(function* () {","    this._verifyNotStarted();","","    this._initialize();","","    let args = [new CallContext(this.context)];","    for (let a of arguments) {","        args.push(a);","    }","","    this._setRootState(yield this.rootActivity.start.apply(this.rootActivity, args));","});","","ActivityExecutionEngine.prototype.invoke = function () {","    let self = this;","","    self._verifyNotStarted();","","    self._initialize();","","    let args = [];","    for (let a of arguments) {","        args.push(a);","    }","","    args.unshift(new CallContext(self.context));","","    return new Bluebird(function (resolve, reject) {","        try {","            self._setRootState(self.context.getExecutionState(self.rootActivity));","            self.once(","                Activity.states.end, function (eArgs) {","                    let reason = eArgs.reason;","                    let result = eArgs.result;","                    switch (reason) {","                        case Activity.states.complete:","                            resolve(result);","                            break;","                        case Activity.states.cancel:","                            reject(new errors.Cancelled());","                            break;","                        case Activity.states.idle:","                            resolve(self._idle);","                            break;","                        default :","                            result = result || new errors.ActivityRuntimeError(\"Unknown error.\");","                            reject(result);","                            break;","                    }","                });","","            self.rootActivity.start.apply(self.rootActivity, args);","        }","        catch (e) {","            reject(e);","        }","    });","};","","ActivityExecutionEngine.prototype._verifyNotStarted = function () {","    if (!(!this.execState || this.execState === enums.activityStates.complete)) {","        throw new errors.ActivityStateExceptionError(\"Workflow has been already started.\");","    }","};","","ActivityExecutionEngine.prototype.resumeBookmark = function (name, reason, result) {","    let self = this;","    self._initialize();","    return new Bluebird(function (resolve, reject) {","        try {","            self._setRootState(self.context.getExecutionState(self.rootActivity));","","            if (self.execState === enums.activityStates.idle) {","                let bmTimestamp = self.context.getBookmarkTimestamp(name);","                self.once(","                    Activity.states.end,","                    function (args) {","                        let _reason = args.reason;","                        let _result = args.result;","                        try {","                            if (_reason === enums.activityStates.complete || _reason === enums.activityStates.idle) {","                                let endBmTimestamp = self.context.getBookmarkTimestamp(name);","                                if (endBmTimestamp && endBmTimestamp === bmTimestamp) {","                                    if (_reason === enums.activityStates.complete) {","                                        reject(new errors.ActivityRuntimeError(\"Workflow has been completed before bookmark '\" + name + \"' reached.\"));","                                    }","                                    else {","                                        reject(new errors.Idle(\"Workflow has been gone to idle before bookmark '\" + name + \"' reached.\"));","                                    }","                                }","                                else {","                                    resolve();","                                }","                            }","                            else if (_reason === enums.activityStates.cancel) {","                                reject(new errors.ActivityRuntimeError(\"Workflow has been cancelled before bookmark '\" + name + \"' reached.\"));","                            }","                            else if (_reason === enums.activityStates.fail) {","                                reject(_result);","                            }","                        }","                        catch (e) {","                            reject(e);","                        }","                    });","                self.context.resumeBookmarkExternal(name, reason, result);","            }","            else {","                reject(new errors.ActivityRuntimeError(\"Cannot resume bookmark, while the workflow is not in the idle state.\"));","            }","        }","        catch (e) {","            reject(e);","        }","    });","};","","/* SERIALIZATION */","ActivityExecutionEngine.prototype.getStateAndPromotions = function (serializer, enablePromotions) {","    if (serializer && !_.isObject(serializer)) {","        throw new Error(\"Argument 'serializer' is not an object.\");","    }","","    this._initialize();","    return this.context.getStateAndPromotions(serializer, enablePromotions);","};","","ActivityExecutionEngine.prototype.setState = function (serializer, json) {","    if (serializer && !_.isObject(serializer)) {","        throw new Error(\"Argument 'serializer' is not an object.\");","    }","    if (!_.isObject(json)) {","        throw new TypeError(\"Argument 'json' is not an object.\");","    }","","    this._initialize();","    this.updatedOn = new Date();","    this.context.setState(serializer, json);","};","/* SERIALIZATION */","","module.exports = ActivityExecutionEngine;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":0,"21":0,"22":0,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"30":0,"32":0,"33":0,"34":0,"35":0,"38":0,"41":0,"42":0,"43":0,"44":0,"45":0,"48":1,"50":1,"53":0,"54":0,"57":0,"63":0,"68":1,"70":0,"74":1,"75":0,"78":1,"79":0,"80":0,"81":0,"85":1,"86":0,"87":0,"88":0,"89":0,"91":0,"93":0,"95":0,"97":0,"99":0,"100":0,"102":0,"104":0,"106":0,"108":0,"110":0,"112":0,"117":1,"118":0,"119":0,"122":0,"123":0,"126":0,"129":0,"130":0,"133":0,"136":0,"141":1,"142":0,"143":0,"145":0,"148":1,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"157":0,"158":0,"162":1,"163":0,"165":0,"167":0,"168":0,"169":0,"172":0,"175":1,"176":0,"178":0,"180":0,"182":0,"183":0,"184":0,"187":0,"189":0,"190":0,"191":0,"192":0,"194":0,"195":0,"196":0,"198":0,"199":0,"201":0,"202":0,"204":0,"205":0,"207":0,"208":0,"209":0,"213":0,"216":0,"221":1,"222":0,"223":0,"227":1,"228":0,"229":0,"230":0,"231":0,"232":0,"234":0,"235":0,"236":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"249":0,"253":0,"256":0,"257":0,"259":0,"260":0,"264":0,"267":0,"270":0,"274":0,"280":1,"281":0,"282":0,"285":0,"286":0,"289":1,"290":0,"291":0,"293":0,"294":0,"297":0,"298":0,"299":0,"303":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionContext.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionContext.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":1,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":1,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":1,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":1,"116":0,"117":0,"118":1,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":1,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":1,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":0,"163":1,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":1,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"fnMap":{"1":{"name":"ActivityExecutionContext","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":42}}},"2":{"name":"(anonymous_2)","line":36,"loc":{"start":{"line":36,"column":17},"end":{"line":36,"column":29}}},"3":{"name":"(anonymous_3)","line":41,"loc":{"start":{"line":41,"column":17},"end":{"line":41,"column":29}}},"4":{"name":"(anonymous_4)","line":48,"loc":{"start":{"line":48,"column":54},"end":{"line":48,"column":66}}},"5":{"name":"(anonymous_5)","line":52,"loc":{"start":{"line":52,"column":29},"end":{"line":52,"column":78}}},"6":{"name":"(anonymous_6)","line":56,"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":22}}},"7":{"name":"(anonymous_7)","line":61,"loc":{"start":{"line":61,"column":48},"end":{"line":61,"column":72}}},"8":{"name":"(anonymous_8)","line":73,"loc":{"start":{"line":73,"column":48},"end":{"line":73,"column":60}}},"9":{"name":"(anonymous_9)","line":79,"loc":{"start":{"line":79,"column":49},"end":{"line":79,"column":88}}},"10":{"name":"(anonymous_10)","line":100,"loc":{"start":{"line":100,"column":55},"end":{"line":100,"column":79}}},"11":{"name":"(anonymous_11)","line":118,"loc":{"start":{"line":118,"column":12},"end":{"line":118,"column":28}}},"12":{"name":"(anonymous_12)","line":123,"loc":{"start":{"line":123,"column":12},"end":{"line":123,"column":28}}},"13":{"name":"(anonymous_13)","line":131,"loc":{"start":{"line":131,"column":55},"end":{"line":131,"column":77}}},"14":{"name":"(anonymous_14)","line":139,"loc":{"start":{"line":139,"column":52},"end":{"line":139,"column":93}}},"15":{"name":"(anonymous_15)","line":150,"loc":{"start":{"line":150,"column":54},"end":{"line":150,"column":74}}},"16":{"name":"(anonymous_16)","line":158,"loc":{"start":{"line":158,"column":54},"end":{"line":158,"column":70}}},"17":{"name":"(anonymous_17)","line":162,"loc":{"start":{"line":162,"column":58},"end":{"line":162,"column":91}}},"18":{"name":"(anonymous_18)","line":170,"loc":{"start":{"line":170,"column":52},"end":{"line":170,"column":68}}},"19":{"name":"(anonymous_19)","line":174,"loc":{"start":{"line":174,"column":51},"end":{"line":174,"column":76}}},"20":{"name":"(anonymous_20)","line":183,"loc":{"start":{"line":183,"column":59},"end":{"line":183,"column":104}}},"21":{"name":"(anonymous_21)","line":189,"loc":{"start":{"line":189,"column":24},"end":{"line":189,"column":51}}},"22":{"name":"(anonymous_22)","line":190,"loc":{"start":{"line":190,"column":21},"end":{"line":190,"column":33}}},"23":{"name":"(anonymous_23)","line":207,"loc":{"start":{"line":207,"column":60},"end":{"line":207,"column":105}}},"24":{"name":"(anonymous_24)","line":212,"loc":{"start":{"line":212,"column":60},"end":{"line":212,"column":92}}},"25":{"name":"(anonymous_25)","line":221,"loc":{"start":{"line":221,"column":64},"end":{"line":221,"column":76}}},"26":{"name":"(anonymous_26)","line":235,"loc":{"start":{"line":235,"column":55},"end":{"line":235,"column":114}}},"27":{"name":"(anonymous_27)","line":256,"loc":{"start":{"line":256,"column":53},"end":{"line":256,"column":83}}},"28":{"name":"(anonymous_28)","line":269,"loc":{"start":{"line":269,"column":52},"end":{"line":269,"column":89}}},"29":{"name":"(anonymous_29)","line":279,"loc":{"start":{"line":279,"column":59},"end":{"line":279,"column":94}}},"30":{"name":"(anonymous_30)","line":283,"loc":{"start":{"line":283,"column":55},"end":{"line":283,"column":71}}},"31":{"name":"(anonymous_31)","line":289,"loc":{"start":{"line":289,"column":59},"end":{"line":289,"column":99}}},"32":{"name":"(anonymous_32)","line":323,"loc":{"start":{"line":323,"column":46},"end":{"line":323,"column":74}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":59}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":47}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":39}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":43}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":35}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":49}},"15":{"start":{"line":18,"column":0},"end":{"line":28,"column":1}},"16":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"17":{"start":{"line":21,"column":4},"end":{"line":21,"column":37}},"18":{"start":{"line":22,"column":4},"end":{"line":22,"column":32}},"19":{"start":{"line":23,"column":4},"end":{"line":23,"column":52}},"20":{"start":{"line":24,"column":4},"end":{"line":24,"column":29}},"21":{"start":{"line":25,"column":4},"end":{"line":25,"column":38}},"22":{"start":{"line":26,"column":4},"end":{"line":26,"column":46}},"23":{"start":{"line":27,"column":4},"end":{"line":27,"column":25}},"24":{"start":{"line":30,"column":0},"end":{"line":30,"column":54}},"25":{"start":{"line":32,"column":0},"end":{"line":46,"column":2}},"26":{"start":{"line":37,"column":16},"end":{"line":37,"column":52}},"27":{"start":{"line":42,"column":16},"end":{"line":42,"column":52}},"28":{"start":{"line":48,"column":0},"end":{"line":59,"column":2}},"29":{"start":{"line":49,"column":4},"end":{"line":49,"column":20}},"30":{"start":{"line":50,"column":4},"end":{"line":58,"column":11}},"31":{"start":{"line":53,"column":16},"end":{"line":53,"column":108}},"32":{"start":{"line":57,"column":12},"end":{"line":57,"column":46}},"33":{"start":{"line":61,"column":0},"end":{"line":71,"column":2}},"34":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"35":{"start":{"line":63,"column":8},"end":{"line":63,"column":59}},"36":{"start":{"line":65,"column":4},"end":{"line":67,"column":5}},"37":{"start":{"line":66,"column":8},"end":{"line":66,"column":81}},"38":{"start":{"line":69,"column":4},"end":{"line":69,"column":37}},"39":{"start":{"line":70,"column":4},"end":{"line":70,"column":60}},"40":{"start":{"line":73,"column":0},"end":{"line":77,"column":2}},"41":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"42":{"start":{"line":75,"column":8},"end":{"line":75,"column":55}},"43":{"start":{"line":79,"column":0},"end":{"line":98,"column":2}},"44":{"start":{"line":80,"column":4},"end":{"line":80,"column":42}},"45":{"start":{"line":81,"column":4},"end":{"line":81,"column":53}},"46":{"start":{"line":82,"column":4},"end":{"line":88,"column":5}},"47":{"start":{"line":83,"column":8},"end":{"line":83,"column":28}},"48":{"start":{"line":84,"column":8},"end":{"line":84,"column":41}},"49":{"start":{"line":86,"column":9},"end":{"line":88,"column":5}},"50":{"start":{"line":87,"column":8},"end":{"line":87,"column":115}},"51":{"start":{"line":90,"column":4},"end":{"line":90,"column":51}},"52":{"start":{"line":91,"column":4},"end":{"line":91,"column":63}},"53":{"start":{"line":92,"column":4},"end":{"line":92,"column":52}},"54":{"start":{"line":94,"column":4},"end":{"line":97,"column":5}},"55":{"start":{"line":95,"column":8},"end":{"line":95,"column":53}},"56":{"start":{"line":96,"column":8},"end":{"line":96,"column":53}},"57":{"start":{"line":100,"column":0},"end":{"line":129,"column":2}},"58":{"start":{"line":101,"column":4},"end":{"line":101,"column":20}},"59":{"start":{"line":103,"column":4},"end":{"line":103,"column":11}},"60":{"start":{"line":104,"column":4},"end":{"line":112,"column":5}},"61":{"start":{"line":105,"column":8},"end":{"line":105,"column":26}},"62":{"start":{"line":107,"column":9},"end":{"line":112,"column":5}},"63":{"start":{"line":108,"column":8},"end":{"line":108,"column":37}},"64":{"start":{"line":111,"column":8},"end":{"line":111,"column":67}},"65":{"start":{"line":113,"column":4},"end":{"line":113,"column":45}},"66":{"start":{"line":114,"column":4},"end":{"line":127,"column":5}},"67":{"start":{"line":115,"column":8},"end":{"line":115,"column":47}},"68":{"start":{"line":116,"column":8},"end":{"line":120,"column":15}},"69":{"start":{"line":119,"column":16},"end":{"line":119,"column":58}},"70":{"start":{"line":121,"column":8},"end":{"line":125,"column":15}},"71":{"start":{"line":124,"column":16},"end":{"line":124,"column":58}},"72":{"start":{"line":126,"column":8},"end":{"line":126,"column":44}},"73":{"start":{"line":128,"column":4},"end":{"line":128,"column":17}},"74":{"start":{"line":131,"column":0},"end":{"line":137,"column":2}},"75":{"start":{"line":132,"column":4},"end":{"line":132,"column":57}},"76":{"start":{"line":133,"column":4},"end":{"line":135,"column":5}},"77":{"start":{"line":134,"column":8},"end":{"line":134,"column":96}},"78":{"start":{"line":136,"column":4},"end":{"line":136,"column":20}},"79":{"start":{"line":139,"column":0},"end":{"line":148,"column":2}},"80":{"start":{"line":140,"column":4},"end":{"line":146,"column":11}},"81":{"start":{"line":147,"column":4},"end":{"line":147,"column":16}},"82":{"start":{"line":150,"column":0},"end":{"line":156,"column":2}},"83":{"start":{"line":151,"column":4},"end":{"line":151,"column":48}},"84":{"start":{"line":152,"column":4},"end":{"line":154,"column":5}},"85":{"start":{"line":153,"column":8},"end":{"line":153,"column":98}},"86":{"start":{"line":155,"column":4},"end":{"line":155,"column":49}},"87":{"start":{"line":158,"column":0},"end":{"line":160,"column":2}},"88":{"start":{"line":159,"column":4},"end":{"line":159,"column":37}},"89":{"start":{"line":162,"column":0},"end":{"line":168,"column":2}},"90":{"start":{"line":163,"column":4},"end":{"line":163,"column":39}},"91":{"start":{"line":164,"column":4},"end":{"line":166,"column":5}},"92":{"start":{"line":165,"column":8},"end":{"line":165,"column":62}},"93":{"start":{"line":167,"column":4},"end":{"line":167,"column":36}},"94":{"start":{"line":170,"column":0},"end":{"line":172,"column":2}},"95":{"start":{"line":171,"column":4},"end":{"line":171,"column":33}},"96":{"start":{"line":174,"column":0},"end":{"line":181,"column":2}},"97":{"start":{"line":175,"column":4},"end":{"line":180,"column":5}},"98":{"start":{"line":176,"column":8},"end":{"line":176,"column":43}},"99":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"100":{"start":{"line":178,"column":12},"end":{"line":178,"column":36}},"101":{"start":{"line":183,"column":0},"end":{"line":205,"column":2}},"102":{"start":{"line":184,"column":4},"end":{"line":184,"column":39}},"103":{"start":{"line":185,"column":4},"end":{"line":187,"column":5}},"104":{"start":{"line":186,"column":8},"end":{"line":186,"column":112}},"105":{"start":{"line":188,"column":4},"end":{"line":188,"column":20}},"106":{"start":{"line":189,"column":4},"end":{"line":204,"column":7}},"107":{"start":{"line":190,"column":8},"end":{"line":203,"column":11}},"108":{"start":{"line":191,"column":12},"end":{"line":202,"column":13}},"109":{"start":{"line":192,"column":16},"end":{"line":192,"column":47}},"110":{"start":{"line":193,"column":16},"end":{"line":197,"column":17}},"111":{"start":{"line":195,"column":20},"end":{"line":195,"column":114}},"112":{"start":{"line":196,"column":20},"end":{"line":196,"column":34}},"113":{"start":{"line":198,"column":16},"end":{"line":198,"column":31}},"114":{"start":{"line":201,"column":16},"end":{"line":201,"column":26}},"115":{"start":{"line":207,"column":0},"end":{"line":210,"column":2}},"116":{"start":{"line":208,"column":4},"end":{"line":208,"column":39}},"117":{"start":{"line":209,"column":4},"end":{"line":209,"column":54}},"118":{"start":{"line":212,"column":0},"end":{"line":219,"column":2}},"119":{"start":{"line":213,"column":4},"end":{"line":213,"column":20}},"120":{"start":{"line":214,"column":4},"end":{"line":214,"column":39}},"121":{"start":{"line":215,"column":4},"end":{"line":217,"column":5}},"122":{"start":{"line":216,"column":8},"end":{"line":216,"column":151}},"123":{"start":{"line":218,"column":4},"end":{"line":218,"column":85}},"124":{"start":{"line":221,"column":0},"end":{"line":233,"column":2}},"125":{"start":{"line":222,"column":4},"end":{"line":222,"column":20}},"126":{"start":{"line":223,"column":4},"end":{"line":223,"column":48}},"127":{"start":{"line":224,"column":4},"end":{"line":231,"column":5}},"128":{"start":{"line":225,"column":8},"end":{"line":225,"column":51}},"129":{"start":{"line":226,"column":8},"end":{"line":228,"column":9}},"130":{"start":{"line":227,"column":12},"end":{"line":227,"column":163}},"131":{"start":{"line":229,"column":8},"end":{"line":229,"column":105}},"132":{"start":{"line":230,"column":8},"end":{"line":230,"column":20}},"133":{"start":{"line":232,"column":4},"end":{"line":232,"column":17}},"134":{"start":{"line":235,"column":0},"end":{"line":254,"column":2}},"135":{"start":{"line":236,"column":4},"end":{"line":236,"column":34}},"136":{"start":{"line":237,"column":4},"end":{"line":239,"column":5}},"137":{"start":{"line":238,"column":8},"end":{"line":238,"column":46}},"138":{"start":{"line":240,"column":4},"end":{"line":240,"column":34}},"139":{"start":{"line":241,"column":4},"end":{"line":246,"column":5}},"140":{"start":{"line":242,"column":8},"end":{"line":242,"column":41}},"141":{"start":{"line":243,"column":8},"end":{"line":245,"column":9}},"142":{"start":{"line":244,"column":12},"end":{"line":244,"column":22}},"143":{"start":{"line":248,"column":4},"end":{"line":250,"column":5}},"144":{"start":{"line":249,"column":8},"end":{"line":249,"column":161}},"145":{"start":{"line":253,"column":4},"end":{"line":253,"column":58}},"146":{"start":{"line":256,"column":0},"end":{"line":267,"column":2}},"147":{"start":{"line":257,"column":4},"end":{"line":257,"column":20}},"148":{"start":{"line":258,"column":4},"end":{"line":258,"column":27}},"149":{"start":{"line":259,"column":4},"end":{"line":261,"column":5}},"150":{"start":{"line":260,"column":8},"end":{"line":260,"column":47}},"151":{"start":{"line":262,"column":4},"end":{"line":266,"column":5}},"152":{"start":{"line":263,"column":8},"end":{"line":265,"column":9}},"153":{"start":{"line":264,"column":12},"end":{"line":264,"column":44}},"154":{"start":{"line":269,"column":0},"end":{"line":277,"column":2}},"155":{"start":{"line":270,"column":4},"end":{"line":270,"column":20}},"156":{"start":{"line":271,"column":4},"end":{"line":271,"column":27}},"157":{"start":{"line":272,"column":4},"end":{"line":272,"column":51}},"158":{"start":{"line":273,"column":4},"end":{"line":275,"column":5}},"159":{"start":{"line":274,"column":8},"end":{"line":274,"column":47}},"160":{"start":{"line":276,"column":4},"end":{"line":276,"column":64}},"161":{"start":{"line":279,"column":0},"end":{"line":281,"column":2}},"162":{"start":{"line":280,"column":4},"end":{"line":280,"column":72}},"163":{"start":{"line":283,"column":0},"end":{"line":285,"column":2}},"164":{"start":{"line":284,"column":4},"end":{"line":284,"column":48}},"165":{"start":{"line":289,"column":0},"end":{"line":321,"column":2}},"166":{"start":{"line":290,"column":4},"end":{"line":292,"column":5}},"167":{"start":{"line":291,"column":8},"end":{"line":291,"column":74}},"168":{"start":{"line":294,"column":4},"end":{"line":294,"column":35}},"169":{"start":{"line":295,"column":4},"end":{"line":297,"column":5}},"170":{"start":{"line":296,"column":8},"end":{"line":296,"column":53}},"171":{"start":{"line":299,"column":4},"end":{"line":299,"column":104}},"172":{"start":{"line":301,"column":4},"end":{"line":301,"column":19}},"173":{"start":{"line":302,"column":4},"end":{"line":315,"column":5}},"174":{"start":{"line":303,"column":8},"end":{"line":307,"column":11}},"175":{"start":{"line":310,"column":8},"end":{"line":314,"column":10}},"176":{"start":{"line":317,"column":4},"end":{"line":320,"column":6}},"177":{"start":{"line":323,"column":0},"end":{"line":365,"column":2}},"178":{"start":{"line":324,"column":4},"end":{"line":326,"column":5}},"179":{"start":{"line":325,"column":8},"end":{"line":325,"column":74}},"180":{"start":{"line":327,"column":4},"end":{"line":329,"column":5}},"181":{"start":{"line":328,"column":8},"end":{"line":328,"column":65}},"182":{"start":{"line":331,"column":4},"end":{"line":353,"column":5}},"183":{"start":{"line":332,"column":8},"end":{"line":332,"column":41}},"184":{"start":{"line":333,"column":8},"end":{"line":335,"column":9}},"185":{"start":{"line":334,"column":12},"end":{"line":334,"column":108}},"186":{"start":{"line":336,"column":8},"end":{"line":338,"column":9}},"187":{"start":{"line":337,"column":12},"end":{"line":337,"column":103}},"188":{"start":{"line":341,"column":8},"end":{"line":343,"column":9}},"189":{"start":{"line":342,"column":12},"end":{"line":342,"column":102}},"190":{"start":{"line":344,"column":8},"end":{"line":346,"column":9}},"191":{"start":{"line":345,"column":12},"end":{"line":345,"column":97}},"192":{"start":{"line":348,"column":8},"end":{"line":352,"column":10}},"193":{"start":{"line":355,"column":4},"end":{"line":361,"column":5}},"194":{"start":{"line":356,"column":8},"end":{"line":356,"column":59}},"195":{"start":{"line":357,"column":8},"end":{"line":359,"column":9}},"196":{"start":{"line":358,"column":12},"end":{"line":358,"column":85}},"197":{"start":{"line":360,"column":8},"end":{"line":360,"column":27}},"198":{"start":{"line":363,"column":4},"end":{"line":363,"column":37}},"199":{"start":{"line":364,"column":4},"end":{"line":364,"column":53}},"200":{"start":{"line":368,"column":0},"end":{"line":368,"column":42}}},"branchMap":{"1":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"2":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"3":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"4":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"5":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":9},"end":{"line":86,"column":9}},{"start":{"line":86,"column":9},"end":{"line":86,"column":9}}]},"6":{"line":91,"type":"cond-expr","locations":[{"start":{"line":91,"column":38},"end":{"line":91,"column":55}},{"start":{"line":91,"column":58},"end":{"line":91,"column":62}}]},"7":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"8":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":9},"end":{"line":107,"column":9}},{"start":{"line":107,"column":9},"end":{"line":107,"column":9}}]},"9":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"10":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":4},"end":{"line":133,"column":4}},{"start":{"line":133,"column":4},"end":{"line":133,"column":4}}]},"11":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":4},"end":{"line":152,"column":4}},{"start":{"line":152,"column":4},"end":{"line":152,"column":4}}]},"12":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":4},"end":{"line":164,"column":4}},{"start":{"line":164,"column":4},"end":{"line":164,"column":4}}]},"13":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":8},"end":{"line":164,"column":25}},{"start":{"line":164,"column":29},"end":{"line":164,"column":44}}]},"14":{"line":167,"type":"cond-expr","locations":[{"start":{"line":167,"column":16},"end":{"line":167,"column":28}},{"start":{"line":167,"column":31},"end":{"line":167,"column":35}}]},"15":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":8}},{"start":{"line":177,"column":8},"end":{"line":177,"column":8}}]},"16":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":4},"end":{"line":185,"column":4}},{"start":{"line":185,"column":4},"end":{"line":185,"column":4}}]},"17":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":16},"end":{"line":193,"column":16}},{"start":{"line":193,"column":16},"end":{"line":193,"column":16}}]},"18":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":215,"column":4}},{"start":{"line":215,"column":4},"end":{"line":215,"column":4}}]},"19":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":4},"end":{"line":224,"column":4}},{"start":{"line":224,"column":4},"end":{"line":224,"column":4}}]},"20":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":8},"end":{"line":226,"column":8}},{"start":{"line":226,"column":8},"end":{"line":226,"column":8}}]},"21":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":4}},{"start":{"line":237,"column":4},"end":{"line":237,"column":4}}]},"22":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":4},"end":{"line":241,"column":4}},{"start":{"line":241,"column":4},"end":{"line":241,"column":4}}]},"23":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":8},"end":{"line":243,"column":8}},{"start":{"line":243,"column":8},"end":{"line":243,"column":8}}]},"24":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":4},"end":{"line":248,"column":4}},{"start":{"line":248,"column":4},"end":{"line":248,"column":4}}]},"25":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":8},"end":{"line":263,"column":8}},{"start":{"line":263,"column":8},"end":{"line":263,"column":8}}]},"26":{"line":290,"type":"if","locations":[{"start":{"line":290,"column":4},"end":{"line":290,"column":4}},{"start":{"line":290,"column":4},"end":{"line":290,"column":4}}]},"27":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":8},"end":{"line":290,"column":18}},{"start":{"line":290,"column":22},"end":{"line":290,"column":54}}]},"28":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":4},"end":{"line":302,"column":4}},{"start":{"line":302,"column":4},"end":{"line":302,"column":4}}]},"29":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":4},"end":{"line":324,"column":4}},{"start":{"line":324,"column":4},"end":{"line":324,"column":4}}]},"30":{"line":324,"type":"binary-expr","locations":[{"start":{"line":324,"column":8},"end":{"line":324,"column":18}},{"start":{"line":324,"column":22},"end":{"line":324,"column":56}}]},"31":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":4},"end":{"line":327,"column":4}},{"start":{"line":327,"column":4},"end":{"line":327,"column":4}}]},"32":{"line":331,"type":"if","locations":[{"start":{"line":331,"column":4},"end":{"line":331,"column":4}},{"start":{"line":331,"column":4},"end":{"line":331,"column":4}}]},"33":{"line":333,"type":"if","locations":[{"start":{"line":333,"column":8},"end":{"line":333,"column":8}},{"start":{"line":333,"column":8},"end":{"line":333,"column":8}}]},"34":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":8},"end":{"line":336,"column":8}},{"start":{"line":336,"column":8},"end":{"line":336,"column":8}}]},"35":{"line":341,"type":"if","locations":[{"start":{"line":341,"column":8},"end":{"line":341,"column":8}},{"start":{"line":341,"column":8},"end":{"line":341,"column":8}}]},"36":{"line":344,"type":"if","locations":[{"start":{"line":344,"column":8},"end":{"line":344,"column":8}},{"start":{"line":344,"column":8},"end":{"line":344,"column":8}}]},"37":{"line":357,"type":"if","locations":[{"start":{"line":357,"column":8},"end":{"line":357,"column":8}},{"start":{"line":357,"column":8},"end":{"line":357,"column":8}}]}},"code":["\"use strict\";","","let ActivityExecutionState = require(\"./activityExecutionState\");","let ResumeBookmarkQueue = require(\"./resumeBookmarkQueue\");","let enums = require(\"../common/enums\");","let errors = require(\"../common/errors\");","let util = require(\"util\");","let EventEmitter = require(\"events\").EventEmitter;","let _ = require(\"lodash\");","let constants = require(\"../common/constants\");","let ScopeTree = require(\"./scopeTree\");","let is = require(\"../common/is\");","let CallContext = require(\"./callContext\");","let assert = require(\"better-assert\");","let Bluebird = require(\"bluebird\");","let converters = require(\"../common/converters\");","","function ActivityExecutionContext(engine) {","    EventEmitter.call(this);","","    this._activityStates = new Map();","    this._bookmarks = new Map();","    this._resumeBMQueue = new ResumeBookmarkQueue();","    this.rootActivity = null;","    this._knownActivities = new Map();","    this._scopeTree = this._createScopeTree();","    this.engine = engine; // Could be null in special cases, see workflowRegistry.js","}","","util.inherits(ActivityExecutionContext, EventEmitter);","","Object.defineProperties(","    ActivityExecutionContext.prototype,","    {","        scope: {","            get: function () {","                return this._scopeTree.currentScope;","            }","        },","        hasScope: {","            get: function () {","                return !this._scopeTree.isOnInitial;","            }","        }","    }",");","","ActivityExecutionContext.prototype._createScopeTree = function () {","    let self = this;","    return new ScopeTree(","        {","            resultCollected: function (context, reason, result, bookmarkName) {","                context.activity.resultCollected.call(context.scope, context, reason, result, bookmarkName);","            }","        },","        function (id) {","            return self._getKnownActivity(id);","        });","};","","ActivityExecutionContext.prototype.initialize = function (rootActivity) {","    if (this.rootActivity) {","        throw new Error(\"Context is already initialized.\");","    }","    if (!is.activity(rootActivity)) {","        throw new TypeError(\"Argument 'rootActivity' value is not an activity.\");","    }","","    this.rootActivity = rootActivity;","    this._initialize(null, rootActivity, { instanceId: 0 });","};","","ActivityExecutionContext.prototype._checkInit = function () {","    if (!this.rootActivity) {","        throw new Error(\"Context is not initialized.\");","    }","};","","ActivityExecutionContext.prototype._initialize = function (parent, activity, idCounter) {","    let activityId = activity._instanceId;","    let nextId = (idCounter.instanceId++).toString();","    if (!activityId) {","        activityId = nextId;","        activity.instanceId = activityId;","    }","    else if (activityId !== nextId) {","        throw new errors.ActivityRuntimeError(\"Activity \" + activity + \" has been assigned to an other position.\");","    }","","    let state = this.getExecutionState(activityId);","    state.parentInstanceId = parent ? parent.instanceId : null;","    this._knownActivities.set(activityId, activity);","","    for (let child of activity.immediateChildren(this)) {","        this._initialize(activity, child, idCounter);","        state.childInstanceIds.add(child.instanceId);","    }","};","","ActivityExecutionContext.prototype.getExecutionState = function (idOrActivity) {","    let self = this;","","    let id;","    if (_.isString(idOrActivity)) {","        id = idOrActivity;","    }","    else if (is.activity(idOrActivity)) {","        id = idOrActivity.instanceId;","    }","    else {","        throw new TypeError(\"Cannot get state of \" + idOrActivity);","    }","    let state = self._activityStates.get(id);","    if (_.isUndefined(state)) {","        state = new ActivityExecutionState(id);","        state.on(","            enums.activityStates.run,","            function (args) {","                self.emit(enums.activityStates.run, args);","            });","        state.on(","            enums.activityStates.end,","            function (args) {","                self.emit(enums.activityStates.end, args);","            });","        self._activityStates.set(id, state);","    }","    return state;","};","","ActivityExecutionContext.prototype._getKnownActivity = function (activityId) {","    let activity = this._knownActivities.get(activityId);","    if (!activity) {","        throw new errors.ActivityRuntimeError(\"Activity by id '\" + activityId + \"' not found.\");","    }","    return activity;","};","","ActivityExecutionContext.prototype.createBookmark = function (activityId, name, endCallback) {","    this.registerBookmark(","        {","            name: name,","            instanceId: activityId,","            timestamp: new Date().getTime(),","            endCallback: endCallback","        });","    return name;","};","","ActivityExecutionContext.prototype.registerBookmark = function (bookmark) {","    let bm = this._bookmarks.get(bookmark.name);","    if (bm) {","        throw new errors.ActivityRuntimeError(\"Bookmark '\" + bookmark.name + \"' already exists.\");","    }","    this._bookmarks.set(bookmark.name, bookmark);","};","","ActivityExecutionContext.prototype.isBookmarkExists = function (name) {","    return this._bookmarks.has(name);","};","","ActivityExecutionContext.prototype.getBookmarkTimestamp = function (name, throwIfNotFound) {","    let bm = this._bookmarks.get(name);","    if (_.isUndefined(bm) && throwIfNotFound) {","        throw new Error(\"Bookmark '\" + name + \"' not found.\");","    }","    return bm ? bm.timestamp : null;","};","","ActivityExecutionContext.prototype.deleteBookmark = function (name) {","    this._bookmarks.delete(name);","};","","ActivityExecutionContext.prototype.noopCallbacks = function (bookmarkNames) {","    for (let name of bookmarkNames) {","        let bm = this._bookmarks.get(name);","        if (bm) {","            bm.endCallback = _.noop;","        }","    }","};","","ActivityExecutionContext.prototype.resumeBookmarkInScope = function (callContext, name, reason, result) {","    let bm = this._bookmarks.get(name);","    if (_.isUndefined(bm)) {","        throw new Error(\"Bookmark '\" + name + \"' doesn't exists. Cannot continue with reason: \" + reason + \".\");","    }","    let self = this;","    return new Bluebird(function (resolve, reject) {","        setImmediate(function () {","            try {","                bm = self._bookmarks.get(name);","                if (bm) {","                    // If bm is still exists.","                    self._doResumeBookmark(callContext, bm, reason, result, reason === enums.activityStates.idle);","                    resolve(true);","                }","                resolve(false);","            }","            catch (e) {","                reject(e);","            }","        });","    });","};","","ActivityExecutionContext.prototype.resumeBookmarkInternal = function (callContext, name, reason, result) {","    let bm = this._bookmarks.get(name);","    this._resumeBMQueue.enqueue(name, reason, result);","};","","ActivityExecutionContext.prototype.resumeBookmarkExternal = function (name, reason, result) {","    let self = this;","    let bm = self._bookmarks.get(name);","    if (!bm) {","        throw new errors.BookmarkNotFoundError(\"Internal resume bookmark request cannot be processed because bookmark '\" + name + \"' doesn't exists.\");","    }","    self._doResumeBookmark(new CallContext(this, bm.instanceId), bm, reason, result);","};","","ActivityExecutionContext.prototype.processResumeBookmarkQueue = function () {","    let self = this;","    let command = self._resumeBMQueue.dequeue();","    if (command) {","        let bm = self._bookmarks.get(command.name);","        if (!bm) {","            throw new errors.BookmarkNotFoundError(\"Internal resume bookmark request cannot be processed because bookmark '\" + command.name + \"' doesn't exists.\");","        }","        self._doResumeBookmark(new CallContext(this, bm.instanceId), bm, command.reason, command.result);","        return true;","    }","    return false;","};","","ActivityExecutionContext.prototype._doResumeBookmark = function (callContext, bookmark, reason, result, noRemove) {","    let scope = callContext.scope;","    if (!noRemove) {","        this._bookmarks.delete(bookmark.name);","    }","    let cb = bookmark.endCallback;","    if (_.isString(cb)) {","        cb = scope[bookmark.endCallback];","        if (!_.isFunction(cb)) {","            cb = null;","        }","    }","","    if (!cb) {","        throw new errors.ActivityRuntimeError(\"Bookmark's '\" + bookmark.name + \"' callback '\" + bookmark.endCallback + \"' is not defined on the current scope.\");","    }","","    // TODO: if it fails, resume on default callback with the error!","    cb.call(scope, callContext, reason, result, bookmark);","};","","ActivityExecutionContext.prototype.cancelExecution = function (scope, activityIds) {","    let self = this;","    let allIds = new Set();","    for (let id of activityIds) {","        self._cancelSubtree(scope, allIds, id);","    }","    for (let bm of self._bookmarks.values()) {","        if (allIds.has(bm.instanceId)) {","            self._bookmarks.delete(bm.name);","        }","    }","};","","ActivityExecutionContext.prototype._cancelSubtree = function (scope, allIds, activityId) {","    let self = this;","    allIds.add(activityId);","    let state = self.getExecutionState(activityId);","    for (let id of state.childInstanceIds.values()) {","        self._cancelSubtree(scope, allIds, id);","    }","    state.reportState(enums.activityStates.cancel, null, scope);","};","","ActivityExecutionContext.prototype.deleteScopeOfActivity = function (callContext, activityId) {","    this._scopeTree.deleteScopePart(callContext.instanceId, activityId);","};","","ActivityExecutionContext.prototype.emitWorkflowEvent = function (args) {","    this.emit(enums.events.workflowEvent, args);","};","","/* SERIALIZATION */","","ActivityExecutionContext.prototype.getStateAndPromotions = function (serializer, enablePromotions) {","    if (serializer && !_.isFunction(serializer.toJSON)) {","        throw new TypeError(\"Argument 'serializer' is not a serializer.\");","    }","","    let activityStates = new Map();","    for (let s of this._activityStates.values()) {","        activityStates.set(s.instanceId, s.asJSON());","    }","","    let scopeStateAndPromotions = this._scopeTree.getExecutionState(this, enablePromotions, serializer);","","    let serialized;","    if (serializer) {","        serialized = serializer.toJSON({","            activityStates: activityStates,","            bookmarks: this._bookmarks,","            scope: scopeStateAndPromotions.state","        });","    }","    else {","        serialized = {","            activityStates: converters.mapToArray(activityStates),","            bookmarks: converters.mapToArray(this._bookmarks),","            scope: scopeStateAndPromotions.state","        };","    }","","    return {","        state: serialized,","        promotedProperties: scopeStateAndPromotions.promotedProperties","    };","};","","ActivityExecutionContext.prototype.setState = function (serializer, json) {","    if (serializer && !_.isFunction(serializer.fromJSON)) {","        throw new TypeError(\"Argument 'serializer' is not a serializer.\");","    }","    if (!_.isObject(json)) {","        throw new TypeError(\"Argument 'json' is not an object.\");","    }","","    if (serializer) {","        json = serializer.fromJSON(json);","        if (!(json.activityStates instanceof Map)) {","            throw new TypeError(\"activityStates property value of argument 'json' is not an Map instance.\");","        }","        if (!(json.bookmarks instanceof Map)) {","            throw new TypeError(\"Bookmarks property value of argument 'json' is not an Map instance.\");","        }","    }","    else {","        if (!json.activityStates) {","            throw new TypeError(\"activityStates property value of argument 'json' is not an object.\");","        }","        if (!json.bookmarks) {","            throw new TypeError(\"Bookmarks property value of argument 'json' is not an object.\");","        }","","        json = {","            activityStates: converters.arrayToMap(json.activityStates),","            bookmarks: converters.arrayToMap(json.bookmarks),","            scope: json.scope","        };","    }","","    for (let s of this._activityStates.values()) {","        let stored = json.activityStates.get(s.instanceId);","        if (_.isUndefined(stored)) {","            throw new Error(\"Activity's of '\" + s.instanceId + \"' state not found.\");","        }","        s.fromJSON(stored);","    }","","    this._bookmarks = json.bookmarks;","    this._scopeTree.setState(json.scope, serializer);","};","/* SERIALIZATION */","","module.exports = ActivityExecutionContext;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"18":1,"19":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"30":1,"32":1,"37":0,"42":0,"48":1,"49":0,"50":0,"53":0,"57":0,"61":1,"62":0,"63":0,"65":0,"66":0,"69":0,"70":0,"73":1,"74":0,"75":0,"79":1,"80":0,"81":0,"82":0,"83":0,"84":0,"86":0,"87":0,"90":0,"91":0,"92":0,"94":0,"95":0,"96":0,"100":1,"101":0,"103":0,"104":0,"105":0,"107":0,"108":0,"111":0,"113":0,"114":0,"115":0,"116":0,"119":0,"121":0,"124":0,"126":0,"128":0,"131":1,"132":0,"133":0,"134":0,"136":0,"139":1,"140":0,"147":0,"150":1,"151":0,"152":0,"153":0,"155":0,"158":1,"159":0,"162":1,"163":0,"164":0,"165":0,"167":0,"170":1,"171":0,"174":1,"175":0,"176":0,"177":0,"178":0,"183":1,"184":0,"185":0,"186":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"195":0,"196":0,"198":0,"201":0,"207":1,"208":0,"209":0,"212":1,"213":0,"214":0,"215":0,"216":0,"218":0,"221":1,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"229":0,"230":0,"232":0,"235":1,"236":0,"237":0,"238":0,"240":0,"241":0,"242":0,"243":0,"244":0,"248":0,"249":0,"253":0,"256":1,"257":0,"258":0,"259":0,"260":0,"262":0,"263":0,"264":0,"269":1,"270":0,"271":0,"272":0,"273":0,"274":0,"276":0,"279":1,"280":0,"283":1,"284":0,"289":1,"290":0,"291":0,"294":0,"295":0,"296":0,"299":0,"301":0,"302":0,"303":0,"310":0,"317":0,"323":1,"324":0,"325":0,"327":0,"328":0,"331":0,"332":0,"333":0,"334":0,"336":0,"337":0,"341":0,"342":0,"344":0,"345":0,"348":0,"355":0,"356":0,"357":0,"358":0,"360":0,"363":0,"364":0,"368":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionState.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityExecutionState.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"ActivityExecutionState","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":52}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":25}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":47},"end":{"line":26,"column":80}}},"4":{"name":"(anonymous_4)","line":37,"loc":{"start":{"line":37,"column":45},"end":{"line":37,"column":70}}},"5":{"name":"(anonymous_5)","line":45,"loc":{"start":{"line":45,"column":46},"end":{"line":45,"column":62}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":42},"end":{"line":53,"column":54}}},"7":{"name":"(anonymous_7)","line":59,"loc":{"start":{"line":59,"column":44},"end":{"line":59,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":39}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}},"6":{"start":{"line":9,"column":0},"end":{"line":14,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":26}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":33}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":38}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":52}},"12":{"start":{"line":18,"column":0},"end":{"line":24,"column":3}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":63}},"14":{"start":{"line":26,"column":0},"end":{"line":35,"column":2}},"15":{"start":{"line":27,"column":4},"end":{"line":34,"column":5}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":32}},"17":{"start":{"line":29,"column":8},"end":{"line":33,"column":11}},"18":{"start":{"line":37,"column":0},"end":{"line":43,"column":2}},"19":{"start":{"line":38,"column":4},"end":{"line":42,"column":7}},"20":{"start":{"line":45,"column":0},"end":{"line":50,"column":2}},"21":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"22":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"23":{"start":{"line":48,"column":8},"end":{"line":48,"column":50}},"24":{"start":{"line":53,"column":0},"end":{"line":57,"column":2}},"25":{"start":{"line":54,"column":4},"end":{"line":56,"column":6}},"26":{"start":{"line":59,"column":0},"end":{"line":73,"column":2}},"27":{"start":{"line":60,"column":4},"end":{"line":62,"column":5}},"28":{"start":{"line":61,"column":8},"end":{"line":61,"column":57}},"29":{"start":{"line":63,"column":4},"end":{"line":70,"column":5}},"30":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"31":{"start":{"line":65,"column":12},"end":{"line":65,"column":95}},"32":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"33":{"start":{"line":68,"column":12},"end":{"line":68,"column":115}},"34":{"start":{"line":72,"column":4},"end":{"line":72,"column":36}},"35":{"start":{"line":76,"column":0},"end":{"line":76,"column":40}}},"branchMap":{"1":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"2":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"3":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"4":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"5":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":64,"column":8}},{"start":{"line":64,"column":8},"end":{"line":64,"column":8}}]},"6":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]}},"code":["\"use strict\";","","let EventEmitter = require('events').EventEmitter;","let util = require(\"util\");","let enums = require(\"../common/enums\");","let is = require(\"../common/is\");","let _ = require(\"lodash\");","","function ActivityExecutionState(activityInstanceId) {","    this.instanceId = activityInstanceId;","    this.execState = null;","    this.parentInstanceId = null;","    this.childInstanceIds = new Set();","}","","util.inherits(ActivityExecutionState, EventEmitter);","","Object.defineProperties(ActivityExecutionState.prototype, {","    isRunning: {","        get: function () {","            return this.execState === enums.activityStates.run;","        }","    }","});","","ActivityExecutionState.prototype.reportState = function (reason, result, scope) {","    if (this.execState !== reason) {","        this.execState = reason;","        this._emitState({","            reason: reason,","            result: result,","            scope: scope","        });","    }","};","","ActivityExecutionState.prototype.emitState = function (result, scope) {","    this._emitState({","        reason: this.execState,","        result: result,","        scope: scope","    });","};","","ActivityExecutionState.prototype._emitState = function (args) {","    this.emit(args.reason, args);","    if (args.reason !== enums.activityStates.run) {","        this.emit(enums.activityStates.end, args);","    }","};","","/* SERIALIZATION */","ActivityExecutionState.prototype.asJSON = function () {","    return {","        execState: this.execState","    };","};","","ActivityExecutionState.prototype.fromJSON = function (json) {","    if (!_.isObject(json)) {","        throw new TypeError(\"Object argument expected.\");","    }","    if (json.execState !== null) {","        if (!_.isString(json.execState)) {","            throw new TypeError(\"Argument object's execState property value is not a string.\");","        }","        if (_.isUndefined(enums.activityStates[json.execState])) {","            throw new TypeError(\"Argument object's execState property value is not a valid Activity state value.\");","        }","    }","","    this.execState = json.execState;","};","/* SERIALIZATION */","","module.exports = ActivityExecutionState;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"11":0,"12":0,"13":0,"16":1,"18":1,"21":0,"26":1,"27":0,"28":0,"29":0,"37":1,"38":0,"45":1,"46":0,"47":0,"48":0,"53":1,"54":0,"59":1,"60":0,"61":0,"63":0,"64":0,"65":0,"67":0,"68":0,"72":0,"76":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/resumeBookmarkQueue.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/resumeBookmarkQueue.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"ResumeBookmarkQueue","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":40},"end":{"line":10,"column":52}}},"3":{"name":"(anonymous_3)","line":14,"loc":{"start":{"line":14,"column":40},"end":{"line":14,"column":80}}},"4":{"name":"(anonymous_4)","line":29,"loc":{"start":{"line":29,"column":40},"end":{"line":29,"column":52}}},"5":{"name":"(anonymous_5)","line":39,"loc":{"start":{"line":39,"column":39},"end":{"line":39,"column":63}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":1}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":10,"column":0},"end":{"line":12,"column":2}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":39}},"7":{"start":{"line":14,"column":0},"end":{"line":27,"column":2}},"8":{"start":{"line":15,"column":4},"end":{"line":26,"column":5}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":38}},"10":{"start":{"line":17,"column":8},"end":{"line":22,"column":15}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":116}},"12":{"start":{"line":29,"column":0},"end":{"line":37,"column":2}},"13":{"start":{"line":30,"column":4},"end":{"line":35,"column":5}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"15":{"start":{"line":32,"column":8},"end":{"line":32,"column":36}},"16":{"start":{"line":33,"column":8},"end":{"line":33,"column":41}},"17":{"start":{"line":34,"column":8},"end":{"line":34,"column":23}},"18":{"start":{"line":36,"column":4},"end":{"line":36,"column":16}},"19":{"start":{"line":39,"column":0},"end":{"line":54,"column":2}},"20":{"start":{"line":40,"column":4},"end":{"line":53,"column":5}},"21":{"start":{"line":41,"column":8},"end":{"line":41,"column":21}},"22":{"start":{"line":42,"column":8},"end":{"line":48,"column":9}},"23":{"start":{"line":43,"column":12},"end":{"line":43,"column":44}},"24":{"start":{"line":44,"column":12},"end":{"line":47,"column":13}},"25":{"start":{"line":45,"column":16},"end":{"line":45,"column":24}},"26":{"start":{"line":46,"column":16},"end":{"line":46,"column":22}},"27":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"28":{"start":{"line":50,"column":12},"end":{"line":50,"column":42}},"29":{"start":{"line":52,"column":8},"end":{"line":52,"column":41}},"30":{"start":{"line":56,"column":0},"end":{"line":56,"column":37}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"2":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"3":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"4":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":44,"column":12}},{"start":{"line":44,"column":12},"end":{"line":44,"column":12}}]},"5":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]}},"code":["\"use strict\";","","let errors = require(\"../common/errors\");","","function ResumeBookmarkQueue() {","    this._names = new Set();","    this._commands = [];","}","","ResumeBookmarkQueue.prototype.isEmpty = function () {","    return this._commands.length === 0;","};","","ResumeBookmarkQueue.prototype.enqueue = function (bookmarkName, reason, result) {","    if (!this._names.has(bookmarkName)) {","        this._names.add(bookmarkName);","        this._commands.push(","            {","                name: bookmarkName,","                reason: reason,","                result: result","            });","    }","    else {","        throw new errors.ActivityRuntimeError(\"The '\" + bookmarkName + \"' bookmark continuation already enqueued.\");","    }","};","","ResumeBookmarkQueue.prototype.dequeue = function () {","    if (this._commands.length) {","        let command = this._commands[0];","        this._commands.splice(0, 1);","        this._names.delete(command.name);","        return command;","    }","    return null;","};","","ResumeBookmarkQueue.prototype.remove = function (bookmarkName) {","    if (this._names.has(bookmarkName)) {","        let idx = -1;","        for (let i = 0; i < this._commands.length; i++) {","            let command = this._commands[i];","            if (command.name === bookmarkName) {","                idx = i;","                break;","            }","        }","        if (idx !== -1) {","            this._commands.splice(idx, 1);","        }","        this._names.delete(bookmarkName);","    }","};","","module.exports = ResumeBookmarkQueue;",""],"l":{"3":1,"5":1,"6":0,"7":0,"10":1,"11":0,"14":1,"15":0,"16":0,"17":0,"25":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"36":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"49":0,"50":0,"52":0,"56":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeTree.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeTree.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":1,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":1,"139":0,"140":0,"141":1,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":1,"170":0,"171":0,"172":0,"173":0,"174":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"ScopeTree","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":54}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":93}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":31},"end":{"line":25,"column":59}}},"4":{"name":"(anonymous_4)","line":66,"loc":{"start":{"line":66,"column":37},"end":{"line":66,"column":60}}},"5":{"name":"(anonymous_5)","line":74,"loc":{"start":{"line":74,"column":34},"end":{"line":74,"column":63}}},"6":{"name":"(anonymous_6)","line":100,"loc":{"start":{"line":100,"column":31},"end":{"line":100,"column":60}}},"7":{"name":"(anonymous_7)","line":134,"loc":{"start":{"line":134,"column":31},"end":{"line":134,"column":75}}},"8":{"name":"(anonymous_8)","line":160,"loc":{"start":{"line":160,"column":37},"end":{"line":160,"column":74}}},"9":{"name":"(anonymous_9)","line":178,"loc":{"start":{"line":178,"column":45},"end":{"line":178,"column":77}}},"10":{"name":"(anonymous_10)","line":202,"loc":{"start":{"line":202,"column":27},"end":{"line":202,"column":94}}},"11":{"name":"(anonymous_11)","line":210,"loc":{"start":{"line":210,"column":27},"end":{"line":210,"column":55}}},"12":{"name":"(anonymous_12)","line":225,"loc":{"start":{"line":225,"column":27},"end":{"line":225,"column":45}}},"13":{"name":"(anonymous_13)","line":230,"loc":{"start":{"line":230,"column":31},"end":{"line":230,"column":49}}},"14":{"name":"(anonymous_14)","line":239,"loc":{"start":{"line":239,"column":43},"end":{"line":239,"column":57}}},"15":{"name":"(anonymous_15)","line":250,"loc":{"start":{"line":250,"column":38},"end":{"line":250,"column":67}}},"16":{"name":"(anonymous_16)","line":273,"loc":{"start":{"line":273,"column":38},"end":{"line":273,"column":54}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":47}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":31}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":41}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":51}},"10":{"start":{"line":13,"column":0},"end":{"line":18,"column":1}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":80}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":28}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":69}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":48}},"15":{"start":{"line":21,"column":0},"end":{"line":23,"column":2}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":125}},"17":{"start":{"line":25,"column":0},"end":{"line":61,"column":2}},"18":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"19":{"start":{"line":27,"column":8},"end":{"line":27,"column":56}},"20":{"start":{"line":30,"column":4},"end":{"line":35,"column":5}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"22":{"start":{"line":32,"column":8},"end":{"line":32,"column":32}},"23":{"start":{"line":33,"column":8},"end":{"line":33,"column":90}},"24":{"start":{"line":34,"column":8},"end":{"line":34,"column":42}},"25":{"start":{"line":37,"column":4},"end":{"line":60,"column":5}},"26":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"27":{"start":{"line":40,"column":12},"end":{"line":40,"column":51}},"28":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"29":{"start":{"line":44,"column":12},"end":{"line":44,"column":85}},"30":{"start":{"line":47,"column":8},"end":{"line":56,"column":9}},"31":{"start":{"line":48,"column":12},"end":{"line":55,"column":13}},"32":{"start":{"line":49,"column":16},"end":{"line":49,"column":48}},"33":{"start":{"line":50,"column":16},"end":{"line":54,"column":17}},"34":{"start":{"line":51,"column":20},"end":{"line":51,"column":90}},"35":{"start":{"line":52,"column":20},"end":{"line":52,"column":69}},"36":{"start":{"line":53,"column":20},"end":{"line":53,"column":54}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":118}},"38":{"start":{"line":66,"column":0},"end":{"line":72,"column":2}},"39":{"start":{"line":67,"column":4},"end":{"line":67,"column":36}},"40":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"41":{"start":{"line":69,"column":8},"end":{"line":69,"column":31}},"42":{"start":{"line":71,"column":4},"end":{"line":71,"column":18}},"43":{"start":{"line":74,"column":0},"end":{"line":98,"column":2}},"44":{"start":{"line":75,"column":4},"end":{"line":80,"column":5}},"45":{"start":{"line":76,"column":8},"end":{"line":76,"column":54}},"46":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"47":{"start":{"line":78,"column":12},"end":{"line":78,"column":28}},"48":{"start":{"line":82,"column":4},"end":{"line":84,"column":5}},"49":{"start":{"line":83,"column":8},"end":{"line":83,"column":20}},"50":{"start":{"line":86,"column":4},"end":{"line":86,"column":22}},"51":{"start":{"line":87,"column":4},"end":{"line":96,"column":5}},"52":{"start":{"line":88,"column":8},"end":{"line":91,"column":9}},"53":{"start":{"line":89,"column":12},"end":{"line":89,"column":25}},"54":{"start":{"line":90,"column":12},"end":{"line":90,"column":18}},"55":{"start":{"line":92,"column":8},"end":{"line":95,"column":9}},"56":{"start":{"line":93,"column":12},"end":{"line":93,"column":25}},"57":{"start":{"line":94,"column":12},"end":{"line":94,"column":18}},"58":{"start":{"line":97,"column":4},"end":{"line":97,"column":17}},"59":{"start":{"line":100,"column":0},"end":{"line":132,"column":2}},"60":{"start":{"line":101,"column":4},"end":{"line":101,"column":20}},"61":{"start":{"line":103,"column":4},"end":{"line":113,"column":5}},"62":{"start":{"line":104,"column":8},"end":{"line":104,"column":54}},"63":{"start":{"line":105,"column":8},"end":{"line":112,"column":9}},"64":{"start":{"line":106,"column":12},"end":{"line":106,"column":57}},"65":{"start":{"line":107,"column":12},"end":{"line":107,"column":61}},"66":{"start":{"line":108,"column":12},"end":{"line":108,"column":31}},"67":{"start":{"line":111,"column":12},"end":{"line":111,"column":29}},"68":{"start":{"line":115,"column":4},"end":{"line":117,"column":5}},"69":{"start":{"line":116,"column":8},"end":{"line":116,"column":36}},"70":{"start":{"line":119,"column":4},"end":{"line":119,"column":32}},"71":{"start":{"line":120,"column":4},"end":{"line":120,"column":14}},"72":{"start":{"line":121,"column":4},"end":{"line":130,"column":5}},"73":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"74":{"start":{"line":123,"column":12},"end":{"line":123,"column":18}},"75":{"start":{"line":125,"column":8},"end":{"line":128,"column":9}},"76":{"start":{"line":126,"column":12},"end":{"line":126,"column":45}},"77":{"start":{"line":127,"column":12},"end":{"line":127,"column":18}},"78":{"start":{"line":129,"column":8},"end":{"line":129,"column":33}},"79":{"start":{"line":131,"column":4},"end":{"line":131,"column":17}},"80":{"start":{"line":134,"column":0},"end":{"line":158,"column":2}},"81":{"start":{"line":135,"column":4},"end":{"line":137,"column":5}},"82":{"start":{"line":136,"column":8},"end":{"line":136,"column":69}},"83":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"84":{"start":{"line":140,"column":4},"end":{"line":140,"column":29}},"85":{"start":{"line":141,"column":4},"end":{"line":141,"column":24}},"86":{"start":{"line":142,"column":4},"end":{"line":151,"column":5}},"87":{"start":{"line":143,"column":8},"end":{"line":145,"column":9}},"88":{"start":{"line":144,"column":12},"end":{"line":144,"column":18}},"89":{"start":{"line":146,"column":8},"end":{"line":149,"column":9}},"90":{"start":{"line":147,"column":12},"end":{"line":147,"column":27}},"91":{"start":{"line":148,"column":12},"end":{"line":148,"column":18}},"92":{"start":{"line":150,"column":8},"end":{"line":150,"column":30}},"93":{"start":{"line":153,"column":4},"end":{"line":155,"column":5}},"94":{"start":{"line":154,"column":8},"end":{"line":154,"column":57}},"95":{"start":{"line":157,"column":4},"end":{"line":157,"column":16}},"96":{"start":{"line":160,"column":0},"end":{"line":176,"column":2}},"97":{"start":{"line":161,"column":4},"end":{"line":161,"column":20}},"98":{"start":{"line":162,"column":4},"end":{"line":162,"column":32}},"99":{"start":{"line":163,"column":4},"end":{"line":163,"column":27}},"100":{"start":{"line":164,"column":4},"end":{"line":173,"column":5}},"101":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"102":{"start":{"line":166,"column":12},"end":{"line":166,"column":18}},"103":{"start":{"line":168,"column":8},"end":{"line":171,"column":9}},"104":{"start":{"line":169,"column":12},"end":{"line":169,"column":30}},"105":{"start":{"line":170,"column":12},"end":{"line":170,"column":18}},"106":{"start":{"line":172,"column":8},"end":{"line":172,"column":33}},"107":{"start":{"line":175,"column":4},"end":{"line":175,"column":22}},"108":{"start":{"line":178,"column":0},"end":{"line":198,"column":2}},"109":{"start":{"line":179,"column":4},"end":{"line":179,"column":35}},"110":{"start":{"line":180,"column":4},"end":{"line":180,"column":27}},"111":{"start":{"line":181,"column":4},"end":{"line":197,"column":17}},"112":{"start":{"line":183,"column":8},"end":{"line":183,"column":24}},"113":{"start":{"line":184,"column":8},"end":{"line":184,"column":26}},"114":{"start":{"line":185,"column":8},"end":{"line":187,"column":9}},"115":{"start":{"line":186,"column":12},"end":{"line":186,"column":30}},"116":{"start":{"line":188,"column":8},"end":{"line":188,"column":64}},"117":{"start":{"line":189,"column":8},"end":{"line":189,"column":36}},"118":{"start":{"line":191,"column":8},"end":{"line":193,"column":9}},"119":{"start":{"line":192,"column":12},"end":{"line":192,"column":18}},"120":{"start":{"line":195,"column":8},"end":{"line":195,"column":27}},"121":{"start":{"line":202,"column":0},"end":{"line":208,"column":2}},"122":{"start":{"line":203,"column":4},"end":{"line":203,"column":64}},"123":{"start":{"line":204,"column":4},"end":{"line":204,"column":114}},"124":{"start":{"line":205,"column":4},"end":{"line":205,"column":35}},"125":{"start":{"line":206,"column":4},"end":{"line":206,"column":47}},"126":{"start":{"line":207,"column":4},"end":{"line":207,"column":40}},"127":{"start":{"line":210,"column":0},"end":{"line":223,"column":2}},"128":{"start":{"line":211,"column":4},"end":{"line":211,"column":56}},"129":{"start":{"line":212,"column":4},"end":{"line":214,"column":5}},"130":{"start":{"line":213,"column":8},"end":{"line":213,"column":86}},"131":{"start":{"line":215,"column":4},"end":{"line":215,"column":31}},"132":{"start":{"line":216,"column":4},"end":{"line":216,"column":31}},"133":{"start":{"line":217,"column":4},"end":{"line":217,"column":23}},"134":{"start":{"line":218,"column":4},"end":{"line":221,"column":5}},"135":{"start":{"line":219,"column":8},"end":{"line":219,"column":35}},"136":{"start":{"line":220,"column":8},"end":{"line":220,"column":48}},"137":{"start":{"line":222,"column":4},"end":{"line":222,"column":43}},"138":{"start":{"line":225,"column":0},"end":{"line":228,"column":2}},"139":{"start":{"line":226,"column":4},"end":{"line":226,"column":56}},"140":{"start":{"line":227,"column":4},"end":{"line":227,"column":43}},"141":{"start":{"line":230,"column":0},"end":{"line":236,"column":2}},"142":{"start":{"line":231,"column":4},"end":{"line":231,"column":56}},"143":{"start":{"line":232,"column":4},"end":{"line":234,"column":5}},"144":{"start":{"line":233,"column":8},"end":{"line":233,"column":37}},"145":{"start":{"line":235,"column":4},"end":{"line":235,"column":16}},"146":{"start":{"line":239,"column":0},"end":{"line":248,"column":2}},"147":{"start":{"line":240,"column":4},"end":{"line":242,"column":5}},"148":{"start":{"line":241,"column":8},"end":{"line":241,"column":33}},"149":{"start":{"line":243,"column":4},"end":{"line":243,"column":35}},"150":{"start":{"line":244,"column":4},"end":{"line":246,"column":5}},"151":{"start":{"line":245,"column":8},"end":{"line":245,"column":81}},"152":{"start":{"line":247,"column":4},"end":{"line":247,"column":16}},"153":{"start":{"line":250,"column":0},"end":{"line":271,"column":2}},"154":{"start":{"line":251,"column":4},"end":{"line":251,"column":20}},"155":{"start":{"line":252,"column":4},"end":{"line":252,"column":63}},"156":{"start":{"line":253,"column":4},"end":{"line":253,"column":38}},"157":{"start":{"line":254,"column":4},"end":{"line":270,"column":5}},"158":{"start":{"line":255,"column":8},"end":{"line":257,"column":9}},"159":{"start":{"line":256,"column":12},"end":{"line":256,"column":64}},"160":{"start":{"line":258,"column":8},"end":{"line":258,"column":26}},"161":{"start":{"line":259,"column":8},"end":{"line":264,"column":9}},"162":{"start":{"line":260,"column":12},"end":{"line":263,"column":13}},"163":{"start":{"line":261,"column":16},"end":{"line":261,"column":29}},"164":{"start":{"line":262,"column":16},"end":{"line":262,"column":22}},"165":{"start":{"line":265,"column":8},"end":{"line":267,"column":9}},"166":{"start":{"line":266,"column":12},"end":{"line":266,"column":98}},"167":{"start":{"line":268,"column":8},"end":{"line":268,"column":44}},"168":{"start":{"line":269,"column":8},"end":{"line":269,"column":38}},"169":{"start":{"line":273,"column":0},"end":{"line":280,"column":2}},"170":{"start":{"line":274,"column":4},"end":{"line":274,"column":20}},"171":{"start":{"line":276,"column":4},"end":{"line":276,"column":40}},"172":{"start":{"line":277,"column":4},"end":{"line":279,"column":5}},"173":{"start":{"line":278,"column":8},"end":{"line":278,"column":32}},"174":{"start":{"line":282,"column":0},"end":{"line":282,"column":27}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"2":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":16},"end":{"line":50,"column":16}},{"start":{"line":50,"column":16},"end":{"line":50,"column":16}}]},"4":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":20},"end":{"line":50,"column":25}},{"start":{"line":50,"column":29},"end":{"line":50,"column":70}}]},"5":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"6":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"7":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":77,"column":8}},{"start":{"line":77,"column":8},"end":{"line":77,"column":8}}]},"8":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":18}},{"start":{"line":77,"column":22},"end":{"line":77,"column":50}}]},"9":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"10":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"11":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":92,"column":8}},{"start":{"line":92,"column":8},"end":{"line":92,"column":8}}]},"12":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"13":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"14":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":12},"end":{"line":105,"column":18}},{"start":{"line":105,"column":22},"end":{"line":105,"column":50}}]},"15":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":4},"end":{"line":115,"column":4}},{"start":{"line":115,"column":4},"end":{"line":115,"column":4}}]},"16":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"17":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"18":{"line":125,"type":"binary-expr","locations":[{"start":{"line":125,"column":12},"end":{"line":125,"column":32}},{"start":{"line":125,"column":36},"end":{"line":125,"column":56}}]},"19":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":4},"end":{"line":135,"column":4}},{"start":{"line":135,"column":4},"end":{"line":135,"column":4}}]},"20":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]},"21":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":8}},{"start":{"line":146,"column":8},"end":{"line":146,"column":8}}]},"22":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":4},"end":{"line":153,"column":4}},{"start":{"line":153,"column":4},"end":{"line":153,"column":4}}]},"23":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":165,"column":8}},{"start":{"line":165,"column":8},"end":{"line":165,"column":8}}]},"24":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"25":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":8},"end":{"line":185,"column":8}},{"start":{"line":185,"column":8},"end":{"line":185,"column":8}}]},"26":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"27":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":4},"end":{"line":212,"column":4}},{"start":{"line":212,"column":4},"end":{"line":212,"column":4}}]},"28":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":4},"end":{"line":218,"column":4}},{"start":{"line":218,"column":4},"end":{"line":218,"column":4}}]},"29":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":4},"end":{"line":232,"column":4}},{"start":{"line":232,"column":4},"end":{"line":232,"column":4}}]},"30":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":4},"end":{"line":240,"column":4}},{"start":{"line":240,"column":4},"end":{"line":240,"column":4}}]},"31":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":4}},{"start":{"line":244,"column":4},"end":{"line":244,"column":4}}]},"32":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":4},"end":{"line":254,"column":4}},{"start":{"line":254,"column":4},"end":{"line":254,"column":4}}]},"33":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":8},"end":{"line":255,"column":8}},{"start":{"line":255,"column":8},"end":{"line":255,"column":8}}]},"34":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":12},"end":{"line":260,"column":12}},{"start":{"line":260,"column":12},"end":{"line":260,"column":12}}]},"35":{"line":265,"type":"if","locations":[{"start":{"line":265,"column":8},"end":{"line":265,"column":8}},{"start":{"line":265,"column":8},"end":{"line":265,"column":8}}]}},"code":["\"use strict\";","","let ScopeNode = require(\"./scopeNode\");","let constants = require(\"../common/constants\");","let _ = require(\"lodash\");","let specStrings = require(\"../common/specStrings\");","let errors = require(\"../common/errors\");","let is = require(\"../common/is\");","let scope = require(\"./scope\");","let Expression = require(\"./expression\");","let scopeSerializer = require(\"./scopeSerializer\");","","function ScopeTree(initialScope, getActivityByIdFunc) {","    this._initialNode = new ScopeNode(constants.ids.initialScope, initialScope);","    this._nodes = new Map();","    this._nodes.set(this._initialNode.instanceId, this._initialNode);","    this._getActivityById = getActivityByIdFunc;","}","","/* SERIALIZATION */","ScopeTree.prototype.getExecutionState = function (execContext, enablePromotions, serializer) {","    return scopeSerializer.serialize(execContext, this._getActivityById, enablePromotions, this._nodes.values(), serializer);","};","","ScopeTree.prototype.setState = function (json, serializer) {","    if (!_.isArray(json)) {","        throw new TypeError(\"Array argument expected.\");","    }","","    if (this._nodes.count !== 1) {","        let prev = this._nodes;","        this._nodes = new Map();","        this._nodes.set(constants.ids.initialScope, prev.get(constants.ids.initialScope));","        this._initialNode.clearChildren();","    }","","    try {","        // Create nodes:","        for (let node of scopeSerializer.deserializeNodes(this._getActivityById, json, serializer)) {","            this._nodes.set(node.instanceId, node);","        }","        // Setup Tree:","        for (let item of json) {","            this._nodes.get(item.instanceId).parent = this._nodes.get(item.parentId);","        }","        // Setup specials:","        for (let node of this._nodes.values()) {","            for (let key of node._keys) {","                let value = node.scopePart[key];","                if (value && value.$type === constants.markers.$parent) {","                    let parentScope = scope.create(this, this._nodes.get(value.id), true);","                    parentScope.__marker = constants.markers.$parent;","                    node.scopePart[key] = parentScope;","                }","            }","        }","    }","    catch (e) {","        throw new errors.WorkflowError(\"Cannot restore state tree, because data is corrupt. Inner error: \" + e.stack);","    }","};","/* SERIALIZATION */","","/* PROXY */","","ScopeTree.prototype._getRealParent = function (currentNode) {","    let parent = currentNode.parent;","    if (currentNode.activity instanceof Expression) {","        parent = parent.parent;","    }","    return parent;","};","","ScopeTree.prototype.hasProperty = function (currentNode, name) {","    if (name === \"$parent\") {","        let parent = this._getRealParent(currentNode);","        if (parent && parent !== this._initialNode) {","            return !!parent;","        }","    }","","    if (name === \"$activity\") {","        return true;","    }","","    let found = false;","    for (let node of currentNode.walkToRoot()) {","        if (node.isPropertyExists(name)) {","            found = true;","            break;","        }","        if (node.userId === name) {","            found = true;","            break;","        }","    }","    return found;","};","","ScopeTree.prototype.getValue = function (currentNode, name) {","    let self = this;","","    if (name === \"$parent\") {","        let parent = this._getRealParent(currentNode);","        if (parent && parent !== this._initialNode) {","            let parentScope = scope.create(this, parent);","            parentScope.__marker = constants.markers.$parent;","            return parentScope;","        }","        else {","            return undefined;","        }","    }","","    if (name === \"$activity\") {","        return currentNode.activity;","    }","","    let canReturnPrivate = true;","    let value;","    for (let node of currentNode.walkToRoot()) {","        if (!_.isUndefined(value = node.getPropertyValue(name, canReturnPrivate))) {","            break;","        }","        if (node.userId === name && node !== currentNode) {","            value = scope.create(self, node);","            break;","        }","        canReturnPrivate = false;","    }","    return value;","};","","ScopeTree.prototype.setValue = function (currentNode, name, value, noWalk) {","    if (this.isOnInitial) {","        throw new Error(\"Cannot set property of the initial scope.\");","    }","","    let self = this;","    let canSetPrivate = true;","    let setDone = false;","    for (let node of currentNode.walkToRoot(noWalk)) {","        if (node === self._initialNode) {","            break;","        }","        if (node.setPropertyValue(name, value, canSetPrivate)) {","            setDone = true;","            break;","        }","        canSetPrivate = false;","    }","","    if (!setDone) {","        currentNode.createPropertyWithValue(name, value);","    }","","    return true;","};","","ScopeTree.prototype.deleteProperty = function (currentNode, name, noWalk) {","    let self = this;","    let canDeletePrivate = true;","    let deleteDone = false;","    for (let node of currentNode.walkToRoot(noWalk)) {","        if (node === self._initialNode) {","            break;","        }","        if (node.deleteProperty(name, canDeletePrivate)) {","            deleteDone = true;","            break;","        }","        canDeletePrivate = false;","    }","","    return deleteDone;","};","","ScopeTree.prototype.enumeratePropertyNames = function* (currentNode, noWalk) {","    let canEnumeratePrivate = true;","    let node = currentNode;","    do","    {","        yield \"$parent\";","        yield \"$activity\";","        if (node.userId) {","            yield node.userId;","        }","        yield* node.enumeratePropertyNames(canEnumeratePrivate);","        canEnumeratePrivate = false;","","        if (noWalk) {","            break;","        }","","        node = node.parent;","    }","    while (node);","};","/* PROXY */","","/* WALK */","ScopeTree.prototype.next = function (nodeInstanceId, childInstanceId, scopePart, childUserId) {","    let currentNode = this._getNodeByExternalId(nodeInstanceId);","    let nextNode = new ScopeNode(childInstanceId, scopePart, childUserId, this._getActivityById(childInstanceId));","    currentNode.addChild(nextNode);","    this._nodes.set(childInstanceId, nextNode);","    return scope.create(this, nextNode);","};","","ScopeTree.prototype.back = function (nodeId, keepItem) {","    let currentNode = this._getNodeByExternalId(nodeId);","    if (currentNode === this._initialNode) {","        throw new Error(\"Cannot go back because current scope is the initial scope.\");","    }","    let toRemove = currentNode;","    let goTo = toRemove.parent;","    currentNode = goTo;","    if (!keepItem) {","        goTo.removeChild(toRemove);","        this._nodes.delete(toRemove.instanceId);","    }","    return scope.create(this, currentNode);","};","","ScopeTree.prototype.find = function (nodeId) {","    let currentNode = this._getNodeByExternalId(nodeId);","    return scope.create(this, currentNode);","};","","ScopeTree.prototype.findPart = function (nodeId) {","    let currentNode = this._getNodeByExternalId(nodeId);","    if (currentNode !== this._initialNode) {","        return currentNode.scopePart;","    }","    return null;","};","/* WALK */","","ScopeTree.prototype._getNodeByExternalId = function (id) {","    if (id === null) {","        return this._initialNode;","    }","    let node = this._nodes.get(id);","    if (!node) {","        throw new Error(\"Scope node for activity id '\" + id + \"' is not found.\");","    }","    return node;","};","","ScopeTree.prototype.deleteScopePart = function (currentNodeId, id) {","    let self = this;","    let currentNode = this._getNodeByExternalId(currentNodeId);","    let delNode = self._nodes.get(id);","    if (delNode) {","        if (delNode === self._initialNode) {","            throw new Error(\"Cannot delete the initial scope.\");","        }","        let found = false;","        for (let node of delNode.walkToRoot()) {","            if (node === currentNode) {","                found = true;","                break;","            }","        }","        if (!found) {","            throw new Error(\"Cannot delete scope, because current active scope is inside in it.\");","        }","        delNode.parent.removeChild(delNode);","        self._removeAllNodes(delNode);","    }","};","","ScopeTree.prototype._removeAllNodes = function (node) {","    let self = this;","","    self._nodes.delete(node.instanceId);","    for (let c of node.children()) {","        self._removeAllNodes(c);","    }","};","","module.exports = ScopeTree;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"13":1,"14":0,"15":0,"16":0,"17":0,"21":1,"22":0,"25":1,"26":0,"27":0,"30":0,"31":0,"32":0,"33":0,"34":0,"37":0,"39":0,"40":0,"43":0,"44":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"59":0,"66":1,"67":0,"68":0,"69":0,"71":0,"74":1,"75":0,"76":0,"77":0,"78":0,"82":0,"83":0,"86":0,"87":0,"88":0,"89":0,"90":0,"92":0,"93":0,"94":0,"97":0,"100":1,"101":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"111":0,"115":0,"116":0,"119":0,"120":0,"121":0,"122":0,"123":0,"125":0,"126":0,"127":0,"129":0,"131":0,"134":1,"135":0,"136":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"146":0,"147":0,"148":0,"150":0,"153":0,"154":0,"157":0,"160":1,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"168":0,"169":0,"170":0,"172":0,"175":0,"178":1,"179":0,"180":0,"181":0,"183":0,"184":0,"185":0,"186":0,"188":0,"189":0,"191":0,"192":0,"195":0,"202":1,"203":0,"204":0,"205":0,"206":0,"207":0,"210":1,"211":0,"212":0,"213":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"222":0,"225":1,"226":0,"227":0,"230":1,"231":0,"232":0,"233":0,"235":0,"239":1,"240":0,"241":0,"243":0,"244":0,"245":0,"247":0,"250":1,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"258":0,"259":0,"260":0,"261":0,"262":0,"265":0,"266":0,"268":0,"269":0,"273":1,"274":0,"276":0,"277":0,"278":0,"282":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeNode.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeNode.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":1,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":1,"95":0,"96":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"ScopeNode","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":60}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":24}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":25}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":13},"end":{"line":38,"column":30}}},"5":{"name":"(anonymous_5)","line":50,"loc":{"start":{"line":50,"column":33},"end":{"line":50,"column":46}}},"6":{"name":"(anonymous_6)","line":58,"loc":{"start":{"line":58,"column":31},"end":{"line":58,"column":44}}},"7":{"name":"(anonymous_7)","line":64,"loc":{"start":{"line":64,"column":31},"end":{"line":64,"column":52}}},"8":{"name":"(anonymous_8)","line":75,"loc":{"start":{"line":75,"column":34},"end":{"line":75,"column":55}}},"9":{"name":"(anonymous_9)","line":86,"loc":{"start":{"line":86,"column":36},"end":{"line":86,"column":48}}},"10":{"name":"(anonymous_10)","line":90,"loc":{"start":{"line":90,"column":39},"end":{"line":90,"column":55}}},"11":{"name":"(anonymous_11)","line":94,"loc":{"start":{"line":94,"column":39},"end":{"line":94,"column":73}}},"12":{"name":"(anonymous_12)","line":103,"loc":{"start":{"line":103,"column":39},"end":{"line":103,"column":77}}},"13":{"name":"(anonymous_13)","line":120,"loc":{"start":{"line":120,"column":46},"end":{"line":120,"column":69}}},"14":{"name":"(anonymous_14)","line":127,"loc":{"start":{"line":127,"column":37},"end":{"line":127,"column":71}}},"15":{"name":"(anonymous_15)","line":145,"loc":{"start":{"line":145,"column":45},"end":{"line":145,"column":77}}},"16":{"name":"(anonymous_16)","line":161,"loc":{"start":{"line":161,"column":33},"end":{"line":161,"column":46}}},"17":{"name":"(anonymous_17)","line":168,"loc":{"start":{"line":168,"column":33},"end":{"line":168,"column":48}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"5":{"start":{"line":8,"column":0},"end":{"line":21,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":23}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":22}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":33}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":25}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":37}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":24}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":31}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":32}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"15":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"16":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"17":{"start":{"line":23,"column":0},"end":{"line":48,"column":3}},"18":{"start":{"line":31,"column":12},"end":{"line":31,"column":35}},"19":{"start":{"line":36,"column":12},"end":{"line":36,"column":32}},"20":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"21":{"start":{"line":40,"column":16},"end":{"line":40,"column":63}},"22":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"23":{"start":{"line":43,"column":16},"end":{"line":43,"column":59}},"24":{"start":{"line":45,"column":12},"end":{"line":45,"column":33}},"25":{"start":{"line":50,"column":0},"end":{"line":56,"column":2}},"26":{"start":{"line":51,"column":4},"end":{"line":51,"column":23}},"27":{"start":{"line":52,"column":4},"end":{"line":55,"column":5}},"28":{"start":{"line":53,"column":8},"end":{"line":53,"column":22}},"29":{"start":{"line":54,"column":8},"end":{"line":54,"column":34}},"30":{"start":{"line":58,"column":0},"end":{"line":62,"column":2}},"31":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},"32":{"start":{"line":60,"column":8},"end":{"line":60,"column":20}},"33":{"start":{"line":64,"column":0},"end":{"line":73,"column":2}},"34":{"start":{"line":65,"column":4},"end":{"line":67,"column":5}},"35":{"start":{"line":66,"column":8},"end":{"line":66,"column":55}},"36":{"start":{"line":68,"column":4},"end":{"line":70,"column":5}},"37":{"start":{"line":69,"column":8},"end":{"line":69,"column":67}},"38":{"start":{"line":71,"column":4},"end":{"line":71,"column":29}},"39":{"start":{"line":72,"column":4},"end":{"line":72,"column":56}},"40":{"start":{"line":75,"column":0},"end":{"line":84,"column":2}},"41":{"start":{"line":76,"column":4},"end":{"line":78,"column":5}},"42":{"start":{"line":77,"column":8},"end":{"line":77,"column":55}},"43":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"44":{"start":{"line":80,"column":8},"end":{"line":80,"column":63}},"45":{"start":{"line":82,"column":4},"end":{"line":82,"column":29}},"46":{"start":{"line":83,"column":4},"end":{"line":83,"column":48}},"47":{"start":{"line":86,"column":0},"end":{"line":88,"column":2}},"48":{"start":{"line":87,"column":4},"end":{"line":87,"column":27}},"49":{"start":{"line":90,"column":0},"end":{"line":92,"column":2}},"50":{"start":{"line":91,"column":4},"end":{"line":91,"column":49}},"51":{"start":{"line":94,"column":0},"end":{"line":101,"column":2}},"52":{"start":{"line":95,"column":4},"end":{"line":100,"column":5}},"53":{"start":{"line":96,"column":8},"end":{"line":96,"column":37}},"54":{"start":{"line":98,"column":9},"end":{"line":100,"column":5}},"55":{"start":{"line":99,"column":8},"end":{"line":99,"column":37}},"56":{"start":{"line":103,"column":0},"end":{"line":118,"column":2}},"57":{"start":{"line":104,"column":4},"end":{"line":116,"column":5}},"58":{"start":{"line":105,"column":8},"end":{"line":111,"column":9}},"59":{"start":{"line":106,"column":12},"end":{"line":108,"column":13}},"60":{"start":{"line":107,"column":16},"end":{"line":107,"column":38}},"61":{"start":{"line":109,"column":12},"end":{"line":109,"column":42}},"62":{"start":{"line":110,"column":12},"end":{"line":110,"column":24}},"63":{"start":{"line":113,"column":9},"end":{"line":116,"column":5}},"64":{"start":{"line":114,"column":8},"end":{"line":114,"column":38}},"65":{"start":{"line":115,"column":8},"end":{"line":115,"column":20}},"66":{"start":{"line":117,"column":4},"end":{"line":117,"column":17}},"67":{"start":{"line":120,"column":0},"end":{"line":125,"column":2}},"68":{"start":{"line":121,"column":4},"end":{"line":123,"column":5}},"69":{"start":{"line":122,"column":8},"end":{"line":122,"column":30}},"70":{"start":{"line":124,"column":4},"end":{"line":124,"column":34}},"71":{"start":{"line":127,"column":0},"end":{"line":143,"column":2}},"72":{"start":{"line":128,"column":4},"end":{"line":141,"column":5}},"73":{"start":{"line":129,"column":8},"end":{"line":140,"column":9}},"74":{"start":{"line":130,"column":12},"end":{"line":134,"column":13}},"75":{"start":{"line":131,"column":16},"end":{"line":131,"column":66}},"76":{"start":{"line":132,"column":16},"end":{"line":132,"column":45}},"77":{"start":{"line":133,"column":16},"end":{"line":133,"column":28}},"78":{"start":{"line":137,"column":12},"end":{"line":137,"column":62}},"79":{"start":{"line":138,"column":12},"end":{"line":138,"column":41}},"80":{"start":{"line":139,"column":12},"end":{"line":139,"column":24}},"81":{"start":{"line":142,"column":4},"end":{"line":142,"column":17}},"82":{"start":{"line":145,"column":0},"end":{"line":159,"column":2}},"83":{"start":{"line":146,"column":4},"end":{"line":158,"column":5}},"84":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"85":{"start":{"line":148,"column":12},"end":{"line":148,"column":32}},"86":{"start":{"line":152,"column":8},"end":{"line":157,"column":9}},"87":{"start":{"line":153,"column":12},"end":{"line":153,"column":36}},"88":{"start":{"line":154,"column":12},"end":{"line":156,"column":13}},"89":{"start":{"line":155,"column":16},"end":{"line":155,"column":26}},"90":{"start":{"line":161,"column":0},"end":{"line":166,"column":2}},"91":{"start":{"line":162,"column":4},"end":{"line":162,"column":20}},"92":{"start":{"line":163,"column":4},"end":{"line":165,"column":5}},"93":{"start":{"line":164,"column":8},"end":{"line":164,"column":55}},"94":{"start":{"line":168,"column":0},"end":{"line":170,"column":2}},"95":{"start":{"line":169,"column":4},"end":{"line":169,"column":26}},"96":{"start":{"line":172,"column":0},"end":{"line":172,"column":27}}},"branchMap":{"1":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":20},"end":{"line":13,"column":28}},{"start":{"line":13,"column":32},"end":{"line":13,"column":36}}]},"2":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":12}},{"start":{"line":39,"column":12},"end":{"line":39,"column":12}}]},"3":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":16},"end":{"line":39,"column":30}},{"start":{"line":39,"column":34},"end":{"line":39,"column":63}}]},"4":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":42,"column":12}},{"start":{"line":42,"column":12},"end":{"line":42,"column":12}}]},"5":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"6":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"7":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"8":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"9":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"10":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":9},"end":{"line":98,"column":9}},{"start":{"line":98,"column":9},"end":{"line":98,"column":9}}]},"11":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]},"12":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"13":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":106,"column":12}},{"start":{"line":106,"column":12},"end":{"line":106,"column":12}}]},"14":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":9},"end":{"line":113,"column":9}},{"start":{"line":113,"column":9},"end":{"line":113,"column":9}}]},"15":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":4},"end":{"line":121,"column":4}},{"start":{"line":121,"column":4},"end":{"line":121,"column":4}}]},"16":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":4},"end":{"line":128,"column":4}},{"start":{"line":128,"column":4},"end":{"line":128,"column":4}}]},"17":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"18":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":12},"end":{"line":130,"column":12}},{"start":{"line":130,"column":12},"end":{"line":130,"column":12}}]},"19":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"20":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":12},"end":{"line":154,"column":12}},{"start":{"line":154,"column":12},"end":{"line":154,"column":12}}]}},"code":["\"use strict\";","","let util = require(\"util\");","let _ = require(\"lodash\");","let is = require(\"../common/is\");","let assert = require(\"assert\");","","function ScopeNode(instanceId, scopePart, userId, activity) {","    assert(instanceId);","    assert(scopePart);","    this.instanceId = instanceId;","    this.userId = userId;","    this.activity = activity || null;","    this._parent = null;","    this._children = new Map();","    this._scopePart = scopePart;","    this._keys = [];","    for (let key in scopePart) {","        this._keys.push(key);","    }","}","","Object.defineProperties(ScopeNode.prototype, {","    _keys: {","        value: null,","        writable: true,","        enumerable: false","    },","    scopePart: {","        get: function() {","            return this._scopePart;","        }","    },","    parent: {","        get: function () {","            return this._parent;","        },","        set: function (value) {","            if (value !== null && !(value instanceof ScopeNode)) {","                throw new TypeError(\"Node argument expected.\");","            }","            if (this._parent !== null) {","                throw new Error(\"Parent already defined.\");","            }","            value.addChild(this);","        }","    }","});","","ScopeNode.prototype.walkToRoot = function* () {","    let current = this;","    while (current) {","        yield current;","        current = current._parent;","    }","};","","ScopeNode.prototype.children = function* () {","    for (let child of this._children.values()) {","        yield child;","    }","};","","ScopeNode.prototype.addChild = function (childItem) {","    if (!(childItem instanceof ScopeNode)) {","        throw new TypeError(\"Node argument expected.\");","    }","    if (childItem._parent) {","        throw new Error(\"Item has been already ha a parent node.\");","    }","    childItem._parent = this;","    this._children.set(childItem.instanceId, childItem);","};","","ScopeNode.prototype.removeChild = function (childItem) {","    if (!(childItem instanceof ScopeNode)) {","        throw new TypeError(\"Node argument expected.\");","    }","    if (childItem._parent !== this) {","        throw new Error(\"Item is not a current node's child.\");","    }","    childItem._parent = null;","    this._children.delete(childItem.instanceId);","};","","ScopeNode.prototype.clearChildren = function () {","    this._children.clear();","};","","ScopeNode.prototype.isPropertyExists = function (name) {","    return !_.isUndefined(this._scopePart[name]);","};","","ScopeNode.prototype.getPropertyValue = function (name, canReturnPrivate) {","    if (canReturnPrivate) {","        return this._scopePart[name];","    }","    else if (!this._isPrivate(name)) {","        return this._scopePart[name];","    }","};","","ScopeNode.prototype.setPropertyValue = function (name, value, canSetPrivate) {","    if (this._isPrivate(name)) {","        if (canSetPrivate) {","            if (!this.isPropertyExists(name)) {","                this._keys.push(name);","            }","            this._scopePart[name] = value;","            return true;","        }","    }","    else if (!_.isUndefined(this._scopePart[name])) {","        this._scopePart[name] = value;","        return true;","    }","    return false;","};","","ScopeNode.prototype.createPropertyWithValue = function (name, value) {","    if (!this.isPropertyExists(name)) {","        this._keys.push(name);","    }","    this._scopePart[name] = value;","};","","ScopeNode.prototype.deleteProperty = function (name, canDeletePrivate) {","    if (!_.isUndefined(this._scopePart[name])) {","        if (this._isPrivate(name)) {","            if (canDeletePrivate) {","                this._keys.splice(_.indexOf(this._keys, name), 1);","                delete this._scopePart[name];","                return true;","            }","        }","        else {","            this._keys.splice(_.indexOf(this._keys, name), 1);","            delete this._scopePart[name];","            return true;","        }","    }","    return false;","};","","ScopeNode.prototype.enumeratePropertyNames = function* (canEnumeratePrivate) {","    if (canEnumeratePrivate) {","        for (let i = 0; i < this._keys.length; i++) {","            yield this._keys[i];","        }","    }","    else {","        for (let i = 0; i < this._keys.length; i++) {","            let key = this._keys[i];","            if (!this._isPrivate(key)) {","                yield key;","            }","        }","    }","};","","ScopeNode.prototype.properties = function* () {","    let self = this;","    for (let fn of self._keys) {","        yield { name: fn, value: self._scopePart[fn] };","    }","};","","ScopeNode.prototype._isPrivate = function (key) {","    return key[0] === \"_\";","};","","module.exports = ScopeNode;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"23":1,"31":0,"36":0,"39":0,"40":0,"42":0,"43":0,"45":0,"50":1,"51":0,"52":0,"53":0,"54":0,"58":1,"59":0,"60":0,"64":1,"65":0,"66":0,"68":0,"69":0,"71":0,"72":0,"75":1,"76":0,"77":0,"79":0,"80":0,"82":0,"83":0,"86":1,"87":0,"90":1,"91":0,"94":1,"95":0,"96":0,"98":0,"99":0,"103":1,"104":0,"105":0,"106":0,"107":0,"109":0,"110":0,"113":0,"114":0,"115":0,"117":0,"120":1,"121":0,"122":0,"124":0,"127":1,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"137":0,"138":0,"139":0,"142":0,"145":1,"146":0,"147":0,"148":0,"152":0,"153":0,"154":0,"155":0,"161":1,"162":0,"163":0,"164":0,"168":1,"169":0,"172":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scope.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scope.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":38}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":21},"end":{"line":17,"column":37}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":21},"end":{"line":21,"column":45}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":21},"end":{"line":34,"column":52}}},"5":{"name":"(anonymous_5)","line":42,"loc":{"start":{"line":42,"column":24},"end":{"line":42,"column":40}}},"6":{"name":"(anonymous_6)","line":46,"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":45}}},"7":{"name":"(anonymous_7)","line":55,"loc":{"start":{"line":55,"column":26},"end":{"line":55,"column":37}}},"8":{"name":"(anonymous_8)","line":68,"loc":{"start":{"line":68,"column":25},"end":{"line":68,"column":42}}},"9":{"name":"(anonymous_9)","line":71,"loc":{"start":{"line":71,"column":26},"end":{"line":71,"column":49}}},"10":{"name":"(anonymous_10)","line":74,"loc":{"start":{"line":74,"column":26},"end":{"line":74,"column":56}}},"11":{"name":"(anonymous_11)","line":78,"loc":{"start":{"line":78,"column":24},"end":{"line":78,"column":47}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":84,"column":2}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":18}},"4":{"start":{"line":8,"column":8},"end":{"line":13,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":42}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":22}},"7":{"start":{"line":14,"column":8},"end":{"line":82,"column":9}},"8":{"start":{"line":16,"column":12},"end":{"line":49,"column":15}},"9":{"start":{"line":18,"column":20},"end":{"line":18,"column":61}},"10":{"start":{"line":22,"column":20},"end":{"line":30,"column":21}},"11":{"start":{"line":23,"column":24},"end":{"line":23,"column":70}},"12":{"start":{"line":25,"column":25},"end":{"line":30,"column":21}},"13":{"start":{"line":26,"column":24},"end":{"line":26,"column":43}},"14":{"start":{"line":28,"column":25},"end":{"line":30,"column":21}},"15":{"start":{"line":29,"column":24},"end":{"line":29,"column":38}},"16":{"start":{"line":31,"column":20},"end":{"line":31,"column":58}},"17":{"start":{"line":35,"column":20},"end":{"line":37,"column":21}},"18":{"start":{"line":36,"column":24},"end":{"line":36,"column":69}},"19":{"start":{"line":38,"column":20},"end":{"line":38,"column":58}},"20":{"start":{"line":39,"column":20},"end":{"line":39,"column":33}},"21":{"start":{"line":43,"column":20},"end":{"line":43,"column":64}},"22":{"start":{"line":47,"column":20},"end":{"line":47,"column":66}},"23":{"start":{"line":53,"column":12},"end":{"line":53,"column":63}},"24":{"start":{"line":55,"column":12},"end":{"line":65,"column":14}},"25":{"start":{"line":56,"column":16},"end":{"line":56,"column":30}},"26":{"start":{"line":57,"column":16},"end":{"line":57,"column":36}},"27":{"start":{"line":58,"column":16},"end":{"line":63,"column":17}},"28":{"start":{"line":59,"column":20},"end":{"line":62,"column":21}},"29":{"start":{"line":60,"column":24},"end":{"line":60,"column":39}},"30":{"start":{"line":61,"column":24},"end":{"line":61,"column":37}},"31":{"start":{"line":64,"column":16},"end":{"line":64,"column":28}},"32":{"start":{"line":67,"column":12},"end":{"line":81,"column":15}},"33":{"start":{"line":69,"column":20},"end":{"line":69,"column":37}},"34":{"start":{"line":72,"column":20},"end":{"line":72,"column":58}},"35":{"start":{"line":75,"column":20},"end":{"line":75,"column":58}},"36":{"start":{"line":76,"column":20},"end":{"line":76,"column":33}},"37":{"start":{"line":79,"column":20},"end":{"line":79,"column":57}},"38":{"start":{"line":86,"column":0},"end":{"line":86,"column":30}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":8}},{"start":{"line":14,"column":8},"end":{"line":14,"column":8}}]},"2":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":20},"end":{"line":22,"column":20}},{"start":{"line":22,"column":20},"end":{"line":22,"column":20}}]},"3":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":25},"end":{"line":25,"column":25}},{"start":{"line":25,"column":25},"end":{"line":25,"column":25}}]},"4":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":25},"end":{"line":28,"column":25}},{"start":{"line":28,"column":25},"end":{"line":28,"column":25}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":20},"end":{"line":35,"column":20}},{"start":{"line":35,"column":20},"end":{"line":35,"column":20}}]},"6":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":24},"end":{"line":35,"column":40}},{"start":{"line":35,"column":44},"end":{"line":35,"column":61}},{"start":{"line":35,"column":65},"end":{"line":35,"column":82}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":20},"end":{"line":59,"column":20}},{"start":{"line":59,"column":20},"end":{"line":59,"column":20}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","","let scopeFactory = {","    create: function(scopeTree, node) {","        let Proxy;","        try {","            Proxy = require(\"node-proxy\");","        }","        catch(e) {","            _.noop(e);","        }","        if (Proxy) {","            // node-proxy is successfully compiled and loadded","            return Proxy.create({","                has: function (name) {","                    return scopeTree.hasProperty(node, name);","                },","","                get: function (target, name) {","                    if (name === \"$keys\") {","                        return scopeTree.enumeratePropertyNames(node);","                    }","                    else if (name === \"delete\") {","                        return this.delete;","                    }","                    else if (name === \"update\") {","                        return _.noop;","                    }","                    return scopeTree.getValue(node, name);","                },","","                set: function (target, name, value) {","                    if (name === \"$keys\" || name === \"delete\" || name === \"update\") {","                        throw new TypeError(`${name} is read only.`);","                    }","                    scopeTree.setValue(node, name, value);","                    return value;","                },","","                delete: function (name) {","                    return scopeTree.deleteProperty(node, name);","                },","","                enumerate: function (target) {","                    return scopeTree.enumeratePropertyNames(node);","                }","            });","        }","        else {","            // node-proxy is unavailable, we should emulate a proxy:","            let SimpleProxy = require(\"../common/simpleProxy\");","","            let getKeys = function() {","                let keys = [];","                let has = new Set();","                for (let key of scopeTree.enumeratePropertyNames(node)) {","                    if (!has.has(key)) {","                        keys.push(key);","                        has.add(key);","                    }","                }","                return keys;","            };","","            return new SimpleProxy({","                getKeys: function (proxy) {","                    return getKeys();","                },","                getValue: function (proxy, name) {","                    return scopeTree.getValue(node, name);","                },","                setValue: function (proxy, name, value) {","                    scopeTree.setValue(node, name, value);","                    return value;","                },","                delete: function (proxy, name) {","                    scopeTree.deleteProperty(node, name);","                }","            });","        }","    }","};","","module.exports = scopeFactory;"],"l":{"3":1,"5":1,"7":0,"8":0,"9":0,"12":0,"14":0,"16":0,"18":0,"22":0,"23":0,"25":0,"26":0,"28":0,"29":0,"31":0,"35":0,"36":0,"38":0,"39":0,"43":0,"47":0,"53":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"64":0,"67":0,"69":0,"72":0,"75":0,"76":0,"79":0,"86":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/expression.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/expression.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"Expression","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":27},"end":{"line":17,"column":56}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"5":{"start":{"line":9,"column":0},"end":{"line":13,"column":1}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":29}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":43}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"10":{"start":{"line":17,"column":0},"end":{"line":44,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":20}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":25}},"13":{"start":{"line":20,"column":4},"end":{"line":43,"column":5}},"14":{"start":{"line":21,"column":8},"end":{"line":39,"column":9}},"15":{"start":{"line":22,"column":12},"end":{"line":22,"column":28}},"16":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"17":{"start":{"line":24,"column":16},"end":{"line":24,"column":73}},"18":{"start":{"line":26,"column":12},"end":{"line":26,"column":41}},"19":{"start":{"line":27,"column":12},"end":{"line":34,"column":13}},"20":{"start":{"line":28,"column":16},"end":{"line":28,"column":42}},"21":{"start":{"line":29,"column":16},"end":{"line":32,"column":17}},"22":{"start":{"line":30,"column":20},"end":{"line":30,"column":107}},"23":{"start":{"line":31,"column":20},"end":{"line":31,"column":27}},"24":{"start":{"line":33,"column":16},"end":{"line":33,"column":43}},"25":{"start":{"line":35,"column":12},"end":{"line":35,"column":41}},"26":{"start":{"line":38,"column":12},"end":{"line":38,"column":32}},"27":{"start":{"line":42,"column":8},"end":{"line":42,"column":35}},"28":{"start":{"line":46,"column":0},"end":{"line":46,"column":28}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":16},"end":{"line":11,"column":20}},{"start":{"line":11,"column":24},"end":{"line":11,"column":28}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"3":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":23,"column":12}},{"start":{"line":23,"column":12},"end":{"line":23,"column":12}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":27,"column":12}},{"start":{"line":27,"column":12},"end":{"line":27,"column":12}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":16},"end":{"line":29,"column":16}},{"start":{"line":29,"column":16},"end":{"line":29,"column":16}}]}},"code":["/* jshint -W054*/","\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let errors = require(\"../common/errors\");","","function Expression(expr) {","    Activity.call(this);","    this.expr = expr || null;","    this.nonSerializedProperties.add(\"_f\");","}","","util.inherits(Expression, Activity);","","Expression.prototype.run = function (callContext, args) {","    let self = this;","    let expr = self.expr;","    if (expr) {","        try {","            let f = self._f;","            if (!f) {","                f = self._f = new Function(\"_\", \"return (\" + expr + \")\");","            }","            let result = f.call(self, _);","            if (result === callContext.activity) {","                let parent = this.$parent;","                if (!parent) {","                    callContext.fail(new errors.ActivityRuntimeError(\"Exception can't reference itself.\"));","                    return;","                }","                result = f.call(parent, _);","            }","            callContext.complete(result);","        }","        catch(e) {","            callContext.fail(e);","        }","    }","    else {","        callContext.complete(null);","    }","};","","module.exports = Expression;",""],"l":{"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"11":0,"12":0,"15":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"33":0,"35":0,"38":0,"42":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeSerializer.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/scopeSerializer.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":1,"141":6,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":1,"192":1,"193":1,"194":1,"195":1,"196":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":6,"14":0,"15":0},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":106}}},"2":{"name":"(anonymous_2)","line":38,"loc":{"start":{"line":38,"column":17},"end":{"line":38,"column":80}}},"3":{"name":"(anonymous_3)","line":67,"loc":{"start":{"line":67,"column":15},"end":{"line":67,"column":106}}},"4":{"name":"(anonymous_4)","line":75,"loc":{"start":{"line":75,"column":17},"end":{"line":75,"column":80}}},"5":{"name":"(anonymous_5)","line":86,"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":106}}},"6":{"name":"(anonymous_6)","line":97,"loc":{"start":{"line":97,"column":17},"end":{"line":97,"column":80}}},"7":{"name":"(anonymous_7)","line":103,"loc":{"start":{"line":103,"column":15},"end":{"line":103,"column":106}}},"8":{"name":"(anonymous_8)","line":115,"loc":{"start":{"line":115,"column":17},"end":{"line":115,"column":80}}},"9":{"name":"(anonymous_9)","line":130,"loc":{"start":{"line":130,"column":15},"end":{"line":130,"column":106}}},"10":{"name":"(anonymous_10)","line":142,"loc":{"start":{"line":142,"column":17},"end":{"line":142,"column":80}}},"11":{"name":"(anonymous_11)","line":159,"loc":{"start":{"line":159,"column":15},"end":{"line":159,"column":106}}},"12":{"name":"(anonymous_12)","line":213,"loc":{"start":{"line":213,"column":17},"end":{"line":213,"column":80}}},"13":{"name":"(anonymous_13)","line":248,"loc":{"start":{"line":248,"column":20},"end":{"line":248,"column":39}}},"14":{"name":"(anonymous_14)","line":251,"loc":{"start":{"line":251,"column":15},"end":{"line":251,"column":92}}},"15":{"name":"(anonymous_15)","line":327,"loc":{"start":{"line":327,"column":22},"end":{"line":327,"column":68}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":47}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":49}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":60}},"9":{"start":{"line":11,"column":0},"end":{"line":64,"column":2}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":23}},"11":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"12":{"start":{"line":15,"column":12},"end":{"line":15,"column":35}},"13":{"start":{"line":17,"column":8},"end":{"line":35,"column":9}},"14":{"start":{"line":18,"column":12},"end":{"line":18,"column":27}},"15":{"start":{"line":19,"column":12},"end":{"line":31,"column":13}},"16":{"start":{"line":20,"column":16},"end":{"line":30,"column":17}},"17":{"start":{"line":21,"column":20},"end":{"line":21,"column":94}},"18":{"start":{"line":24,"column":20},"end":{"line":29,"column":21}},"19":{"start":{"line":25,"column":24},"end":{"line":25,"column":51}},"20":{"start":{"line":28,"column":24},"end":{"line":28,"column":39}},"21":{"start":{"line":32,"column":12},"end":{"line":32,"column":35}},"22":{"start":{"line":33,"column":12},"end":{"line":33,"column":33}},"23":{"start":{"line":34,"column":12},"end":{"line":34,"column":24}},"24":{"start":{"line":36,"column":8},"end":{"line":36,"column":21}},"25":{"start":{"line":39,"column":8},"end":{"line":39,"column":23}},"26":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"27":{"start":{"line":41,"column":12},"end":{"line":41,"column":35}},"28":{"start":{"line":43,"column":8},"end":{"line":61,"column":9}},"29":{"start":{"line":44,"column":12},"end":{"line":44,"column":36}},"30":{"start":{"line":45,"column":12},"end":{"line":58,"column":13}},"31":{"start":{"line":46,"column":16},"end":{"line":46,"column":71}},"32":{"start":{"line":47,"column":16},"end":{"line":57,"column":17}},"33":{"start":{"line":48,"column":20},"end":{"line":48,"column":69}},"34":{"start":{"line":51,"column":20},"end":{"line":56,"column":21}},"35":{"start":{"line":52,"column":24},"end":{"line":52,"column":62}},"36":{"start":{"line":55,"column":24},"end":{"line":55,"column":48}},"37":{"start":{"line":59,"column":12},"end":{"line":59,"column":42}},"38":{"start":{"line":60,"column":12},"end":{"line":60,"column":24}},"39":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"40":{"start":{"line":66,"column":0},"end":{"line":83,"column":2}},"41":{"start":{"line":68,"column":8},"end":{"line":72,"column":9}},"42":{"start":{"line":69,"column":12},"end":{"line":69,"column":35}},"43":{"start":{"line":70,"column":12},"end":{"line":70,"column":96}},"44":{"start":{"line":71,"column":12},"end":{"line":71,"column":24}},"45":{"start":{"line":73,"column":8},"end":{"line":73,"column":21}},"46":{"start":{"line":76,"column":8},"end":{"line":76,"column":71}},"47":{"start":{"line":77,"column":8},"end":{"line":80,"column":9}},"48":{"start":{"line":78,"column":12},"end":{"line":78,"column":55}},"49":{"start":{"line":79,"column":12},"end":{"line":79,"column":24}},"50":{"start":{"line":81,"column":8},"end":{"line":81,"column":21}},"51":{"start":{"line":85,"column":0},"end":{"line":100,"column":2}},"52":{"start":{"line":87,"column":8},"end":{"line":94,"column":9}},"53":{"start":{"line":88,"column":12},"end":{"line":88,"column":35}},"54":{"start":{"line":89,"column":12},"end":{"line":92,"column":14}},"55":{"start":{"line":93,"column":12},"end":{"line":93,"column":24}},"56":{"start":{"line":95,"column":8},"end":{"line":95,"column":21}},"57":{"start":{"line":98,"column":8},"end":{"line":98,"column":21}},"58":{"start":{"line":102,"column":0},"end":{"line":127,"column":2}},"59":{"start":{"line":104,"column":8},"end":{"line":112,"column":9}},"60":{"start":{"line":106,"column":12},"end":{"line":106,"column":84}},"61":{"start":{"line":107,"column":12},"end":{"line":107,"column":24}},"62":{"start":{"line":109,"column":13},"end":{"line":112,"column":9}},"63":{"start":{"line":110,"column":12},"end":{"line":110,"column":84}},"64":{"start":{"line":111,"column":12},"end":{"line":111,"column":24}},"65":{"start":{"line":113,"column":8},"end":{"line":113,"column":21}},"66":{"start":{"line":116,"column":8},"end":{"line":116,"column":81}},"67":{"start":{"line":117,"column":8},"end":{"line":124,"column":9}},"68":{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},"69":{"start":{"line":119,"column":16},"end":{"line":119,"column":98}},"70":{"start":{"line":121,"column":12},"end":{"line":121,"column":43}},"71":{"start":{"line":122,"column":12},"end":{"line":122,"column":54}},"72":{"start":{"line":123,"column":12},"end":{"line":123,"column":24}},"73":{"start":{"line":125,"column":8},"end":{"line":125,"column":21}},"74":{"start":{"line":129,"column":0},"end":{"line":156,"column":2}},"75":{"start":{"line":131,"column":8},"end":{"line":139,"column":9}},"76":{"start":{"line":132,"column":12},"end":{"line":132,"column":35}},"77":{"start":{"line":133,"column":12},"end":{"line":137,"column":14}},"78":{"start":{"line":138,"column":12},"end":{"line":138,"column":24}},"79":{"start":{"line":140,"column":8},"end":{"line":140,"column":21}},"80":{"start":{"line":143,"column":8},"end":{"line":153,"column":9}},"81":{"start":{"line":144,"column":12},"end":{"line":144,"column":44}},"82":{"start":{"line":145,"column":12},"end":{"line":145,"column":53}},"83":{"start":{"line":146,"column":12},"end":{"line":151,"column":13}},"84":{"start":{"line":147,"column":16},"end":{"line":147,"column":70}},"85":{"start":{"line":150,"column":16},"end":{"line":150,"column":91}},"86":{"start":{"line":152,"column":12},"end":{"line":152,"column":24}},"87":{"start":{"line":154,"column":8},"end":{"line":154,"column":21}},"88":{"start":{"line":158,"column":0},"end":{"line":244,"column":2}},"89":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"90":{"start":{"line":161,"column":12},"end":{"line":161,"column":25}},"91":{"start":{"line":163,"column":8},"end":{"line":169,"column":9}},"92":{"start":{"line":164,"column":12},"end":{"line":164,"column":35}},"93":{"start":{"line":165,"column":12},"end":{"line":165,"column":46}},"94":{"start":{"line":166,"column":12},"end":{"line":166,"column":76}},"95":{"start":{"line":167,"column":12},"end":{"line":167,"column":65}},"96":{"start":{"line":168,"column":12},"end":{"line":168,"column":24}},"97":{"start":{"line":170,"column":8},"end":{"line":177,"column":9}},"98":{"start":{"line":171,"column":12},"end":{"line":171,"column":35}},"99":{"start":{"line":172,"column":12},"end":{"line":175,"column":14}},"100":{"start":{"line":176,"column":12},"end":{"line":176,"column":24}},"101":{"start":{"line":178,"column":8},"end":{"line":185,"column":9}},"102":{"start":{"line":179,"column":12},"end":{"line":179,"column":35}},"103":{"start":{"line":180,"column":12},"end":{"line":183,"column":14}},"104":{"start":{"line":184,"column":12},"end":{"line":184,"column":24}},"105":{"start":{"line":186,"column":8},"end":{"line":193,"column":9}},"106":{"start":{"line":187,"column":12},"end":{"line":187,"column":35}},"107":{"start":{"line":188,"column":12},"end":{"line":191,"column":14}},"108":{"start":{"line":192,"column":12},"end":{"line":192,"column":24}},"109":{"start":{"line":194,"column":8},"end":{"line":202,"column":9}},"110":{"start":{"line":195,"column":12},"end":{"line":195,"column":35}},"111":{"start":{"line":196,"column":12},"end":{"line":200,"column":14}},"112":{"start":{"line":201,"column":12},"end":{"line":201,"column":24}},"113":{"start":{"line":203,"column":8},"end":{"line":210,"column":9}},"114":{"start":{"line":204,"column":12},"end":{"line":204,"column":35}},"115":{"start":{"line":205,"column":12},"end":{"line":208,"column":14}},"116":{"start":{"line":209,"column":12},"end":{"line":209,"column":24}},"117":{"start":{"line":211,"column":8},"end":{"line":211,"column":21}},"118":{"start":{"line":214,"column":8},"end":{"line":241,"column":9}},"119":{"start":{"line":215,"column":12},"end":{"line":220,"column":13}},"120":{"start":{"line":216,"column":16},"end":{"line":216,"column":51}},"121":{"start":{"line":217,"column":16},"end":{"line":217,"column":81}},"122":{"start":{"line":218,"column":16},"end":{"line":218,"column":42}},"123":{"start":{"line":219,"column":16},"end":{"line":219,"column":28}},"124":{"start":{"line":221,"column":12},"end":{"line":224,"column":13}},"125":{"start":{"line":222,"column":16},"end":{"line":222,"column":57}},"126":{"start":{"line":223,"column":16},"end":{"line":223,"column":28}},"127":{"start":{"line":225,"column":12},"end":{"line":228,"column":13}},"128":{"start":{"line":226,"column":16},"end":{"line":226,"column":70}},"129":{"start":{"line":227,"column":16},"end":{"line":227,"column":28}},"130":{"start":{"line":229,"column":12},"end":{"line":232,"column":13}},"131":{"start":{"line":230,"column":16},"end":{"line":230,"column":70}},"132":{"start":{"line":231,"column":16},"end":{"line":231,"column":28}},"133":{"start":{"line":233,"column":12},"end":{"line":236,"column":13}},"134":{"start":{"line":234,"column":16},"end":{"line":234,"column":80}},"135":{"start":{"line":235,"column":16},"end":{"line":235,"column":28}},"136":{"start":{"line":237,"column":12},"end":{"line":240,"column":13}},"137":{"start":{"line":238,"column":16},"end":{"line":238,"column":74}},"138":{"start":{"line":239,"column":16},"end":{"line":239,"column":28}},"139":{"start":{"line":242,"column":8},"end":{"line":242,"column":21}},"140":{"start":{"line":246,"column":0},"end":{"line":348,"column":2}},"141":{"start":{"line":249,"column":8},"end":{"line":249,"column":36}},"142":{"start":{"line":252,"column":8},"end":{"line":252,"column":23}},"143":{"start":{"line":253,"column":8},"end":{"line":253,"column":69}},"144":{"start":{"line":255,"column":8},"end":{"line":312,"column":9}},"145":{"start":{"line":256,"column":12},"end":{"line":258,"column":13}},"146":{"start":{"line":257,"column":16},"end":{"line":257,"column":25}},"147":{"start":{"line":260,"column":12},"end":{"line":265,"column":14}},"148":{"start":{"line":267,"column":12},"end":{"line":267,"column":60}},"149":{"start":{"line":269,"column":12},"end":{"line":295,"column":13}},"150":{"start":{"line":270,"column":16},"end":{"line":294,"column":17}},"151":{"start":{"line":271,"column":20},"end":{"line":271,"column":37}},"152":{"start":{"line":272,"column":20},"end":{"line":287,"column":21}},"153":{"start":{"line":273,"column":24},"end":{"line":273,"column":65}},"154":{"start":{"line":274,"column":24},"end":{"line":286,"column":25}},"155":{"start":{"line":275,"column":28},"end":{"line":283,"column":29}},"156":{"start":{"line":276,"column":32},"end":{"line":279,"column":35}},"157":{"start":{"line":282,"column":32},"end":{"line":282,"column":62}},"158":{"start":{"line":284,"column":28},"end":{"line":284,"column":40}},"159":{"start":{"line":285,"column":28},"end":{"line":285,"column":34}},"160":{"start":{"line":288,"column":20},"end":{"line":293,"column":21}},"161":{"start":{"line":289,"column":24},"end":{"line":292,"column":27}},"162":{"start":{"line":297,"column":12},"end":{"line":297,"column":29}},"163":{"start":{"line":300,"column":12},"end":{"line":311,"column":13}},"164":{"start":{"line":301,"column":16},"end":{"line":310,"column":17}},"165":{"start":{"line":302,"column":20},"end":{"line":302,"column":75}},"166":{"start":{"line":303,"column":20},"end":{"line":309,"column":21}},"167":{"start":{"line":304,"column":24},"end":{"line":304,"column":85}},"168":{"start":{"line":306,"column":24},"end":{"line":308,"column":25}},"169":{"start":{"line":307,"column":28},"end":{"line":307,"column":108}},"170":{"start":{"line":314,"column":8},"end":{"line":314,"column":36}},"171":{"start":{"line":315,"column":8},"end":{"line":320,"column":9}},"172":{"start":{"line":316,"column":12},"end":{"line":316,"column":34}},"173":{"start":{"line":317,"column":12},"end":{"line":319,"column":13}},"174":{"start":{"line":318,"column":16},"end":{"line":318,"column":56}},"175":{"start":{"line":322,"column":8},"end":{"line":325,"column":10}},"176":{"start":{"line":328,"column":8},"end":{"line":346,"column":9}},"177":{"start":{"line":329,"column":12},"end":{"line":329,"column":31}},"178":{"start":{"line":330,"column":12},"end":{"line":330,"column":60}},"179":{"start":{"line":331,"column":12},"end":{"line":344,"column":13}},"180":{"start":{"line":332,"column":16},"end":{"line":332,"column":33}},"181":{"start":{"line":333,"column":16},"end":{"line":340,"column":17}},"182":{"start":{"line":334,"column":20},"end":{"line":334,"column":61}},"183":{"start":{"line":335,"column":20},"end":{"line":339,"column":21}},"184":{"start":{"line":336,"column":24},"end":{"line":336,"column":75}},"185":{"start":{"line":337,"column":24},"end":{"line":337,"column":36}},"186":{"start":{"line":338,"column":24},"end":{"line":338,"column":30}},"187":{"start":{"line":341,"column":16},"end":{"line":343,"column":17}},"188":{"start":{"line":342,"column":20},"end":{"line":342,"column":54}},"189":{"start":{"line":345,"column":12},"end":{"line":345,"column":83}},"190":{"start":{"line":350,"column":0},"end":{"line":350,"column":45}},"191":{"start":{"line":351,"column":0},"end":{"line":351,"column":48}},"192":{"start":{"line":352,"column":0},"end":{"line":352,"column":46}},"193":{"start":{"line":353,"column":0},"end":{"line":353,"column":46}},"194":{"start":{"line":354,"column":0},"end":{"line":354,"column":52}},"195":{"start":{"line":355,"column":0},"end":{"line":355,"column":53}},"196":{"start":{"line":357,"column":0},"end":{"line":357,"column":33}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":8}},{"start":{"line":14,"column":8},"end":{"line":14,"column":8}}]},"2":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":8}},{"start":{"line":17,"column":8},"end":{"line":17,"column":8}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":16},"end":{"line":20,"column":16}},{"start":{"line":20,"column":16},"end":{"line":20,"column":16}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":20},"end":{"line":24,"column":20}},{"start":{"line":24,"column":20},"end":{"line":24,"column":20}}]},"5":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]},"6":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":8}},{"start":{"line":43,"column":8},"end":{"line":43,"column":8}}]},"7":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":47,"column":16}},{"start":{"line":47,"column":16},"end":{"line":47,"column":16}}]},"8":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":20},"end":{"line":51,"column":20}},{"start":{"line":51,"column":20},"end":{"line":51,"column":20}}]},"9":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"10":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":77,"column":8}},{"start":{"line":77,"column":8},"end":{"line":77,"column":8}}]},"11":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"12":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":12},"end":{"line":87,"column":21}},{"start":{"line":87,"column":25},"end":{"line":87,"column":73}}]},"13":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":8}},{"start":{"line":104,"column":8},"end":{"line":104,"column":8}}]},"14":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":12},"end":{"line":104,"column":35}},{"start":{"line":104,"column":39},"end":{"line":104,"column":73}},{"start":{"line":105,"column":12},"end":{"line":105,"column":44}}]},"15":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":13},"end":{"line":109,"column":13}},{"start":{"line":109,"column":13},"end":{"line":109,"column":13}}]},"16":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":17},"end":{"line":109,"column":38}},{"start":{"line":109,"column":42},"end":{"line":109,"column":74}}]},"17":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":8},"end":{"line":117,"column":8}},{"start":{"line":117,"column":8},"end":{"line":117,"column":8}}]},"18":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":118,"column":12}},{"start":{"line":118,"column":12},"end":{"line":118,"column":12}}]},"19":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":8},"end":{"line":131,"column":8}},{"start":{"line":131,"column":8},"end":{"line":131,"column":8}}]},"20":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":143,"column":8}},{"start":{"line":143,"column":8},"end":{"line":143,"column":8}}]},"21":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":12},"end":{"line":143,"column":22}},{"start":{"line":143,"column":26},"end":{"line":143,"column":67}}]},"22":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":146,"column":12}},{"start":{"line":146,"column":12},"end":{"line":146,"column":12}}]},"23":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":160,"column":8}},{"start":{"line":160,"column":8},"end":{"line":160,"column":8}}]},"24":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":8}},{"start":{"line":163,"column":8},"end":{"line":163,"column":8}}]},"25":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":8}},{"start":{"line":170,"column":8},"end":{"line":170,"column":8}}]},"26":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":8},"end":{"line":178,"column":8}},{"start":{"line":178,"column":8},"end":{"line":178,"column":8}}]},"27":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":8},"end":{"line":186,"column":8}},{"start":{"line":186,"column":8},"end":{"line":186,"column":8}}]},"28":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]},"29":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"30":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":8},"end":{"line":214,"column":8}},{"start":{"line":214,"column":8},"end":{"line":214,"column":8}}]},"31":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":12},"end":{"line":215,"column":12}},{"start":{"line":215,"column":12},"end":{"line":215,"column":12}}]},"32":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":12},"end":{"line":221,"column":12}},{"start":{"line":221,"column":12},"end":{"line":221,"column":12}}]},"33":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":12},"end":{"line":225,"column":12}},{"start":{"line":225,"column":12},"end":{"line":225,"column":12}}]},"34":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":12},"end":{"line":229,"column":12}},{"start":{"line":229,"column":12},"end":{"line":229,"column":12}}]},"35":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":12},"end":{"line":233,"column":12}},{"start":{"line":233,"column":12},"end":{"line":233,"column":12}}]},"36":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":12},"end":{"line":237,"column":12}},{"start":{"line":237,"column":12},"end":{"line":237,"column":12}}]},"37":{"line":253,"type":"cond-expr","locations":[{"start":{"line":253,"column":52},"end":{"line":253,"column":61}},{"start":{"line":253,"column":64},"end":{"line":253,"column":68}}]},"38":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":12},"end":{"line":256,"column":12}},{"start":{"line":256,"column":12},"end":{"line":256,"column":12}}]},"39":{"line":263,"type":"cond-expr","locations":[{"start":{"line":263,"column":40},"end":{"line":263,"column":62}},{"start":{"line":263,"column":65},"end":{"line":263,"column":69}}]},"40":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":16},"end":{"line":270,"column":16}},{"start":{"line":270,"column":16},"end":{"line":270,"column":16}}]},"41":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":24},"end":{"line":274,"column":24}},{"start":{"line":274,"column":24},"end":{"line":274,"column":24}}]},"42":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":28},"end":{"line":275,"column":28}},{"start":{"line":275,"column":28},"end":{"line":275,"column":28}}]},"43":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":20},"end":{"line":288,"column":20}},{"start":{"line":288,"column":20},"end":{"line":288,"column":20}}]},"44":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":12},"end":{"line":300,"column":12}},{"start":{"line":300,"column":12},"end":{"line":300,"column":12}}]},"45":{"line":300,"type":"binary-expr","locations":[{"start":{"line":300,"column":16},"end":{"line":300,"column":34}},{"start":{"line":300,"column":38},"end":{"line":300,"column":65}}]},"46":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":20},"end":{"line":303,"column":20}},{"start":{"line":303,"column":20},"end":{"line":303,"column":20}}]},"47":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":24},"end":{"line":303,"column":42}},{"start":{"line":303,"column":46},"end":{"line":303,"column":64}}]},"48":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":24},"end":{"line":306,"column":24}},{"start":{"line":306,"column":24},"end":{"line":306,"column":24}}]},"49":{"line":306,"type":"binary-expr","locations":[{"start":{"line":306,"column":28},"end":{"line":306,"column":56}},{"start":{"line":306,"column":60},"end":{"line":306,"column":97}}]},"50":{"line":315,"type":"if","locations":[{"start":{"line":315,"column":8},"end":{"line":315,"column":8}},{"start":{"line":315,"column":8},"end":{"line":315,"column":8}}]},"51":{"line":335,"type":"if","locations":[{"start":{"line":335,"column":20},"end":{"line":335,"column":20}},{"start":{"line":335,"column":20},"end":{"line":335,"column":20}}]},"52":{"line":336,"type":"binary-expr","locations":[{"start":{"line":336,"column":34},"end":{"line":336,"column":45}},{"start":{"line":336,"column":49},"end":{"line":336,"column":58}}]},"53":{"line":341,"type":"if","locations":[{"start":{"line":341,"column":16},"end":{"line":341,"column":16}},{"start":{"line":341,"column":16},"end":{"line":341,"column":16}}]}},"code":["\"use strict\";","let constants = require(\"../common/constants\");","let specStrings = require(\"../common/specStrings\");","let _ = require(\"lodash\");","let is = require(\"../common/is\");","let ScopeNode = require(\"./scopeNode\");","let errors = require(\"../common/errors\");","let converters = require(\"../common/converters\");","let Serializer = require(\"backpack-node\").system.Serializer;","","let arrayHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        let ser = null;","        if (!serializer) {","            ser = new Serializer(); // It should get serialized internally.","        }","        if (_.isArray(propValue)) {","            let stuff = [];","            for (let pv of propValue) {","                if (is.activity(pv)) {","                    stuff.push(specStrings.hosting.createActivityInstancePart(pv.instanceId));","                }","                else {","                    if (!serializer) {","                        stuff.push(ser.toJSON(pv));","                    }","                    else {","                        stuff.push(pv);","                    }","                }","            }","            result.name = propName;","            result.value = stuff;","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        let ser = null;","        if (!serializer) {","            ser = new Serializer(); // It should get serialized internally.","        }","        if (_.isArray(part.value)) {","            let scopePartValue = [];","            for (let pv of part.value) {","                let activityId = specStrings.hosting.getInstanceId(pv);","                if (activityId) {","                    scopePartValue.push(getActivityById(activityId));","                }","                else {","                    if (!serializer) {","                        scopePartValue.push(ser.fromJSON(pv));","                    }","                    else {","                        scopePartValue.push(pv);","                    }","                }","            }","            result.value = scopePartValue;","            return true;","        }","        return false;","    }","};","","let activityHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        if (is.activity(propValue)) {","            result.name = propName;","            result.value = specStrings.hosting.createActivityInstancePart(propValue.instanceId);","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        let activityId = specStrings.hosting.getInstanceId(part.value);","        if (activityId) {","            result.value = getActivityById(activityId);","            return true;","        }","        return false;","    }","};","","let parentHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        if (propValue && propValue.__marker === constants.markers.$parent) {","            result.name = propName;","            result.value = {","                $type: constants.markers.$parent,","                id: propValue.$activity.instanceId","            };","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        return false;","    }","};","","let activityPropHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        if (_.isFunction(propValue) && !activity.hasOwnProperty(propName) &&","            _.isFunction(activity[propName])) {","            result.value = specStrings.hosting.createActivityPropertyPart(propName);","            return true;","        }","        else if (_.isObject(propValue) && propValue === activity[propName]) {","            result.value = specStrings.hosting.createActivityPropertyPart(propName);","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        let activityProperty = specStrings.hosting.getActivityPropertyName(part);","        if (activityProperty) {","            if (_.isUndefined(activity[activityProperty])) {","                throw new errors.ActivityRuntimeError(\"Activity has no property '\" + part + \"'.\");","            }","            result.name = activityProperty;","            result.value = activity[activityProperty];","            return true;","        }","        return false;","    }","};","","let errorInstanceHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        if (propValue instanceof Error) {","            result.name = propName;","            result.value = {","                type: constants.types.error,","                name: propValue.name,","                stack: propValue.stack","            };","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        if (part.value && part.value.type === constants.types.error) {","            let errorName = part.value.name;","            let ErrorConstructor = global[errorName];","            if (_.isFunction(ErrorConstructor)) {","                result.value = new ErrorConstructor(part.value.stack);","            }","            else {","                result.value = new Error(`Error: ${errorName} Stack: ${part.value.stack}`);","            }","            return true;","        }","        return false;","    }","};","","let objectHandler = {","    serialize: function (serializer, activity, execContext, getActivityById, propName, propValue, result) {","        if (serializer) {","            return false; // it's handled externally.","        }","        if (propName === \"__schedulingState\") {","            result.name = propName;","            result.value = _.clone(propValue);","            result.value.indices = converters.mapToArray(propValue.indices);","            result.value.$type = constants.types.schedulingState;","            return true;","        }","        if (_.isDate(propValue)) {","            result.name = propName;","            result.value = {","                time: propValue.getTime(),","                $type: constants.types.date","            };","            return true;","        }","        if (propValue instanceof Map) {","            result.name = propName;","            result.value = {","                data: converters.mapToArray(propValue),","                $type: constants.types.map","            };","            return true;","        }","        if (propValue instanceof Set) {","            result.name = propName;","            result.value = {","                data: converters.setToArray(propValue),","                $type: constants.types.set","            };","            return true;","        }","        if (propValue instanceof RegExp) {","            result.name = propName;","            result.value = {","                pattern: propValue.pattern,","                flags: propValue.flags,","                $type: constants.types.rex","            };","            return true;","        }","        if (_.isPlainObject(propValue)) {","            result.name = propName;","            result.value = {","                data: new Serializer().toJSON(propValue),","                $type: constants.types.object","            };","            return true;","        }","        return false;","    },","    deserialize: function (serializer, activity, getActivityById, part, result) {","        if (part.value) {","            if (part.value.$type === constants.types.schedulingState) {","                result.value = _.clone(part.value);","                result.value.indices = converters.arrayToMap(part.value.indices);","                delete result.value.$type;","                return true;","            }","            if (part.value.$type === constants.types.date) {","                result.value = new Date(part.value.time);","                return true;","            }","            if (part.value.$type === constants.types.map) {","                result.value = converters.arrayToMap(part.value.data);","                return true;","            }","            if (part.value.$type === constants.types.set) {","                result.value = converters.arrayToSet(part.value.data);","                return true;","            }","            if (part.value.$type === constants.types.rex) {","                result.value = new RegExp(part.value.pattern, part.value.flags);","                return true;","            }","            if (part.value.$type === constants.types.object) {","                result.value = new Serializer().fromJSON(part.value.data);","                return true;","            }","        }","        return false;","    }","};","","let scopeSerializer = {","    handlers: [],","    installHandler: function (handler) {","        this.handlers.push(handler);","    },","    serialize: function (execContext, getActivityById, enablePromotions, nodes, serializer) {","        let state = [];","        let promotedProperties = enablePromotions ? new Map() : null;","","        for (let node of nodes) {","            if (node.instanceId === constants.ids.initialScope) {","                continue;","            }","","            let item = {","                instanceId: node.instanceId,","                userId: node.userId,","                parentId: node.parent ? node.parent.instanceId : null,","                parts: []","            };","","            let activity = getActivityById(node.instanceId);","","            for (let prop of node.properties()) {","                if (!activity.nonSerializedProperties.has(prop.name)) {","                    let done = false;","                    for (let handler of this.handlers) {","                        let result = { name: null, value: null };","                        if (handler.serialize(serializer, activity, execContext, getActivityById, prop.name, prop.value, result)) {","                            if (result.name) {","                                item.parts.push({","                                    name: prop.name,","                                    value: result.value","                                });","                            }","                            else {","                                item.parts.push(result.value);","                            }","                            done = true;","                            break;","                        }","                    }","                    if (!done) {","                        item.parts.push({","                            name: prop.name,","                            value: prop.value","                        });","                    }","                }","            }","","            state.push(item);","","            // Promotions:","            if (promotedProperties && activity.promotedProperties) {","                for (let promotedPropName of activity.promotedProperties) {","                    let pv = node.getPropertyValue(promotedPropName, true);","                    if (!_.isUndefined(pv) && !(is.activity(pv))) {","                        let promotedEntry = promotedProperties.get(promotedPropName);","                        // If an Activity Id greater than other, then we can sure that other below or after in the tree.","                        if (_.isUndefined(promotedEntry) || node.instanceId > promotedEntry.level) {","                            promotedProperties.set(promotedPropName, { level: node.instanceId, value: pv });","                        }","                    }","                }","            }","        }","","        let actualPromotions = null;","        if (promotedProperties) {","            actualPromotions = {};","            for (let kvp of promotedProperties.entries()) {","                actualPromotions[kvp[0]] = kvp[1].value;","            }","        }","","        return {","            state: state,","            promotedProperties: actualPromotions","        };","    },","    deserializeNodes: function* (getActivityById, json, serializer) {","        for (let item of json) {","            let scopePart = {};","            let activity = getActivityById(item.instanceId);","            for (let part of item.parts) {","                let done = false;","                for (let handler of this.handlers) {","                    let result = { name: null, value: null };","                    if (handler.deserialize(serializer, activity, getActivityById, part, result)) {","                        scopePart[result.name || part.name] = result.value;","                        done = true;","                        break;","                    }","                }","                if (!done) {","                    scopePart[part.name] = part.value;","                }","            }","            yield new ScopeNode(item.instanceId, scopePart, item.userId, activity);","        }","    }","};","","scopeSerializer.installHandler(arrayHandler);","scopeSerializer.installHandler(activityHandler);","scopeSerializer.installHandler(parentHandler);","scopeSerializer.installHandler(objectHandler);","scopeSerializer.installHandler(activityPropHandler);","scopeSerializer.installHandler(errorInstanceHandler);","","module.exports = scopeSerializer;"],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"13":0,"14":0,"15":0,"17":0,"18":0,"19":0,"20":0,"21":0,"24":0,"25":0,"28":0,"32":0,"33":0,"34":0,"36":0,"39":0,"40":0,"41":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"51":0,"52":0,"55":0,"59":0,"60":0,"62":0,"66":1,"68":0,"69":0,"70":0,"71":0,"73":0,"76":0,"77":0,"78":0,"79":0,"81":0,"85":1,"87":0,"88":0,"89":0,"93":0,"95":0,"98":0,"102":1,"104":0,"106":0,"107":0,"109":0,"110":0,"111":0,"113":0,"116":0,"117":0,"118":0,"119":0,"121":0,"122":0,"123":0,"125":0,"129":1,"131":0,"132":0,"133":0,"138":0,"140":0,"143":0,"144":0,"145":0,"146":0,"147":0,"150":0,"152":0,"154":0,"158":1,"160":0,"161":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"170":0,"171":0,"172":0,"176":0,"178":0,"179":0,"180":0,"184":0,"186":0,"187":0,"188":0,"192":0,"194":0,"195":0,"196":0,"201":0,"203":0,"204":0,"205":0,"209":0,"211":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"221":0,"222":0,"223":0,"225":0,"226":0,"227":0,"229":0,"230":0,"231":0,"233":0,"234":0,"235":0,"237":0,"238":0,"239":0,"242":0,"246":1,"249":6,"252":0,"253":0,"255":0,"256":0,"257":0,"260":0,"267":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"282":0,"284":0,"285":0,"288":0,"289":0,"297":0,"300":0,"301":0,"302":0,"303":0,"304":0,"306":0,"307":0,"314":0,"315":0,"316":0,"317":0,"318":0,"322":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"341":0,"342":0,"345":0,"350":1,"351":1,"352":1,"353":1,"354":1,"355":1,"357":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityStateTracker.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityStateTracker.js","s":{"1":1,"2":0,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"ActivityStateTracker","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}}},"2":{"name":"(anonymous_2)","line":7,"loc":{"start":{"line":7,"column":54},"end":{"line":7,"column":70}}},"3":{"name":"(anonymous_3)","line":13,"loc":{"start":{"line":13,"column":53},"end":{"line":13,"column":69}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":22}},"3":{"start":{"line":7,"column":0},"end":{"line":11,"column":2}},"4":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":63}},"6":{"start":{"line":13,"column":0},"end":{"line":20,"column":2}},"7":{"start":{"line":14,"column":4},"end":{"line":19,"column":5}},"8":{"start":{"line":15,"column":8},"end":{"line":15,"column":52}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":20}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}}},"branchMap":{"1":{"line":8,"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":8,"column":4}},{"start":{"line":8,"column":4},"end":{"line":8,"column":4}}]},"2":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":8},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":95}}]},"3":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]}},"code":["\"use strict\";","","function ActivityStateTracker(impl) {","    this._impl = impl;","}","","ActivityStateTracker.prototype.activityStateChanged = function (args) {","    if (typeof this._impl.activityStateChanged === \"function\" && this.activityStateFilter(args)) {","        this._impl.activityStateChanged.call(this._impl, args);","    }","};","","ActivityStateTracker.prototype.activityStateFilter = function (args) {","    if (typeof this._impl.activityStateFilter === \"function\") {","        return this._impl.activityStateFilter(args);","    }","    else {","        return true;","    }","};","","module.exports = ActivityStateTracker;",""],"l":{"3":1,"4":0,"7":1,"8":0,"9":0,"13":1,"14":0,"15":0,"18":0,"22":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityMarkup.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/activityMarkup.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":1,"37":0,"38":1,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":1,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":1,"146":0,"147":1,"148":0,"149":0,"150":0,"151":1,"152":0,"153":0,"154":0,"155":1,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":1,"196":0,"197":1,"198":0,"199":0,"200":0,"201":0,"202":0,"203":1,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":1,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":1,"225":0,"226":1,"227":1,"228":0,"229":0,"230":0,"231":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"fnMap":{"1":{"name":"getActivityTypeName","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}}},"2":{"name":"requireFromRoot","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":35}}},"3":{"name":"ActivityMarkup","line":53,"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":26}}},"4":{"name":"(anonymous_4)","line":58,"loc":{"start":{"line":58,"column":48},"end":{"line":58,"column":60}}},"5":{"name":"(anonymous_5)","line":62,"loc":{"start":{"line":62,"column":42},"end":{"line":62,"column":64}}},"6":{"name":"(anonymous_6)","line":66,"loc":{"start":{"line":66,"column":44},"end":{"line":66,"column":73}}},"7":{"name":"(anonymous_7)","line":69,"loc":{"start":{"line":69,"column":32},"end":{"line":69,"column":49}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":36},"end":{"line":79,"column":52}}},"9":{"name":"(anonymous_9)","line":94,"loc":{"start":{"line":94,"column":40},"end":{"line":94,"column":54}}},"10":{"name":"(anonymous_10)","line":98,"loc":{"start":{"line":98,"column":33},"end":{"line":98,"column":51}}},"11":{"name":"(anonymous_11)","line":124,"loc":{"start":{"line":124,"column":43},"end":{"line":124,"column":68}}},"12":{"name":"(anonymous_12)","line":125,"loc":{"start":{"line":125,"column":46},"end":{"line":125,"column":59}}},"13":{"name":"(anonymous_13)","line":139,"loc":{"start":{"line":139,"column":58},"end":{"line":139,"column":93}}},"14":{"name":"(anonymous_14)","line":155,"loc":{"start":{"line":155,"column":51},"end":{"line":155,"column":75}}},"15":{"name":"(anonymous_15)","line":163,"loc":{"start":{"line":163,"column":42},"end":{"line":163,"column":78}}},"16":{"name":"noFunction","line":167,"loc":{"start":{"line":167,"column":4},"end":{"line":167,"column":35}}},"17":{"name":"(anonymous_17)","line":232,"loc":{"start":{"line":232,"column":36},"end":{"line":232,"column":61}}},"18":{"name":"(anonymous_18)","line":248,"loc":{"start":{"line":248,"column":40},"end":{"line":248,"column":101}}},"19":{"name":"toTemplate","line":252,"loc":{"start":{"line":252,"column":4},"end":{"line":252,"column":33}}},"20":{"name":"toFunc","line":258,"loc":{"start":{"line":258,"column":4},"end":{"line":258,"column":23}}},"21":{"name":"toExpression","line":264,"loc":{"start":{"line":264,"column":4},"end":{"line":264,"column":31}}},"22":{"name":"(anonymous_22)","line":334,"loc":{"start":{"line":334,"column":34},"end":{"line":334,"column":48}}},"23":{"name":"(anonymous_23)","line":338,"loc":{"start":{"line":338,"column":38},"end":{"line":338,"column":56}}},"24":{"name":"(anonymous_24)","line":347,"loc":{"start":{"line":347,"column":37},"end":{"line":347,"column":52}}},"25":{"name":"(anonymous_25)","line":362,"loc":{"start":{"line":362,"column":46},"end":{"line":362,"column":61}}},"26":{"name":"(anonymous_26)","line":382,"loc":{"start":{"line":382,"column":36},"end":{"line":382,"column":56}}},"27":{"name":"(anonymous_27)","line":397,"loc":{"start":{"line":397,"column":11},"end":{"line":397,"column":29}}},"28":{"name":"(anonymous_28)","line":401,"loc":{"start":{"line":401,"column":14},"end":{"line":401,"column":34}}},"29":{"name":"(anonymous_29)","line":405,"loc":{"start":{"line":405,"column":15},"end":{"line":405,"column":30}}},"30":{"name":"(anonymous_30)","line":409,"loc":{"start":{"line":409,"column":14},"end":{"line":409,"column":34}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":37}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":27}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":60}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":51}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":60}},"10":{"start":{"line":15,"column":0},"end":{"line":23,"column":1}},"11":{"start":{"line":16,"column":4},"end":{"line":21,"column":5}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":51}},"13":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"14":{"start":{"line":19,"column":12},"end":{"line":19,"column":29}},"15":{"start":{"line":22,"column":4},"end":{"line":22,"column":16}},"16":{"start":{"line":25,"column":0},"end":{"line":51,"column":1}},"17":{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},"18":{"start":{"line":27,"column":8},"end":{"line":27,"column":33}},"19":{"start":{"line":30,"column":8},"end":{"line":30,"column":18}},"20":{"start":{"line":32,"column":4},"end":{"line":32,"column":37}},"21":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"22":{"start":{"line":34,"column":8},"end":{"line":34,"column":33}},"23":{"start":{"line":36,"column":4},"end":{"line":36,"column":42}},"24":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":33}},"26":{"start":{"line":40,"column":4},"end":{"line":50,"column":5}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":33}},"28":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"29":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":27}},"31":{"start":{"line":46,"column":8},"end":{"line":46,"column":19}},"32":{"start":{"line":49,"column":8},"end":{"line":49,"column":33}},"33":{"start":{"line":53,"column":0},"end":{"line":56,"column":1}},"34":{"start":{"line":54,"column":4},"end":{"line":54,"column":34}},"35":{"start":{"line":55,"column":4},"end":{"line":55,"column":32}},"36":{"start":{"line":58,"column":0},"end":{"line":60,"column":2}},"37":{"start":{"line":59,"column":4},"end":{"line":59,"column":35}},"38":{"start":{"line":62,"column":0},"end":{"line":64,"column":2}},"39":{"start":{"line":63,"column":4},"end":{"line":63,"column":57}},"40":{"start":{"line":66,"column":0},"end":{"line":77,"column":2}},"41":{"start":{"line":67,"column":4},"end":{"line":67,"column":20}},"42":{"start":{"line":68,"column":4},"end":{"line":68,"column":42}},"43":{"start":{"line":69,"column":4},"end":{"line":76,"column":7}},"44":{"start":{"line":70,"column":8},"end":{"line":70,"column":41}},"45":{"start":{"line":71,"column":8},"end":{"line":74,"column":9}},"46":{"start":{"line":73,"column":12},"end":{"line":73,"column":36}},"47":{"start":{"line":75,"column":8},"end":{"line":75,"column":30}},"48":{"start":{"line":79,"column":0},"end":{"line":92,"column":2}},"49":{"start":{"line":80,"column":4},"end":{"line":90,"column":5}},"50":{"start":{"line":81,"column":8},"end":{"line":81,"column":49}},"51":{"start":{"line":82,"column":8},"end":{"line":89,"column":21}},"52":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"53":{"start":{"line":85,"column":16},"end":{"line":85,"column":29}},"54":{"start":{"line":87,"column":12},"end":{"line":87,"column":31}},"55":{"start":{"line":91,"column":4},"end":{"line":91,"column":16}},"56":{"start":{"line":94,"column":0},"end":{"line":96,"column":2}},"57":{"start":{"line":95,"column":4},"end":{"line":95,"column":46}},"58":{"start":{"line":98,"column":0},"end":{"line":122,"column":2}},"59":{"start":{"line":99,"column":4},"end":{"line":101,"column":5}},"60":{"start":{"line":100,"column":8},"end":{"line":100,"column":60}},"61":{"start":{"line":102,"column":4},"end":{"line":104,"column":5}},"62":{"start":{"line":103,"column":8},"end":{"line":103,"column":36}},"63":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"64":{"start":{"line":106,"column":8},"end":{"line":106,"column":73}},"65":{"start":{"line":109,"column":4},"end":{"line":109,"column":26}},"66":{"start":{"line":110,"column":4},"end":{"line":112,"column":5}},"67":{"start":{"line":111,"column":8},"end":{"line":111,"column":34}},"68":{"start":{"line":113,"column":4},"end":{"line":113,"column":33}},"69":{"start":{"line":114,"column":4},"end":{"line":116,"column":5}},"70":{"start":{"line":115,"column":8},"end":{"line":115,"column":34}},"71":{"start":{"line":117,"column":4},"end":{"line":117,"column":55}},"72":{"start":{"line":118,"column":4},"end":{"line":120,"column":5}},"73":{"start":{"line":119,"column":8},"end":{"line":119,"column":35}},"74":{"start":{"line":121,"column":4},"end":{"line":121,"column":20}},"75":{"start":{"line":124,"column":0},"end":{"line":137,"column":2}},"76":{"start":{"line":125,"column":4},"end":{"line":125,"column":89}},"77":{"start":{"line":125,"column":61},"end":{"line":125,"column":85}},"78":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"79":{"start":{"line":127,"column":8},"end":{"line":127,"column":101}},"80":{"start":{"line":130,"column":4},"end":{"line":130,"column":59}},"81":{"start":{"line":131,"column":4},"end":{"line":136,"column":5}},"82":{"start":{"line":132,"column":8},"end":{"line":132,"column":81}},"83":{"start":{"line":135,"column":8},"end":{"line":135,"column":139}},"84":{"start":{"line":139,"column":0},"end":{"line":153,"column":2}},"85":{"start":{"line":140,"column":4},"end":{"line":140,"column":65}},"86":{"start":{"line":141,"column":4},"end":{"line":143,"column":5}},"87":{"start":{"line":142,"column":8},"end":{"line":142,"column":121}},"88":{"start":{"line":144,"column":4},"end":{"line":147,"column":6}},"89":{"start":{"line":148,"column":4},"end":{"line":148,"column":38}},"90":{"start":{"line":149,"column":4},"end":{"line":151,"column":5}},"91":{"start":{"line":150,"column":8},"end":{"line":150,"column":54}},"92":{"start":{"line":152,"column":4},"end":{"line":152,"column":29}},"93":{"start":{"line":155,"column":0},"end":{"line":161,"column":2}},"94":{"start":{"line":156,"column":4},"end":{"line":156,"column":39}},"95":{"start":{"line":157,"column":4},"end":{"line":159,"column":5}},"96":{"start":{"line":158,"column":8},"end":{"line":158,"column":20}},"97":{"start":{"line":160,"column":4},"end":{"line":160,"column":29}},"98":{"start":{"line":163,"column":0},"end":{"line":230,"column":2}},"99":{"start":{"line":164,"column":4},"end":{"line":164,"column":20}},"100":{"start":{"line":165,"column":4},"end":{"line":165,"column":37}},"101":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"102":{"start":{"line":168,"column":8},"end":{"line":168,"column":54}},"103":{"start":{"line":171,"column":4},"end":{"line":229,"column":5}},"104":{"start":{"line":173,"column":8},"end":{"line":173,"column":27}},"105":{"start":{"line":174,"column":8},"end":{"line":176,"column":9}},"106":{"start":{"line":175,"column":12},"end":{"line":175,"column":92}},"107":{"start":{"line":178,"column":9},"end":{"line":229,"column":5}},"108":{"start":{"line":179,"column":8},"end":{"line":179,"column":22}},"109":{"start":{"line":181,"column":8},"end":{"line":218,"column":9}},"110":{"start":{"line":182,"column":12},"end":{"line":217,"column":13}},"111":{"start":{"line":183,"column":16},"end":{"line":216,"column":17}},"112":{"start":{"line":184,"column":20},"end":{"line":184,"column":99}},"113":{"start":{"line":185,"column":20},"end":{"line":187,"column":21}},"114":{"start":{"line":186,"column":24},"end":{"line":186,"column":32}},"115":{"start":{"line":188,"column":20},"end":{"line":188,"column":44}},"116":{"start":{"line":190,"column":21},"end":{"line":216,"column":17}},"117":{"start":{"line":191,"column":20},"end":{"line":193,"column":21}},"118":{"start":{"line":192,"column":24},"end":{"line":192,"column":147}},"119":{"start":{"line":194,"column":20},"end":{"line":194,"column":41}},"120":{"start":{"line":196,"column":21},"end":{"line":216,"column":17}},"121":{"start":{"line":198,"column":20},"end":{"line":200,"column":21}},"122":{"start":{"line":199,"column":24},"end":{"line":199,"column":156}},"123":{"start":{"line":201,"column":20},"end":{"line":201,"column":131}},"124":{"start":{"line":203,"column":21},"end":{"line":216,"column":17}},"125":{"start":{"line":205,"column":20},"end":{"line":207,"column":21}},"126":{"start":{"line":206,"column":24},"end":{"line":206,"column":156}},"127":{"start":{"line":208,"column":20},"end":{"line":208,"column":131}},"128":{"start":{"line":210,"column":21},"end":{"line":216,"column":17}},"129":{"start":{"line":212,"column":20},"end":{"line":212,"column":58}},"130":{"start":{"line":215,"column":20},"end":{"line":215,"column":137}},"131":{"start":{"line":219,"column":8},"end":{"line":224,"column":9}},"132":{"start":{"line":220,"column":12},"end":{"line":220,"column":35}},"133":{"start":{"line":221,"column":12},"end":{"line":221,"column":91}},"134":{"start":{"line":222,"column":12},"end":{"line":222,"column":35}},"135":{"start":{"line":223,"column":12},"end":{"line":223,"column":27}},"136":{"start":{"line":228,"column":8},"end":{"line":228,"column":87}},"137":{"start":{"line":232,"column":0},"end":{"line":246,"column":2}},"138":{"start":{"line":233,"column":4},"end":{"line":233,"column":20}},"139":{"start":{"line":235,"column":4},"end":{"line":245,"column":5}},"140":{"start":{"line":236,"column":8},"end":{"line":238,"column":9}},"141":{"start":{"line":237,"column":12},"end":{"line":237,"column":39}},"142":{"start":{"line":240,"column":9},"end":{"line":245,"column":5}},"143":{"start":{"line":241,"column":8},"end":{"line":241,"column":45}},"144":{"start":{"line":244,"column":8},"end":{"line":244,"column":108}},"145":{"start":{"line":248,"column":0},"end":{"line":332,"column":2}},"146":{"start":{"line":249,"column":4},"end":{"line":249,"column":20}},"147":{"start":{"line":252,"column":4},"end":{"line":256,"column":5}},"148":{"start":{"line":253,"column":8},"end":{"line":253,"column":71}},"149":{"start":{"line":254,"column":8},"end":{"line":254,"column":35}},"150":{"start":{"line":255,"column":8},"end":{"line":255,"column":24}},"151":{"start":{"line":258,"column":4},"end":{"line":262,"column":5}},"152":{"start":{"line":259,"column":8},"end":{"line":259,"column":63}},"153":{"start":{"line":260,"column":8},"end":{"line":260,"column":22}},"154":{"start":{"line":261,"column":8},"end":{"line":261,"column":20}},"155":{"start":{"line":264,"column":4},"end":{"line":268,"column":5}},"156":{"start":{"line":265,"column":8},"end":{"line":265,"column":69}},"157":{"start":{"line":266,"column":8},"end":{"line":266,"column":24}},"158":{"start":{"line":267,"column":8},"end":{"line":267,"column":20}},"159":{"start":{"line":270,"column":4},"end":{"line":329,"column":5}},"160":{"start":{"line":271,"column":8},"end":{"line":280,"column":9}},"161":{"start":{"line":272,"column":12},"end":{"line":272,"column":28}},"162":{"start":{"line":273,"column":12},"end":{"line":275,"column":13}},"163":{"start":{"line":274,"column":16},"end":{"line":274,"column":57}},"164":{"start":{"line":276,"column":12},"end":{"line":276,"column":26}},"165":{"start":{"line":278,"column":13},"end":{"line":280,"column":9}},"166":{"start":{"line":279,"column":12},"end":{"line":279,"column":38}},"167":{"start":{"line":282,"column":9},"end":{"line":329,"column":5}},"168":{"start":{"line":283,"column":8},"end":{"line":283,"column":40}},"169":{"start":{"line":284,"column":8},"end":{"line":298,"column":9}},"170":{"start":{"line":285,"column":12},"end":{"line":285,"column":42}},"171":{"start":{"line":286,"column":12},"end":{"line":286,"column":47}},"172":{"start":{"line":288,"column":12},"end":{"line":291,"column":13}},"173":{"start":{"line":290,"column":16},"end":{"line":290,"column":34}},"174":{"start":{"line":293,"column":12},"end":{"line":293,"column":66}},"175":{"start":{"line":294,"column":12},"end":{"line":297,"column":13}},"176":{"start":{"line":296,"column":16},"end":{"line":296,"column":92}},"177":{"start":{"line":301,"column":8},"end":{"line":303,"column":9}},"178":{"start":{"line":302,"column":12},"end":{"line":302,"column":38}},"179":{"start":{"line":305,"column":9},"end":{"line":329,"column":5}},"180":{"start":{"line":306,"column":8},"end":{"line":306,"column":32}},"181":{"start":{"line":307,"column":8},"end":{"line":323,"column":9}},"182":{"start":{"line":308,"column":12},"end":{"line":308,"column":18}},"183":{"start":{"line":309,"column":12},"end":{"line":309,"column":59}},"184":{"start":{"line":310,"column":12},"end":{"line":310,"column":21}},"185":{"start":{"line":311,"column":12},"end":{"line":316,"column":13}},"186":{"start":{"line":312,"column":16},"end":{"line":312,"column":33}},"187":{"start":{"line":315,"column":16},"end":{"line":315,"column":25}},"188":{"start":{"line":318,"column":13},"end":{"line":323,"column":9}},"189":{"start":{"line":319,"column":12},"end":{"line":322,"column":13}},"190":{"start":{"line":321,"column":16},"end":{"line":321,"column":51}},"191":{"start":{"line":325,"column":9},"end":{"line":329,"column":5}},"192":{"start":{"line":326,"column":8},"end":{"line":328,"column":9}},"193":{"start":{"line":327,"column":12},"end":{"line":327,"column":34}},"194":{"start":{"line":331,"column":4},"end":{"line":331,"column":31}},"195":{"start":{"line":334,"column":0},"end":{"line":336,"column":2}},"196":{"start":{"line":335,"column":4},"end":{"line":335,"column":42}},"197":{"start":{"line":338,"column":0},"end":{"line":345,"column":2}},"198":{"start":{"line":339,"column":4},"end":{"line":339,"column":17}},"199":{"start":{"line":340,"column":4},"end":{"line":340,"column":38}},"200":{"start":{"line":341,"column":4},"end":{"line":343,"column":5}},"201":{"start":{"line":342,"column":8},"end":{"line":342,"column":44}},"202":{"start":{"line":344,"column":4},"end":{"line":344,"column":40}},"203":{"start":{"line":347,"column":0},"end":{"line":360,"column":2}},"204":{"start":{"line":348,"column":4},"end":{"line":350,"column":5}},"205":{"start":{"line":349,"column":8},"end":{"line":349,"column":19}},"206":{"start":{"line":351,"column":4},"end":{"line":353,"column":5}},"207":{"start":{"line":352,"column":8},"end":{"line":352,"column":33}},"208":{"start":{"line":354,"column":4},"end":{"line":356,"column":5}},"209":{"start":{"line":355,"column":8},"end":{"line":355,"column":70}},"210":{"start":{"line":357,"column":4},"end":{"line":357,"column":34}},"211":{"start":{"line":358,"column":4},"end":{"line":358,"column":36}},"212":{"start":{"line":359,"column":4},"end":{"line":359,"column":34}},"213":{"start":{"line":362,"column":0},"end":{"line":378,"column":2}},"214":{"start":{"line":363,"column":4},"end":{"line":363,"column":20}},"215":{"start":{"line":364,"column":4},"end":{"line":377,"column":5}},"216":{"start":{"line":365,"column":8},"end":{"line":365,"column":40}},"217":{"start":{"line":366,"column":8},"end":{"line":376,"column":9}},"218":{"start":{"line":367,"column":12},"end":{"line":367,"column":51}},"219":{"start":{"line":369,"column":13},"end":{"line":376,"column":9}},"220":{"start":{"line":370,"column":12},"end":{"line":370,"column":48}},"221":{"start":{"line":372,"column":13},"end":{"line":376,"column":9}},"222":{"start":{"line":373,"column":12},"end":{"line":375,"column":13}},"223":{"start":{"line":374,"column":16},"end":{"line":374,"column":43}},"224":{"start":{"line":382,"column":0},"end":{"line":390,"column":2}},"225":{"start":{"line":389,"column":4},"end":{"line":389,"column":42}},"226":{"start":{"line":394,"column":0},"end":{"line":394,"column":26}},"227":{"start":{"line":396,"column":0},"end":{"line":412,"column":2}},"228":{"start":{"line":398,"column":8},"end":{"line":398,"column":89}},"229":{"start":{"line":402,"column":8},"end":{"line":402,"column":94}},"230":{"start":{"line":406,"column":8},"end":{"line":406,"column":90}},"231":{"start":{"line":410,"column":8},"end":{"line":410,"column":106}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"3":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":18}},{"start":{"line":18,"column":22},"end":{"line":18,"column":41}}]},"4":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":4}},{"start":{"line":37,"column":4},"end":{"line":37,"column":4}}]},"6":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":8}},{"start":{"line":71,"column":8},"end":{"line":71,"column":8}}]},"7":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":17}},{"start":{"line":71,"column":21},"end":{"line":71,"column":38}}]},"8":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"9":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":26}},{"start":{"line":80,"column":30},"end":{"line":80,"column":57}}]},"10":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":84,"column":12}},{"start":{"line":84,"column":12},"end":{"line":84,"column":12}}]},"11":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"12":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"13":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"14":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"15":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]},"16":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"17":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":4},"end":{"line":131,"column":4}},{"start":{"line":131,"column":4},"end":{"line":131,"column":4}}]},"18":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":141,"column":4}},{"start":{"line":141,"column":4},"end":{"line":141,"column":4}}]},"19":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"20":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":4},"end":{"line":157,"column":4}},{"start":{"line":157,"column":4},"end":{"line":157,"column":4}}]},"21":{"line":171,"type":"if","locations":[{"start":{"line":171,"column":4},"end":{"line":171,"column":4}},{"start":{"line":171,"column":4},"end":{"line":171,"column":4}}]},"22":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":9},"end":{"line":178,"column":9}},{"start":{"line":178,"column":9},"end":{"line":178,"column":9}}]},"23":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":12},"end":{"line":182,"column":12}},{"start":{"line":182,"column":12},"end":{"line":182,"column":12}}]},"24":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":16},"end":{"line":183,"column":16}},{"start":{"line":183,"column":16},"end":{"line":183,"column":16}}]},"25":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":20},"end":{"line":185,"column":20}},{"start":{"line":185,"column":20},"end":{"line":185,"column":20}}]},"26":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":21},"end":{"line":190,"column":21}},{"start":{"line":190,"column":21},"end":{"line":190,"column":21}}]},"27":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":20},"end":{"line":191,"column":20}},{"start":{"line":191,"column":20},"end":{"line":191,"column":20}}]},"28":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":21},"end":{"line":196,"column":21}},{"start":{"line":196,"column":21},"end":{"line":196,"column":21}}]},"29":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":20},"end":{"line":198,"column":20}},{"start":{"line":198,"column":20},"end":{"line":198,"column":20}}]},"30":{"line":198,"type":"binary-expr","locations":[{"start":{"line":198,"column":24},"end":{"line":198,"column":52}},{"start":{"line":198,"column":56},"end":{"line":198,"column":88}}]},"31":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":21},"end":{"line":203,"column":21}},{"start":{"line":203,"column":21},"end":{"line":203,"column":21}}]},"32":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":20},"end":{"line":205,"column":20}},{"start":{"line":205,"column":20},"end":{"line":205,"column":20}}]},"33":{"line":205,"type":"binary-expr","locations":[{"start":{"line":205,"column":24},"end":{"line":205,"column":52}},{"start":{"line":205,"column":56},"end":{"line":205,"column":88}}]},"34":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":21},"end":{"line":210,"column":21}},{"start":{"line":210,"column":21},"end":{"line":210,"column":21}}]},"35":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":8},"end":{"line":219,"column":8}},{"start":{"line":219,"column":8},"end":{"line":219,"column":8}}]},"36":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":4},"end":{"line":235,"column":4}},{"start":{"line":235,"column":4},"end":{"line":235,"column":4}}]},"37":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":9},"end":{"line":240,"column":9}},{"start":{"line":240,"column":9},"end":{"line":240,"column":9}}]},"38":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":4},"end":{"line":270,"column":4}},{"start":{"line":270,"column":4},"end":{"line":270,"column":4}}]},"39":{"line":271,"type":"if","locations":[{"start":{"line":271,"column":8},"end":{"line":271,"column":8}},{"start":{"line":271,"column":8},"end":{"line":271,"column":8}}]},"40":{"line":278,"type":"if","locations":[{"start":{"line":278,"column":13},"end":{"line":278,"column":13}},{"start":{"line":278,"column":13},"end":{"line":278,"column":13}}]},"41":{"line":278,"type":"binary-expr","locations":[{"start":{"line":278,"column":17},"end":{"line":278,"column":28}},{"start":{"line":278,"column":32},"end":{"line":278,"column":66}}]},"42":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":9},"end":{"line":282,"column":9}},{"start":{"line":282,"column":9},"end":{"line":282,"column":9}}]},"43":{"line":284,"type":"if","locations":[{"start":{"line":284,"column":8},"end":{"line":284,"column":8}},{"start":{"line":284,"column":8},"end":{"line":284,"column":8}}]},"44":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":12}},{"start":{"line":288,"column":12},"end":{"line":288,"column":12}}]},"45":{"line":294,"type":"if","locations":[{"start":{"line":294,"column":12},"end":{"line":294,"column":12}},{"start":{"line":294,"column":12},"end":{"line":294,"column":12}}]},"46":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":8},"end":{"line":301,"column":8}},{"start":{"line":301,"column":8},"end":{"line":301,"column":8}}]},"47":{"line":301,"type":"binary-expr","locations":[{"start":{"line":301,"column":12},"end":{"line":301,"column":23}},{"start":{"line":301,"column":27},"end":{"line":301,"column":61}}]},"48":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":9},"end":{"line":305,"column":9}},{"start":{"line":305,"column":9},"end":{"line":305,"column":9}}]},"49":{"line":307,"type":"if","locations":[{"start":{"line":307,"column":8},"end":{"line":307,"column":8}},{"start":{"line":307,"column":8},"end":{"line":307,"column":8}}]},"50":{"line":311,"type":"if","locations":[{"start":{"line":311,"column":12},"end":{"line":311,"column":12}},{"start":{"line":311,"column":12},"end":{"line":311,"column":12}}]},"51":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":13},"end":{"line":318,"column":13}},{"start":{"line":318,"column":13},"end":{"line":318,"column":13}}]},"52":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":12},"end":{"line":319,"column":12}},{"start":{"line":319,"column":12},"end":{"line":319,"column":12}}]},"53":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":9},"end":{"line":325,"column":9}},{"start":{"line":325,"column":9},"end":{"line":325,"column":9}}]},"54":{"line":326,"type":"if","locations":[{"start":{"line":326,"column":8},"end":{"line":326,"column":8}},{"start":{"line":326,"column":8},"end":{"line":326,"column":8}}]},"55":{"line":341,"type":"if","locations":[{"start":{"line":341,"column":4},"end":{"line":341,"column":4}},{"start":{"line":341,"column":4},"end":{"line":341,"column":4}}]},"56":{"line":348,"type":"if","locations":[{"start":{"line":348,"column":4},"end":{"line":348,"column":4}},{"start":{"line":348,"column":4},"end":{"line":348,"column":4}}]},"57":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":4},"end":{"line":351,"column":4}},{"start":{"line":351,"column":4},"end":{"line":351,"column":4}}]},"58":{"line":354,"type":"if","locations":[{"start":{"line":354,"column":4},"end":{"line":354,"column":4}},{"start":{"line":354,"column":4},"end":{"line":354,"column":4}}]},"59":{"line":366,"type":"if","locations":[{"start":{"line":366,"column":8},"end":{"line":366,"column":8}},{"start":{"line":366,"column":8},"end":{"line":366,"column":8}}]},"60":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":13},"end":{"line":369,"column":13}},{"start":{"line":369,"column":13},"end":{"line":369,"column":13}}]},"61":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":13},"end":{"line":372,"column":13}},{"start":{"line":372,"column":13},"end":{"line":372,"column":13}}]},"62":{"line":398,"type":"binary-expr","locations":[{"start":{"line":398,"column":34},"end":{"line":398,"column":48}},{"start":{"line":398,"column":52},"end":{"line":398,"column":72}}]},"63":{"line":402,"type":"binary-expr","locations":[{"start":{"line":402,"column":34},"end":{"line":402,"column":48}},{"start":{"line":402,"column":52},"end":{"line":402,"column":72}}]},"64":{"line":406,"type":"binary-expr","locations":[{"start":{"line":406,"column":34},"end":{"line":406,"column":48}},{"start":{"line":406,"column":52},"end":{"line":406,"column":72}}]},"65":{"line":410,"type":"binary-expr","locations":[{"start":{"line":410,"column":34},"end":{"line":410,"column":48}},{"start":{"line":410,"column":52},"end":{"line":410,"column":72}}]}},"code":["\"use strict\";","","/* jshint -W061 */","","let _ = require(\"lodash\");","let errors = require(\"../common/errors\");","let Activity = require(\"./activity\");","let is = require(\"../common/is\");","let path = require(\"path\");","let fs = require(\"fs\");","let Reflection = require(\"backpack-node\").system.Reflection;","let templateHelpers = require('./templateHelpers');","","const activityTypeNameRex = /^\\@([a-zA-Z_]+[0-9a-zA-Z_]*)$/;","function getActivityTypeName(str) {","    if (_.isString(str)) {","        let result = activityTypeNameRex.exec(str);","        if (result && result.length === 2) {","            return result[1];","        }","    }","    return null;","}","","function requireFromRoot(resource) {","    try {","        return require(resource);","    }","    catch (e) {","        _.noop(e);","    }","    let pPos = resource.indexOf(\"/\");","    if (pPos === -1) {","        return require(resource);","    }","    let module = resource.substr(0, pPos);","    if (!module) {","        return require(resource);","    }","    try {","        module = require(module);","        let obj = module;","        for (let key of resource.substr(pPos + 1).split(\"/\")) {","            obj = obj[key];","        }","        return obj;","    }","    catch (e) {","        return require(resource);","    }","}","","function ActivityMarkup() {","    this._systemTypes = new Map();","    this._registerSystemTypes();","}","","ActivityMarkup.prototype._registerSystemTypes = function () {","    this._registerTypes(__dirname);","};","","ActivityMarkup.prototype._registerTypes = function (sourcePath) {","    this._registerTypesTo(this._systemTypes, sourcePath);","};","","ActivityMarkup.prototype._registerTypesTo = function (types, sourcePath) {","    let self = this;","    let obj = requireFromRoot(sourcePath);","    Reflection.visitObject(obj, function (inObj) {","        let alias = self.getAlias(inObj);","        if (alias && !types.has(alias)) {","            // This is an activity type","            types.set(alias, inObj);","        }","        return alias === null;","    });","};","","ActivityMarkup.prototype.getAlias = function (type) {","    if (_.isFunction(type) && !_.isUndefined(type.super_)) {","        let alias = this._toCamelCase(type.name);","        do","        {","            if (type.super_ === Activity) {","                return alias;","            }","            type = type.super_;","        }","        while (type);","    }","    return null;","};","","ActivityMarkup.prototype._toCamelCase = function (id) {","    return id[0].toLowerCase() + id.substr(1);","};","","ActivityMarkup.prototype.parse = function (markup) {","    if (!markup) {","        throw new TypeError(\"Parameter 'markup' expected.\");","    }","    if (_.isString(markup)) {","        markup = JSON.parse(markup);","    }","    if (!_.isPlainObject(markup)) {","        throw new TypeError(\"Parameter 'markup' is not a plain object.\");","    }","","    let types = new Map();","    for (let kvp of this._systemTypes.entries()) {","        types.set(kvp[0], kvp[1]);","    }","    let req = markup[\"@require\"];","    if (req) {","        this._require(types, req);","    }","    let activity = this._createActivity(types, markup);","    if (req) {","        activity[\"@require\"] = req;","    }","    return activity;","};","","ActivityMarkup.prototype._createActivity = function (types, markup) {","    let filedNames = _.filter(_.keys(markup), function (k) { return k !== \"@require\"; });","    if (filedNames.length !== 1) {","        throw new errors.ActivityMarkupError(\"There should be one field.\" + this._errorHint(markup));","    }","","    let activityAlias = getActivityTypeName(filedNames[0]);","    if (activityAlias) {","        return this._createAndInitActivityInstance(types, activityAlias, markup);","    }","    else {","        throw new errors.ActivityMarkupError(\"Root entry is not an activity type name '\" + filedNames[0] + \"'.\" + this._errorHint(markup));","    }","};","","ActivityMarkup.prototype._createAndInitActivityInstance = function (types, typeName, markup) {","    let activity = this._createActivityInstance(types, typeName);","    if (!activity) {","        throw new errors.ActivityMarkupError(\"Unknown activity type name '\" + typeName + \"'.\" + this._errorHint(markup));","    }","    let activityRef = {","        name: typeName,","        value: activity","    };","    let pars = markup[\"@\" + typeName];","    if (pars) {","        this._setupActivity(types, activityRef, pars);","    }","    return activityRef.value;","};","","ActivityMarkup.prototype._createActivityInstance = function (types, alias) {","    let Constructor = types.get(alias);","    if (_.isUndefined(Constructor)) {","        return null;","    }","    return new Constructor();","};","","ActivityMarkup.prototype._setupActivity = function (types, activityRef, pars) {","    let self = this;","    let activity = activityRef.value;","","    function noFunction(fieldName) {","        return activity.codeProperties.has(fieldName);","    }","","    if (_.isArray(pars)) {","        // args","        activity.args = [];","        for (let obj of pars) {","            activity.args.push(self._createValue(types, obj, false, is.template(activity)));","        }","    }","    else if (_.isObject(pars)) {","        let to = null;","        // values","        for (let fieldName in pars) {","            if (pars.hasOwnProperty(fieldName)) {","                if (activity.isArrayProperty(fieldName)) {","                    let v = self._createValue(types, pars[fieldName], true, is.template(activity));","                    if (!_.isArray(v)) {","                        v = [v];","                    }","                    activity[fieldName] = v;","                }","                else if (fieldName === \"@to\") {","                    if (to) {","                        throw new errors.ActivityMarkupError(\"Multiple to defined in activity '\" + activityRef.name + \".\" + this._errorHint(pars));","                    }","                    to = pars[fieldName];","                }","                else if (fieldName[0] === \"!\") {","                    // Promoted:","                    if (!activity.promotedProperties || !_.isFunction(activity.promoted)) {","                        throw new errors.ActivityMarkupError(\"Activity '\" + activityRef.name + \" cannot have promoted properties.\" + this._errorHint(pars));","                    }","                    activity.promoted(fieldName.substr(1), self._createValue(types, pars[fieldName], true, is.template(activity)));","                }","                else if (fieldName[0] === \"`\") {","                    // Reserved:","                    if (!activity.reservedProperties || !_.isFunction(activity.reserved)) {","                        throw new errors.ActivityMarkupError(\"Activity '\" + activityRef.name + \" cannot have reserved properties.\" + this._errorHint(pars));","                    }","                    activity.reserved(fieldName.substr(1), self._createValue(types, pars[fieldName], true, is.template(activity)));","                }","                else if (fieldName === \"@require\") {","                    // Require:","                    self._require(types, pars[fieldName]);","                }","                else {","                    activity[fieldName] = self._createValue(types, pars[fieldName], false, is.template(activity), noFunction(fieldName));","                }","            }","        }","        if (to) {","            let current = activity;","            let assign = activityRef.value = this._createActivityInstance(types, \"assign\");","            assign.value = current;","            assign.to = to;","        }","    }","    else {","        // 1 arg","        activity.args = [self._createValue(types, pars, false, is.template(activity))];","    }","};","","ActivityMarkup.prototype._require = function (types, markup) {","    let self = this;","","    if (_.isArray(markup)) {","        for (let item of markup) {","            self._require(types, item);","        }","    }","    else if (_.isString(markup)) {","        self._registerTypesTo(types, markup);","    }","    else {","        throw new errors.ActivityMarkupError(\"Cannot register '\" + markup + \"'.\" + self._errorHint(markup));","    }","};","","ActivityMarkup.prototype._createValue = function (types, markup, canBeArray, noTemplate, noFunction) {","    let self = this;","","    // Helpers","    function toTemplate(_markup) {","        let template = self._createActivityInstance(types, \"template\");","        template.declare = _markup;","        return template;","    }","","    function toFunc(f) {","        let func = self._createActivityInstance(types, \"func\");","        func.code = f;","        return func;","    }","","    function toExpression(str) {","        let expr = self._createActivityInstance(types, \"expression\");","        expr.expr = str;","        return expr;","    }","","    if (_.isArray(markup)) {","        if (canBeArray) {","            let result = [];","            for (let v of markup) {","                result.push(self._createValue(types, v));","            }","            return result;","        }","        else if (!noTemplate && templateHelpers.isTemplate(markup)) {","            return toTemplate(markup);","        }","    }","    else if (_.isPlainObject(markup)) {","        let filedNames = _.keys(markup);","        if (filedNames.length === 1) {","            let fieldName = filedNames[0];","            let fieldValue = markup[fieldName];","","            if (fieldName === \"_\") {","                // Escape:","                return fieldValue;","            }","","            let activityTypeName = getActivityTypeName(fieldName);","            if (activityTypeName) {","                // Activity:","                return self._createAndInitActivityInstance(types, activityTypeName, markup);","            }","        }","","        // Plain object:","        if (!noTemplate && templateHelpers.isTemplate(markup)) {","            return toTemplate(markup);","        }","    }","    else if (_.isString(markup)) {","        let str = markup.trim();","        if (templateHelpers.isFunctionString(str)) {","            let f;","            eval(\"f = function(_){return (\" + str + \");}\");","            f = f(_);","            if (!noFunction) {","                return toFunc(f);","            }","            else {","                return f; // aka when func.code","            }","        }","        else if (str.length > 1) {","            if (str[0] === \"=\") {","                // Expression","                return toExpression(str.substr(1));","            }","        }","    }","    else if (_.isFunction(markup)) {","        if (!noFunction) {","            return toFunc(markup);","        }","    }","","    return this._clone(markup);","};","","ActivityMarkup.prototype._clone = function(obj) {","    return templateHelpers.cloneDeep(obj);","};","","ActivityMarkup.prototype._errorHint = function (markup) {","    let len = 20;","    let json = JSON.stringify(markup);","    if (json.length > len) {","        json = json.substr(0, len) + \" ...\";","    }","    return \"\\nSee error near:\\n\" + json;","};","","ActivityMarkup.prototype.stringify = function (obj) {","    if (_.isString(obj)) {","        return obj;","    }","    if (is.activity(obj)) {","        obj = this.toMarkup(obj);","    }","    if (!_.isPlainObject(obj)) {","        throw new TypeError(\"Parameter 'obj' is not a plain object.\");","    }","    let cloned = _.cloneDeep(obj);","    this._functionsToString(cloned);","    return JSON.stringify(cloned);","};","","ActivityMarkup.prototype._functionsToString = function (obj) {","    let self = this;","    for (let fieldName in obj) {","        let fieldValue = obj[fieldName];","        if (_.isFunction(fieldValue)) {","            obj[fieldName] = fieldValue.toString();","        }","        else if (_.isObject(fieldValue)) {","            self._functionsToString(fieldValue);","        }","        else if (_.isArray(fieldValue)) {","            for (let v of fieldValue) {","                self._functionsToString(v);","            }","        }","    }","};","","// To Markup:","","ActivityMarkup.prototype.toMarkup = function (activity) {","    /*if (!is.activity(activity)) {","        throw new TypeError(\"Argument is not an activity instance.\");","    }","    let markup = {};","    let alias = this.getAlias(activity.constructor);","    let activityMarkup = this._createMarkupOfActivity(activity);*/","    throw new Error(\"Not supported yet!\");","};","","// Exports:","","let activityMarkup = null;","","module.exports = {","    parse: function (markup) {","        return (activityMarkup = (activityMarkup || new ActivityMarkup())).parse(markup);","    },","","    toMarkup: function (activity) {","        return (activityMarkup = (activityMarkup || new ActivityMarkup())).toMarkup(activity);","    },","","    stringify: function (obj) {","        return (activityMarkup = (activityMarkup || new ActivityMarkup())).stringify(obj);","    },","","    getAlias: function (activity) {","        return (activityMarkup = (activityMarkup || new ActivityMarkup())).getAlias(activity.constructor);","    }","};"],"l":{"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"22":0,"25":1,"26":0,"27":0,"30":0,"32":0,"33":0,"34":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"43":0,"44":0,"46":0,"49":0,"53":1,"54":0,"55":0,"58":1,"59":0,"62":1,"63":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"73":0,"75":0,"79":1,"80":0,"81":0,"82":0,"84":0,"85":0,"87":0,"91":0,"94":1,"95":0,"98":1,"99":0,"100":0,"102":0,"103":0,"105":0,"106":0,"109":0,"110":0,"111":0,"113":0,"114":0,"115":0,"117":0,"118":0,"119":0,"121":0,"124":1,"125":0,"126":0,"127":0,"130":0,"131":0,"132":0,"135":0,"139":1,"140":0,"141":0,"142":0,"144":0,"148":0,"149":0,"150":0,"152":0,"155":1,"156":0,"157":0,"158":0,"160":0,"163":1,"164":0,"165":0,"167":1,"168":0,"171":0,"173":0,"174":0,"175":0,"178":0,"179":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"188":0,"190":0,"191":0,"192":0,"194":0,"196":0,"198":0,"199":0,"201":0,"203":0,"205":0,"206":0,"208":0,"210":0,"212":0,"215":0,"219":0,"220":0,"221":0,"222":0,"223":0,"228":0,"232":1,"233":0,"235":0,"236":0,"237":0,"240":0,"241":0,"244":0,"248":1,"249":0,"252":1,"253":0,"254":0,"255":0,"258":1,"259":0,"260":0,"261":0,"264":1,"265":0,"266":0,"267":0,"270":0,"271":0,"272":0,"273":0,"274":0,"276":0,"278":0,"279":0,"282":0,"283":0,"284":0,"285":0,"286":0,"288":0,"290":0,"293":0,"294":0,"296":0,"301":0,"302":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"315":0,"318":0,"319":0,"321":0,"325":0,"326":0,"327":0,"331":0,"334":1,"335":0,"338":1,"339":0,"340":0,"341":0,"342":0,"344":0,"347":1,"348":0,"349":0,"351":0,"352":0,"354":0,"355":0,"357":0,"358":0,"359":0,"362":1,"363":0,"364":0,"365":0,"366":0,"367":0,"369":0,"370":0,"372":0,"373":0,"374":0,"382":1,"389":0,"394":1,"396":1,"398":0,"402":0,"406":0,"410":0}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/templateHelpers.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/templateHelpers.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":37}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":16},"end":{"line":13,"column":31}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":45},"end":{"line":15,"column":57}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":21},"end":{"line":20,"column":39}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":44}}},"6":{"name":"(anonymous_6)","line":93,"loc":{"start":{"line":93,"column":15},"end":{"line":93,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":60}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}},"4":{"start":{"line":8,"column":0},"end":{"line":115,"column":2}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":95}},"6":{"start":{"line":14,"column":8},"end":{"line":14,"column":30}},"7":{"start":{"line":15,"column":8},"end":{"line":17,"column":11}},"8":{"start":{"line":16,"column":12},"end":{"line":16,"column":28}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":33}},"10":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"11":{"start":{"line":22,"column":12},"end":{"line":22,"column":19}},"12":{"start":{"line":24,"column":8},"end":{"line":91,"column":22}},"13":{"start":{"line":26,"column":16},"end":{"line":88,"column":17}},"14":{"start":{"line":27,"column":20},"end":{"line":27,"column":44}},"15":{"start":{"line":28,"column":20},"end":{"line":47,"column":21}},"16":{"start":{"line":29,"column":24},"end":{"line":37,"column":25}},"17":{"start":{"line":30,"column":28},"end":{"line":34,"column":30}},"18":{"start":{"line":35,"column":28},"end":{"line":35,"column":52}},"19":{"start":{"line":36,"column":28},"end":{"line":36,"column":41}},"20":{"start":{"line":38,"column":24},"end":{"line":46,"column":25}},"21":{"start":{"line":39,"column":28},"end":{"line":43,"column":30}},"22":{"start":{"line":44,"column":28},"end":{"line":44,"column":52}},"23":{"start":{"line":45,"column":28},"end":{"line":45,"column":41}},"24":{"start":{"line":49,"column":21},"end":{"line":88,"column":17}},"25":{"start":{"line":50,"column":20},"end":{"line":50,"column":46}},"26":{"start":{"line":52,"column":20},"end":{"line":78,"column":21}},"27":{"start":{"line":53,"column":24},"end":{"line":53,"column":42}},"28":{"start":{"line":54,"column":24},"end":{"line":59,"column":25}},"29":{"start":{"line":55,"column":28},"end":{"line":55,"column":44}},"30":{"start":{"line":56,"column":28},"end":{"line":56,"column":54}},"31":{"start":{"line":57,"column":28},"end":{"line":57,"column":52}},"32":{"start":{"line":58,"column":28},"end":{"line":58,"column":41}},"33":{"start":{"line":61,"column":25},"end":{"line":78,"column":21}},"34":{"start":{"line":62,"column":24},"end":{"line":62,"column":43}},"35":{"start":{"line":63,"column":24},"end":{"line":63,"column":43}},"36":{"start":{"line":64,"column":24},"end":{"line":77,"column":25}},"37":{"start":{"line":65,"column":28},"end":{"line":65,"column":44}},"38":{"start":{"line":66,"column":28},"end":{"line":66,"column":56}},"39":{"start":{"line":67,"column":28},"end":{"line":67,"column":56}},"40":{"start":{"line":68,"column":28},"end":{"line":68,"column":52}},"41":{"start":{"line":69,"column":28},"end":{"line":69,"column":41}},"42":{"start":{"line":71,"column":29},"end":{"line":77,"column":25}},"43":{"start":{"line":72,"column":28},"end":{"line":72,"column":44}},"44":{"start":{"line":73,"column":28},"end":{"line":73,"column":56}},"45":{"start":{"line":74,"column":28},"end":{"line":74,"column":56}},"46":{"start":{"line":75,"column":28},"end":{"line":75,"column":52}},"47":{"start":{"line":76,"column":28},"end":{"line":76,"column":41}},"48":{"start":{"line":80,"column":21},"end":{"line":88,"column":17}},"49":{"start":{"line":81,"column":20},"end":{"line":85,"column":22}},"50":{"start":{"line":86,"column":20},"end":{"line":86,"column":44}},"51":{"start":{"line":87,"column":20},"end":{"line":87,"column":33}},"52":{"start":{"line":89,"column":16},"end":{"line":89,"column":28}},"53":{"start":{"line":94,"column":8},"end":{"line":112,"column":9}},"54":{"start":{"line":95,"column":12},"end":{"line":95,"column":27}},"55":{"start":{"line":96,"column":12},"end":{"line":100,"column":13}},"56":{"start":{"line":97,"column":16},"end":{"line":99,"column":17}},"57":{"start":{"line":98,"column":20},"end":{"line":98,"column":58}},"58":{"start":{"line":101,"column":12},"end":{"line":101,"column":25}},"59":{"start":{"line":103,"column":13},"end":{"line":112,"column":9}},"60":{"start":{"line":104,"column":12},"end":{"line":104,"column":27}},"61":{"start":{"line":105,"column":12},"end":{"line":107,"column":13}},"62":{"start":{"line":106,"column":16},"end":{"line":106,"column":49}},"63":{"start":{"line":108,"column":12},"end":{"line":108,"column":25}},"64":{"start":{"line":110,"column":13},"end":{"line":112,"column":9}},"65":{"start":{"line":111,"column":12},"end":{"line":111,"column":31}},"66":{"start":{"line":113,"column":8},"end":{"line":113,"column":19}},"67":{"start":{"line":117,"column":0},"end":{"line":117,"column":33}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":15},"end":{"line":11,"column":30}},{"start":{"line":11,"column":34},"end":{"line":11,"column":94}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":33}},{"start":{"line":21,"column":37},"end":{"line":21,"column":52}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":16},"end":{"line":26,"column":16}},{"start":{"line":26,"column":16},"end":{"line":26,"column":16}}]},"5":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":20}},{"start":{"line":28,"column":20},"end":{"line":28,"column":20}}]},"6":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":24}},{"start":{"line":29,"column":24},"end":{"line":29,"column":24}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":24},"end":{"line":38,"column":24}},{"start":{"line":38,"column":24},"end":{"line":38,"column":24}}]},"8":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":21},"end":{"line":49,"column":21}},{"start":{"line":49,"column":21},"end":{"line":49,"column":21}}]},"9":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":20},"end":{"line":52,"column":20}},{"start":{"line":52,"column":20},"end":{"line":52,"column":20}}]},"10":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":24},"end":{"line":54,"column":24}},{"start":{"line":54,"column":24},"end":{"line":54,"column":24}}]},"11":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":28},"end":{"line":54,"column":42}},{"start":{"line":54,"column":46},"end":{"line":54,"column":60}}]},"12":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":25},"end":{"line":61,"column":25}},{"start":{"line":61,"column":25},"end":{"line":61,"column":25}}]},"13":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":24},"end":{"line":64,"column":24}},{"start":{"line":64,"column":24},"end":{"line":64,"column":24}}]},"14":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":28},"end":{"line":64,"column":47}},{"start":{"line":64,"column":51},"end":{"line":64,"column":66}},{"start":{"line":64,"column":70},"end":{"line":64,"column":85}}]},"15":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":29},"end":{"line":71,"column":29}},{"start":{"line":71,"column":29},"end":{"line":71,"column":29}}]},"16":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":33},"end":{"line":71,"column":52}},{"start":{"line":71,"column":56},"end":{"line":71,"column":71}},{"start":{"line":71,"column":75},"end":{"line":71,"column":90}}]},"17":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":21},"end":{"line":80,"column":21}},{"start":{"line":80,"column":21},"end":{"line":80,"column":21}}]},"18":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},{"start":{"line":94,"column":8},"end":{"line":94,"column":8}}]},"19":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":16},"end":{"line":97,"column":16}},{"start":{"line":97,"column":16},"end":{"line":97,"column":16}}]},"20":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":13},"end":{"line":103,"column":13}},{"start":{"line":103,"column":13},"end":{"line":103,"column":13}}]},"21":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":13},"end":{"line":110,"column":13}},{"start":{"line":110,"column":13},"end":{"line":110,"column":13}}]},"22":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":17},"end":{"line":110,"column":32}},{"start":{"line":110,"column":36},"end":{"line":110,"column":59}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","let Reflection = require(\"backpack-node\").system.Reflection;","","let maxDepth = 10;","","let templateHelpers = {","","    isFunctionString: function (str) {","        return _.isString(str) && str.match(/^\\s*function\\s*\\w*\\s*\\((?:\\w+,)*(?:\\w+)?\\)\\s*\\{/);","    },","    isTemplate: function (obj) {","        let activityCount = 0;","        templateHelpers.visitActivities(obj, function () {","            activityCount++;","        });","        return activityCount > 0;","    },","    visitActivities: function (obj, f) {","        if (!_.isPlainObject(obj) && !_.isArray(obj)) {","            return;","        }","        Reflection.visitObject(obj,","            function (subObj, parent, pkey) {","                if (_.isString(subObj)) {","                    let str = subObj.trim();","                    if (str.length > 1) {","                        if (str[0] === \"=\") {","                            let markup = {","                                \"@expression\": {","                                    expr: str.substr(1)","                                }","                            };","                            f(markup, parent, pkey);","                            return false;","                        }","                        if (templateHelpers.isFunctionString(str)) {","                            let markup = {","                                \"@func\": {","                                    code: str","                                }","                            };","                            f(markup, parent, pkey);","                            return false;","                        }","                    }","                }","                else if (_.isPlainObject(subObj)) {","                    let keys = _.keys(subObj);","","                    if (keys.length === 1) {","                        let key = keys[0];","                        if (key[0] === \"@\" && key.length > 1) {","                            let markup = {};","                            markup[key] = subObj[key];","                            f(markup, parent, pkey);","                            return false;","                        }","                    }","                    else if (keys.length === 2) {","                        let key1 = keys[0];","                        let key2 = keys[1];","                        if (key1 === \"@require\" && key2[0] === \"@\" && key2.length > 1) {","                            let markup = {};","                            markup[key1] = subObj[key1];","                            markup[key2] = subObj[key2];","                            f(markup, parent, pkey);","                            return false;","                        }","                        else if (key2 === \"@require\" && key1[0] === \"@\" && key1.length > 1) {","                            let markup = {};","                            markup[key2] = subObj[key2];","                            markup[key1] = subObj[key1];","                            f(markup, parent, pkey);","                            return false;","                        }","                    }","                }","                else if (_.isFunction(subObj)) {","                    let markup = {","                        \"@func\": {","                            code: subObj","                        }","                    };","                    f(markup, parent, pkey);","                    return false;","                }","                return true;","            },","            maxDepth);","    },","    cloneDeep: function(obj) {","        if (_.isPlainObject(obj)) {","            let other = {};","            for (let key in obj) {","                if (obj.hasOwnProperty(key)) {","                    other[key] = this.cloneDeep(obj[key]);","                }","            }","            return other;","        }","        else if (_.isArray(obj)) {","            let other = [];","            for (let item of obj) {","                other.push(this.cloneDeep(item));","            }","            return other;","        }","        else if (_.isObject(obj) && _.isFunction(obj.clone)) {","            return obj.clone();","        }","        return obj;","    }","};","","module.exports = templateHelpers;"],"l":{"3":1,"4":1,"6":1,"8":1,"11":0,"14":0,"15":0,"16":0,"18":0,"21":0,"22":0,"24":0,"26":0,"27":0,"28":0,"29":0,"30":0,"35":0,"36":0,"38":0,"39":0,"44":0,"45":0,"49":0,"50":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"80":0,"81":0,"86":0,"87":0,"89":0,"94":0,"95":0,"96":0,"97":0,"98":0,"101":0,"103":0,"104":0,"105":0,"106":0,"108":0,"110":0,"111":0,"113":0,"117":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/assign.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/assign.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Assign","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":52}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":29},"end":{"line":23,"column":68}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":10,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":22}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":17}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":32}},"8":{"start":{"line":14,"column":0},"end":{"line":21,"column":2}},"9":{"start":{"line":15,"column":4},"end":{"line":20,"column":5}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":54}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":31}},"12":{"start":{"line":23,"column":0},"end":{"line":28,"column":2}},"13":{"start":{"line":24,"column":4},"end":{"line":26,"column":5}},"14":{"start":{"line":25,"column":8},"end":{"line":25,"column":31}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":36}},"16":{"start":{"line":30,"column":0},"end":{"line":30,"column":24}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"2":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function Assign() {","    Activity.call(this);","    this.value = null;","    this.to = \"\";","}","","util.inherits(Assign, Activity);","","Assign.prototype.run = function (callContext, args) {","    if (this.to) {","        callContext.schedule(this.value, \"_valueGot\");","    }","    else {","        callContext.complete();","    }","};","","Assign.prototype._valueGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        this[this.to] = result;","    }","    callContext.end(reason, result);","};","","module.exports = Assign;"],"l":{"3":1,"4":1,"6":1,"7":0,"8":0,"9":0,"12":1,"14":1,"15":0,"16":0,"19":0,"23":1,"24":0,"25":0,"27":0,"30":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/beginMethod.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/beginMethod.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"BeginMethod","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":23}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":28},"end":{"line":18,"column":57}}},"3":{"name":"(anonymous_3)","line":31,"loc":{"start":{"line":31,"column":39},"end":{"line":31,"column":78}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":41}},"6":{"start":{"line":9,"column":0},"end":{"line":14,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":35}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":27}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":31}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":37}},"12":{"start":{"line":18,"column":0},"end":{"line":29,"column":2}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":37}},"14":{"start":{"line":20,"column":4},"end":{"line":27,"column":5}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":35}},"16":{"start":{"line":22,"column":8},"end":{"line":26,"column":9}},"17":{"start":{"line":23,"column":12},"end":{"line":23,"column":106}},"18":{"start":{"line":24,"column":12},"end":{"line":24,"column":31}},"19":{"start":{"line":25,"column":12},"end":{"line":25,"column":19}},"20":{"start":{"line":28,"column":4},"end":{"line":28,"column":150}},"21":{"start":{"line":31,"column":0},"end":{"line":33,"column":2}},"22":{"start":{"line":32,"column":4},"end":{"line":32,"column":36}},"23":{"start":{"line":35,"column":0},"end":{"line":35,"column":29}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"2":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":8}},{"start":{"line":22,"column":8},"end":{"line":22,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let specStrings = require(\"../common/specStrings\");","let errors = require(\"../common/errors\");","","function BeginMethod() {","    Activity.call(this);","    this.canCreateInstance = false;","    this.methodName = null;","    this.instanceIdPath = null;","}","","util.inherits(BeginMethod, Activity);","","BeginMethod.prototype.run = function (callContext, args) {","    let methodName = this.methodName;","    if (_.isString(methodName)) {","        let mn = methodName.trim();","        if (mn) {","            callContext.createBookmark(specStrings.hosting.createBeginMethodBMName(mn), \"_methodInvoked\");","            callContext.idle();","            return;","        }","    }","    callContext.fail(new errors.ValidationError(\"BeginMethod activity methodName property's value '\" + methodName + \"' must be a valid identifier.\"));","};","","BeginMethod.prototype._methodInvoked = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = BeginMethod;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"11":0,"12":0,"13":0,"16":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"28":0,"31":1,"32":0,"35":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/block.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/block.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Block","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":17}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":31},"end":{"line":11,"column":60}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":26},"end":{"line":25,"column":65}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"4":{"start":{"line":5,"column":0},"end":{"line":7,"column":1}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":26}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":33}},"7":{"start":{"line":11,"column":0},"end":{"line":23,"column":1}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":18}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":22}},"10":{"start":{"line":14,"column":4},"end":{"line":22,"column":5}},"11":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"12":{"start":{"line":16,"column":12},"end":{"line":16,"column":31}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":49}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":56}},"15":{"start":{"line":25,"column":0},"end":{"line":38,"column":1}},"16":{"start":{"line":26,"column":4},"end":{"line":26,"column":26}},"17":{"start":{"line":27,"column":4},"end":{"line":37,"column":5}},"18":{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},"19":{"start":{"line":29,"column":12},"end":{"line":29,"column":41}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":56}},"21":{"start":{"line":36,"column":8},"end":{"line":36,"column":40}},"22":{"start":{"line":40,"column":0},"end":{"line":40,"column":23}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":8}},{"start":{"line":28,"column":8},"end":{"line":28,"column":8}}]}},"code":["var Activity = require(\"./activity\");","var util = require(\"util\");","var Declarator = require(\"./declarator\");","","function Block() {","    Declarator.call(this);","}","","util.inherits(Block, Declarator);","","Block.prototype.varsDeclared = function (callContext, args) {","    var todo = [];","    this._todo = todo;","    if (args.length) {","        for (var i = args.length - 1; i >= 1; i--) {","            todo.push(args[i]);","        }","        callContext.schedule(args[0], \"_argGot\");","    }","    else {","        callContext.end(Activity.states.complete, null);","    }","}","","Block.prototype._argGot = function (callContext, reason, result) {","    var todo = this._todo;","    if (reason === Activity.states.complete) {","        if (todo.length === 0) {","            callContext.complete(result);","        }","        else {","            callContext.schedule(todo.pop(), \"_argGot\");","        }","    }","    else {","        callContext.end(reason, result);","    }","}","","module.exports = Block;"],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"9":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"18":0,"21":0,"25":1,"26":0,"27":0,"28":0,"29":0,"32":0,"36":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/declarator.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/declarator.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"Declarator","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":22}}},"2":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":55}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":32},"end":{"line":35,"column":55}}},"4":{"name":"(anonymous_4)","line":45,"loc":{"start":{"line":45,"column":27},"end":{"line":45,"column":56}}},"5":{"name":"(anonymous_5)","line":70,"loc":{"start":{"line":70,"column":32},"end":{"line":70,"column":71}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":8,"column":0},"end":{"line":21,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":55}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":45}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":55}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":45}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":49}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":40}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":40}},"14":{"start":{"line":23,"column":0},"end":{"line":23,"column":36}},"15":{"start":{"line":25,"column":0},"end":{"line":33,"column":2}},"16":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":93}},"18":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"19":{"start":{"line":30,"column":8},"end":{"line":30,"column":27}},"20":{"start":{"line":32,"column":4},"end":{"line":32,"column":38}},"21":{"start":{"line":35,"column":0},"end":{"line":43,"column":2}},"22":{"start":{"line":36,"column":4},"end":{"line":38,"column":5}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":93}},"24":{"start":{"line":39,"column":4},"end":{"line":41,"column":5}},"25":{"start":{"line":40,"column":8},"end":{"line":40,"column":27}},"26":{"start":{"line":42,"column":4},"end":{"line":42,"column":38}},"27":{"start":{"line":45,"column":0},"end":{"line":68,"column":2}},"28":{"start":{"line":46,"column":4},"end":{"line":46,"column":31}},"29":{"start":{"line":47,"column":4},"end":{"line":47,"column":41}},"30":{"start":{"line":48,"column":4},"end":{"line":48,"column":67}},"31":{"start":{"line":49,"column":4},"end":{"line":49,"column":59}},"32":{"start":{"line":50,"column":4},"end":{"line":58,"column":5}},"33":{"start":{"line":51,"column":8},"end":{"line":57,"column":9}},"34":{"start":{"line":52,"column":12},"end":{"line":52,"column":45}},"35":{"start":{"line":53,"column":12},"end":{"line":56,"column":13}},"36":{"start":{"line":54,"column":16},"end":{"line":54,"column":51}},"37":{"start":{"line":55,"column":16},"end":{"line":55,"column":60}},"38":{"start":{"line":60,"column":4},"end":{"line":67,"column":5}},"39":{"start":{"line":61,"column":8},"end":{"line":61,"column":31}},"40":{"start":{"line":62,"column":8},"end":{"line":62,"column":60}},"41":{"start":{"line":65,"column":8},"end":{"line":65,"column":51}},"42":{"start":{"line":66,"column":8},"end":{"line":66,"column":72}},"43":{"start":{"line":70,"column":0},"end":{"line":84,"column":2}},"44":{"start":{"line":71,"column":4},"end":{"line":83,"column":5}},"45":{"start":{"line":72,"column":8},"end":{"line":72,"column":20}},"46":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"47":{"start":{"line":74,"column":12},"end":{"line":74,"column":44}},"48":{"start":{"line":76,"column":8},"end":{"line":76,"column":35}},"49":{"start":{"line":77,"column":8},"end":{"line":77,"column":34}},"50":{"start":{"line":78,"column":8},"end":{"line":78,"column":51}},"51":{"start":{"line":79,"column":8},"end":{"line":79,"column":72}},"52":{"start":{"line":82,"column":8},"end":{"line":82,"column":40}},"53":{"start":{"line":86,"column":0},"end":{"line":86,"column":28}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"2":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]},"3":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"4":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"5":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":51,"column":8}},{"start":{"line":51,"column":8},"end":{"line":51,"column":8}}]},"6":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":12}},{"start":{"line":53,"column":12},"end":{"line":53,"column":12}}]},"7":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"8":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let is = require(\"../common/is\");","let _ = require(\"lodash\");","","function Declarator() {","    Activity.call(this);","    this.nonScopedProperties.add(\"reservedProperties\");","    this.nonScopedProperties.add(\"reserved\");","    this.nonScopedProperties.add(\"promotedProperties\");","    this.nonScopedProperties.add(\"promoted\");","    this.nonScopedProperties.add(\"varsDeclared\");","","    // Properties those cannot be declared freely","    this.reservedProperties = new Set();","","    // Properties those will be promoted during serialization","    this.promotedProperties = new Set();","}","","util.inherits(Declarator, Activity);","","Declarator.prototype.reserved = function (name, value) {","    if (this.promotedProperties.has(name)) {","        throw new Error(\"Property '\" + name + \"' cannot be reserved because it's promoted.\");","    }","    if (!_.isUndefined(value)) {","        this[name] = value;","    }","    this.reservedProperties.add(name);","};","","Declarator.prototype.promoted = function (name, value) {","    if (this.reservedProperties.has(name)) {","        throw new Error(\"Property '\" + name + \"' cannot be promoted because it's reserved.\");","    }","    if (!_.isUndefined(value)) {","        this[name] = value;","    }","    this.promotedProperties.add(name);","};","","Declarator.prototype.run = function (callContext, args) {","    let activityVariables = [];","    let _activityVariableFieldNames = [];","    this._activityVariableFieldNames = _activityVariableFieldNames;","    let resProps = callContext.activity.reservedProperties;","    for (let fieldName of callContext.activity._getScopeKeys()) {","        if (!resProps.has(fieldName)) {","            let fieldValue = this[fieldName];","            if (fieldValue instanceof Activity) {","                activityVariables.push(fieldValue);","                _activityVariableFieldNames.push(fieldName);","            }","        }","    }","","    if (activityVariables.length) {","        this._savedArgs = args;","        callContext.schedule(activityVariables, \"_varsGot\");","    }","    else {","        this.delete(\"_activityVariableFieldNames\");","        callContext.activity.varsDeclared.call(this, callContext, args);","    }","};","","Declarator.prototype._varsGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        let idx = 0;","        for (let fieldName of this._activityVariableFieldNames) {","            this[fieldName] = result[idx++];","        }","        let args = this._savedArgs;","        this.delete(\"_savedArgs\");","        this.delete(\"_activityVariableFieldNames\");","        callContext.activity.varsDeclared.call(this, callContext, args);","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Declarator;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"17":0,"20":0,"23":1,"25":1,"26":0,"27":0,"29":0,"30":0,"32":0,"35":1,"36":0,"37":0,"39":0,"40":0,"42":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"60":0,"61":0,"62":0,"65":0,"66":0,"70":1,"71":0,"72":0,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"82":0,"86":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/consoleTracker.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/consoleTracker.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"ConsoleTracker","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":48},"end":{"line":10,"column":64}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":7,"column":0},"end":{"line":8,"column":1}},"5":{"start":{"line":10,"column":0},"end":{"line":25,"column":2}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":40}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":29}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":29}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":35}},"10":{"start":{"line":15,"column":4},"end":{"line":21,"column":5}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":32}},"12":{"start":{"line":19,"column":8},"end":{"line":19,"column":62}},"13":{"start":{"line":19,"column":32},"end":{"line":19,"column":62}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":86}},"15":{"start":{"line":20,"column":55},"end":{"line":20,"column":86}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":65}},"17":{"start":{"line":22,"column":16},"end":{"line":22,"column":47}},"18":{"start":{"line":22,"column":53},"end":{"line":22,"column":65}},"19":{"start":{"line":23,"column":4},"end":{"line":23,"column":66}},"20":{"start":{"line":24,"column":4},"end":{"line":24,"column":90}},"21":{"start":{"line":27,"column":0},"end":{"line":27,"column":32}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":8}},{"start":{"line":19,"column":8},"end":{"line":19,"column":8}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":20,"column":8}},{"start":{"line":20,"column":8},"end":{"line":20,"column":8}}]},"4":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":30}},{"start":{"line":20,"column":34},"end":{"line":20,"column":53}}]},"5":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"6":{"line":23,"type":"cond-expr","locations":[{"start":{"line":23,"column":50},"end":{"line":23,"column":57}},{"start":{"line":23,"column":60},"end":{"line":23,"column":65}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","let util = require(\"util\");","let Activity = require(\"./activity\");","","function ConsoleTracker() {","}","","ConsoleTracker.prototype.activityStateChanged = function (args) {","    let activity = args.scope.$activity;","    let reason = args.reason;","    let result = args.result;","    let name = activity.toString();","    if (result instanceof Error) {","        result = result.message;","    }","    else {","        if (_.isObject(result)) result = util.inspect(result);","        if (_.isString(result) && result.length > 100) result = result.substr(0, 100);","    }","    if (result) result = \", result: \" + result; else result = \"\";","    let method = reason === Activity.states.fail? \"error\" : \"log\";","    console[method](\"Activity '\" + name + \"' state changed - reason: \" + reason + result);","};","","module.exports = ConsoleTracker;",""],"l":{"3":1,"4":1,"5":1,"7":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"19":0,"20":0,"22":0,"23":0,"24":0,"27":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/endMethod.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/endMethod.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"EndMethod","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":21}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":26},"end":{"line":17,"column":55}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":72}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":8,"column":0},"end":{"line":13,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":27}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":31}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":35}},"11":{"start":{"line":17,"column":0},"end":{"line":27,"column":2}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":37}},"13":{"start":{"line":19,"column":4},"end":{"line":25,"column":5}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":35}},"15":{"start":{"line":21,"column":8},"end":{"line":24,"column":9}},"16":{"start":{"line":22,"column":12},"end":{"line":22,"column":60}},"17":{"start":{"line":23,"column":12},"end":{"line":23,"column":19}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":127}},"19":{"start":{"line":29,"column":0},"end":{"line":31,"column":2}},"20":{"start":{"line":30,"column":4},"end":{"line":30,"column":36}},"21":{"start":{"line":33,"column":0},"end":{"line":33,"column":27}}},"branchMap":{"1":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":4}},{"start":{"line":19,"column":4},"end":{"line":19,"column":4}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","let _ = require(\"lodash\");","","function EndMethod() {","    Activity.call(this);","    this.methodName = null;","    this.instanceIdPath = null;","    this.result = null;","}","","util.inherits(EndMethod, Activity);","","EndMethod.prototype.run = function (callContext, args) {","    let methodName = this.methodName;","    if (_.isString(methodName)) {","        let mn = methodName.trim();","        if (mn) {","            callContext.schedule(this.result, \"_resultGot\");","            return;","        }","    }","    callContext.fail(new errors.ValidationError(\"EndMethod activity methodName property's value must be a valid identifier.\"));","};","","EndMethod.prototype._resultGot = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = EndMethod;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"10":0,"11":0,"12":0,"15":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"26":0,"29":1,"30":0,"33":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/func.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/func.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"Func","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":20}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":13},"end":{"line":17,"column":28}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":21},"end":{"line":23,"column":50}}},"4":{"name":"(anonymous_4)","line":27,"loc":{"start":{"line":27,"column":26},"end":{"line":27,"column":65}}},"5":{"name":"(anonymous_5)","line":37,"loc":{"start":{"line":37,"column":26},"end":{"line":37,"column":65}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":20},"end":{"line":49,"column":33}}},"7":{"name":"(anonymous_7)","line":52,"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":24}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":29}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":36}},"12":{"start":{"line":17,"column":0},"end":{"line":19,"column":2}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":33}},"14":{"start":{"line":21,"column":0},"end":{"line":21,"column":30}},"15":{"start":{"line":23,"column":0},"end":{"line":25,"column":2}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":43}},"17":{"start":{"line":27,"column":0},"end":{"line":35,"column":2}},"18":{"start":{"line":28,"column":4},"end":{"line":34,"column":5}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":28}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":52}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":40}},"22":{"start":{"line":37,"column":0},"end":{"line":67,"column":2}},"23":{"start":{"line":38,"column":4},"end":{"line":38,"column":22}},"24":{"start":{"line":39,"column":4},"end":{"line":66,"column":5}},"25":{"start":{"line":40,"column":8},"end":{"line":43,"column":9}},"26":{"start":{"line":41,"column":12},"end":{"line":41,"column":111}},"27":{"start":{"line":42,"column":12},"end":{"line":42,"column":19}},"28":{"start":{"line":45,"column":8},"end":{"line":62,"column":9}},"29":{"start":{"line":46,"column":12},"end":{"line":46,"column":79}},"30":{"start":{"line":47,"column":12},"end":{"line":58,"column":13}},"31":{"start":{"line":48,"column":16},"end":{"line":54,"column":23}},"32":{"start":{"line":50,"column":24},"end":{"line":50,"column":48}},"33":{"start":{"line":53,"column":24},"end":{"line":53,"column":46}},"34":{"start":{"line":57,"column":16},"end":{"line":57,"column":46}},"35":{"start":{"line":61,"column":12},"end":{"line":61,"column":32}},"36":{"start":{"line":65,"column":8},"end":{"line":65,"column":44}},"37":{"start":{"line":69,"column":0},"end":{"line":69,"column":22}}},"branchMap":{"1":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":16},"end":{"line":13,"column":20}},{"start":{"line":13,"column":24},"end":{"line":13,"column":28}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"3":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":8}},{"start":{"line":40,"column":8},"end":{"line":40,"column":8}}]},"5":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":44},"end":{"line":46,"column":54}},{"start":{"line":46,"column":58},"end":{"line":46,"column":60}}]},"6":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":47,"column":12}},{"start":{"line":47,"column":12},"end":{"line":47,"column":12}}]},"7":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":16},"end":{"line":47,"column":35}},{"start":{"line":47,"column":39},"end":{"line":47,"column":65}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let common = require(\"../common\");","let errors = common.errors;","let constants = common.constants;","let async = common.asyncHelpers.async;","","function Func(code) {","    Activity.call(this);","    this.code = code || null;","    this.codeProperties.add(\"code\");","}","","Func.async = function(code) {","    return new Func(async(code));","};","","util.inherits(Func, Activity);","","Func.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Func.prototype._argsGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        this._args = result;","        callContext.schedule(this.code, \"_codeGot\");","    }","    else {","        callContext.end(reason, result);","    }","};","","Func.prototype._codeGot = function (callContext, reason, result) {","    let code = result;","    if (reason === Activity.states.complete) {","        if (!_.isFunction(code)) {","            callContext.fail(new errors.ValidationError(\"Func activity's property 'code' is not a function.\"));","            return;","        }","","        try {","            let fResult = code.apply(this, (this._args || []).concat(_, this));","            if (_.isObject(fResult) && _.isFunction(fResult.then)) {","                fResult.then(","                    function (v) {","                        callContext.complete(v);","                    },","                    function (err) {","                        callContext.fail(err);","                    });","            }","            else {","                callContext.complete(fResult);","            }","        }","        catch(e) {","            callContext.fail(e);","        }","    }","    else {","        callContext.end(reason, this._args);","    }","};","","module.exports = Func;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"13":0,"14":0,"17":1,"18":0,"21":1,"23":1,"24":0,"27":1,"28":0,"29":0,"30":0,"33":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"45":0,"46":0,"47":0,"48":0,"50":0,"53":0,"57":0,"61":0,"65":0,"69":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/parallel.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/parallel.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Parallel","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":20}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":34},"end":{"line":12,"column":63}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":30},"end":{"line":21,"column":69}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":41}},"5":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"6":{"start":{"line":7,"column":4},"end":{"line":7,"column":26}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":36}},"8":{"start":{"line":12,"column":0},"end":{"line":19,"column":1}},"9":{"start":{"line":13,"column":4},"end":{"line":18,"column":5}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":47}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":33}},"12":{"start":{"line":21,"column":0},"end":{"line":23,"column":1}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"14":{"start":{"line":25,"column":0},"end":{"line":25,"column":26}}},"branchMap":{"1":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":13,"column":4}},{"start":{"line":13,"column":4},"end":{"line":13,"column":4}}]},"2":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":8},"end":{"line":13,"column":12}},{"start":{"line":13,"column":16},"end":{"line":13,"column":27}}]}},"code":["var Activity = require(\"./activity\");","var util = require(\"util\");","var Declarator = require(\"./declarator\");","var errors = require(\"../common/errors\");","","function Parallel() {","    Declarator.call(this);","}","","util.inherits(Parallel, Declarator);","","Parallel.prototype.varsDeclared = function (callContext, args) {","    if (args && args.length) {","        callContext.schedule(args, \"_argsGot\");","    }","    else {","        callContext.complete([]);","    }","}","","Parallel.prototype._argsGot = function (callContext, reason, result) {","    callContext.end(reason, result);","}","","module.exports = Parallel;"],"l":{"1":1,"2":1,"3":1,"4":1,"6":1,"7":0,"10":1,"12":1,"13":0,"14":0,"17":0,"21":1,"22":0,"25":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/pick.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/pick.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Pick","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":16}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":30},"end":{"line":22,"column":59}}},"3":{"name":"(anonymous_3)","line":31,"loc":{"start":{"line":31,"column":26},"end":{"line":31,"column":65}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"5":{"start":{"line":8,"column":0},"end":{"line":10,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":26}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":32}},"8":{"start":{"line":14,"column":0},"end":{"line":20,"column":3}},"9":{"start":{"line":22,"column":0},"end":{"line":29,"column":2}},"10":{"start":{"line":23,"column":4},"end":{"line":28,"column":5}},"11":{"start":{"line":24,"column":8},"end":{"line":24,"column":47}},"12":{"start":{"line":27,"column":8},"end":{"line":27,"column":31}},"13":{"start":{"line":31,"column":0},"end":{"line":33,"column":2}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":36}},"15":{"start":{"line":35,"column":0},"end":{"line":35,"column":22}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"2":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":12}},{"start":{"line":23,"column":16},"end":{"line":23,"column":27}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let Declarator = require(\"./declarator\");","let errors = require(\"../common/errors\");","","function Pick() {","    Declarator.call(this);","}","","util.inherits(Pick, Declarator);","","Object.defineProperties(Pick.prototype, {","    collectAll: {","        value: false,","        writable: false,","        enumerable: false","    }","});","","Pick.prototype.varsDeclared = function (callContext, args) {","    if (args && args.length) {","        callContext.schedule(args, \"_argsGot\");","    }","    else {","        callContext.complete();","    }","};","","Pick.prototype._argsGot = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Pick;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"12":1,"14":1,"22":1,"23":0,"24":0,"27":0,"31":1,"32":0,"35":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/resumeBookmark.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/resumeBookmark.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"ResumeBookmark","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":27}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":43}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":27}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":103}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}},"11":{"start":{"line":18,"column":0},"end":{"line":42,"column":2}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":41}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":29}},"14":{"start":{"line":22,"column":4},"end":{"line":24,"column":5}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":80}},"16":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":100}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":23}},"19":{"start":{"line":30,"column":4},"end":{"line":39,"column":5}},"20":{"start":{"line":31,"column":8},"end":{"line":31,"column":63}},"21":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"22":{"start":{"line":35,"column":8},"end":{"line":38,"column":9}},"23":{"start":{"line":36,"column":12},"end":{"line":36,"column":67}},"24":{"start":{"line":37,"column":12},"end":{"line":37,"column":26}},"25":{"start":{"line":41,"column":4},"end":{"line":41,"column":33}},"26":{"start":{"line":44,"column":0},"end":{"line":44,"column":32}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"4":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":8}},{"start":{"line":35,"column":8},"end":{"line":35,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","","function ResumeBookmark() {","    Activity.call(this);","    this.bookmarkName = \"\";","    this.reason = Activity.states.complete;","    this.mustExists = true;","}","","ResumeBookmark.validReasons = [Activity.states.complete, Activity.states.fail, Activity.states.cancel];","","util.inherits(ResumeBookmark, Activity);","","ResumeBookmark.prototype.run = function (callContext, args) {","    let bookmarkName = this.bookmarkName;","    let reason = this.reason;","","    if (!bookmarkName) {","        callContext.fail(new errors.ValidationError(\"Bookmark name expected.\"));","    }","    if (ResumeBookmark.validReasons.indexOf(reason) === -1) {","        callContext.fail(new errors.ValidationError(\"Reason value '\" + reason + \"' is not valid.\"));","    }","","    let result = false;","    if (this.mustExists) {","        callContext.resumeBookmark(bookmarkName, reason, args);","        result = true;","    }","    else {","        if (callContext.executionContext.isBookmarkExists(bookmarkName)) {","            callContext.resumeBookmark(bookmarkName, reason, args);","            result = true;","        }","    }","","    callContext.complete(result);","};","","module.exports = ResumeBookmark;",""],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"9":0,"10":0,"11":0,"14":1,"16":1,"18":1,"19":0,"20":0,"22":0,"23":0,"25":0,"26":0,"29":0,"30":0,"31":0,"32":0,"35":0,"36":0,"37":0,"41":0,"44":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/waitForBookmark.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/waitForBookmark.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"WaitForBookmark","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":32},"end":{"line":13,"column":61}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":39},"end":{"line":25,"column":78}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":27}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":41}},"7":{"start":{"line":13,"column":0},"end":{"line":23,"column":2}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":41}},"9":{"start":{"line":16,"column":4},"end":{"line":19,"column":5}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":117}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":15}},"12":{"start":{"line":21,"column":4},"end":{"line":21,"column":59}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":23}},"14":{"start":{"line":25,"column":0},"end":{"line":27,"column":2}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":36}},"16":{"start":{"line":29,"column":0},"end":{"line":29,"column":33}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function WaitForBookmark() {","    Activity.call(this);","    this.bookmarkName = \"\";","}","","util.inherits(WaitForBookmark, Activity);","","WaitForBookmark.prototype.run = function (callContext, args) {","    let bookmarkName = this.bookmarkName;","","    if (!bookmarkName) {","        callContext.fail(new Error(\"WaitForBookmark activity's property 'bookmarkName' is not a non-empty string.\"));","        return;","    }","","    callContext.createBookmark(bookmarkName, \"_bmReached\");","    callContext.idle();","};","","WaitForBookmark.prototype._bmReached = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = WaitForBookmark;",""],"l":{"3":1,"4":1,"6":1,"7":0,"8":0,"11":1,"13":1,"14":0,"16":0,"17":0,"18":0,"21":0,"22":0,"25":1,"26":0,"29":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/workflow.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/workflow.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1},"b":{"1":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"Workflow","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":31}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"3":{"start":{"line":4,"column":0},"end":{"line":9,"column":1}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":21}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":32}},"6":{"start":{"line":8,"column":4},"end":{"line":8,"column":55}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":31}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":26}}},"branchMap":{"1":{"line":8,"type":"cond-expr","locations":[{"start":{"line":8,"column":33},"end":{"line":8,"column":48}},{"start":{"line":8,"column":51},"end":{"line":8,"column":53}}]}},"code":["var Block = require(\"./block\");","var util = require(\"util\");","","function Workflow(name) {","    Block.call(this);","","    this.reserved(\"version\", 0);","    this.reserved(\"name\", name ? name.toString() : \"\");","}","","util.inherits(Workflow, Block);","","module.exports = Workflow;"],"l":{"1":1,"2":1,"4":1,"5":0,"7":0,"8":0,"11":1,"13":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/if.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/if.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"If","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":14}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":35},"end":{"line":21,"column":46}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":48}}},"4":{"name":"(anonymous_4)","line":44,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":68}}},"5":{"name":"(anonymous_5)","line":67,"loc":{"start":{"line":67,"column":29},"end":{"line":67,"column":68}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":31}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":8,"column":0},"end":{"line":17,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":37}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":37}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":26}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"12":{"start":{"line":19,"column":0},"end":{"line":19,"column":28}},"13":{"start":{"line":21,"column":0},"end":{"line":32,"column":2}},"14":{"start":{"line":22,"column":4},"end":{"line":26,"column":5}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":32}},"17":{"start":{"line":25,"column":8},"end":{"line":25,"column":30}},"18":{"start":{"line":27,"column":4},"end":{"line":31,"column":5}},"19":{"start":{"line":28,"column":8},"end":{"line":28,"column":29}},"20":{"start":{"line":29,"column":8},"end":{"line":29,"column":32}},"21":{"start":{"line":30,"column":8},"end":{"line":30,"column":30}},"22":{"start":{"line":34,"column":0},"end":{"line":42,"column":2}},"23":{"start":{"line":35,"column":4},"end":{"line":35,"column":35}},"24":{"start":{"line":36,"column":4},"end":{"line":41,"column":5}},"25":{"start":{"line":37,"column":8},"end":{"line":37,"column":57}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":31}},"27":{"start":{"line":44,"column":0},"end":{"line":65,"column":2}},"28":{"start":{"line":45,"column":4},"end":{"line":64,"column":5}},"29":{"start":{"line":46,"column":8},"end":{"line":59,"column":9}},"30":{"start":{"line":47,"column":12},"end":{"line":47,"column":33}},"31":{"start":{"line":48,"column":12},"end":{"line":51,"column":13}},"32":{"start":{"line":49,"column":16},"end":{"line":49,"column":60}},"33":{"start":{"line":50,"column":16},"end":{"line":50,"column":23}},"34":{"start":{"line":54,"column":12},"end":{"line":54,"column":34}},"35":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"36":{"start":{"line":56,"column":16},"end":{"line":56,"column":61}},"37":{"start":{"line":57,"column":16},"end":{"line":57,"column":23}},"38":{"start":{"line":60,"column":8},"end":{"line":60,"column":31}},"39":{"start":{"line":63,"column":8},"end":{"line":63,"column":40}},"40":{"start":{"line":67,"column":0},"end":{"line":69,"column":2}},"41":{"start":{"line":68,"column":4},"end":{"line":68,"column":36}},"42":{"start":{"line":71,"column":0},"end":{"line":71,"column":20}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"5":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]},"6":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":12}},{"start":{"line":48,"column":12},"end":{"line":48,"column":12}}]},"7":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":55,"column":12}},{"start":{"line":55,"column":12},"end":{"line":55,"column":12}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let Block = require(\"./block\");","let _ = require(\"lodash\");","","function If() {","    Activity.call(this);","","    this.arrayProperties.add(\"then\");","    this.arrayProperties.add(\"else\");","","    this.condition = null;","    this.then = null;","    this.else = null;","}","","util.inherits(If, Activity);","","If.prototype.initializeStructure = function() {","    if (this.then) {","        let prev = this.then;","        this.then = new Block();","        this.then.args = prev;","    }","    if (this.else) {","        let prev = this.else;","        this.else = new Block();","        this.else.args = prev;","    }","};","","If.prototype.run = function (callContext, args) {","    let condition = this.condition;","    if (condition) {","        callContext.schedule(condition, \"_conditionGot\");","    }","    else {","        callContext.complete();","    }","};","","If.prototype._conditionGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (result) {","            let then = this.then;","            if (then) {","                callContext.schedule(then, \"_bodyFinished\");","                return;","            }","        }","        else {","            let _else = this.else;","            if (_else) {","                callContext.schedule(_else, \"_bodyFinished\");","                return;","            }","        }","        callContext.complete();","    }","    else {","        callContext.end(reason, result);","    }","};","","If.prototype._bodyFinished = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = If;",""],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"12":0,"14":0,"15":0,"16":0,"19":1,"21":1,"22":0,"23":0,"24":0,"25":0,"27":0,"28":0,"29":0,"30":0,"34":1,"35":0,"36":0,"37":0,"40":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"54":0,"55":0,"56":0,"57":0,"60":0,"63":0,"67":1,"68":0,"71":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/while.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/while.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"While","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":17}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":22},"end":{"line":15,"column":51}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":71}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":32},"end":{"line":39,"column":71}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":7,"column":0},"end":{"line":11,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":26}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":31}},"8":{"start":{"line":15,"column":0},"end":{"line":23,"column":2}},"9":{"start":{"line":16,"column":4},"end":{"line":16,"column":35}},"10":{"start":{"line":17,"column":4},"end":{"line":22,"column":5}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":57}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":31}},"13":{"start":{"line":25,"column":0},"end":{"line":37,"column":2}},"14":{"start":{"line":26,"column":4},"end":{"line":36,"column":5}},"15":{"start":{"line":27,"column":8},"end":{"line":32,"column":9}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":55}},"17":{"start":{"line":31,"column":12},"end":{"line":31,"column":59}},"18":{"start":{"line":35,"column":8},"end":{"line":35,"column":40}},"19":{"start":{"line":39,"column":0},"end":{"line":47,"column":2}},"20":{"start":{"line":40,"column":4},"end":{"line":46,"column":5}},"21":{"start":{"line":41,"column":8},"end":{"line":41,"column":38}},"22":{"start":{"line":42,"column":8},"end":{"line":42,"column":62}},"23":{"start":{"line":45,"column":8},"end":{"line":45,"column":40}},"24":{"start":{"line":49,"column":0},"end":{"line":49,"column":23}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":8}},{"start":{"line":27,"column":8},"end":{"line":27,"column":8}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let WithBody = require(\"./withBody\");","","function While() {","    WithBody.call(this);","","    this.condition = null;","}","","util.inherits(While, WithBody);","","While.prototype.run = function (callContext, args) {","    let condition = this.condition;","    if (condition) {","        callContext.schedule(condition, \"_conditionGot\");","    }","    else {","        callContext.complete();","    }","};","","While.prototype._conditionGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (!result) {","            callContext.complete(this._lastBodyResult);","        }","        else {","            WithBody.prototype.run.call(this, callContext);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","While.prototype.bodyCompleted = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        this._lastBodyResult = result;","        callContext.schedule(this.condition, \"_conditionGot\");","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = While;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"13":1,"15":1,"16":0,"17":0,"18":0,"21":0,"25":1,"26":0,"27":0,"28":0,"31":0,"35":0,"39":1,"40":0,"41":0,"42":0,"45":0,"49":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/withBody.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/withBody.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"WithBody","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":41},"end":{"line":16,"column":52}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":25},"end":{"line":22,"column":54}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":35},"end":{"line":32,"column":73}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"5":{"start":{"line":8,"column":0},"end":{"line":12,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":22}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":34}},"9":{"start":{"line":16,"column":0},"end":{"line":20,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":29}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":32}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":21}},"13":{"start":{"line":22,"column":0},"end":{"line":30,"column":2}},"14":{"start":{"line":23,"column":4},"end":{"line":23,"column":56}},"15":{"start":{"line":24,"column":4},"end":{"line":29,"column":5}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":53}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":66}},"18":{"start":{"line":32,"column":0},"end":{"line":34,"column":2}},"19":{"start":{"line":33,"column":4},"end":{"line":33,"column":36}},"20":{"start":{"line":36,"column":0},"end":{"line":36,"column":26}}},"branchMap":{"1":{"line":23,"type":"cond-expr","locations":[{"start":{"line":23,"column":38},"end":{"line":23,"column":42}},{"start":{"line":23,"column":45},"end":{"line":23,"column":55}}]},"2":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":16},"end":{"line":23,"column":20}},{"start":{"line":23,"column":24},"end":{"line":23,"column":35}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"4":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":18}},{"start":{"line":24,"column":22},"end":{"line":24,"column":39}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let Block = require(\"./block\");","","function WithBody() {","    Activity.call(this);","","    this._body = null;","}","","util.inherits(WithBody, Activity);","","WithBody.prototype.initializeStructure = function() {","    this._body = new Block();","    this._body.args = this.args;","    this.args = null;","};","","WithBody.prototype.run = function (callContext, args) {","    let _body = args && args.length ? args : this._body;","    if (_body.args && _body.args.length) {","        callContext.schedule(_body, \"bodyCompleted\");","    }","    else {","        this.bodyCompleted(callContext, Activity.states.complete);","    }","};","","WithBody.prototype.bodyCompleted = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = WithBody;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"14":1,"16":1,"17":0,"18":0,"19":0,"22":1,"23":0,"24":0,"25":0,"28":0,"32":1,"33":0,"36":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/method.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/method.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1,"11":0,"12":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"Method","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":40},"end":{"line":17,"column":52}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":13,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":25}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":46}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":38}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":40}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":33}},"10":{"start":{"line":17,"column":0},"end":{"line":41,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":40,"column":6}},"12":{"start":{"line":43,"column":0},"end":{"line":43,"column":24}}},"branchMap":{},"code":["\"use strict\";","","let Composite = require(\"./composite\");","let util = require(\"util\");","","function Method() {","    Composite.call(this);","","    this.reserved(\"canCreateInstance\", false);","    this.reserved(\"methodName\", null);","    this.reserved(\"instanceIdPath\", \"\");","    this.result = null;","}","","util.inherits(Method, Composite);","","Method.prototype.createImplementation = function () {","    return {","        \"@block\": {","            id: \"_methodBlock\",","            a: null,","            args: [","                {","                    \"@beginMethod\": {","                        canCreateInstance: this.canCreateInstance,","                        methodName: this.methodName,","                        instanceIdPath: this.instanceIdPath,","                        \"@to\": \"a\"","                    }","                },","                {","                    \"@endMethod\": {","                        methodName: this.methodName,","                        result: \"= this._methodBlock.$parent.result\"","                    }","                },","                \"= this.a\"","            ]","        }","    };","};","","module.exports = Method;",""],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"12":0,"15":1,"17":1,"18":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/composite.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/composite.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":1,"37":0,"38":1,"39":0,"40":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"Composite","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":21}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":43},"end":{"line":24,"column":66}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":73}}},"4":{"name":"(anonymous_4)","line":41,"loc":{"start":{"line":41,"column":42},"end":{"line":41,"column":65}}},"5":{"name":"(anonymous_5)","line":46,"loc":{"start":{"line":46,"column":26},"end":{"line":46,"column":55}}},"6":{"name":"(anonymous_6)","line":53,"loc":{"start":{"line":53,"column":35},"end":{"line":53,"column":64}}},"7":{"name":"(anonymous_7)","line":57,"loc":{"start":{"line":57,"column":35},"end":{"line":57,"column":74}}},"8":{"name":"(anonymous_8)","line":61,"loc":{"start":{"line":61,"column":46},"end":{"line":61,"column":85}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":47}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":49}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":31}},"9":{"start":{"line":12,"column":0},"end":{"line":20,"column":1}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":26}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":51}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":56}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":57}},"14":{"start":{"line":18,"column":4},"end":{"line":18,"column":64}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":60}},"16":{"start":{"line":22,"column":0},"end":{"line":22,"column":37}},"17":{"start":{"line":24,"column":0},"end":{"line":26,"column":2}},"18":{"start":{"line":25,"column":4},"end":{"line":25,"column":70}},"19":{"start":{"line":28,"column":0},"end":{"line":39,"column":2}},"20":{"start":{"line":29,"column":4},"end":{"line":29,"column":26}},"21":{"start":{"line":30,"column":4},"end":{"line":38,"column":5}},"22":{"start":{"line":31,"column":8},"end":{"line":31,"column":70}},"23":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":78}},"25":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"26":{"start":{"line":36,"column":12},"end":{"line":36,"column":86}},"27":{"start":{"line":41,"column":0},"end":{"line":44,"column":2}},"28":{"start":{"line":42,"column":4},"end":{"line":42,"column":26}},"29":{"start":{"line":43,"column":4},"end":{"line":43,"column":50}},"30":{"start":{"line":46,"column":0},"end":{"line":51,"column":2}},"31":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"32":{"start":{"line":48,"column":8},"end":{"line":48,"column":81}},"33":{"start":{"line":50,"column":4},"end":{"line":50,"column":59}},"34":{"start":{"line":53,"column":0},"end":{"line":55,"column":2}},"35":{"start":{"line":54,"column":4},"end":{"line":54,"column":63}},"36":{"start":{"line":57,"column":0},"end":{"line":59,"column":2}},"37":{"start":{"line":58,"column":4},"end":{"line":58,"column":89}},"38":{"start":{"line":61,"column":0},"end":{"line":63,"column":2}},"39":{"start":{"line":62,"column":4},"end":{"line":62,"column":36}},"40":{"start":{"line":65,"column":0},"end":{"line":65,"column":27}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":8}},{"start":{"line":35,"column":8},"end":{"line":35,"column":8}}]},"4":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let constants = require(\"../common/constants\");","let Declarator = require(\"./declarator\");","let is = require(\"../common/is\");","let _ = require(\"lodash\");","let activityMarkup = require(\"./activityMarkup\");","let assert = require(\"assert\");","","function Composite() {","    Declarator.call(this);","","    this.reservedProperties.add(\"_implementation\");","    this.nonSerializedProperties.add(\"_implementation\");","    this.nonScopedProperties.add(\"createImplementation\");","    this.nonScopedProperties.add(\"ensureImplementationCreated\");","    this.nonScopedProperties.add(\"implementationCompleted\");","}","","util.inherits(Composite, Declarator);","","Composite.prototype.createImplementation = function (execContext) {","    throw new Error(\"Method 'createImplementation' not implemented.\");","};","","Composite.prototype.ensureImplementationCreated = function (execContext) {","    assert(!!execContext);","    if (_.isUndefined(this._implementation)) {","        this._implementation = this.createImplementation(execContext);","        if (_.isPlainObject(this._implementation)) {","            this._implementation = activityMarkup.parse(this._implementation);","        }","        if (!(this._implementation instanceof Activity)) {","            throw new Error(\"Method 'createImplementation' must return an activity.\");","        }","    }","};","","Composite.prototype.initializeStructure = function (execContext) {","    assert(!!execContext);","    this.ensureImplementationCreated(execContext);","};","","Composite.prototype.run = function (callContext, args) {","    if (!(this._implementation instanceof Activity)) {","        throw new Error(\"Composite activity's implementation is not available.\");","    }","    Declarator.prototype.run.call(this, callContext, args);","};","","Composite.prototype.varsDeclared = function (callContext, args) {","    callContext.schedule(this._implementation, \"_implInvoked\");","};","","Composite.prototype._implInvoked = function (callContext, reason, result) {","    callContext.activity.implementationCompleted.call(this, callContext, reason, result);","};","","Composite.prototype.implementationCompleted = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Composite;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"15":0,"16":0,"17":0,"18":0,"19":0,"22":1,"24":1,"25":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"35":0,"36":0,"41":1,"42":0,"43":0,"46":1,"47":0,"48":0,"50":0,"53":1,"54":0,"57":1,"58":0,"61":1,"62":0,"65":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/template.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/template.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"Template","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":20}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":41},"end":{"line":22,"column":63}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":38}}},"4":{"name":"(anonymous_4)","line":36,"loc":{"start":{"line":36,"column":25},"end":{"line":36,"column":53}}},"5":{"name":"(anonymous_5)","line":45,"loc":{"start":{"line":45,"column":36},"end":{"line":45,"column":74}}},"6":{"name":"(anonymous_6)","line":51,"loc":{"start":{"line":51,"column":53},"end":{"line":51,"column":83}}},"7":{"name":"(anonymous_7)","line":52,"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":51}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"8":{"start":{"line":11,"column":0},"end":{"line":18,"column":1}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":24}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":24}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":53}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":59}},"13":{"start":{"line":20,"column":0},"end":{"line":20,"column":34}},"14":{"start":{"line":22,"column":0},"end":{"line":34,"column":2}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":20}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":55}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":19}},"18":{"start":{"line":26,"column":4},"end":{"line":33,"column":11}},"19":{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},"20":{"start":{"line":29,"column":16},"end":{"line":29,"column":59}},"21":{"start":{"line":30,"column":16},"end":{"line":30,"column":45}},"22":{"start":{"line":32,"column":12},"end":{"line":32,"column":57}},"23":{"start":{"line":36,"column":0},"end":{"line":43,"column":2}},"24":{"start":{"line":37,"column":4},"end":{"line":42,"column":5}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":53}},"26":{"start":{"line":41,"column":8},"end":{"line":41,"column":31}},"27":{"start":{"line":45,"column":0},"end":{"line":65,"column":2}},"28":{"start":{"line":46,"column":4},"end":{"line":64,"column":5}},"29":{"start":{"line":47,"column":8},"end":{"line":60,"column":9}},"30":{"start":{"line":48,"column":12},"end":{"line":48,"column":24}},"31":{"start":{"line":49,"column":12},"end":{"line":49,"column":52}},"32":{"start":{"line":50,"column":12},"end":{"line":50,"column":32}},"33":{"start":{"line":51,"column":12},"end":{"line":55,"column":15}},"34":{"start":{"line":52,"column":16},"end":{"line":54,"column":19}},"35":{"start":{"line":53,"column":20},"end":{"line":53,"column":48}},"36":{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},"37":{"start":{"line":57,"column":16},"end":{"line":57,"column":20}},"38":{"start":{"line":59,"column":12},"end":{"line":59,"column":42}},"39":{"start":{"line":63,"column":8},"end":{"line":63,"column":40}},"40":{"start":{"line":67,"column":0},"end":{"line":67,"column":26}}},"branchMap":{"1":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":12}},{"start":{"line":28,"column":12},"end":{"line":28,"column":12}}]},"2":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":4}},{"start":{"line":37,"column":4},"end":{"line":37,"column":4}}]},"3":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"4":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":47,"column":8}},{"start":{"line":47,"column":8},"end":{"line":47,"column":8}}]},"5":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":12},"end":{"line":47,"column":29}},{"start":{"line":47,"column":33},"end":{"line":47,"column":46}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let activityMarkup = require(\"./activityMarkup\");","let is = require(\"../common/is\");","let templateHelpers = require(\"./templateHelpers\");","let constants = require(\"../common/constants\");","","function Template() {","    Activity.call(this);","","    this.declare = null;","","    this.nonScopedProperties.add(\"_visitActivities\");","    this.nonScopedProperties.add(\"_getInternalActivities\");","}","","util.inherits(Template, Activity);","","Template.prototype.initializeStructure = function(execContext) {","    let self = this;","    let require = execContext.rootActivity[\"@require\"];","    self.args = [];","    templateHelpers.visitActivities(self.declare,","        function(markup, parent, key) {","            if (require) {","                markup = templateHelpers.cloneDeep(markup);","                markup[\"@require\"] = require;","            }","            self.args.push(activityMarkup.parse(markup));","        });","};","","Template.prototype.run = function(callContext, args) {","    if (_.isArray(args)) {","        callContext.schedule(args, \"_activitiesGot\");","    }","    else {","        callContext.complete();","    }","};","","Template.prototype._activitiesGot = function(callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (_.isArray(result) && result.length) {","            let idx = 0;","            let declare = _.cloneDeep(this.declare);","            let setupTasks = [];","            templateHelpers.visitActivities(declare, function(markup, parent, key) {","                setupTasks.push(function() {","                    parent[key] = result[idx++];","                });","            });","            for (let t of setupTasks) {","                t();","            }","            callContext.complete(declare);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Template;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"14":0,"16":0,"17":0,"20":1,"22":1,"23":0,"24":0,"25":0,"26":0,"28":0,"29":0,"30":0,"32":0,"36":1,"37":0,"38":0,"41":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"56":0,"57":0,"59":0,"63":0,"67":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/truthy.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/truthy.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Truthy","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":51}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":67}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":25},"end":{"line":34,"column":63}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":12,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":23}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":23}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":50}},"11":{"start":{"line":20,"column":0},"end":{"line":32,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":47}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":50}},"18":{"start":{"line":34,"column":0},"end":{"line":36,"column":2}},"19":{"start":{"line":35,"column":4},"end":{"line":35,"column":36}},"20":{"start":{"line":38,"column":0},"end":{"line":38,"column":24}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function Truthy() {","    Activity.call(this);","","    this.value = false;","    this.is = true;","    this.isNot = false;","}","","util.inherits(Truthy, Activity);","","Truthy.prototype.run = function(callContext, args) {","    callContext.schedule(this.value, \"_valueGot\");","};","","Truthy.prototype._valueGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    if (result) {","        callContext.schedule(this.is, \"_done\");","    }","    else {","        callContext.schedule(this.isNot, \"_done\");","    }","};","","Truthy.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Truthy;"],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"30":0,"34":1,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/falsy.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/falsy.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Falsy","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":17}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":22},"end":{"line":16,"column":50}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":66}}},"4":{"name":"(anonymous_4)","line":34,"loc":{"start":{"line":34,"column":24},"end":{"line":34,"column":62}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":12,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":23}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":23}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":31}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":50}},"11":{"start":{"line":20,"column":0},"end":{"line":32,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},"16":{"start":{"line":27,"column":8},"end":{"line":27,"column":50}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":47}},"18":{"start":{"line":34,"column":0},"end":{"line":36,"column":2}},"19":{"start":{"line":35,"column":4},"end":{"line":35,"column":36}},"20":{"start":{"line":38,"column":0},"end":{"line":38,"column":23}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function Falsy() {","    Activity.call(this);","","    this.value = false;","    this.is = true;","    this.isNot = false;","}","","util.inherits(Falsy, Activity);","","Falsy.prototype.run = function(callContext, args) {","    callContext.schedule(this.value, \"_valueGot\");","};","","Falsy.prototype._valueGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    if (result) {","        callContext.schedule(this.isNot, \"_done\");","    }","    else {","        callContext.schedule(this.is, \"_done\");","    }","};","","Falsy.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Falsy;"],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"30":0,"34":1,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/equals.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/equals.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Equals","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":18}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":51}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":34},"end":{"line":22,"column":72}}},"4":{"name":"(anonymous_4)","line":36,"loc":{"start":{"line":36,"column":25},"end":{"line":36,"column":63}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":14,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":22}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":19}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":24}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":32}},"11":{"start":{"line":18,"column":0},"end":{"line":20,"column":2}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":66}},"13":{"start":{"line":22,"column":0},"end":{"line":34,"column":2}},"14":{"start":{"line":23,"column":4},"end":{"line":26,"column":5}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":40}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":15}},"17":{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":47}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":50}},"20":{"start":{"line":36,"column":0},"end":{"line":38,"column":2}},"21":{"start":{"line":37,"column":4},"end":{"line":37,"column":36}},"22":{"start":{"line":40,"column":0},"end":{"line":40,"column":24}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"3":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":22},"end":{"line":28,"column":45}},{"start":{"line":28,"column":48},"end":{"line":28,"column":71}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function Equals() {","    Activity.call(this);","","    this.value = null;","    this.to = null;","    this.is = true;","    this.isNot = false;","    this.strict = false;","}","","util.inherits(Equals, Activity);","","Equals.prototype.run = function(callContext, args) {","    callContext.schedule([this.value, this.to], \"_valueAndToGot\");","};","","Equals.prototype._valueAndToGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    if (this.strict ? result[0] === result[1] : result[0] === result[1]) {","        callContext.schedule(this.is, \"_done\");","    }","    else {","        callContext.schedule(this.isNot, \"_done\");","    }","};","","Equals.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Equals;"],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"12":0,"13":0,"16":1,"18":1,"19":0,"22":1,"23":0,"24":0,"25":0,"28":0,"29":0,"32":0,"36":1,"37":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/notEquals.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/notEquals.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"NotEquals","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":26},"end":{"line":18,"column":54}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":37},"end":{"line":22,"column":75}}},"4":{"name":"(anonymous_4)","line":36,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":66}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":14,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":22}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":19}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":24}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":35}},"11":{"start":{"line":18,"column":0},"end":{"line":20,"column":2}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":66}},"13":{"start":{"line":22,"column":0},"end":{"line":34,"column":2}},"14":{"start":{"line":23,"column":4},"end":{"line":26,"column":5}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":40}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":15}},"17":{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":50}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":47}},"20":{"start":{"line":36,"column":0},"end":{"line":38,"column":2}},"21":{"start":{"line":37,"column":4},"end":{"line":37,"column":36}},"22":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"3":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":22},"end":{"line":28,"column":45}},{"start":{"line":28,"column":48},"end":{"line":28,"column":71}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function NotEquals() {","    Activity.call(this);","","    this.value = null;","    this.to = null;","    this.is = true;","    this.isNot = false;","    this.strict = false;","}","","util.inherits(NotEquals, Activity);","","NotEquals.prototype.run = function(callContext, args) {","    callContext.schedule([this.value, this.to], \"_valueAndToGot\");","};","","NotEquals.prototype._valueAndToGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    if (this.strict ? result[0] === result[1] : result[0] === result[1]) {","        callContext.schedule(this.isNot, \"_done\");","    }","    else {","        callContext.schedule(this.is, \"_done\");","    }","};","","NotEquals.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = NotEquals;"],"l":{"3":1,"4":1,"6":1,"7":0,"9":0,"10":0,"11":0,"12":0,"13":0,"16":1,"18":1,"19":0,"22":1,"23":0,"24":0,"25":0,"28":0,"29":0,"32":0,"36":1,"37":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/not.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/not.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Not","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":15}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":20},"end":{"line":16,"column":49}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":64}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":22},"end":{"line":39,"column":61}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":25}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":29}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"11":{"start":{"line":20,"column":0},"end":{"line":37,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":23}},"16":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":42}},"18":{"start":{"line":31,"column":4},"end":{"line":36,"column":5}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":52}},"20":{"start":{"line":35,"column":8},"end":{"line":35,"column":51}},"21":{"start":{"line":39,"column":0},"end":{"line":41,"column":2}},"22":{"start":{"line":40,"column":4},"end":{"line":40,"column":36}},"23":{"start":{"line":43,"column":0},"end":{"line":43,"column":21}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":25}},{"start":{"line":27,"column":29},"end":{"line":27,"column":46}}]},"4":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":29},"end":{"line":28,"column":33}},{"start":{"line":28,"column":36},"end":{"line":28,"column":41}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Not() {","    Activity.call(this);","","    this.isTrue = true;","    this.isFalse = false;","}","","util.inherits(Not, Activity);","","Not.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Not.prototype._argsGot = function (callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let isTrue = false;","    if (_.isArray(result) && result.length > 0) {","        isTrue = result[0] ? true : false;","    }","","    if (isTrue) {","        callContext.schedule(this.isFalse, \"_done\");","    }","    else {","        callContext.schedule(this.isTrue, \"_done\");","    }","};","","Not.prototype._done = function (callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Not;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"28":0,"31":0,"32":0,"35":0,"39":1,"40":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/and.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/and.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"And","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":15}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":20},"end":{"line":16,"column":49}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":63}}},"4":{"name":"(anonymous_4)","line":42,"loc":{"start":{"line":42,"column":22},"end":{"line":42,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":25}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":29}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"11":{"start":{"line":20,"column":0},"end":{"line":40,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":23}},"16":{"start":{"line":27,"column":4},"end":{"line":32,"column":5}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":22}},"18":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"19":{"start":{"line":30,"column":12},"end":{"line":30,"column":50}},"20":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"21":{"start":{"line":35,"column":8},"end":{"line":35,"column":51}},"22":{"start":{"line":38,"column":8},"end":{"line":38,"column":52}},"23":{"start":{"line":42,"column":0},"end":{"line":44,"column":2}},"24":{"start":{"line":43,"column":4},"end":{"line":43,"column":36}},"25":{"start":{"line":46,"column":0},"end":{"line":46,"column":21}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":22},"end":{"line":30,"column":38}},{"start":{"line":30,"column":43},"end":{"line":30,"column":49}}]},"4":{"line":30,"type":"cond-expr","locations":[{"start":{"line":30,"column":26},"end":{"line":30,"column":30}},{"start":{"line":30,"column":33},"end":{"line":30,"column":38}}]},"5":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function And() {","    Activity.call(this);","","    this.isTrue = true;","    this.isFalse = false;","}","","util.inherits(And, Activity);","","And.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","And.prototype._argsGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let isTrue = false;","    if (result.length) {","        isTrue = true;","        for (let v of result) {","            isTrue = (v ? true : false) && isTrue;","        }","    }","","    if (isTrue) {","        callContext.schedule(this.isTrue, \"_done\");","    }","    else {","        callContext.schedule(this.isFalse, \"_done\");","    }","};","","And.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = And;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"28":0,"29":0,"30":0,"34":0,"35":0,"38":0,"42":1,"43":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/or.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/or.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"Or","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":14}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":48}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":24},"end":{"line":20,"column":62}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":21},"end":{"line":39,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":25}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":28}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"11":{"start":{"line":20,"column":0},"end":{"line":37,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":23}},"16":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"18":{"start":{"line":31,"column":4},"end":{"line":36,"column":5}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":51}},"20":{"start":{"line":35,"column":8},"end":{"line":35,"column":52}},"21":{"start":{"line":39,"column":0},"end":{"line":41,"column":2}},"22":{"start":{"line":40,"column":4},"end":{"line":40,"column":36}},"23":{"start":{"line":43,"column":0},"end":{"line":43,"column":20}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":18},"end":{"line":28,"column":34}},{"start":{"line":28,"column":39},"end":{"line":28,"column":45}}]},"3":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":22},"end":{"line":28,"column":26}},{"start":{"line":28,"column":29},"end":{"line":28,"column":34}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Or() {","    Activity.call(this);","","    this.isTrue = true;","    this.isFalse = false;","}","","util.inherits(Or, Activity);","","Or.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Or.prototype._argsGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let isTrue = false;","    for (let v of result) {","        isTrue = (v ? true : false) || isTrue;","    }","","    if (isTrue) {","        callContext.schedule(this.isTrue, \"_done\");","    }","    else {","        callContext.schedule(this.isFalse, \"_done\");","    }","};","","Or.prototype._done = function(callContext, reason, result) {","    callContext.end(reason, result);","};","","module.exports = Or;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"28":0,"31":0,"32":0,"35":0,"39":1,"40":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/for.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/for.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"For","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":15}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":20},"end":{"line":21,"column":49}}},"3":{"name":"(anonymous_3)","line":35,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":66}}},"4":{"name":"(anonymous_4)","line":47,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":59}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":30},"end":{"line":82,"column":69}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"5":{"start":{"line":8,"column":0},"end":{"line":17,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":21}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":19}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":18}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":23}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":44}},"12":{"start":{"line":19,"column":0},"end":{"line":19,"column":29}},"13":{"start":{"line":21,"column":0},"end":{"line":33,"column":2}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":33}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":25}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":21}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":25}},"18":{"start":{"line":26,"column":4},"end":{"line":32,"column":5}},"19":{"start":{"line":27,"column":8},"end":{"line":27,"column":29}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":61}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"22":{"start":{"line":35,"column":0},"end":{"line":45,"column":2}},"23":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"24":{"start":{"line":37,"column":8},"end":{"line":37,"column":31}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":31}},"27":{"start":{"line":40,"column":8},"end":{"line":40,"column":61}},"28":{"start":{"line":43,"column":8},"end":{"line":43,"column":39}},"29":{"start":{"line":47,"column":0},"end":{"line":80,"column":2}},"30":{"start":{"line":48,"column":4},"end":{"line":48,"column":33}},"31":{"start":{"line":49,"column":4},"end":{"line":49,"column":26}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":22}},"33":{"start":{"line":51,"column":4},"end":{"line":51,"column":26}},"34":{"start":{"line":52,"column":4},"end":{"line":55,"column":5}},"35":{"start":{"line":53,"column":8},"end":{"line":53,"column":97}},"36":{"start":{"line":54,"column":8},"end":{"line":54,"column":15}},"37":{"start":{"line":56,"column":4},"end":{"line":59,"column":5}},"38":{"start":{"line":57,"column":8},"end":{"line":57,"column":93}},"39":{"start":{"line":58,"column":8},"end":{"line":58,"column":15}},"40":{"start":{"line":60,"column":4},"end":{"line":63,"column":5}},"41":{"start":{"line":61,"column":8},"end":{"line":61,"column":97}},"42":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"43":{"start":{"line":64,"column":4},"end":{"line":64,"column":16}},"44":{"start":{"line":65,"column":4},"end":{"line":70,"column":5}},"45":{"start":{"line":66,"column":8},"end":{"line":66,"column":39}},"46":{"start":{"line":69,"column":8},"end":{"line":69,"column":57}},"47":{"start":{"line":71,"column":4},"end":{"line":79,"column":5}},"48":{"start":{"line":72,"column":8},"end":{"line":72,"column":41}},"49":{"start":{"line":74,"column":9},"end":{"line":79,"column":5}},"50":{"start":{"line":75,"column":8},"end":{"line":75,"column":41}},"51":{"start":{"line":78,"column":8},"end":{"line":78,"column":55}},"52":{"start":{"line":82,"column":0},"end":{"line":89,"column":2}},"53":{"start":{"line":83,"column":4},"end":{"line":88,"column":5}},"54":{"start":{"line":84,"column":8},"end":{"line":84,"column":69}},"55":{"start":{"line":87,"column":8},"end":{"line":87,"column":40}},"56":{"start":{"line":91,"column":0},"end":{"line":91,"column":21}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"2":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":23}},{"start":{"line":26,"column":27},"end":{"line":26,"column":40}},{"start":{"line":26,"column":44},"end":{"line":26,"column":59}}]},"3":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"4":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"5":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"6":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"7":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":4},"end":{"line":65,"column":4}},{"start":{"line":65,"column":4},"end":{"line":65,"column":4}}]},"8":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"9":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":17}},{"start":{"line":71,"column":21},"end":{"line":71,"column":34}}]},"10":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":9},"end":{"line":74,"column":9}},{"start":{"line":74,"column":9},"end":{"line":74,"column":9}}]},"11":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":13},"end":{"line":74,"column":21}},{"start":{"line":74,"column":25},"end":{"line":74,"column":38}}]},"12":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":83,"column":4}},{"start":{"line":83,"column":4},"end":{"line":83,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let WithBody = require(\"./withBody\");","","function For() {","    WithBody.call(this);","","    this.from = null;","    this.to = null;","    this.step = 1;","    this.varName = \"i\";","","    this.nonScopedProperties.add(\"_doStep\");","}","","util.inherits(For, WithBody);","","For.prototype.run = function (callContext, args) {","    const varName = this.varName;","    let from = this.from;","    let to = this.to;","    let step = this.step;","    if (!_.isNull(from) && !_.isNull(to) && !_.isNull(step)) {","        this[varName] = null;","        callContext.schedule([from, to, step], \"_valuesGot\");","    }","    else {","        callContext.complete();","    }","};","","For.prototype._valuesGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        this._from = result[0];","        this._to = result[1];","        this._step = result[2];","        callContext.activity._doStep.call(this, callContext);","    }","    else {","        callContext.to(reason, result);","    }","};","","For.prototype._doStep = function (callContext, lastResult) {","    const varName = this.varName;","    let from = this._from;","    let to = this._to;","    let step = this._step;","    if (!_.isNumber(from)) {","        callContext.fail(new TypeError(`\"For activity's from value '${from}' is not a number.`));","        return;","    }","    if (!_.isNumber(to)) {","        callContext.fail(new TypeError(`\"For activity's to value '${to}' is not a number.`));","        return;","    }","    if (!_.isNumber(step)) {","        callContext.fail(new TypeError(`\"For activity's from value '${step}' is not a number.`));","        return;","    }","    let current;","    if (_.isNull(this[varName])) {","        current = this[varName] = from;","    }","    else {","        current = this[varName] = (this[varName] + step);","    }","    if (step >= 0 && current >= to) {","        callContext.complete(lastResult);","    }","    else if (step < 0 && current <= to) {","        callContext.complete(lastResult);","    }","    else {","        WithBody.prototype.run.call(this, callContext);","    }","};","","For.prototype.bodyCompleted = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        callContext.activity._doStep.call(this, callContext, result);","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = For;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"12":0,"13":0,"14":0,"16":0,"19":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"31":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"43":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"56":0,"57":0,"58":0,"60":0,"61":0,"62":0,"64":0,"65":0,"66":0,"69":0,"71":0,"72":0,"74":0,"75":0,"78":0,"82":1,"83":0,"84":0,"87":0,"91":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/forEach.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/forEach.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":0,"80":0,"81":0,"82":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"ForEach","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":19}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":40},"end":{"line":22,"column":51}}},"3":{"name":"(anonymous_3)","line":49,"loc":{"start":{"line":49,"column":24},"end":{"line":49,"column":53}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":30},"end":{"line":61,"column":69}}},"5":{"name":"(anonymous_5)","line":76,"loc":{"start":{"line":76,"column":28},"end":{"line":76,"column":63}}},"6":{"name":"(anonymous_6)","line":126,"loc":{"start":{"line":126,"column":34},"end":{"line":126,"column":73}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":31}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":37}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"8":{"start":{"line":11,"column":0},"end":{"line":18,"column":1}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":24}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":22}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":26}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":26}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":24}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":33}},"15":{"start":{"line":22,"column":0},"end":{"line":47,"column":2}},"16":{"start":{"line":23,"column":4},"end":{"line":46,"column":5}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":50}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"19":{"start":{"line":26,"column":8},"end":{"line":41,"column":9}},"20":{"start":{"line":27,"column":12},"end":{"line":40,"column":13}},"21":{"start":{"line":28,"column":16},"end":{"line":28,"column":33}},"22":{"start":{"line":29,"column":16},"end":{"line":36,"column":17}},"23":{"start":{"line":30,"column":20},"end":{"line":35,"column":21}},"24":{"start":{"line":31,"column":24},"end":{"line":31,"column":50}},"25":{"start":{"line":34,"column":24},"end":{"line":34,"column":42}},"26":{"start":{"line":37,"column":16},"end":{"line":37,"column":42}},"27":{"start":{"line":38,"column":16},"end":{"line":38,"column":39}},"28":{"start":{"line":39,"column":16},"end":{"line":39,"column":43}},"29":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"30":{"start":{"line":45,"column":8},"end":{"line":45,"column":58}},"31":{"start":{"line":49,"column":0},"end":{"line":59,"column":2}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":33}},"33":{"start":{"line":51,"column":4},"end":{"line":51,"column":27}},"34":{"start":{"line":52,"column":4},"end":{"line":58,"column":5}},"35":{"start":{"line":53,"column":8},"end":{"line":53,"column":29}},"36":{"start":{"line":54,"column":8},"end":{"line":54,"column":49}},"37":{"start":{"line":57,"column":8},"end":{"line":57,"column":31}},"38":{"start":{"line":61,"column":0},"end":{"line":74,"column":2}},"39":{"start":{"line":62,"column":4},"end":{"line":73,"column":5}},"40":{"start":{"line":63,"column":8},"end":{"line":68,"column":9}},"41":{"start":{"line":64,"column":12},"end":{"line":64,"column":36}},"42":{"start":{"line":67,"column":12},"end":{"line":67,"column":73}},"43":{"start":{"line":69,"column":8},"end":{"line":69,"column":61}},"44":{"start":{"line":72,"column":8},"end":{"line":72,"column":40}},"45":{"start":{"line":76,"column":0},"end":{"line":124,"column":2}},"46":{"start":{"line":77,"column":4},"end":{"line":77,"column":33}},"47":{"start":{"line":78,"column":4},"end":{"line":78,"column":46}},"48":{"start":{"line":79,"column":4},"end":{"line":79,"column":34}},"49":{"start":{"line":80,"column":4},"end":{"line":105,"column":5}},"50":{"start":{"line":81,"column":8},"end":{"line":103,"column":9}},"51":{"start":{"line":82,"column":12},"end":{"line":82,"column":38}},"52":{"start":{"line":83,"column":12},"end":{"line":83,"column":26}},"53":{"start":{"line":84,"column":12},"end":{"line":84,"column":24}},"54":{"start":{"line":85,"column":12},"end":{"line":94,"column":13}},"55":{"start":{"line":86,"column":16},"end":{"line":86,"column":45}},"56":{"start":{"line":87,"column":16},"end":{"line":87,"column":44}},"57":{"start":{"line":88,"column":16},"end":{"line":88,"column":35}},"58":{"start":{"line":89,"column":16},"end":{"line":89,"column":42}},"59":{"start":{"line":90,"column":16},"end":{"line":93,"column":19}},"60":{"start":{"line":95,"column":12},"end":{"line":95,"column":56}},"61":{"start":{"line":98,"column":12},"end":{"line":98,"column":41}},"62":{"start":{"line":99,"column":12},"end":{"line":99,"column":40}},"63":{"start":{"line":100,"column":12},"end":{"line":100,"column":31}},"64":{"start":{"line":101,"column":12},"end":{"line":101,"column":38}},"65":{"start":{"line":102,"column":12},"end":{"line":102,"column":98}},"66":{"start":{"line":104,"column":8},"end":{"line":104,"column":15}},"67":{"start":{"line":107,"column":4},"end":{"line":121,"column":5}},"68":{"start":{"line":108,"column":8},"end":{"line":120,"column":9}},"69":{"start":{"line":109,"column":12},"end":{"line":109,"column":115}},"70":{"start":{"line":110,"column":12},"end":{"line":110,"column":19}},"71":{"start":{"line":113,"column":12},"end":{"line":113,"column":39}},"72":{"start":{"line":114,"column":12},"end":{"line":119,"column":13}},"73":{"start":{"line":115,"column":16},"end":{"line":115,"column":35}},"74":{"start":{"line":116,"column":16},"end":{"line":116,"column":48}},"75":{"start":{"line":117,"column":16},"end":{"line":117,"column":102}},"76":{"start":{"line":118,"column":16},"end":{"line":118,"column":23}},"77":{"start":{"line":123,"column":4},"end":{"line":123,"column":37}},"78":{"start":{"line":126,"column":0},"end":{"line":133,"column":2}},"79":{"start":{"line":127,"column":4},"end":{"line":132,"column":5}},"80":{"start":{"line":128,"column":8},"end":{"line":128,"column":69}},"81":{"start":{"line":131,"column":8},"end":{"line":131,"column":40}},"82":{"start":{"line":135,"column":0},"end":{"line":135,"column":25}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"3":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":21}},{"start":{"line":26,"column":25},"end":{"line":26,"column":41}}]},"4":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":41},"end":{"line":27,"column":71}},{"start":{"line":27,"column":75},"end":{"line":27,"column":81}}]},"5":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":20}},{"start":{"line":30,"column":20},"end":{"line":30,"column":20}}]},"6":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"7":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"8":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":43}},{"start":{"line":62,"column":47},"end":{"line":62,"column":69}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"10":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":12},"end":{"line":63,"column":18}},{"start":{"line":63,"column":22},"end":{"line":63,"column":47}}]},"11":{"line":67,"type":"cond-expr","locations":[{"start":{"line":67,"column":55},"end":{"line":67,"column":61}},{"start":{"line":67,"column":64},"end":{"line":67,"column":72}}]},"12":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":4}},{"start":{"line":80,"column":4},"end":{"line":80,"column":4}}]},"13":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":22}},{"start":{"line":80,"column":26},"end":{"line":80,"column":47}}]},"14":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":8}},{"start":{"line":81,"column":8},"end":{"line":81,"column":8}}]},"15":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":19},"end":{"line":85,"column":40}},{"start":{"line":85,"column":44},"end":{"line":85,"column":63}}]},"16":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":4},"end":{"line":107,"column":4}},{"start":{"line":107,"column":4},"end":{"line":107,"column":4}}]},"17":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"18":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":12},"end":{"line":114,"column":12}},{"start":{"line":114,"column":12},"end":{"line":114,"column":12}}]},"19":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":4},"end":{"line":127,"column":4}},{"start":{"line":127,"column":4},"end":{"line":127,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let is = require(\"../common/is\");","let Block = require(\"./block\");","let WithBody = require(\"./withBody\");","let errors = require(\"../common/errors\");","","function ForEach() {","    WithBody.call(this);","","    this.items = null;","    this.varName = \"item\";","    this.parallel = false;","    this._bodies = null;","}","","util.inherits(ForEach, WithBody);","","ForEach.prototype.initializeStructure = function() {","    if (this.parallel) {","        let numCPUs = require(\"os\").cpus().length;","        this._bodies = [];","        if (this.args && this.args.length) {","            for (let i = 0; i < Math.min(process.env.UV_THREADPOOL_SIZE || 100000, numCPUs); i++) {","                let newArgs = [];","                for (let arg of this.args) {","                    if (arg instanceof Activity) {","                        newArgs.push(arg.clone());","                    }","                    else {","                        newArgs.push(arg);","                    }","                }","                let newBody = new Block();","                newBody.args = newArgs;","                this._bodies.push(newBody);","            }","        }","        this.args = null;","    }","    else {","        WithBody.prototype.initializeStructure.call(this);","    }","};","","ForEach.prototype.run = function (callContext, args) {","    const varName = this.varName;","    let items = this.items;","    if (!_.isNull(items)) {","        this[varName] = null;","        callContext.schedule(items, \"_itemsGot\");","    }","    else {","        callContext.complete();","    }","};","","ForEach.prototype._itemsGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete && !_.isUndefined(result)) {","        if (result && _.isFunction(result.next)) {","            this._iterator = result;","        }","        else {","            this._remainingItems = _.isArray(result) ? result : [result];","        }","        callContext.activity._doStep.call(this, callContext);","    }","    else {","        callContext.end(reason, result);","    }","};","","ForEach.prototype._doStep = function (callContext, lastResult) {","    const varName = this.varName;","    let remainingItems = this._remainingItems;","    let iterator = this._iterator;","    if (remainingItems && remainingItems.length) {","        if (this.parallel) {","            let bodies = this._bodies;","            let pack = [];","            let idx = 0;","            while (remainingItems.length && idx < bodies.length) {","                let item = remainingItems[0];","                remainingItems.splice(0, 1);","                let variables = {};","                variables[varName] = item;","                pack.push({","                    variables: variables,","                    activity: bodies[idx++]","                });","            }","            callContext.schedule(pack, \"_bodyFinished\");","        }","        else {","            let item = remainingItems[0];","            remainingItems.splice(0, 1);","            let variables = {};","            variables[varName] = item;","            callContext.schedule({ activity: this._body, variables: variables }, \"_bodyFinished\");","        }","        return;","    }","","    if (iterator) {","        if (this.parallel) {","            callContext.fail(new errors.ActivityRuntimeError(\"Parallel execution not supported with generators.\"));","            return;","        }","        else {","            let next = iterator.next();","            if (!next.done) {","                let variables = {};","                variables[varName] = next.value;","                callContext.schedule({ activity: this._body, variables: variables }, \"_bodyFinished\");","                return;","            }","        }","    }","","    callContext.complete(lastResult);","};","","ForEach.prototype._bodyFinished = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        callContext.activity._doStep.call(this, callContext, result);","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = ForEach;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"14":0,"15":0,"16":0,"17":0,"20":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"34":0,"37":0,"38":0,"39":0,"42":0,"45":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"57":0,"61":1,"62":0,"63":0,"64":0,"67":0,"69":0,"72":0,"76":1,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"95":0,"98":0,"99":0,"100":0,"101":0,"102":0,"104":0,"107":0,"108":0,"109":0,"110":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"123":0,"126":1,"127":0,"128":0,"131":0,"135":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/merge.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/merge.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Merge","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":17}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":22},"end":{"line":16,"column":51}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":27},"end":{"line":20,"column":66}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":25}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":31}},"9":{"start":{"line":16,"column":0},"end":{"line":18,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":43}},"11":{"start":{"line":20,"column":0},"end":{"line":61,"column":2}},"12":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":15}},"16":{"start":{"line":27,"column":4},"end":{"line":27,"column":28}},"17":{"start":{"line":28,"column":4},"end":{"line":28,"column":30}},"18":{"start":{"line":29,"column":4},"end":{"line":59,"column":5}},"19":{"start":{"line":30,"column":8},"end":{"line":30,"column":42}},"20":{"start":{"line":31,"column":8},"end":{"line":31,"column":38}},"21":{"start":{"line":32,"column":8},"end":{"line":58,"column":9}},"22":{"start":{"line":33,"column":12},"end":{"line":53,"column":13}},"23":{"start":{"line":34,"column":16},"end":{"line":34,"column":67}},"24":{"start":{"line":35,"column":16},"end":{"line":35,"column":36}},"25":{"start":{"line":36,"column":16},"end":{"line":36,"column":40}},"26":{"start":{"line":38,"column":17},"end":{"line":53,"column":13}},"27":{"start":{"line":39,"column":16},"end":{"line":42,"column":17}},"28":{"start":{"line":40,"column":20},"end":{"line":40,"column":87}},"29":{"start":{"line":41,"column":20},"end":{"line":41,"column":27}},"30":{"start":{"line":43,"column":16},"end":{"line":43,"column":39}},"31":{"start":{"line":46,"column":16},"end":{"line":49,"column":17}},"32":{"start":{"line":47,"column":20},"end":{"line":47,"column":87}},"33":{"start":{"line":48,"column":20},"end":{"line":48,"column":27}},"34":{"start":{"line":50,"column":16},"end":{"line":52,"column":17}},"35":{"start":{"line":51,"column":20},"end":{"line":51,"column":37}},"36":{"start":{"line":56,"column":12},"end":{"line":56,"column":84}},"37":{"start":{"line":57,"column":12},"end":{"line":57,"column":19}},"38":{"start":{"line":60,"column":4},"end":{"line":60,"column":33}},"39":{"start":{"line":63,"column":0},"end":{"line":63,"column":23}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"3":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":17}},{"start":{"line":32,"column":21},"end":{"line":32,"column":28}}]},"4":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":33,"column":12}},{"start":{"line":33,"column":12},"end":{"line":33,"column":12}}]},"5":{"line":34,"type":"cond-expr","locations":[{"start":{"line":34,"column":33},"end":{"line":34,"column":50}},{"start":{"line":34,"column":53},"end":{"line":34,"column":66}}]},"6":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":17},"end":{"line":38,"column":17}},{"start":{"line":38,"column":17},"end":{"line":38,"column":17}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":16},"end":{"line":39,"column":16}},{"start":{"line":39,"column":16},"end":{"line":39,"column":16}}]},"8":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":16},"end":{"line":46,"column":16}},{"start":{"line":46,"column":16},"end":{"line":46,"column":16}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Merge() {","    Activity.call(this);","","    this.isTrue = true;","    this.isFalse = false;","}","","util.inherits(Merge, Activity);","","Merge.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Merge.prototype._argsGot = function (callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let merged;","    let mergedIsObj = false;","    let mergedIsArray = false;","    for (let item of result) {","        let isObj = _.isPlainObject(item);","        let isArray = _.isArray(item);","        if (isObj || isArray) {","            if (!merged) {","                merged = isObj ? _.cloneDeep(item) : item.slice(0);","                mergedIsObj = isObj;","                mergedIsArray = isArray;","            }","            else if (isObj) {","                if (!mergedIsObj) {","                    callContext.fail(new Error(\"Object cannot merged with an array.\"));","                    return;","                }","                _.extend(merged, item);","            }","            else {","                if (!mergedIsArray) {","                    callContext.fail(new Error(\"Array cannot merged with an object.\"));","                    return;","                }","                for (let sub of item) {","                    merged.push(sub);","                }","            }","        }","        else {","            callContext.fail(new Error(\"Only objects and arrays could be merged.\"));","            return;","        }","    }","    callContext.complete(merged);","};","","module.exports = Merge;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"11":0,"14":1,"16":1,"17":0,"20":1,"21":0,"22":0,"23":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"38":0,"39":0,"40":0,"41":0,"43":0,"46":0,"47":0,"48":0,"50":0,"51":0,"56":0,"57":0,"60":0,"63":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/switch.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/switch.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"Switch","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":18}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":23},"end":{"line":20,"column":52}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":34},"end":{"line":59,"column":73}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":25},"end":{"line":69,"column":48}}},"5":{"name":"(anonymous_5)","line":90,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":73}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":29}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":47}},"9":{"start":{"line":12,"column":0},"end":{"line":16,"column":1}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":24}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":27}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":32}},"13":{"start":{"line":20,"column":0},"end":{"line":57,"column":2}},"14":{"start":{"line":21,"column":4},"end":{"line":55,"column":5}},"15":{"start":{"line":22,"column":8},"end":{"line":26,"column":10}},"16":{"start":{"line":27,"column":8},"end":{"line":42,"column":9}},"17":{"start":{"line":28,"column":12},"end":{"line":41,"column":13}},"18":{"start":{"line":29,"column":16},"end":{"line":29,"column":38}},"19":{"start":{"line":31,"column":17},"end":{"line":41,"column":13}},"20":{"start":{"line":32,"column":16},"end":{"line":32,"column":38}},"21":{"start":{"line":34,"column":17},"end":{"line":41,"column":13}},"22":{"start":{"line":35,"column":16},"end":{"line":40,"column":17}},"23":{"start":{"line":36,"column":20},"end":{"line":36,"column":40}},"24":{"start":{"line":39,"column":20},"end":{"line":39,"column":107}},"25":{"start":{"line":43,"column":8},"end":{"line":54,"column":9}},"26":{"start":{"line":44,"column":12},"end":{"line":44,"column":32}},"27":{"start":{"line":45,"column":12},"end":{"line":52,"column":13}},"28":{"start":{"line":46,"column":16},"end":{"line":46,"column":36}},"29":{"start":{"line":47,"column":16},"end":{"line":47,"column":72}},"30":{"start":{"line":50,"column":16},"end":{"line":50,"column":37}},"31":{"start":{"line":51,"column":16},"end":{"line":51,"column":67}},"32":{"start":{"line":53,"column":12},"end":{"line":53,"column":19}},"33":{"start":{"line":56,"column":4},"end":{"line":56,"column":27}},"34":{"start":{"line":59,"column":0},"end":{"line":67,"column":2}},"35":{"start":{"line":60,"column":4},"end":{"line":66,"column":5}},"36":{"start":{"line":61,"column":8},"end":{"line":61,"column":33}},"37":{"start":{"line":62,"column":8},"end":{"line":62,"column":59}},"38":{"start":{"line":65,"column":8},"end":{"line":65,"column":40}},"39":{"start":{"line":69,"column":0},"end":{"line":88,"column":2}},"40":{"start":{"line":70,"column":4},"end":{"line":70,"column":28}},"41":{"start":{"line":71,"column":4},"end":{"line":71,"column":30}},"42":{"start":{"line":72,"column":4},"end":{"line":87,"column":5}},"43":{"start":{"line":73,"column":8},"end":{"line":73,"column":34}},"44":{"start":{"line":74,"column":8},"end":{"line":74,"column":33}},"45":{"start":{"line":75,"column":8},"end":{"line":75,"column":53}},"46":{"start":{"line":77,"column":9},"end":{"line":87,"column":5}},"47":{"start":{"line":78,"column":8},"end":{"line":78,"column":34}},"48":{"start":{"line":79,"column":8},"end":{"line":79,"column":33}},"49":{"start":{"line":80,"column":8},"end":{"line":80,"column":53}},"50":{"start":{"line":82,"column":9},"end":{"line":87,"column":5}},"51":{"start":{"line":83,"column":8},"end":{"line":83,"column":62}},"52":{"start":{"line":86,"column":8},"end":{"line":86,"column":31}},"53":{"start":{"line":90,"column":0},"end":{"line":102,"column":2}},"54":{"start":{"line":91,"column":4},"end":{"line":101,"column":5}},"55":{"start":{"line":92,"column":8},"end":{"line":97,"column":9}},"56":{"start":{"line":93,"column":12},"end":{"line":93,"column":63}},"57":{"start":{"line":96,"column":12},"end":{"line":96,"column":41}},"58":{"start":{"line":100,"column":8},"end":{"line":100,"column":40}},"59":{"start":{"line":104,"column":0},"end":{"line":104,"column":24}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":12}},{"start":{"line":21,"column":16},"end":{"line":21,"column":27}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":12}},{"start":{"line":28,"column":12},"end":{"line":28,"column":12}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":17},"end":{"line":31,"column":17}},{"start":{"line":31,"column":17},"end":{"line":31,"column":17}}]},"5":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":17},"end":{"line":34,"column":17}},{"start":{"line":34,"column":17},"end":{"line":34,"column":17}}]},"6":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":16}},{"start":{"line":35,"column":16},"end":{"line":35,"column":16}}]},"7":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":8}},{"start":{"line":43,"column":8},"end":{"line":43,"column":8}}]},"8":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":30}},{"start":{"line":43,"column":34},"end":{"line":43,"column":52}},{"start":{"line":43,"column":56},"end":{"line":43,"column":69}}]},"9":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":12}},{"start":{"line":45,"column":12},"end":{"line":45,"column":12}}]},"10":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"11":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":72,"column":4}},{"start":{"line":72,"column":4},"end":{"line":72,"column":4}}]},"12":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":14}},{"start":{"line":72,"column":18},"end":{"line":72,"column":36}}]},"13":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":9},"end":{"line":77,"column":9}},{"start":{"line":77,"column":9},"end":{"line":77,"column":9}}]},"14":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":13},"end":{"line":77,"column":20}},{"start":{"line":77,"column":24},"end":{"line":77,"column":42}}]},"15":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":9},"end":{"line":82,"column":9}},{"start":{"line":82,"column":9},"end":{"line":82,"column":9}}]},"16":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":4},"end":{"line":91,"column":4}},{"start":{"line":91,"column":4},"end":{"line":91,"column":4}}]},"17":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":92,"column":8}},{"start":{"line":92,"column":8},"end":{"line":92,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let Case = require(\"./case\");","let When = require(\"./when\");","let Default = require(\"./default\");","let errors = require(\"../common/errors\");","let constants = require(\"../common/constants\");","","function Switch() {","    Activity.call(this);","","    this.expression = null;","}","","util.inherits(Switch, Activity);","","Switch.prototype.run = function (callContext, args) {","    if (args && args.length) {","        let parts = {","            cases: [],","            whens: [],","            default: null","        };","        for (let arg of args) {","            if (arg instanceof Case) {","                parts.cases.push(arg);","            }","            else if (arg instanceof When) {","                parts.whens.push(arg);","            }","            else if (arg instanceof Default) {","                if (parts.default === null) {","                    parts.default = arg;","                }","                else {","                    throw new errors.ActivityRuntimeError(\"Multiple default for a switch is not allowed.\");","                }","            }","        }","        if (parts.cases.length || parts.whens.length || parts.default) {","            this._parts = parts;","            if (parts.cases.length) {","                this._doCase = true;","                callContext.schedule(this.expression, \"_expressionGot\");","            }","            else {","                this._doCase = false;","                callContext.activity._step.call(this, callContext);","            }","            return;","        }","    }","    callContext.complete();","};","","Switch.prototype._expressionGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        this.expression = result;","        callContext.activity._step.call(this, callContext);","    }","    else {","        callContext.end(reason, result);","    }","};","","Switch.prototype._step = function (callContext) {","    let parts = this._parts;","    let doCase = this._doCase;","    if (doCase && parts.cases.length) {","        let next = parts.cases[0];","        parts.cases.splice(0, 1);","        callContext.schedule(next, \"_partCompleted\");","    }","    else if (!doCase && parts.whens.length) {","        let next = parts.whens[0];","        parts.whens.splice(0, 1);","        callContext.schedule(next, \"_partCompleted\");","    }","    else if (parts.default) {","        callContext.schedule(parts.default, \"_partCompleted\");","    }","    else {","        callContext.complete();","    }","};","","Switch.prototype._partCompleted = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (result === constants.markers.nope) {","            callContext.activity._step.call(this, callContext);","        }","        else {","            callContext.complete(result);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Switch;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"15":0,"18":1,"20":1,"21":0,"22":0,"27":0,"28":0,"29":0,"31":0,"32":0,"34":0,"35":0,"36":0,"39":0,"43":0,"44":0,"45":0,"46":0,"47":0,"50":0,"51":0,"53":0,"56":0,"59":1,"60":0,"61":0,"62":0,"65":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"78":0,"79":0,"80":0,"82":0,"83":0,"86":0,"90":1,"91":0,"92":0,"93":0,"96":0,"100":0,"104":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/case.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/case.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":1,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Case","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":16}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":21},"end":{"line":17,"column":50}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":27},"end":{"line":21,"column":66}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":37}},"6":{"start":{"line":9,"column":0},"end":{"line":13,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":22}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}},"10":{"start":{"line":17,"column":0},"end":{"line":19,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":50}},"12":{"start":{"line":21,"column":0},"end":{"line":33,"column":2}},"13":{"start":{"line":22,"column":4},"end":{"line":32,"column":5}},"14":{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":59}},"16":{"start":{"line":27,"column":12},"end":{"line":27,"column":57}},"17":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"18":{"start":{"line":35,"column":0},"end":{"line":35,"column":22}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":8}},{"start":{"line":23,"column":8},"end":{"line":23,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let constants = require(\"../common/constants\");","let WithBody = require(\"./withBody\");","","function Case() {","    WithBody.call(this);","","    this.value = null;","}","","util.inherits(Case, WithBody);","","Case.prototype.run = function (callContext, args) {","    callContext.schedule(this.value, \"_valueGot\");","};","","Case.prototype._valueGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (this.expression === result) {","            WithBody.prototype.run.call(this, callContext);","        }","        else {","            callContext.complete(constants.markers.nope);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Case;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"12":0,"15":1,"17":1,"18":0,"21":1,"22":0,"23":0,"24":0,"27":0,"31":0,"35":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/when.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/when.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":1,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"When","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":16}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":21},"end":{"line":17,"column":50}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":31},"end":{"line":21,"column":70}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":37}},"6":{"start":{"line":9,"column":0},"end":{"line":13,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":26}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}},"10":{"start":{"line":17,"column":0},"end":{"line":19,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":58}},"12":{"start":{"line":21,"column":0},"end":{"line":33,"column":2}},"13":{"start":{"line":22,"column":4},"end":{"line":32,"column":5}},"14":{"start":{"line":23,"column":8},"end":{"line":28,"column":9}},"15":{"start":{"line":24,"column":12},"end":{"line":24,"column":59}},"16":{"start":{"line":27,"column":12},"end":{"line":27,"column":57}},"17":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"18":{"start":{"line":35,"column":0},"end":{"line":35,"column":22}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":8}},{"start":{"line":23,"column":8},"end":{"line":23,"column":8}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let constants = require(\"../common/constants\");","let WithBody = require(\"./withBody\");","","function When() {","    WithBody.call(this);","","    this.condition = null;","}","","util.inherits(When, WithBody);","","When.prototype.run = function (callContext, args) {","    callContext.schedule(this.condition, \"_conditionGot\");","};","","When.prototype._conditionGot = function (callContext, reason, result) {","    if (reason === Activity.states.complete) {","        if (result) {","            WithBody.prototype.run.call(this, callContext);","        }","        else {","            callContext.complete(constants.markers.nope);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = When;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"12":0,"15":1,"17":1,"18":0,"21":1,"22":0,"23":0,"24":0,"27":0,"31":0,"35":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/default.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/default.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":1},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"Default","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":19}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"5":{"start":{"line":8,"column":0},"end":{"line":10,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}}},"branchMap":{},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","let WithBody = require(\"./withBody\");","","function Default() {","    WithBody.call(this);","}","","util.inherits(Default, WithBody);","","module.exports = Default;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"12":1,"14":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/console.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/console.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":1,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Console","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":19}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":24},"end":{"line":15,"column":53}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":29},"end":{"line":19,"column":67}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":11,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":33}},"8":{"start":{"line":15,"column":0},"end":{"line":17,"column":2}},"9":{"start":{"line":16,"column":4},"end":{"line":16,"column":43}},"10":{"start":{"line":19,"column":0},"end":{"line":39,"column":2}},"11":{"start":{"line":20,"column":4},"end":{"line":38,"column":5}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":28}},"13":{"start":{"line":22,"column":8},"end":{"line":32,"column":9}},"14":{"start":{"line":24,"column":16},"end":{"line":24,"column":34}},"15":{"start":{"line":25,"column":16},"end":{"line":25,"column":22}},"16":{"start":{"line":27,"column":16},"end":{"line":27,"column":33}},"17":{"start":{"line":28,"column":16},"end":{"line":28,"column":22}},"18":{"start":{"line":30,"column":16},"end":{"line":30,"column":33}},"19":{"start":{"line":31,"column":16},"end":{"line":31,"column":22}},"20":{"start":{"line":33,"column":8},"end":{"line":33,"column":33}},"21":{"start":{"line":34,"column":8},"end":{"line":34,"column":31}},"22":{"start":{"line":37,"column":8},"end":{"line":37,"column":40}},"23":{"start":{"line":41,"column":0},"end":{"line":41,"column":25}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"2":{"line":22,"type":"switch","locations":[{"start":{"line":23,"column":12},"end":{"line":25,"column":22}},{"start":{"line":26,"column":12},"end":{"line":28,"column":22}},{"start":{"line":29,"column":12},"end":{"line":31,"column":22}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Console() {","    Activity.call(this);","","    this.level = \"log\";","}","","util.inherits(Console, Activity);","","Console.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Console.prototype._argsGot = function(callContext, reason, result) {","    if (reason === Activity.states.complete) {","        let f = console.log;","        switch (this.level) {","            case \"error\":","                f = console.error;","                break;","            case \"warn\":","                f = console.warn;","                break;","            case \"info\":","                f = console.info;","                break;","        }","        f.apply(console, result);","        callContext.complete();","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Console;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"13":1,"15":1,"16":0,"19":1,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"37":0,"41":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/obj.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/obj.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Obj","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":15}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":20},"end":{"line":13,"column":49}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":25},"end":{"line":17,"column":64}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}},"7":{"start":{"line":13,"column":0},"end":{"line":15,"column":2}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":43}},"9":{"start":{"line":17,"column":0},"end":{"line":29,"column":2}},"10":{"start":{"line":18,"column":4},"end":{"line":21,"column":5}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":40}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":15}},"13":{"start":{"line":23,"column":4},"end":{"line":23,"column":12}},"14":{"start":{"line":24,"column":4},"end":{"line":27,"column":5}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":17}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":35}},"17":{"start":{"line":28,"column":4},"end":{"line":28,"column":30}},"18":{"start":{"line":31,"column":0},"end":{"line":31,"column":21}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"2":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Obj() {","    Activity.call(this);","}","","util.inherits(Obj, Activity);","","Obj.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Obj.prototype._argsGot = function (callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let obj;","    if (result.length > 1) {","        obj = {};","        obj[result[0]] = result[1];","    }","    callContext.complete(obj);","};","","module.exports = Obj;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"11":1,"13":1,"14":0,"17":1,"18":0,"19":0,"20":0,"23":0,"24":0,"25":0,"26":0,"28":0,"31":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/delayTo.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/delayTo.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"DelayTo","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":19}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":41},"end":{"line":21,"column":64}}},"3":{"name":"(anonymous_3)","line":76,"loc":{"start":{"line":76,"column":26},"end":{"line":76,"column":37}}},"4":{"name":"(anonymous_4)","line":93,"loc":{"start":{"line":93,"column":24},"end":{"line":93,"column":52}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":39}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":31}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":35}},"9":{"start":{"line":12,"column":0},"end":{"line":17,"column":1}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":25}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":19}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":25}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":34}},"14":{"start":{"line":21,"column":0},"end":{"line":91,"column":2}},"15":{"start":{"line":22,"column":4},"end":{"line":22,"column":26}},"16":{"start":{"line":23,"column":4},"end":{"line":23,"column":82}},"17":{"start":{"line":24,"column":4},"end":{"line":90,"column":6}},"18":{"start":{"line":77,"column":24},"end":{"line":85,"column":25}},"19":{"start":{"line":78,"column":28},"end":{"line":78,"column":63}},"20":{"start":{"line":79,"column":28},"end":{"line":81,"column":29}},"21":{"start":{"line":80,"column":32},"end":{"line":80,"column":39}},"22":{"start":{"line":82,"column":28},"end":{"line":84,"column":29}},"23":{"start":{"line":83,"column":32},"end":{"line":83,"column":58}},"24":{"start":{"line":93,"column":0},"end":{"line":96,"column":2}},"25":{"start":{"line":94,"column":4},"end":{"line":94,"column":66}},"26":{"start":{"line":95,"column":4},"end":{"line":95,"column":58}},"27":{"start":{"line":98,"column":0},"end":{"line":98,"column":25}}},"branchMap":{"1":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":24},"end":{"line":77,"column":24}},{"start":{"line":77,"column":24},"end":{"line":77,"column":24}}]},"2":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":28},"end":{"line":77,"column":40}},{"start":{"line":77,"column":44},"end":{"line":77,"column":66}}]},"3":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":28},"end":{"line":79,"column":28}},{"start":{"line":79,"column":28},"end":{"line":79,"column":28}}]},"4":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":28},"end":{"line":82,"column":28}},{"start":{"line":82,"column":28},"end":{"line":82,"column":28}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let Composite = require(\"./composite\");","let util = require(\"util\");","let _ = require(\"lodash\");","let specStrings = require(\"../common/specStrings\");","let errors = require(\"../common/errors\");","let assert = require(\"assert\");","let Bluebird = require(\"bluebird\");","","function DelayTo() {","    Composite.call(this);","","    this.to = null;","    this._inHost = false;","}","","util.inherits(DelayTo, Composite);","","DelayTo.prototype.createImplementation = function (execContext) {","    assert(!!execContext);","    let methodName = specStrings.hosting.createDelayToMethodName(this.instanceId);","    return {","        \"@block\": {","            inHost: \"= this.$parent._inHost\",","            delayTo: \"= this.$parent.to\",","            args: {","                \"@if\": {","                    condition: \"= this.inHost\",","                    then: {","                        \"@block\": {","                            v: null,","                            done: false,","                            args: [","                                {","                                    \"@if\": {","                                        condition: \"= _.isDate(this.delayTo)\",","                                        then: [","                                            {","                                                \"@while\": {","                                                    condition: \"= !this.done\",","                                                    args: [","                                                        {","                                                            \"@beginMethod\": {","                                                                methodName: methodName,","                                                                instanceIdPath: \"[0]\",","                                                                \"@to\": \"v\"","                                                            }","                                                        },","                                                        {","                                                            \"@if\": {","                                                                condition: \"= this.v[1].getTime() === this.delayTo.getTime()\",","                                                                then: {","                                                                    \"@assign\": {","                                                                        to: \"done\",","                                                                        value: true","                                                                    }","                                                                }","                                                            }","                                                        },","                                                        {","                                                            \"@endMethod\": {","                                                                methodName: methodName","                                                            }","                                                        }","                                                    ]","                                                }","                                            }","                                        ]","                                    }","                                }","                            ]","                        }","                    },","                    else: function() {","                        if (this.delayTo && _.isDate(this.delayTo)) {","                            let ms = this.delayTo - new Date();","                            if (ms < 0) {","                                ms = 0;","                            }","                            if (ms) {","                                return Bluebird.delay(ms);","                            }","                        }","                    }","                }","            }","        }","    };","};","","DelayTo.prototype.run = function(callContext, args) {","    this._inHost = !!callContext.executionContext.engine.instance;","    Composite.prototype.run.call(this, callContext, args);","};","","module.exports = DelayTo;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"15":0,"16":0,"19":1,"21":1,"22":0,"23":0,"24":0,"77":0,"78":0,"79":0,"80":0,"82":0,"83":0,"93":1,"94":0,"95":0,"98":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/delay.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/delay.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":1,"10":1,"11":0,"12":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"Delay","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":17}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":39},"end":{"line":16,"column":62}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":22}},"6":{"start":{"line":8,"column":0},"end":{"line":12,"column":1}},"7":{"start":{"line":9,"column":4},"end":{"line":9,"column":25}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":19}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}},"10":{"start":{"line":16,"column":0},"end":{"line":22,"column":2}},"11":{"start":{"line":17,"column":4},"end":{"line":21,"column":6}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":23}}},"branchMap":{},"code":["\"use strict\";","let Activity = require(\"./activity\");","let Composite = require(\"./composite\");","let util = require(\"util\");","let _ = require(\"lodash\");","require(\"date-utils\");","","function Delay() {","    Composite.call(this);","","    this.ms = null;","}","","util.inherits(Delay, Composite);","","Delay.prototype.createImplementation = function (execContext) {","    return {","        \"@delayTo\": {","            to: \"= new Date().addMilliseconds(this.$parent.ms || 0)\"","        }","    };","};","","module.exports = Delay;"],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"14":1,"16":1,"17":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/repeat.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/repeat.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1},"b":{"1":[0,0,0,0,0],"2":[0,0],"3":[0,0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"Repeat","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":18}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":40},"end":{"line":30,"column":63}}},"3":{"name":"(anonymous_3)","line":50,"loc":{"start":{"line":50,"column":28},"end":{"line":50,"column":40}}},"4":{"name":"(anonymous_4)","line":58,"loc":{"start":{"line":58,"column":28},"end":{"line":58,"column":40}}},"5":{"name":"(anonymous_5)","line":67,"loc":{"start":{"line":67,"column":43},"end":{"line":67,"column":55}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":37}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":22}},"6":{"start":{"line":7,"column":0},"end":{"line":7,"column":35}},"7":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"9":{"start":{"line":11,"column":0},"end":{"line":18,"column":1}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":25}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":24}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":29}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":30}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":31}},"15":{"start":{"line":20,"column":0},"end":{"line":26,"column":2}},"16":{"start":{"line":28,"column":0},"end":{"line":28,"column":33}},"17":{"start":{"line":30,"column":0},"end":{"line":137,"column":2}},"18":{"start":{"line":31,"column":4},"end":{"line":31,"column":25}},"19":{"start":{"line":32,"column":4},"end":{"line":32,"column":21}},"20":{"start":{"line":33,"column":4},"end":{"line":136,"column":6}},"21":{"start":{"line":51,"column":32},"end":{"line":51,"column":68}},"22":{"start":{"line":59,"column":32},"end":{"line":59,"column":88}},"23":{"start":{"line":68,"column":40},"end":{"line":68,"column":56}},"24":{"start":{"line":69,"column":40},"end":{"line":69,"column":61}},"25":{"start":{"line":70,"column":40},"end":{"line":70,"column":61}},"26":{"start":{"line":71,"column":40},"end":{"line":71,"column":175}},"27":{"start":{"line":72,"column":40},"end":{"line":72,"column":71}},"28":{"start":{"line":73,"column":40},"end":{"line":89,"column":41}},"29":{"start":{"line":75,"column":48},"end":{"line":75,"column":96}},"30":{"start":{"line":76,"column":48},"end":{"line":76,"column":54}},"31":{"start":{"line":78,"column":48},"end":{"line":78,"column":84}},"32":{"start":{"line":79,"column":48},"end":{"line":79,"column":54}},"33":{"start":{"line":81,"column":48},"end":{"line":81,"column":82}},"34":{"start":{"line":82,"column":48},"end":{"line":82,"column":54}},"35":{"start":{"line":84,"column":48},"end":{"line":84,"column":82}},"36":{"start":{"line":85,"column":48},"end":{"line":85,"column":54}},"37":{"start":{"line":87,"column":48},"end":{"line":87,"column":81}},"38":{"start":{"line":88,"column":48},"end":{"line":88,"column":54}},"39":{"start":{"line":90,"column":40},"end":{"line":90,"column":81}},"40":{"start":{"line":91,"column":40},"end":{"line":127,"column":41}},"41":{"start":{"line":92,"column":44},"end":{"line":92,"column":87}},"42":{"start":{"line":94,"column":44},"end":{"line":94,"column":56}},"43":{"start":{"line":97,"column":44},"end":{"line":97,"column":118}},"44":{"start":{"line":98,"column":44},"end":{"line":98,"column":77}},"45":{"start":{"line":99,"column":44},"end":{"line":99,"column":89}},"46":{"start":{"line":100,"column":44},"end":{"line":100,"column":57}},"47":{"start":{"line":101,"column":44},"end":{"line":117,"column":45}},"48":{"start":{"line":103,"column":52},"end":{"line":103,"column":104}},"49":{"start":{"line":104,"column":52},"end":{"line":104,"column":58}},"50":{"start":{"line":106,"column":52},"end":{"line":106,"column":104}},"51":{"start":{"line":107,"column":52},"end":{"line":107,"column":58}},"52":{"start":{"line":109,"column":52},"end":{"line":109,"column":102}},"53":{"start":{"line":110,"column":52},"end":{"line":110,"column":58}},"54":{"start":{"line":112,"column":52},"end":{"line":112,"column":105}},"55":{"start":{"line":113,"column":52},"end":{"line":113,"column":58}},"56":{"start":{"line":115,"column":52},"end":{"line":115,"column":101}},"57":{"start":{"line":116,"column":52},"end":{"line":116,"column":58}},"58":{"start":{"line":118,"column":44},"end":{"line":118,"column":79}},"59":{"start":{"line":119,"column":44},"end":{"line":119,"column":87}},"60":{"start":{"line":120,"column":44},"end":{"line":120,"column":70}},"61":{"start":{"line":121,"column":44},"end":{"line":121,"column":75}},"62":{"start":{"line":122,"column":44},"end":{"line":122,"column":71}},"63":{"start":{"line":123,"column":44},"end":{"line":123,"column":81}},"64":{"start":{"line":124,"column":44},"end":{"line":124,"column":85}},"65":{"start":{"line":125,"column":44},"end":{"line":125,"column":85}},"66":{"start":{"line":126,"column":44},"end":{"line":126,"column":58}},"67":{"start":{"line":139,"column":0},"end":{"line":139,"column":24}}},"branchMap":{"1":{"line":73,"type":"switch","locations":[{"start":{"line":74,"column":44},"end":{"line":76,"column":54}},{"start":{"line":77,"column":44},"end":{"line":79,"column":54}},{"start":{"line":80,"column":44},"end":{"line":82,"column":54}},{"start":{"line":83,"column":44},"end":{"line":85,"column":54}},{"start":{"line":86,"column":44},"end":{"line":88,"column":54}}]},"2":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":40},"end":{"line":91,"column":40}},{"start":{"line":91,"column":40},"end":{"line":91,"column":40}}]},"3":{"line":101,"type":"switch","locations":[{"start":{"line":102,"column":48},"end":{"line":104,"column":58}},{"start":{"line":105,"column":48},"end":{"line":107,"column":58}},{"start":{"line":108,"column":48},"end":{"line":110,"column":58}},{"start":{"line":111,"column":48},"end":{"line":113,"column":58}},{"start":{"line":114,"column":48},"end":{"line":116,"column":58}}]}},"code":["\"use strict\";","let Activity = require(\"./activity\");","let Composite = require(\"./composite\");","let util = require(\"util\");","let _ = require(\"lodash\");","require(\"date-utils\");","let timespan = require(\"timespan\");","let TimeSpan = timespan.TimeSpan;","let debug = require(\"debug\")(\"wf4node:Repeat\");","","function Repeat() {","    Composite.call(this);","","    this.startOn = null;","    this.intervalType = null;","    this.intervalValue = null;","    this.nextPropName = \"next\";","}","","Repeat.intervalTypes = {","    secondly: \"secondly\",","    minutely: \"minutely\",","    hourly: \"hourly\",","    daily: \"daily\",","    weekly: \"weekly\"","};","","util.inherits(Repeat, Composite);","","Repeat.prototype.createImplementation = function (execContext) {","    let args = this.args;","    this.args = null;","    return {","        \"@block\": {","            startOn: \"= this.$parent.startOn || (new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate()))\",","            intervalType: `= this.$parent.intervalType || '${Repeat.intervalTypes.daily}'`,","            intervalValue: \"= this.$parent.intervalValue || 1\",","            next: null,","            args: [","                {","                    \"@assign\": {","                        to: \"next\",","                        value: \"= this.startOn\"","                    }","                },","                {","                    \"@while\": {","                        condition: true,","                        args: [","                            function () {","                                debug(\"Delaying to: %s\", this.next);","                            },","                            {","                                \"@delayTo\": {","                                    to: \"= this.next\"","                                }","                            },","                            function () {","                                debug(\"Delayed to: %s. Running arguments.\", new Date());","                            },","                            {","                                \"@block\": args","                            },","                            {","                                \"@assign\": {","                                    to: \"next\",","                                    value: function () {","                                        let self = this;","                                        let now = new Date();","                                        let next = this.next;","                                        debug(\"Calculating next's value from: %s. intervalType: %s, intervalValue: %d\", next.getTime(), self.intervalType, self.intervalValue);","                                        let value = self.intervalValue;","                                        switch (self.intervalType) {","                                            case \"secondly\":","                                                next = next.add({ milliseconds: value * 1000 });","                                                break;","                                            case \"minutely\":","                                                next = next.add({ minutes: value });","                                                break;","                                            case \"hourly\":","                                                next = next.add({ hours: value });","                                                break;","                                            case \"weekly\":","                                                next = next.add({ weeks: value });","                                                break;","                                            default:","                                                next = next.add({ days: value });","                                                break;","                                        }","                                        debug(\"New next is: %s\", next.getTime());","                                        if (next.getTime() > now.getTime()) {","                                            debug(\"That's a future value, returning.\");","                                            // If this is in the future, then we're done:","                                            return next;","                                        }","                                        else {","                                            debug(\"That's a past value, calculating future value by adding periods.\");","                                            let dSec = (now - next) / 1000.0;","                                            debug(\"Total distance in seconds: %d\", dSec);","                                            let interval;","                                            switch (self.intervalType) {","                                                case \"secondly\":","                                                    interval = timespan.fromSeconds(self.intervalValue);","                                                    break;","                                                case \"minutely\":","                                                    interval = timespan.fromMinutes(self.intervalValue);","                                                    break;","                                                case \"hourly\":","                                                    interval = timespan.fromHours(self.intervalValue);","                                                    break;","                                                case \"weekly\":","                                                    interval = timespan.fromDays(self.intervalValue * 7);","                                                    break;","                                                default:","                                                    interval = timespan.fromDays(self.intervalValue);","                                                    break;","                                            }","                                            interval = interval.totalSeconds();","                                            debug(\"Interval in seconds: %d\", interval);","                                            let mod = dSec % interval;","                                            debug(\"Remainder is: %d\", mod);","                                            let toAdd = interval - mod;","                                            debug(\"To add to now is: %d\", toAdd);","                                            let result = now.add({ seconds: toAdd });","                                            debug(\"Result is: %s\", result.getTime());","                                            return result;","                                        }","                                    }","                                }","                            }","                        ]","                    }","                }","            ]","        }","    };","};","","module.exports = Repeat;"],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"14":0,"15":0,"16":0,"17":0,"20":1,"28":1,"30":1,"31":0,"32":0,"33":0,"51":0,"59":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"75":0,"76":0,"78":0,"79":0,"81":0,"82":0,"84":0,"85":0,"87":0,"88":0,"90":0,"91":0,"92":0,"94":0,"97":0,"98":0,"99":0,"100":0,"101":0,"103":0,"104":0,"106":0,"107":0,"109":0,"110":0,"112":0,"113":0,"115":0,"116":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"139":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/try.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/try.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"Try","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":15}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":36},"end":{"line":24,"column":47}}},"3":{"name":"(anonymous_3)","line":40,"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":49}}},"4":{"name":"(anonymous_4)","line":44,"loc":{"start":{"line":44,"column":30},"end":{"line":44,"column":68}}},"5":{"name":"(anonymous_5)","line":62,"loc":{"start":{"line":62,"column":27},"end":{"line":62,"column":65}}},"6":{"name":"(anonymous_6)","line":77,"loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":67}}},"7":{"name":"(anonymous_7)","line":86,"loc":{"start":{"line":86,"column":37},"end":{"line":86,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":31}},"6":{"start":{"line":9,"column":0},"end":{"line":20,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":38}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":40}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":57}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":23}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":22}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":22}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":24}},"15":{"start":{"line":22,"column":0},"end":{"line":22,"column":29}},"16":{"start":{"line":24,"column":0},"end":{"line":38,"column":2}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":29}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":32}},"19":{"start":{"line":27,"column":4},"end":{"line":27,"column":21}},"20":{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},"21":{"start":{"line":29,"column":8},"end":{"line":29,"column":30}},"22":{"start":{"line":30,"column":8},"end":{"line":30,"column":33}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"24":{"start":{"line":33,"column":4},"end":{"line":37,"column":5}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":32}},"26":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"27":{"start":{"line":36,"column":8},"end":{"line":36,"column":33}},"28":{"start":{"line":40,"column":0},"end":{"line":42,"column":2}},"29":{"start":{"line":41,"column":4},"end":{"line":41,"column":54}},"30":{"start":{"line":44,"column":0},"end":{"line":60,"column":2}},"31":{"start":{"line":45,"column":4},"end":{"line":58,"column":5}},"32":{"start":{"line":46,"column":8},"end":{"line":46,"column":38}},"33":{"start":{"line":47,"column":8},"end":{"line":47,"column":38}},"34":{"start":{"line":48,"column":8},"end":{"line":57,"column":9}},"35":{"start":{"line":49,"column":12},"end":{"line":49,"column":40}},"36":{"start":{"line":50,"column":12},"end":{"line":50,"column":37}},"37":{"start":{"line":51,"column":12},"end":{"line":51,"column":59}},"38":{"start":{"line":52,"column":12},"end":{"line":52,"column":19}},"39":{"start":{"line":54,"column":13},"end":{"line":57,"column":9}},"40":{"start":{"line":55,"column":12},"end":{"line":55,"column":63}},"41":{"start":{"line":56,"column":12},"end":{"line":56,"column":19}},"42":{"start":{"line":59,"column":4},"end":{"line":59,"column":36}},"43":{"start":{"line":62,"column":0},"end":{"line":75,"column":2}},"44":{"start":{"line":63,"column":4},"end":{"line":66,"column":5}},"45":{"start":{"line":64,"column":8},"end":{"line":64,"column":40}},"46":{"start":{"line":65,"column":8},"end":{"line":65,"column":15}},"47":{"start":{"line":68,"column":4},"end":{"line":68,"column":31}},"48":{"start":{"line":69,"column":4},"end":{"line":74,"column":5}},"49":{"start":{"line":70,"column":8},"end":{"line":70,"column":59}},"50":{"start":{"line":73,"column":8},"end":{"line":73,"column":74}},"51":{"start":{"line":77,"column":0},"end":{"line":84,"column":2}},"52":{"start":{"line":78,"column":4},"end":{"line":81,"column":5}},"53":{"start":{"line":79,"column":8},"end":{"line":79,"column":40}},"54":{"start":{"line":80,"column":8},"end":{"line":80,"column":15}},"55":{"start":{"line":83,"column":4},"end":{"line":83,"column":70}},"56":{"start":{"line":86,"column":0},"end":{"line":104,"column":2}},"57":{"start":{"line":87,"column":4},"end":{"line":87,"column":38}},"58":{"start":{"line":88,"column":4},"end":{"line":88,"column":38}},"59":{"start":{"line":89,"column":4},"end":{"line":103,"column":5}},"60":{"start":{"line":91,"column":8},"end":{"line":99,"column":9}},"61":{"start":{"line":92,"column":12},"end":{"line":92,"column":37}},"62":{"start":{"line":94,"column":13},"end":{"line":99,"column":9}},"63":{"start":{"line":95,"column":12},"end":{"line":95,"column":47}},"64":{"start":{"line":98,"column":12},"end":{"line":98,"column":52}},"65":{"start":{"line":102,"column":8},"end":{"line":102,"column":40}},"66":{"start":{"line":106,"column":0},"end":{"line":106,"column":21}}},"branchMap":{"1":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"3":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"4":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":18}},{"start":{"line":45,"column":22},"end":{"line":45,"column":34}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":43}},{"start":{"line":48,"column":47},"end":{"line":48,"column":95}},{"start":{"line":48,"column":99},"end":{"line":48,"column":109}}]},"7":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":13},"end":{"line":54,"column":13}},{"start":{"line":54,"column":13},"end":{"line":54,"column":13}}]},"8":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":18},"end":{"line":54,"column":49}},{"start":{"line":54,"column":53},"end":{"line":54,"column":88}},{"start":{"line":54,"column":93},"end":{"line":54,"column":105}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"10":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"11":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"12":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":4},"end":{"line":89,"column":4}},{"start":{"line":89,"column":4},"end":{"line":89,"column":4}}]},"13":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":39}},{"start":{"line":89,"column":43},"end":{"line":89,"column":75}}]},"14":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":8}},{"start":{"line":91,"column":8},"end":{"line":91,"column":8}}]},"15":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":13},"end":{"line":94,"column":13}},{"start":{"line":94,"column":13},"end":{"line":94,"column":13}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","let _ = require(\"lodash\");","let Block = require(\"./block\");","","function Try() {","    Activity.call(this);","","    this.arrayProperties.add(\"catch\");","    this.arrayProperties.add(\"finally\");","    this.nonScopedProperties.add(\"continueAfterFinally\");","","    this.varName = \"e\";","    this._body = null;","    this.catch = null;","    this.finally = null;","}","","util.inherits(Try, Activity);","","Try.prototype.initializeStructure = function() {","    this._body = new Block();","    this._body.args = this.args;","    this.args = null;","    if (this.catch) {","        let prev = this.catch;","        this.catch = new Block();","        this.catch.args = prev;","    }","    if (this.finally) {","        let prev = this.finally;","        this.finally = new Block();","        this.finally.args = prev;","    }","};","","Try.prototype.run = function (callContext, args) {","    callContext.schedule(this._body, \"_bodyFinished\");","};","","Try.prototype._bodyFinished = function(callContext, reason, result) {","    if (this.catch || this.finally) {","        this._originalResult = result;","        this._originalReason = reason;","        if (reason === Activity.states.fail && !(result instanceof errors.ActivityRuntimeError) && this.catch) {","            this[this.varName] = result;","            this.Try_ReThrow = false;","            callContext.schedule(this.catch, \"_catchDone\");","            return;","        }","        else if ((reason === Activity.states.fail || reason === Activity.states.complete) && this.finally) {","            callContext.schedule(this.finally, \"_finallyDone\");","            return;","        }","    }","    callContext.end(reason, result);","};","","Try.prototype._catchDone = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    this._catchResult = result;","    if (this.finally) {","        callContext.schedule(this.finally, \"_finallyDone\");","    }","    else {","        callContext.activity.continueAfterFinally.call(this, callContext);","    }","};","","Try.prototype._finallyDone = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    callContext.activity.continueAfterFinally.call(this, callContext);","};","","Try.prototype.continueAfterFinally = function(callContext) {","    let reason = this._originalReason;","    let result = this._originalResult;","    if (reason === Activity.states.fail && !_.isUndefined(this.Try_ReThrow)) {","        // We've came from a catch:","        if (this.Try_ReThrow === true) {","            callContext.fail(result);","        }","        else if (this.Try_ReThrow instanceof Error) {","            callContext.fail(this.Try_ReThrow);","        }","        else {","            callContext.complete(this._catchResult);","        }","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = Try;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"12":0,"13":0,"14":0,"16":0,"17":0,"18":0,"19":0,"22":1,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"33":0,"34":0,"35":0,"36":0,"40":1,"41":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"56":0,"59":0,"62":1,"63":0,"64":0,"65":0,"68":0,"69":0,"70":0,"73":0,"77":1,"78":0,"79":0,"80":0,"83":0,"86":1,"87":0,"88":0,"89":0,"91":0,"92":0,"94":0,"95":0,"98":0,"102":0,"106":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/throw.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/throw.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Throw","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":17}}},"2":{"name":"(anonymous_2)","line":16,"loc":{"start":{"line":16,"column":22},"end":{"line":16,"column":51}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":66}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"5":{"start":{"line":8,"column":0},"end":{"line":12,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":22}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":31}},"9":{"start":{"line":16,"column":0},"end":{"line":26,"column":2}},"10":{"start":{"line":17,"column":4},"end":{"line":25,"column":5}},"11":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":36}},"13":{"start":{"line":21,"column":8},"end":{"line":21,"column":31}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":54}},"15":{"start":{"line":28,"column":0},"end":{"line":53,"column":2}},"16":{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":40}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":15}},"19":{"start":{"line":34,"column":4},"end":{"line":34,"column":10}},"20":{"start":{"line":35,"column":4},"end":{"line":44,"column":5}},"21":{"start":{"line":36,"column":8},"end":{"line":36,"column":30}},"22":{"start":{"line":38,"column":9},"end":{"line":44,"column":5}},"23":{"start":{"line":39,"column":8},"end":{"line":39,"column":19}},"24":{"start":{"line":42,"column":8},"end":{"line":42,"column":31}},"25":{"start":{"line":43,"column":8},"end":{"line":43,"column":15}},"26":{"start":{"line":46,"column":4},"end":{"line":52,"column":5}},"27":{"start":{"line":47,"column":8},"end":{"line":47,"column":29}},"28":{"start":{"line":48,"column":8},"end":{"line":48,"column":31}},"29":{"start":{"line":51,"column":8},"end":{"line":51,"column":28}},"30":{"start":{"line":55,"column":0},"end":{"line":55,"column":23}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"2":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]},"4":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]},"5":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":9},"end":{"line":38,"column":9}},{"start":{"line":38,"column":9},"end":{"line":38,"column":9}}]},"6":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","let _ = require(\"lodash\");","","function Throw() {","    Activity.call(this);","","    this.error = null;","}","","util.inherits(Throw, Activity);","","Throw.prototype.run = function (callContext, args) {","    if (!this.error) {","        if (!_.isUndefined(this.Try_ReThrow)) {","            this.Try_ReThrow = true;","        }","        callContext.complete();","    }","    else {","        callContext.schedule(this.error, \"_errorGot\");","    }","};","","Throw.prototype._errorGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    let e;","    if (_.isString(result)) {","        e = new Error(result);","    }","    else if (result instanceof Error) {","        e = result;","    }","    else {","        callContext.complete();","        return;","    }","","    if (!_.isUndefined(this.Try_ReThrow)) {","        this.Try_ReThrow = e;","        callContext.complete();","    }","    else {","        callContext.fail(e);","    }","};","","module.exports = Throw;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"14":1,"16":1,"17":0,"18":0,"19":0,"21":0,"24":0,"28":1,"29":0,"30":0,"31":0,"34":0,"35":0,"36":0,"38":0,"39":0,"42":0,"43":0,"46":0,"47":0,"48":0,"51":0,"55":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/emit.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/emit.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"Emit","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":16}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":50}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":26},"end":{"line":17,"column":64}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":30}},"7":{"start":{"line":13,"column":0},"end":{"line":15,"column":2}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":43}},"9":{"start":{"line":17,"column":0},"end":{"line":28,"column":2}},"10":{"start":{"line":18,"column":4},"end":{"line":21,"column":5}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":40}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":15}},"13":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":46}},"15":{"start":{"line":27,"column":4},"end":{"line":27,"column":27}},"16":{"start":{"line":30,"column":0},"end":{"line":30,"column":22}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":14}},{"start":{"line":23,"column":18},"end":{"line":23,"column":31}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let _ = require(\"lodash\");","","function Emit() {","    Activity.call(this);","}","","util.inherits(Emit, Activity);","","Emit.prototype.run = function (callContext, args) {","    callContext.schedule(args, \"_argsGot\");","};","","Emit.prototype._argsGot = function(callContext, reason, result) {","    if (reason !== Activity.states.complete) {","        callContext.end(reason, result);","        return;","    }","","    if (result && result.length) {","        callContext.emitWorkflowEvent(result);","    }","","    callContext.complete();","};","","module.exports = Emit;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"11":1,"13":1,"14":0,"17":1,"18":0,"19":0,"20":0,"23":0,"24":0,"27":0,"30":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/cancel.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/cancel.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"Cancel","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":18}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":51}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":7,"column":0},"end":{"line":11,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"7":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}},"8":{"start":{"line":15,"column":0},"end":{"line":22,"column":2}},"9":{"start":{"line":16,"column":4},"end":{"line":21,"column":5}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":49}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":24}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","","function Cancel() {","    Activity.call(this);","","    this.force = false;","}","","util.inherits(Cancel, Activity);","","Cancel.prototype.run = function(callContext, args) {","    if (this.force) {","        callContext.fail(new errors.Cancelled());","    }","    else {","        callContext.cancel();","    }","};","","module.exports = Cancel;"],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"13":1,"15":1,"16":0,"17":0,"20":0,"24":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/cancellationScope.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/cancellationScope.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"CancellationScope","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":50},"end":{"line":17,"column":62}}},"3":{"name":"(anonymous_3)","line":28,"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":63}}},"4":{"name":"(anonymous_4)","line":32,"loc":{"start":{"line":32,"column":44},"end":{"line":32,"column":83}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"5":{"start":{"line":8,"column":0},"end":{"line":13,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":24}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":26}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":42}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":43}},"10":{"start":{"line":17,"column":0},"end":{"line":26,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":29}},"12":{"start":{"line":19,"column":4},"end":{"line":19,"column":32}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":21}},"14":{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":34}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":37}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":35}},"18":{"start":{"line":28,"column":0},"end":{"line":30,"column":2}},"19":{"start":{"line":29,"column":4},"end":{"line":29,"column":54}},"20":{"start":{"line":32,"column":0},"end":{"line":41,"column":2}},"21":{"start":{"line":33,"column":4},"end":{"line":40,"column":5}},"22":{"start":{"line":36,"column":8},"end":{"line":36,"column":45}},"23":{"start":{"line":39,"column":8},"end":{"line":39,"column":40}},"24":{"start":{"line":43,"column":0},"end":{"line":43,"column":35}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"3":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":22}},{"start":{"line":34,"column":9},"end":{"line":34,"column":42}},{"start":{"line":35,"column":10},"end":{"line":35,"column":41}},{"start":{"line":35,"column":45},"end":{"line":35,"column":79}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","let errors = require(\"../common/errors\");","let Block = require(\"./block\");","","function CancellationScope() {","    Activity.call(this);","","    this.cancelled = null;","    this.arrayProperties.add(\"cancelled\");","}","","util.inherits(CancellationScope, Activity);","","CancellationScope.prototype.initializeStructure = function () {","    this._body = new Block();","    this._body.args = this.args;","    this.args = null;","    if (this.cancelled) {","        let prev = this.cancelled;","        this.cancelled = new Block();","        this.cancelled.args = prev;","    }","};","","CancellationScope.prototype.run = function (callContext, args) {","    callContext.schedule(this._body, \"_bodyFinished\");","};","","CancellationScope.prototype._bodyFinished = function (callContext, reason, result) {","    if (this.cancelled &&","        (reason === Activity.states.cancel ||","         (reason === Activity.states.fail && result instanceof errors.Cancelled))) {","        callContext.schedule(this.cancelled);","    }","    else {","        callContext.end(reason, result);","    }","};","","module.exports = CancellationScope;"],"l":{"3":1,"4":1,"5":1,"6":1,"8":1,"9":0,"11":0,"12":0,"15":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"28":1,"29":0,"32":1,"33":0,"36":0,"39":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/instanceData.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/activities/instanceData.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"InstanceData","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}}},"2":{"name":"(anonymous_2)","line":12,"loc":{"start":{"line":12,"column":29},"end":{"line":12,"column":57}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":24}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":38}},"6":{"start":{"line":12,"column":0},"end":{"line":24,"column":2}},"7":{"start":{"line":13,"column":4},"end":{"line":23,"column":5}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":65}},"9":{"start":{"line":15,"column":8},"end":{"line":19,"column":11}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":35}},"11":{"start":{"line":26,"column":0},"end":{"line":26,"column":30}}},"branchMap":{"1":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":13,"column":4}},{"start":{"line":13,"column":4},"end":{"line":13,"column":4}}]},"2":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":8},"end":{"line":13,"column":43}},{"start":{"line":13,"column":47},"end":{"line":13,"column":91}}]}},"code":["\"use strict\";","","let Activity = require(\"./activity\");","let util = require(\"util\");","","function InstanceData() {","    Activity.call(this);","}","","util.inherits(InstanceData, Activity);","","InstanceData.prototype.run = function(callContext, args) {","    if (callContext.executionContext.engine && callContext.executionContext.engine.instance) {","        let insta = callContext.executionContext.engine.instance;","        callContext.complete({","            workflowName: insta.workflowName,","            workflowVersion: insta.workflowVersion,","            instanceId: insta.id","        });","    }","    else {","        callContext.complete(null);","    }","};","","module.exports = InstanceData;"],"l":{"3":1,"4":1,"6":1,"7":0,"10":1,"12":1,"13":0,"14":0,"15":0,"22":0,"26":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":5,"column":2}}},"branchMap":{},"code":["module.exports = {","    InstanceIdParser: require(\"./instanceIdParser\"),","    WorkflowHost: require(\"./workflowHost\"),","    MemoryPersistence: require(\"./memoryPersistence\")","};",""],"l":{"1":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/instanceIdParser.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/instanceIdParser.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"InstanceIdParser","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":35},"end":{"line":11,"column":56}}},"3":{"name":"(anonymous_3)","line":27,"loc":{"start":{"line":27,"column":43},"end":{"line":27,"column":59}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"3":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":21}},"5":{"start":{"line":11,"column":0},"end":{"line":25,"column":2}},"6":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":52}},"8":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":64}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":35}},"11":{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":62}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":28}},"14":{"start":{"line":27,"column":0},"end":{"line":38,"column":2}},"15":{"start":{"line":28,"column":4},"end":{"line":35,"column":5}},"16":{"start":{"line":29,"column":8},"end":{"line":34,"column":9}},"17":{"start":{"line":30,"column":12},"end":{"line":30,"column":33}},"18":{"start":{"line":33,"column":12},"end":{"line":33,"column":34}},"19":{"start":{"line":37,"column":4},"end":{"line":37,"column":61}},"20":{"start":{"line":40,"column":0},"end":{"line":40,"column":34}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"3":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"4":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]}},"code":["/* jshint -W054*/","\"use strict\";","","let _ = require(\"lodash\");","let is = require(\"../common/is\");","","function InstanceIdParser() {","    this._cache = {};","}","","InstanceIdParser.prototype.parse = function (path, obj) {","    if (!obj) {","        throw new Error(\"Argument 'obj' expected.\");","    }","    if (!_.isString(path)) {","        throw new TypeError(\"Argument 'path' is not a string.\");","    }","","    let parser = this._cache[path];","    if (_.isUndefined(parser)) {","        this._cache[path] = parser = this._createParser(path);","    }","","    return parser.call(obj);","};","","InstanceIdParser.prototype._createParser = function (path) {","    if (path.indexOf(\"this\") !== 0) {","        if (path[0] === \"[\") {","            path = \"this\" + path;","        }","        else {","            path = \"this.\" + path;","        }","    }","","    return new Function(\"return (\" + path + \").toString();\");","};","","module.exports = InstanceIdParser;",""],"l":{"4":1,"5":1,"7":1,"8":0,"11":1,"12":0,"13":0,"15":0,"16":0,"19":0,"20":0,"21":0,"24":0,"27":1,"28":0,"29":0,"30":0,"33":0,"37":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowHost.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowHost.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":0,"40":1,"41":0,"42":1,"43":0,"44":1,"45":0,"46":1,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":1,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":1,"198":0,"199":0,"200":0,"201":1,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":1,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":1,"296":0,"297":1,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":1,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":1,"323":0,"324":0,"325":0,"326":1,"327":0,"328":0,"329":0,"330":1,"331":0,"332":0,"333":0,"334":0,"335":0,"336":1,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":1,"363":0,"364":0,"365":0,"366":0,"367":0,"368":1,"369":0,"370":0,"371":1,"372":0,"373":0,"374":1,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},"fnMap":{"1":{"name":"WorkflowHost","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":31}}},"2":{"name":"(anonymous_2)","line":63,"loc":{"start":{"line":63,"column":41},"end":{"line":63,"column":57}}},"3":{"name":"(anonymous_3)","line":67,"loc":{"start":{"line":67,"column":32},"end":{"line":67,"column":49}}},"4":{"name":"(anonymous_4)","line":71,"loc":{"start":{"line":71,"column":33},"end":{"line":71,"column":71}}},"5":{"name":"(anonymous_5)","line":79,"loc":{"start":{"line":79,"column":34},"end":{"line":79,"column":93}}},"6":{"name":"(anonymous_6)","line":89,"loc":{"start":{"line":89,"column":31},"end":{"line":89,"column":77}}},"7":{"name":"(anonymous_7)","line":101,"loc":{"start":{"line":101,"column":17},"end":{"line":101,"column":29}}},"8":{"name":"(anonymous_8)","line":106,"loc":{"start":{"line":106,"column":17},"end":{"line":106,"column":29}}},"9":{"name":"(anonymous_9)","line":111,"loc":{"start":{"line":111,"column":17},"end":{"line":111,"column":29}}},"10":{"name":"(anonymous_10)","line":116,"loc":{"start":{"line":116,"column":17},"end":{"line":116,"column":29}}},"11":{"name":"(anonymous_11)","line":121,"loc":{"start":{"line":121,"column":17},"end":{"line":121,"column":29}}},"12":{"name":"(anonymous_12)","line":127,"loc":{"start":{"line":127,"column":52},"end":{"line":127,"column":72}}},"13":{"name":"(anonymous_13)","line":131,"loc":{"start":{"line":131,"column":42},"end":{"line":131,"column":74}}},"14":{"name":"(anonymous_14)","line":138,"loc":{"start":{"line":138,"column":37},"end":{"line":138,"column":49}}},"15":{"name":"(anonymous_15)","line":143,"loc":{"start":{"line":143,"column":40},"end":{"line":143,"column":53}}},"16":{"name":"(anonymous_16)","line":144,"loc":{"start":{"line":144,"column":37},"end":{"line":144,"column":50}}},"17":{"name":"(anonymous_17)","line":152,"loc":{"start":{"line":152,"column":36},"end":{"line":152,"column":72}}},"18":{"name":"(anonymous_18)","line":154,"loc":{"start":{"line":154,"column":17},"end":{"line":154,"column":39}}},"19":{"name":"(anonymous_19)","line":205,"loc":{"start":{"line":205,"column":54},"end":{"line":205,"column":79}}},"20":{"name":"(anonymous_20)","line":229,"loc":{"start":{"line":229,"column":44},"end":{"line":229,"column":87}}},"21":{"name":"(anonymous_21)","line":267,"loc":{"start":{"line":267,"column":21},"end":{"line":267,"column":34}}},"22":{"name":"(anonymous_22)","line":322,"loc":{"start":{"line":322,"column":62},"end":{"line":322,"column":121}}},"23":{"name":"(anonymous_23)","line":383,"loc":{"start":{"line":383,"column":45},"end":{"line":383,"column":88}}},"24":{"name":"(anonymous_24)","line":390,"loc":{"start":{"line":390,"column":62},"end":{"line":390,"column":117}}},"25":{"name":"(anonymous_25)","line":434,"loc":{"start":{"line":434,"column":37},"end":{"line":434,"column":50}}},"26":{"name":"(anonymous_26)","line":447,"loc":{"start":{"line":447,"column":39},"end":{"line":447,"column":51}}},"27":{"name":"(anonymous_27)","line":449,"loc":{"start":{"line":449,"column":33},"end":{"line":449,"column":45}}},"28":{"name":"(anonymous_28)","line":452,"loc":{"start":{"line":452,"column":38},"end":{"line":452,"column":50}}},"29":{"name":"(anonymous_29)","line":455,"loc":{"start":{"line":455,"column":32},"end":{"line":455,"column":45}}},"30":{"name":"(anonymous_30)","line":459,"loc":{"start":{"line":459,"column":41},"end":{"line":459,"column":53}}},"31":{"name":"(anonymous_31)","line":468,"loc":{"start":{"line":468,"column":37},"end":{"line":468,"column":49}}},"32":{"name":"(anonymous_32)","line":470,"loc":{"start":{"line":470,"column":38},"end":{"line":470,"column":50}}},"33":{"name":"(anonymous_33)","line":473,"loc":{"start":{"line":473,"column":32},"end":{"line":473,"column":44}}},"34":{"name":"(anonymous_34)","line":544,"loc":{"start":{"line":544,"column":60},"end":{"line":544,"column":88}}},"35":{"name":"(anonymous_35)","line":554,"loc":{"start":{"line":554,"column":43},"end":{"line":554,"column":55}}},"36":{"name":"(anonymous_36)","line":558,"loc":{"start":{"line":558,"column":62},"end":{"line":558,"column":117}}},"37":{"name":"(anonymous_37)","line":577,"loc":{"start":{"line":577,"column":53},"end":{"line":577,"column":124}}},"38":{"name":"(anonymous_38)","line":601,"loc":{"start":{"line":601,"column":55},"end":{"line":601,"column":92}}},"39":{"name":"(anonymous_39)","line":608,"loc":{"start":{"line":608,"column":73},"end":{"line":608,"column":107}}},"40":{"name":"(anonymous_40)","line":615,"loc":{"start":{"line":615,"column":36},"end":{"line":615,"column":55}}},"41":{"name":"(anonymous_41)","line":627,"loc":{"start":{"line":627,"column":55},"end":{"line":627,"column":77}}},"42":{"name":"(anonymous_42)","line":664,"loc":{"start":{"line":664,"column":43},"end":{"line":664,"column":55}}},"43":{"name":"(anonymous_43)","line":669,"loc":{"start":{"line":669,"column":8},"end":{"line":669,"column":24}}},"44":{"name":"(anonymous_44)","line":675,"loc":{"start":{"line":675,"column":43},"end":{"line":675,"column":60}}},"45":{"name":"(anonymous_45)","line":682,"loc":{"start":{"line":682,"column":33},"end":{"line":682,"column":45}}},"46":{"name":"(anonymous_46)","line":688,"loc":{"start":{"line":688,"column":34},"end":{"line":688,"column":46}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":53}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":59}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":53}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":53}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":39}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":35}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":51}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":51}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":41}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":60}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":33}},"15":{"start":{"line":17,"column":0},"end":{"line":17,"column":47}},"16":{"start":{"line":18,"column":0},"end":{"line":18,"column":53}},"17":{"start":{"line":19,"column":0},"end":{"line":19,"column":31}},"18":{"start":{"line":20,"column":0},"end":{"line":20,"column":33}},"19":{"start":{"line":21,"column":0},"end":{"line":21,"column":31}},"20":{"start":{"line":22,"column":0},"end":{"line":22,"column":53}},"21":{"start":{"line":23,"column":0},"end":{"line":23,"column":50}},"22":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}},"23":{"start":{"line":26,"column":0},"end":{"line":57,"column":1}},"24":{"start":{"line":27,"column":4},"end":{"line":27,"column":28}},"25":{"start":{"line":29,"column":4},"end":{"line":43,"column":17}},"26":{"start":{"line":45,"column":4},"end":{"line":45,"column":68}},"27":{"start":{"line":46,"column":4},"end":{"line":46,"column":24}},"28":{"start":{"line":47,"column":4},"end":{"line":47,"column":32}},"29":{"start":{"line":48,"column":4},"end":{"line":48,"column":52}},"30":{"start":{"line":49,"column":4},"end":{"line":49,"column":29}},"31":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"32":{"start":{"line":52,"column":8},"end":{"line":52,"column":79}},"33":{"start":{"line":54,"column":4},"end":{"line":54,"column":56}},"34":{"start":{"line":55,"column":4},"end":{"line":55,"column":24}},"35":{"start":{"line":56,"column":4},"end":{"line":56,"column":27}},"36":{"start":{"line":59,"column":0},"end":{"line":59,"column":42}},"37":{"start":{"line":61,"column":0},"end":{"line":61,"column":43}},"38":{"start":{"line":63,"column":0},"end":{"line":65,"column":2}},"39":{"start":{"line":64,"column":4},"end":{"line":64,"column":55}},"40":{"start":{"line":67,"column":0},"end":{"line":69,"column":2}},"41":{"start":{"line":68,"column":4},"end":{"line":68,"column":47}},"42":{"start":{"line":71,"column":0},"end":{"line":77,"column":2}},"43":{"start":{"line":72,"column":4},"end":{"line":76,"column":7}},"44":{"start":{"line":79,"column":0},"end":{"line":87,"column":2}},"45":{"start":{"line":80,"column":4},"end":{"line":86,"column":7}},"46":{"start":{"line":89,"column":0},"end":{"line":96,"column":2}},"47":{"start":{"line":90,"column":4},"end":{"line":95,"column":7}},"48":{"start":{"line":98,"column":0},"end":{"line":125,"column":7}},"49":{"start":{"line":102,"column":16},"end":{"line":102,"column":37}},"50":{"start":{"line":107,"column":16},"end":{"line":107,"column":43}},"51":{"start":{"line":112,"column":16},"end":{"line":112,"column":46}},"52":{"start":{"line":117,"column":16},"end":{"line":117,"column":41}},"53":{"start":{"line":122,"column":16},"end":{"line":122,"column":111}},"54":{"start":{"line":127,"column":0},"end":{"line":129,"column":2}},"55":{"start":{"line":128,"column":4},"end":{"line":128,"column":49}},"56":{"start":{"line":131,"column":0},"end":{"line":136,"column":2}},"57":{"start":{"line":132,"column":4},"end":{"line":132,"column":19}},"58":{"start":{"line":133,"column":4},"end":{"line":133,"column":61}},"59":{"start":{"line":134,"column":4},"end":{"line":134,"column":81}},"60":{"start":{"line":135,"column":4},"end":{"line":135,"column":24}},"61":{"start":{"line":138,"column":0},"end":{"line":150,"column":2}},"62":{"start":{"line":139,"column":4},"end":{"line":139,"column":20}},"63":{"start":{"line":140,"column":4},"end":{"line":149,"column":5}},"64":{"start":{"line":141,"column":8},"end":{"line":146,"column":9}},"65":{"start":{"line":142,"column":12},"end":{"line":142,"column":115}},"66":{"start":{"line":143,"column":12},"end":{"line":143,"column":91}},"67":{"start":{"line":143,"column":55},"end":{"line":143,"column":87}},"68":{"start":{"line":144,"column":12},"end":{"line":144,"column":71}},"69":{"start":{"line":144,"column":52},"end":{"line":144,"column":67}},"70":{"start":{"line":145,"column":12},"end":{"line":145,"column":33}},"71":{"start":{"line":148,"column":8},"end":{"line":148,"column":35}},"72":{"start":{"line":152,"column":0},"end":{"line":203,"column":3}},"73":{"start":{"line":153,"column":4},"end":{"line":153,"column":20}},"74":{"start":{"line":154,"column":4},"end":{"line":161,"column":6}},"75":{"start":{"line":155,"column":8},"end":{"line":155,"column":83}},"76":{"start":{"line":156,"column":8},"end":{"line":160,"column":9}},"77":{"start":{"line":157,"column":12},"end":{"line":157,"column":55}},"78":{"start":{"line":158,"column":12},"end":{"line":158,"column":47}},"79":{"start":{"line":159,"column":12},"end":{"line":159,"column":52}},"80":{"start":{"line":163,"column":4},"end":{"line":163,"column":77}},"81":{"start":{"line":165,"column":4},"end":{"line":202,"column":5}},"82":{"start":{"line":166,"column":8},"end":{"line":197,"column":9}},"83":{"start":{"line":167,"column":12},"end":{"line":167,"column":84}},"84":{"start":{"line":168,"column":12},"end":{"line":168,"column":25}},"85":{"start":{"line":169,"column":12},"end":{"line":169,"column":54}},"86":{"start":{"line":170,"column":12},"end":{"line":170,"column":121}},"87":{"start":{"line":171,"column":12},"end":{"line":171,"column":37}},"88":{"start":{"line":172,"column":12},"end":{"line":193,"column":13}},"89":{"start":{"line":173,"column":16},"end":{"line":173,"column":46}},"90":{"start":{"line":174,"column":16},"end":{"line":174,"column":133}},"91":{"start":{"line":177,"column":16},"end":{"line":177,"column":97}},"92":{"start":{"line":178,"column":16},"end":{"line":178,"column":35}},"93":{"start":{"line":180,"column":16},"end":{"line":180,"column":49}},"94":{"start":{"line":183,"column":16},"end":{"line":183,"column":44}},"95":{"start":{"line":184,"column":16},"end":{"line":184,"column":24}},"96":{"start":{"line":188,"column":16},"end":{"line":188,"column":36}},"97":{"start":{"line":189,"column":16},"end":{"line":191,"column":17}},"98":{"start":{"line":190,"column":20},"end":{"line":190,"column":40}},"99":{"start":{"line":192,"column":16},"end":{"line":192,"column":62}},"100":{"start":{"line":196,"column":12},"end":{"line":196,"column":31}},"101":{"start":{"line":200,"column":8},"end":{"line":200,"column":36}},"102":{"start":{"line":201,"column":8},"end":{"line":201,"column":160}},"103":{"start":{"line":205,"column":0},"end":{"line":227,"column":3}},"104":{"start":{"line":206,"column":4},"end":{"line":206,"column":19}},"105":{"start":{"line":207,"column":4},"end":{"line":207,"column":72}},"106":{"start":{"line":211,"column":4},"end":{"line":211,"column":18}},"107":{"start":{"line":212,"column":4},"end":{"line":212,"column":72}},"108":{"start":{"line":213,"column":4},"end":{"line":225,"column":5}},"109":{"start":{"line":214,"column":8},"end":{"line":214,"column":115}},"110":{"start":{"line":215,"column":8},"end":{"line":221,"column":9}},"111":{"start":{"line":216,"column":12},"end":{"line":216,"column":95}},"112":{"start":{"line":217,"column":12},"end":{"line":220,"column":13}},"113":{"start":{"line":218,"column":16},"end":{"line":218,"column":143}},"114":{"start":{"line":219,"column":16},"end":{"line":219,"column":65}},"115":{"start":{"line":224,"column":8},"end":{"line":224,"column":77}},"116":{"start":{"line":226,"column":4},"end":{"line":226,"column":17}},"117":{"start":{"line":229,"column":0},"end":{"line":320,"column":3}},"118":{"start":{"line":230,"column":4},"end":{"line":230,"column":19}},"119":{"start":{"line":231,"column":4},"end":{"line":231,"column":103}},"120":{"start":{"line":233,"column":4},"end":{"line":235,"column":5}},"121":{"start":{"line":234,"column":8},"end":{"line":234,"column":72}},"122":{"start":{"line":236,"column":4},"end":{"line":236,"column":39}},"123":{"start":{"line":237,"column":4},"end":{"line":239,"column":5}},"124":{"start":{"line":238,"column":8},"end":{"line":238,"column":70}},"125":{"start":{"line":240,"column":4},"end":{"line":240,"column":35}},"126":{"start":{"line":242,"column":4},"end":{"line":244,"column":5}},"127":{"start":{"line":243,"column":8},"end":{"line":243,"column":22}},"128":{"start":{"line":246,"column":4},"end":{"line":246,"column":20}},"129":{"start":{"line":248,"column":4},"end":{"line":248,"column":23}},"130":{"start":{"line":250,"column":4},"end":{"line":250,"column":26}},"131":{"start":{"line":251,"column":4},"end":{"line":251,"column":25}},"132":{"start":{"line":253,"column":4},"end":{"line":253,"column":21}},"133":{"start":{"line":254,"column":4},"end":{"line":263,"column":5}},"134":{"start":{"line":255,"column":8},"end":{"line":255,"column":76}},"135":{"start":{"line":256,"column":8},"end":{"line":262,"column":9}},"136":{"start":{"line":257,"column":12},"end":{"line":261,"column":19}},"137":{"start":{"line":264,"column":4},"end":{"line":277,"column":5}},"138":{"start":{"line":265,"column":8},"end":{"line":276,"column":28}},"139":{"start":{"line":268,"column":20},"end":{"line":274,"column":22}},"140":{"start":{"line":279,"column":4},"end":{"line":290,"column":5}},"141":{"start":{"line":280,"column":8},"end":{"line":280,"column":32}},"142":{"start":{"line":282,"column":8},"end":{"line":284,"column":9}},"143":{"start":{"line":283,"column":12},"end":{"line":283,"column":36}},"144":{"start":{"line":286,"column":8},"end":{"line":289,"column":9}},"145":{"start":{"line":287,"column":12},"end":{"line":287,"column":35}},"146":{"start":{"line":288,"column":12},"end":{"line":288,"column":18}},"147":{"start":{"line":292,"column":4},"end":{"line":319,"column":5}},"148":{"start":{"line":293,"column":8},"end":{"line":293,"column":91}},"149":{"start":{"line":294,"column":8},"end":{"line":302,"column":9}},"150":{"start":{"line":295,"column":12},"end":{"line":295,"column":109}},"151":{"start":{"line":296,"column":12},"end":{"line":296,"column":54}},"152":{"start":{"line":297,"column":12},"end":{"line":297,"column":22}},"153":{"start":{"line":300,"column":12},"end":{"line":300,"column":48}},"154":{"start":{"line":301,"column":12},"end":{"line":301,"column":20}},"155":{"start":{"line":304,"column":9},"end":{"line":319,"column":5}},"156":{"start":{"line":305,"column":8},"end":{"line":305,"column":167}},"157":{"start":{"line":306,"column":8},"end":{"line":314,"column":9}},"158":{"start":{"line":307,"column":12},"end":{"line":307,"column":125}},"159":{"start":{"line":308,"column":12},"end":{"line":308,"column":54}},"160":{"start":{"line":309,"column":12},"end":{"line":309,"column":22}},"161":{"start":{"line":312,"column":12},"end":{"line":312,"column":48}},"162":{"start":{"line":313,"column":12},"end":{"line":313,"column":20}},"163":{"start":{"line":317,"column":8},"end":{"line":317,"column":59}},"164":{"start":{"line":318,"column":8},"end":{"line":318,"column":146}},"165":{"start":{"line":322,"column":0},"end":{"line":381,"column":3}},"166":{"start":{"line":323,"column":4},"end":{"line":323,"column":53}},"167":{"start":{"line":325,"column":4},"end":{"line":325,"column":24}},"168":{"start":{"line":327,"column":4},"end":{"line":380,"column":5}},"169":{"start":{"line":328,"column":8},"end":{"line":328,"column":45}},"170":{"start":{"line":329,"column":8},"end":{"line":329,"column":100}},"171":{"start":{"line":330,"column":8},"end":{"line":330,"column":61}},"172":{"start":{"line":331,"column":8},"end":{"line":331,"column":46}},"173":{"start":{"line":332,"column":8},"end":{"line":332,"column":22}},"174":{"start":{"line":335,"column":8},"end":{"line":339,"column":10}},"175":{"start":{"line":341,"column":8},"end":{"line":341,"column":129}},"176":{"start":{"line":342,"column":8},"end":{"line":379,"column":9}},"177":{"start":{"line":343,"column":12},"end":{"line":343,"column":49}},"178":{"start":{"line":344,"column":12},"end":{"line":344,"column":104}},"179":{"start":{"line":346,"column":12},"end":{"line":375,"column":13}},"180":{"start":{"line":347,"column":16},"end":{"line":347,"column":69}},"181":{"start":{"line":350,"column":16},"end":{"line":350,"column":31}},"182":{"start":{"line":351,"column":16},"end":{"line":359,"column":17}},"183":{"start":{"line":352,"column":20},"end":{"line":352,"column":64}},"184":{"start":{"line":353,"column":20},"end":{"line":353,"column":58}},"185":{"start":{"line":356,"column":20},"end":{"line":356,"column":138}},"186":{"start":{"line":357,"column":20},"end":{"line":357,"column":79}},"187":{"start":{"line":358,"column":20},"end":{"line":358,"column":28}},"188":{"start":{"line":360,"column":16},"end":{"line":366,"column":17}},"189":{"start":{"line":361,"column":20},"end":{"line":361,"column":66}},"190":{"start":{"line":364,"column":20},"end":{"line":364,"column":131}},"191":{"start":{"line":365,"column":20},"end":{"line":365,"column":35}},"192":{"start":{"line":367,"column":16},"end":{"line":369,"column":17}},"193":{"start":{"line":368,"column":20},"end":{"line":368,"column":30}},"194":{"start":{"line":371,"column":16},"end":{"line":371,"column":30}},"195":{"start":{"line":374,"column":16},"end":{"line":374,"column":30}},"196":{"start":{"line":378,"column":12},"end":{"line":378,"column":32}},"197":{"start":{"line":383,"column":0},"end":{"line":388,"column":2}},"198":{"start":{"line":384,"column":4},"end":{"line":387,"column":5}},"199":{"start":{"line":385,"column":8},"end":{"line":385,"column":237}},"200":{"start":{"line":386,"column":8},"end":{"line":386,"column":20}},"201":{"start":{"line":390,"column":0},"end":{"line":542,"column":3}},"202":{"start":{"line":391,"column":4},"end":{"line":391,"column":20}},"203":{"start":{"line":393,"column":4},"end":{"line":541,"column":5}},"204":{"start":{"line":394,"column":8},"end":{"line":394,"column":108}},"205":{"start":{"line":395,"column":8},"end":{"line":417,"column":9}},"206":{"start":{"line":396,"column":12},"end":{"line":396,"column":68}},"207":{"start":{"line":397,"column":12},"end":{"line":409,"column":13}},"208":{"start":{"line":398,"column":16},"end":{"line":398,"column":75}},"209":{"start":{"line":399,"column":16},"end":{"line":399,"column":30}},"210":{"start":{"line":401,"column":17},"end":{"line":409,"column":13}},"211":{"start":{"line":402,"column":16},"end":{"line":402,"column":46}},"212":{"start":{"line":403,"column":16},"end":{"line":403,"column":76}},"213":{"start":{"line":404,"column":16},"end":{"line":404,"column":55}},"214":{"start":{"line":405,"column":16},"end":{"line":405,"column":30}},"215":{"start":{"line":408,"column":16},"end":{"line":408,"column":180}},"216":{"start":{"line":412,"column":12},"end":{"line":412,"column":66}},"217":{"start":{"line":413,"column":12},"end":{"line":413,"column":42}},"218":{"start":{"line":414,"column":12},"end":{"line":414,"column":72}},"219":{"start":{"line":415,"column":12},"end":{"line":415,"column":51}},"220":{"start":{"line":416,"column":12},"end":{"line":416,"column":20}},"221":{"start":{"line":421,"column":8},"end":{"line":421,"column":80}},"222":{"start":{"line":422,"column":8},"end":{"line":422,"column":21}},"223":{"start":{"line":423,"column":8},"end":{"line":423,"column":33}},"224":{"start":{"line":424,"column":8},"end":{"line":540,"column":9}},"225":{"start":{"line":425,"column":12},"end":{"line":425,"column":39}},"226":{"start":{"line":426,"column":12},"end":{"line":426,"column":121}},"227":{"start":{"line":427,"column":12},"end":{"line":427,"column":42}},"228":{"start":{"line":430,"column":12},"end":{"line":430,"column":129}},"229":{"start":{"line":433,"column":12},"end":{"line":433,"column":112}},"230":{"start":{"line":434,"column":12},"end":{"line":445,"column":15}},"231":{"start":{"line":435,"column":16},"end":{"line":435,"column":46}},"232":{"start":{"line":436,"column":16},"end":{"line":442,"column":17}},"233":{"start":{"line":437,"column":20},"end":{"line":437,"column":92}},"234":{"start":{"line":440,"column":20},"end":{"line":440,"column":140}},"235":{"start":{"line":441,"column":20},"end":{"line":441,"column":41}},"236":{"start":{"line":443,"column":16},"end":{"line":443,"column":76}},"237":{"start":{"line":444,"column":16},"end":{"line":444,"column":55}},"238":{"start":{"line":446,"column":12},"end":{"line":519,"column":13}},"239":{"start":{"line":447,"column":16},"end":{"line":463,"column":18}},"240":{"start":{"line":448,"column":20},"end":{"line":462,"column":27}},"241":{"start":{"line":450,"column":28},"end":{"line":450,"column":61}},"242":{"start":{"line":451,"column":28},"end":{"line":461,"column":35}},"243":{"start":{"line":453,"column":36},"end":{"line":453,"column":55}},"244":{"start":{"line":456,"column":36},"end":{"line":456,"column":148}},"245":{"start":{"line":457,"column":36},"end":{"line":457,"column":51}},"246":{"start":{"line":460,"column":36},"end":{"line":460,"column":56}},"247":{"start":{"line":464,"column":16},"end":{"line":464,"column":72}},"248":{"start":{"line":465,"column":16},"end":{"line":513,"column":17}},"249":{"start":{"line":467,"column":20},"end":{"line":481,"column":21}},"250":{"start":{"line":468,"column":24},"end":{"line":476,"column":27}},"251":{"start":{"line":469,"column":28},"end":{"line":475,"column":35}},"252":{"start":{"line":471,"column":36},"end":{"line":471,"column":95}},"253":{"start":{"line":474,"column":36},"end":{"line":474,"column":52}},"254":{"start":{"line":479,"column":24},"end":{"line":479,"column":49}},"255":{"start":{"line":480,"column":24},"end":{"line":480,"column":83}},"256":{"start":{"line":483,"column":20},"end":{"line":483,"column":34}},"257":{"start":{"line":485,"column":21},"end":{"line":513,"column":17}},"258":{"start":{"line":486,"column":20},"end":{"line":486,"column":50}},"259":{"start":{"line":487,"column":20},"end":{"line":487,"column":80}},"260":{"start":{"line":488,"column":20},"end":{"line":488,"column":59}},"261":{"start":{"line":489,"column":20},"end":{"line":508,"column":21}},"262":{"start":{"line":490,"column":24},"end":{"line":496,"column":25}},"263":{"start":{"line":491,"column":28},"end":{"line":491,"column":94}},"264":{"start":{"line":494,"column":28},"end":{"line":494,"column":142}},"265":{"start":{"line":495,"column":28},"end":{"line":495,"column":43}},"266":{"start":{"line":498,"column":24},"end":{"line":504,"column":25}},"267":{"start":{"line":499,"column":28},"end":{"line":499,"column":74}},"268":{"start":{"line":502,"column":28},"end":{"line":502,"column":139}},"269":{"start":{"line":503,"column":28},"end":{"line":503,"column":43}},"270":{"start":{"line":507,"column":24},"end":{"line":507,"column":44}},"271":{"start":{"line":509,"column":20},"end":{"line":509,"column":34}},"272":{"start":{"line":512,"column":20},"end":{"line":512,"column":184}},"273":{"start":{"line":516,"column":16},"end":{"line":516,"column":70}},"274":{"start":{"line":517,"column":16},"end":{"line":517,"column":38}},"275":{"start":{"line":518,"column":16},"end":{"line":518,"column":24}},"276":{"start":{"line":522,"column":12},"end":{"line":524,"column":13}},"277":{"start":{"line":523,"column":16},"end":{"line":523,"column":36}},"278":{"start":{"line":525,"column":12},"end":{"line":533,"column":13}},"279":{"start":{"line":526,"column":16},"end":{"line":532,"column":17}},"280":{"start":{"line":527,"column":20},"end":{"line":527,"column":66}},"281":{"start":{"line":530,"column":20},"end":{"line":530,"column":85}},"282":{"start":{"line":531,"column":20},"end":{"line":531,"column":39}},"283":{"start":{"line":534,"column":12},"end":{"line":538,"column":13}},"284":{"start":{"line":535,"column":16},"end":{"line":535,"column":123}},"285":{"start":{"line":536,"column":16},"end":{"line":536,"column":27}},"286":{"start":{"line":537,"column":16},"end":{"line":537,"column":65}},"287":{"start":{"line":539,"column":12},"end":{"line":539,"column":20}},"288":{"start":{"line":544,"column":0},"end":{"line":552,"column":3}},"289":{"start":{"line":545,"column":4},"end":{"line":545,"column":168}},"290":{"start":{"line":546,"column":4},"end":{"line":548,"column":5}},"291":{"start":{"line":547,"column":8},"end":{"line":547,"column":160}},"292":{"start":{"line":549,"column":4},"end":{"line":549,"column":24}},"293":{"start":{"line":550,"column":4},"end":{"line":550,"column":28}},"294":{"start":{"line":551,"column":4},"end":{"line":551,"column":32}},"295":{"start":{"line":554,"column":0},"end":{"line":556,"column":2}},"296":{"start":{"line":555,"column":4},"end":{"line":555,"column":99}},"297":{"start":{"line":558,"column":0},"end":{"line":575,"column":3}},"298":{"start":{"line":559,"column":4},"end":{"line":559,"column":20}},"299":{"start":{"line":560,"column":4},"end":{"line":560,"column":21}},"300":{"start":{"line":561,"column":4},"end":{"line":569,"column":5}},"301":{"start":{"line":562,"column":8},"end":{"line":562,"column":100}},"302":{"start":{"line":563,"column":8},"end":{"line":565,"column":9}},"303":{"start":{"line":564,"column":12},"end":{"line":564,"column":123}},"304":{"start":{"line":568,"column":8},"end":{"line":568,"column":74}},"305":{"start":{"line":570,"column":4},"end":{"line":572,"column":5}},"306":{"start":{"line":571,"column":8},"end":{"line":571,"column":153}},"307":{"start":{"line":574,"column":4},"end":{"line":574,"column":17}},"308":{"start":{"line":577,"column":0},"end":{"line":599,"column":3}},"309":{"start":{"line":578,"column":4},"end":{"line":578,"column":20}},"310":{"start":{"line":580,"column":4},"end":{"line":582,"column":5}},"311":{"start":{"line":581,"column":8},"end":{"line":581,"column":113}},"312":{"start":{"line":584,"column":4},"end":{"line":584,"column":74}},"313":{"start":{"line":585,"column":4},"end":{"line":589,"column":5}},"314":{"start":{"line":586,"column":8},"end":{"line":586,"column":75}},"315":{"start":{"line":587,"column":8},"end":{"line":587,"column":41}},"316":{"start":{"line":588,"column":8},"end":{"line":588,"column":75}},"317":{"start":{"line":591,"column":4},"end":{"line":598,"column":5}},"318":{"start":{"line":592,"column":8},"end":{"line":592,"column":82}},"319":{"start":{"line":593,"column":8},"end":{"line":593,"column":34}},"320":{"start":{"line":594,"column":8},"end":{"line":594,"column":21}},"321":{"start":{"line":597,"column":8},"end":{"line":597,"column":21}},"322":{"start":{"line":601,"column":0},"end":{"line":606,"column":3}},"323":{"start":{"line":602,"column":4},"end":{"line":604,"column":5}},"324":{"start":{"line":603,"column":8},"end":{"line":603,"column":77}},"325":{"start":{"line":605,"column":4},"end":{"line":605,"column":72}},"326":{"start":{"line":608,"column":0},"end":{"line":613,"column":3}},"327":{"start":{"line":609,"column":4},"end":{"line":611,"column":5}},"328":{"start":{"line":610,"column":8},"end":{"line":610,"column":105}},"329":{"start":{"line":612,"column":4},"end":{"line":612,"column":103}},"330":{"start":{"line":615,"column":0},"end":{"line":623,"column":2}},"331":{"start":{"line":616,"column":4},"end":{"line":616,"column":19}},"332":{"start":{"line":618,"column":4},"end":{"line":620,"column":5}},"333":{"start":{"line":619,"column":8},"end":{"line":619,"column":58}},"334":{"start":{"line":621,"column":4},"end":{"line":621,"column":33}},"335":{"start":{"line":622,"column":4},"end":{"line":622,"column":52}},"336":{"start":{"line":627,"column":0},"end":{"line":662,"column":3}},"337":{"start":{"line":628,"column":4},"end":{"line":631,"column":5}},"338":{"start":{"line":629,"column":8},"end":{"line":629,"column":36}},"339":{"start":{"line":630,"column":8},"end":{"line":630,"column":15}},"340":{"start":{"line":632,"column":4},"end":{"line":635,"column":5}},"341":{"start":{"line":633,"column":8},"end":{"line":633,"column":124}},"342":{"start":{"line":634,"column":8},"end":{"line":634,"column":15}},"343":{"start":{"line":637,"column":4},"end":{"line":637,"column":40}},"344":{"start":{"line":638,"column":4},"end":{"line":638,"column":46}},"345":{"start":{"line":639,"column":4},"end":{"line":639,"column":48}},"346":{"start":{"line":640,"column":4},"end":{"line":640,"column":52}},"347":{"start":{"line":641,"column":4},"end":{"line":641,"column":58}},"348":{"start":{"line":642,"column":4},"end":{"line":642,"column":53}},"349":{"start":{"line":643,"column":4},"end":{"line":643,"column":52}},"350":{"start":{"line":644,"column":4},"end":{"line":644,"column":51}},"351":{"start":{"line":646,"column":4},"end":{"line":661,"column":5}},"352":{"start":{"line":648,"column":8},"end":{"line":648,"column":165}},"353":{"start":{"line":649,"column":8},"end":{"line":649,"column":203}},"354":{"start":{"line":650,"column":8},"end":{"line":650,"column":165}},"355":{"start":{"line":651,"column":8},"end":{"line":651,"column":36}},"356":{"start":{"line":654,"column":8},"end":{"line":658,"column":9}},"357":{"start":{"line":655,"column":12},"end":{"line":655,"column":96}},"358":{"start":{"line":656,"column":12},"end":{"line":656,"column":40}},"359":{"start":{"line":657,"column":12},"end":{"line":657,"column":19}},"360":{"start":{"line":659,"column":8},"end":{"line":659,"column":175}},"361":{"start":{"line":660,"column":8},"end":{"line":660,"column":36}},"362":{"start":{"line":664,"column":0},"end":{"line":673,"column":2}},"363":{"start":{"line":665,"column":4},"end":{"line":665,"column":20}},"364":{"start":{"line":666,"column":4},"end":{"line":666,"column":43}},"365":{"start":{"line":667,"column":4},"end":{"line":671,"column":11}},"366":{"start":{"line":670,"column":12},"end":{"line":670,"column":39}},"367":{"start":{"line":672,"column":4},"end":{"line":672,"column":17}},"368":{"start":{"line":675,"column":0},"end":{"line":678,"column":2}},"369":{"start":{"line":676,"column":4},"end":{"line":676,"column":31}},"370":{"start":{"line":677,"column":4},"end":{"line":677,"column":69}},"371":{"start":{"line":682,"column":0},"end":{"line":686,"column":2}},"372":{"start":{"line":683,"column":4},"end":{"line":685,"column":5}},"373":{"start":{"line":684,"column":8},"end":{"line":684,"column":76}},"374":{"start":{"line":688,"column":0},"end":{"line":697,"column":2}},"375":{"start":{"line":689,"column":4},"end":{"line":691,"column":5}},"376":{"start":{"line":690,"column":8},"end":{"line":690,"column":15}},"377":{"start":{"line":692,"column":4},"end":{"line":694,"column":5}},"378":{"start":{"line":693,"column":8},"end":{"line":693,"column":28}},"379":{"start":{"line":695,"column":4},"end":{"line":695,"column":26}},"380":{"start":{"line":696,"column":4},"end":{"line":696,"column":30}},"381":{"start":{"line":699,"column":0},"end":{"line":699,"column":30}}},"branchMap":{"1":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":51,"column":4}},{"start":{"line":51,"column":4},"end":{"line":51,"column":4}}]},"2":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":140,"column":4}},{"start":{"line":140,"column":4},"end":{"line":140,"column":4}}]},"3":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"4":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":39}},{"start":{"line":141,"column":43},"end":{"line":141,"column":83}}]},"5":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":156,"column":8}},{"start":{"line":156,"column":8},"end":{"line":156,"column":8}}]},"6":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":8},"end":{"line":166,"column":8}},{"start":{"line":166,"column":8},"end":{"line":166,"column":8}}]},"7":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":16},"end":{"line":189,"column":16}},{"start":{"line":189,"column":16},"end":{"line":189,"column":16}}]},"8":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":4},"end":{"line":213,"column":4}},{"start":{"line":213,"column":4},"end":{"line":213,"column":4}}]},"9":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":8}},{"start":{"line":215,"column":8},"end":{"line":215,"column":8}}]},"10":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":4},"end":{"line":233,"column":4}},{"start":{"line":233,"column":4},"end":{"line":233,"column":4}}]},"11":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":4}},{"start":{"line":237,"column":4},"end":{"line":237,"column":4}}]},"12":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":4},"end":{"line":242,"column":4}},{"start":{"line":242,"column":4},"end":{"line":242,"column":4}}]},"13":{"line":242,"type":"binary-expr","locations":[{"start":{"line":242,"column":8},"end":{"line":242,"column":28}},{"start":{"line":242,"column":32},"end":{"line":242,"column":48}}]},"14":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":8},"end":{"line":256,"column":8}},{"start":{"line":256,"column":8},"end":{"line":256,"column":8}}]},"15":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":4},"end":{"line":264,"column":4}},{"start":{"line":264,"column":4},"end":{"line":264,"column":4}}]},"16":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":8},"end":{"line":282,"column":8}},{"start":{"line":282,"column":8},"end":{"line":282,"column":8}}]},"17":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":12},"end":{"line":282,"column":41}},{"start":{"line":282,"column":45},"end":{"line":282,"column":68}}]},"18":{"line":286,"type":"if","locations":[{"start":{"line":286,"column":8},"end":{"line":286,"column":8}},{"start":{"line":286,"column":8},"end":{"line":286,"column":8}}]},"19":{"line":286,"type":"binary-expr","locations":[{"start":{"line":286,"column":12},"end":{"line":286,"column":32}},{"start":{"line":286,"column":37},"end":{"line":286,"column":96}}]},"20":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":4},"end":{"line":292,"column":4}},{"start":{"line":292,"column":4},"end":{"line":292,"column":4}}]},"21":{"line":304,"type":"if","locations":[{"start":{"line":304,"column":9},"end":{"line":304,"column":9}},{"start":{"line":304,"column":9},"end":{"line":304,"column":9}}]},"22":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":4},"end":{"line":327,"column":4}},{"start":{"line":327,"column":4},"end":{"line":327,"column":4}}]},"23":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":12},"end":{"line":346,"column":12}},{"start":{"line":346,"column":12},"end":{"line":346,"column":12}}]},"24":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":16},"end":{"line":367,"column":16}},{"start":{"line":367,"column":16},"end":{"line":367,"column":16}}]},"25":{"line":384,"type":"if","locations":[{"start":{"line":384,"column":4},"end":{"line":384,"column":4}},{"start":{"line":384,"column":4},"end":{"line":384,"column":4}}]},"26":{"line":393,"type":"if","locations":[{"start":{"line":393,"column":4},"end":{"line":393,"column":4}},{"start":{"line":393,"column":4},"end":{"line":393,"column":4}}]},"27":{"line":397,"type":"if","locations":[{"start":{"line":397,"column":12},"end":{"line":397,"column":12}},{"start":{"line":397,"column":12},"end":{"line":397,"column":12}}]},"28":{"line":401,"type":"if","locations":[{"start":{"line":401,"column":17},"end":{"line":401,"column":17}},{"start":{"line":401,"column":17},"end":{"line":401,"column":17}}]},"29":{"line":465,"type":"if","locations":[{"start":{"line":465,"column":16},"end":{"line":465,"column":16}},{"start":{"line":465,"column":16},"end":{"line":465,"column":16}}]},"30":{"line":467,"type":"if","locations":[{"start":{"line":467,"column":20},"end":{"line":467,"column":20}},{"start":{"line":467,"column":20},"end":{"line":467,"column":20}}]},"31":{"line":485,"type":"if","locations":[{"start":{"line":485,"column":21},"end":{"line":485,"column":21}},{"start":{"line":485,"column":21},"end":{"line":485,"column":21}}]},"32":{"line":522,"type":"if","locations":[{"start":{"line":522,"column":12},"end":{"line":522,"column":12}},{"start":{"line":522,"column":12},"end":{"line":522,"column":12}}]},"33":{"line":525,"type":"if","locations":[{"start":{"line":525,"column":12},"end":{"line":525,"column":12}},{"start":{"line":525,"column":12},"end":{"line":525,"column":12}}]},"34":{"line":534,"type":"if","locations":[{"start":{"line":534,"column":12},"end":{"line":534,"column":12}},{"start":{"line":534,"column":12},"end":{"line":534,"column":12}}]},"35":{"line":546,"type":"if","locations":[{"start":{"line":546,"column":4},"end":{"line":546,"column":4}},{"start":{"line":546,"column":4},"end":{"line":546,"column":4}}]},"36":{"line":561,"type":"if","locations":[{"start":{"line":561,"column":4},"end":{"line":561,"column":4}},{"start":{"line":561,"column":4},"end":{"line":561,"column":4}}]},"37":{"line":563,"type":"if","locations":[{"start":{"line":563,"column":8},"end":{"line":563,"column":8}},{"start":{"line":563,"column":8},"end":{"line":563,"column":8}}]},"38":{"line":570,"type":"if","locations":[{"start":{"line":570,"column":4},"end":{"line":570,"column":4}},{"start":{"line":570,"column":4},"end":{"line":570,"column":4}}]},"39":{"line":580,"type":"if","locations":[{"start":{"line":580,"column":4},"end":{"line":580,"column":4}},{"start":{"line":580,"column":4},"end":{"line":580,"column":4}}]},"40":{"line":585,"type":"if","locations":[{"start":{"line":585,"column":4},"end":{"line":585,"column":4}},{"start":{"line":585,"column":4},"end":{"line":585,"column":4}}]},"41":{"line":591,"type":"if","locations":[{"start":{"line":591,"column":4},"end":{"line":591,"column":4}},{"start":{"line":591,"column":4},"end":{"line":591,"column":4}}]},"42":{"line":591,"type":"binary-expr","locations":[{"start":{"line":591,"column":8},"end":{"line":591,"column":32}},{"start":{"line":591,"column":36},"end":{"line":591,"column":91}},{"start":{"line":591,"column":95},"end":{"line":591,"column":123}}]},"43":{"line":602,"type":"if","locations":[{"start":{"line":602,"column":4},"end":{"line":602,"column":4}},{"start":{"line":602,"column":4},"end":{"line":602,"column":4}}]},"44":{"line":609,"type":"if","locations":[{"start":{"line":609,"column":4},"end":{"line":609,"column":4}},{"start":{"line":609,"column":4},"end":{"line":609,"column":4}}]},"45":{"line":618,"type":"if","locations":[{"start":{"line":618,"column":4},"end":{"line":618,"column":4}},{"start":{"line":618,"column":4},"end":{"line":618,"column":4}}]},"46":{"line":628,"type":"if","locations":[{"start":{"line":628,"column":4},"end":{"line":628,"column":4}},{"start":{"line":628,"column":4},"end":{"line":628,"column":4}}]},"47":{"line":632,"type":"if","locations":[{"start":{"line":632,"column":4},"end":{"line":632,"column":4}},{"start":{"line":632,"column":4},"end":{"line":632,"column":4}}]},"48":{"line":654,"type":"if","locations":[{"start":{"line":654,"column":8},"end":{"line":654,"column":8}},{"start":{"line":654,"column":8},"end":{"line":654,"column":8}}]},"49":{"line":654,"type":"binary-expr","locations":[{"start":{"line":654,"column":12},"end":{"line":654,"column":58}},{"start":{"line":654,"column":62},"end":{"line":654,"column":103}}]},"50":{"line":683,"type":"if","locations":[{"start":{"line":683,"column":4},"end":{"line":683,"column":4}},{"start":{"line":683,"column":4},"end":{"line":683,"column":4}}]},"51":{"line":689,"type":"if","locations":[{"start":{"line":689,"column":4},"end":{"line":689,"column":4}},{"start":{"line":689,"column":4},"end":{"line":689,"column":4}}]},"52":{"line":692,"type":"if","locations":[{"start":{"line":692,"column":4},"end":{"line":692,"column":4}},{"start":{"line":692,"column":4},"end":{"line":692,"column":4}}]}},"code":["\"use strict\";","","let WorkflowRegistry = require(\"./workflowRegistry\");","let _ = require(\"lodash\");","let Activity = require(\"../activities/activity\");","let Workflow = require(\"../activities/workflow\");","let WorkflowPersistence = require(\"./workflowPersistence\");","let WorkflowInstance = require(\"./workflowInstance\");","let InstanceIdParser = require(\"./instanceIdParser\");","let enums = require(\"../common/enums\");","let Bluebird = require(\"bluebird\");","let KnownInstaStore = require(\"./knownInstaStore\");","let specStrings = require(\"../common/specStrings\");","let errors = require(\"../common/errors\");","let Serializer = require(\"backpack-node\").system.Serializer;","let is = require(\"../common/is\");","let KeepLockAlive = require(\"./keepLockAlive\");","let asyncHelpers = require(\"../common/asyncHelpers\");","let async = asyncHelpers.async;","let WakeUp = require(\"./wakeUp\");","let assert = require(\"assert\");","let debug = require(\"debug\")(\"wf4node:WorkflowHost\");","let EventEmitter = require(\"events\").EventEmitter;","let util = require(\"util\");","","function WorkflowHost(options) {","    EventEmitter.call(this);","","    this._options = _.extend(","        {","            enterLockTimeout: 10000,","            lockRenewalTimeout: 5000,","            alwaysLoadState: false,","            lazyPersistence: true,","            persistence: null,","            serializer: null,","            enablePromotions: false,","            wakeUpOptions: {","                interval: 5000,","                batchSize: 10","            }","        },","        options);","","    this._registry = new WorkflowRegistry(this._options.serializer);","    this._trackers = [];","    this._isInitialized = false;","    this._instanceIdParser = new InstanceIdParser();","    this._persistence = null;","","    if (this._options.persistence !== null) {","        this._persistence = new WorkflowPersistence(this._options.persistence);","    }","    this._knownRunningInstances = new KnownInstaStore();","    this._wakeUp = null;","    this._shutdown = false;","}","","util.inherits(WorkflowHost, EventEmitter);","","WorkflowHost.events = enums.workflowEvents;","","WorkflowHost.prototype.onWorkflowEvent = function (args) {","    this.emit(WorkflowHost.events.workflowEvent, args);","};","","WorkflowHost.prototype.onWarn = function (error) {","    this.emit(WorkflowHost.events.warn, error);","};","","WorkflowHost.prototype.onStart = function (instance, methodName, args) {","    this.emit(WorkflowHost.events.start, {","        instance: instance,","        methodName: methodName,","        args: args","    });","};","","WorkflowHost.prototype.onInvoke = function (instance, methodName, args, result, idle, error) {","    this.emit(WorkflowHost.events.invoke, {","        instance: instance,","        methodName: methodName,","        args: args,","        idle: idle,","        error: error","    });","};","","WorkflowHost.prototype.onEnd = function (instance, result, cancelled, error) {","    this.emit(WorkflowHost.events.end, {","        instance: instance,","        result: result,","        cancelled: cancelled,","        error: error","    });","};","","Object.defineProperties(","    WorkflowHost.prototype, {","        options: {","            get: function () {","                return this._options;","            }","        },","        isInitialized: {","            get: function () {","                return this._isInitialized;","            }","        },","        instanceIdParser: {","            get: function () {","                return this._instanceIdParser;","            }","        },","        persistence: {","            get: function () {","                return this._persistence;","            }","        },","        _inLockTimeout: {","            get: function () {","                return this.options.lockRenewalTimeout + Math.max(this.options.lockRenewalTimeout * 0.4, 3000);","            }","        }","    });","","WorkflowHost.prototype.registerDeprecatedWorkflow = function (workflow) {","    return this.registerWorkflow(workflow, true);","};","","WorkflowHost.prototype.registerWorkflow = function (workflow, deprecated) {","    this._verify();","    let desc = this._registry.register(workflow, deprecated);","    debug(\"Workflow registered. name: %s, version: %s\", desc.name, desc.version);","    return desc.version;","};","","WorkflowHost.prototype._initialize = function () {","    let self = this;","    if (!this._isInitialized) {","        if (this._options.wakeUpOptions && this._options.wakeUpOptions.interval > 0) {","            this._wakeUp = new WakeUp(this._knownRunningInstances, this._persistence, this._options.wakeUpOptions);","            this._wakeUp.on(\"continue\", function (i) { self._continueWokeUpInstance(i); });","            this._wakeUp.on(\"error\", function (e) { self.onWarn(e); });","            this._wakeUp.start();","        }","","        this._isInitialized = true;","    }","};","","WorkflowHost.prototype.stop = async(function*(workflowName, instanceId) {","    let self = this;","    let remove = function (instanceId) {","        let knownInsta = self._knownRunningInstances.get(workflowName, instanceId);","        if (knownInsta) {","            debug(\"Removing instance: %s\", instanceId);","            self._deleteWFInstance(knownInsta);","            self.onEnd(knownInsta, undefined, true);","        }","    };","","    debug(\"Stopping workflow '%s' with id: '%s'.\", workflowName, instanceId);","","    try {","        if (this._persistence) {","            let lockName = specStrings.hosting.doubleKeys(workflowName, instanceId);","            let lockInfo;","            debug(\"Locking instance: %s\", instanceId);","            lockInfo = yield (this._persistence.enterLock(lockName, this.options.enterLockTimeout, this._inLockTimeout));","            let keepLockAlive = null;","            try {","                debug(\"Locked: %j\", lockInfo);","                keepLockAlive = new KeepLockAlive(this._persistence, lockInfo, this._inLockTimeout, this.options.lockRenewalTimeout);","","                // Do stuff:","                yield this._persistence.removeState(workflowName, instanceId, false, \"STOPPED.\");","                remove(instanceId);","","                debug(\"Removed: %s\", instanceId);","            }","            catch (e) {","                debug(\"Error: %s\", e.stack);","                throw e;","            }","            finally {","                // Unlock:","                debug(\"Unlocking.\");","                if (keepLockAlive) {","                    keepLockAlive.end();","                }","                yield this._persistence.exitLock(lockInfo.id);","            }","        }","        else {","            remove(instanceId);","        }","    }","    catch (e) {","        debug(\"Error: %s\", e.stack);","        throw new errors.WorkflowError(`Cannot stop instance of workflow '${workflowName}' with id: '${instanceId}' because of an internal error:\\n${e.stack}`);","    }","});","","WorkflowHost.prototype.stopDeprecatedVersions = async(function* (workflowName) {","    this._verify();","    debug(\"Stopping outdated versions of workflow '%s'.\", workflowName);","","","","    let count = 0;","    let currentVersion = this._registry.getCurrentVersion(workflowName);","    if (currentVersion) {","        let oldVersionHeaders = yield this._getRunningInstanceHeadersForOtherVersion(workflowName, currentVersion);","        if (oldVersionHeaders.length) {","            debug(\"There is %d old version running. Stopping them.\", oldVersionHeaders.length);","            for (let header of oldVersionHeaders) {","                debug(\"Stopping workflow '%s' of version '%s' with id: '%s'.\", header.workflowName, header.workflowVersion, header.instanceId);","                yield this.stop(workflowName, header.instanceId);","            }","        }","    }","    else {","        debug(\"There is no workflow registered by name '%s'.\", workflowName);","    }","    return count;","});","","WorkflowHost.prototype.invokeMethod = async(function* (workflowName, methodName, args) {","    this._verify();","    debug(\"Invoking method: '%s' of workflow: '%s' by arguments '%j'\", workflowName, methodName, args);","","    if (!_(workflowName).isString()) {","        throw new TypeError(\"Argument 'workflowName' is not a string.\");","    }","    workflowName = workflowName.trim();","    if (!_(methodName).isString()) {","        throw new TypeError(\"Argument 'methodName' is not a string.\");","    }","    methodName = methodName.trim();","","    if (!_.isUndefined(args) && !_.isArray(args)) {","        args = [args];","    }","","    let self = this;","","    self._initialize();","","    let instanceId = null;","    let creatable = null;","","    let results = [];","    for (let info of self._registry.methodInfos(workflowName, methodName)) {","        let tryId = self._instanceIdParser.parse(info.instanceIdPath, args);","        if (!_.isUndefined(tryId)) {","            results.push(","                {","                    info: info,","                    id: tryId","                });","        }","    }","    if (process.env.NODE_ENV !== \"production\") {","        debug(\"Possible methods: %j\",","            _(results)","                .map(function (r) {","                    return {","                        workflow: {","                            name: r.info.execContext.rootActivity.name,","                            version: r.info.version","                        },","                        id: r.id","                    };","                })","                .toArray());","    }","","    for (let i = 0; i < results.length; i++) {","        let result = results[i];","        // That finds the latest version:","        if (result.info.canCreateInstance && !result.info.deprecated) {","            creatable = result.info;","        }","        // That finds a running instance with the id:","        if (_.isNull(instanceId) && (yield self._checkIfInstanceRunning(workflowName, result.id))) {","            instanceId = result.id;","            break;","        }","    }","","    if (instanceId) {","        debug(\"Found a continuable instance id: %s. Invoking method on that.\", instanceId);","        try {","            let ir = yield (self._invokeMethodOnRunningInstance(instanceId, workflowName, methodName, args));","            debug(\"Invoke completed, result: %j\", ir);","            return ir;","        }","        catch (e) {","            debug(\"Invoke failed: %s\", e.stack);","            throw e;","        }","    }","    else if (creatable) {","        debug(\"Found a creatable workflow (name: '%s', version: '%s'), invoking a create method on that.\", creatable.execContext.rootActivity.name, creatable.version);","        try {","            let cr = yield (self._createInstanceAndInvokeMethod(creatable.execContext, creatable.version, methodName, args));","            debug(\"Create completed, result: %j\", cr);","            return cr;","        }","        catch (e) {","            debug(\"Create failed: %s\", e.stack);","            throw e;","        }","    }","    else {","        debug(\"No continuable workflows have been found.\");","        throw new errors.MethodNotFoundError(\"Cannot create or continue workflow '\" + workflowName + \"' by calling method '\" + methodName + \"'.\");","    }","});","","WorkflowHost.prototype._createInstanceAndInvokeMethod = async(function* (execContext, workflowVersion, methodName, args) {","    let workflowName = execContext.rootActivity.name;","","    let lockInfo = null;","","    if (!this._persistence) {","        let insta = this._createWFInstance();","        let result = yield (insta.create(execContext, workflowVersion, methodName, args, lockInfo));","        this._knownRunningInstances.add(workflowName, insta);","        this.onStart(insta, methodName, args);","        return result;","    }","    else {","        lockInfo = {","            id: null,","            name: null,","            heldTo: null","        };","        // When lock will held, then we should keep it alive:","        let keepLockAlive = new KeepLockAlive(this._persistence, lockInfo, this._inLockTimeout, this.options.lockRenewalTimeout);","        try {","            let insta = this._createWFInstance();","            let result = yield (insta.create(execContext, workflowVersion, methodName, args, lockInfo));","","            if (insta.execState === enums.activityStates.idle) {","                this._knownRunningInstances.add(workflowName, insta);","","                // Persist and unlock:","                let err = null;","                try {","                    yield this._persistence.persistState(insta);","                    this.onStart(insta, methodName, args);","                }","                catch (e) {","                    debug(\"Cannot persist instance of workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + e.stack);","                    this._knownRunningInstances.remove(workflowName, insta.id);","                    err = e;","                }","                try {","                    yield this._persistence.exitLock(lockInfo.id);","                }","                catch (e) {","                    debug(\"Cannot exit lock of workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + e.stack);","                    this.onWarn(e);","                }","                if (err) {","                    throw err;","                }","","                return result;","            }","            else {","                return result;","            }","        }","        finally {","            keepLockAlive.end();","        }","    }","});","","WorkflowHost.prototype._throwIfRecoverable = function (error, workflowName, methodName) {","    if (error instanceof errors.MethodIsNotAccessibleError) {","        debug(\"Method '%s' of workflow '%s' is not accessible at the current state, bacause it might be stepped on another instance to another state tha is exists at current in this host. Client should retry.\", methodName, workflowName);","        throw error;","    }","};","","WorkflowHost.prototype._invokeMethodOnRunningInstance = async(function* (instanceId, workflowName, methodName, args) {","    let self = this;","","    if (!self._persistence) {","        let insta = yield (self._verifyAndRestoreInstanceState(instanceId, workflowName, methodName, args));","        try {","            let result = yield (insta.callMethod(methodName, args));","            if (insta.execState === enums.activityStates.idle) {","                this.onInvoke(insta, methodName, args, result, true, null);","                return result;","            }","            else if (insta.execState === enums.activityStates.complete) {","                self._deleteWFInstance(insta);","                this.onInvoke(insta, methodName, args, result, false, null);","                this.onEnd(insta, result, false, null);","                return result;","            }","            else {","                throw new errors.WorkflowError(\"Instance '\" + insta.id + \"' is in an invalid state '\" + insta.execState + \"' after invocation of the method '\" + methodName + \"'.\");","            }","        }","        catch (e) {","            this._throwIfRecoverable(e, workflowName, methodName);","            self._deleteWFInstance(insta);","            this.onInvoke(insta, methodName, args, undefined, false, e);","            this.onEnd(insta, undefined, false, e);","            throw e;","        }","    }","    else {","        // Lock it:","        let lockName = specStrings.hosting.doubleKeys(workflowName, instanceId);","        let lockInfo;","        let keepLockAlive = null;","        try {","            debug(\"Locking instance.\");","            lockInfo = yield (self._persistence.enterLock(lockName, self.options.enterLockTimeout, self._inLockTimeout));","            debug(\"Locked: %j\", lockInfo);","","            // When lock will held, then we should keep it alive:","            keepLockAlive = new KeepLockAlive(self._persistence, lockInfo, self._inLockTimeout, self.options.lockRenewalTimeout);","","            // LOCKED","            let insta = yield (self._verifyAndRestoreInstanceState(instanceId, workflowName, methodName, args));","            let endWithError = async(function*(e) {","                self._deleteWFInstance(insta);","                try {","                    yield (self._persistence.removeState(workflowName, insta.id, false, e));","                }","                catch (removeE) {","                    debug(\"Cannot remove state of workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + removeE.stack);","                    self.onWarn(removeE);","                }","                self.onInvoke(insta, methodName, args, undefined, false, e);","                self.onEnd(insta, undefined, false, e);","            });","            try {","                let persistAndUnlock = function () {","                    return self._persistence.persistState(insta)","                        .finally(function () {","                            debug(\"Unlocking: %j\", lockInfo);","                            return self._persistence.exitLock(lockInfo.id)","                                .then(function () {","                                    debug(\"Unlocked.\");","                                },","                                function (e) {","                                    debug(\"Cannot exit lock for workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + e.stack);","                                    self.onWarn(e);","                                })","                                .finally(function () {","                                    keepLockAlive.end();","                                });","                        });","                };","                let result = yield (insta.callMethod(methodName, args));","                if (insta.execState === enums.activityStates.idle) {","                    // Persist and unlock:","                    if (self.options.lazyPersistence) {","                        setImmediate(function () {","                            persistAndUnlock()","                                .then(function () {","                                    self.onInvoke(insta, methodName, args, result, true, null);","                                },","                                function(e) {","                                    endWithError(e);","                                });","                        });","                    }","                    else {","                        yield persistAndUnlock();","                        this.onInvoke(insta, methodName, args, result, true, null);","                    }","","                    return result;","                }","                else if (insta.execState === enums.activityStates.complete) {","                    self._deleteWFInstance(insta);","                    this.onInvoke(insta, methodName, args, result, false, null);","                    this.onEnd(insta, result, false, null);","                    try {","                        try {","                            yield self._persistence.removeState(workflowName, insta.id, true);","                        }","                        catch (e) {","                            debug(\"Cannot remove state of workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + e.stack);","                            this.onWarn(e);","                        }","","                        try {","                            yield self._persistence.exitLock(lockInfo.id);","                        }","                        catch (e) {","                            debug(\"Cannot exit lock of workflow name: '\" + workflowName + \"' instance id '\" + insta.id + \"':\\n\" + e.stack);","                            this.onWarn(e);","                        }","                    }","                    finally {","                        keepLockAlive.end();","                    }","                    return result;","                }","                else {","                    throw new errors.WorkflowError(\"Instance '\" + insta.id + \"' is in an invalid state '\" + insta.execState + \"' after invocation of the method '\" + methodName + \"'.\");","                }","            }","            catch (e) {","                this._throwIfRecoverable(e, workflowName, methodName);","                yield endWithError(e);","                throw e;","            }","        }","        catch (e) {","            if (keepLockAlive) {","                keepLockAlive.end();","            }","            if (lockInfo) {","                try {","                    yield self._persistence.exitLock(lockInfo.id);","                }","                catch (exitE) {","                    debug(\"Cannot exit lock '\" + lockInfo.id + \"':\\n\" + exitE.stack);","                    this.onWarn(exitE);","                }","            }","            if (e instanceof errors.TimeoutError) {","                let msg = \"Cannot call method of workflow '\" + workflowName + \"', because '\" + methodName + \"' is locked.\";","                debug(msg);","                throw new errors.MethodIsNotAccessibleError(msg);","            }","            throw e;","        }","    }","});","","WorkflowHost.prototype._enterLockForCreatedInstance = async(function* (insta, lockInfo) {","    let li = yield (this._persistence.enterLock(specStrings.hosting.doubleKeys(insta.workflowName, insta.id), this.options.enterLockTimeout, this._getInLockTimeout()));","    if (yield (this._persistence.isRunning(insta.workflowName, insta.id))) {","        throw new errors.WorkflowError(\"Cannot create instance of workflow '\" + insta.workflowName + \"' by id '\" + insta.id + \"' because it's already exists.\");","    }","    lockInfo.id = li.id;","    lockInfo.name = li.name;","    lockInfo.heldTo = li.heldTo;","});","","WorkflowHost.prototype._getInLockTimeout = function () {","    return this.options.lockRenewalTimeout + Math.max(this.options.lockRenewalTimeout * 0.4, 3000);","};","","WorkflowHost.prototype._verifyAndRestoreInstanceState = async(function* (instanceId, workflowName, methodName, args) {","    let self = this;","    let insta = null;","    if (self._persistence) {","        let header = yield (self._persistence.getRunningInstanceIdHeader(workflowName, instanceId));","        if (header) {","            insta = yield (self._restoreInstanceState(instanceId, workflowName, header.workflowVersion, header.updatedOn));","        }","    }","    else {","        insta = self._knownRunningInstances.get(workflowName, instanceId);","    }","    if (!insta) {","        throw new errors.WorkflowNotFoundError(`Worflow (name: '${workflowName}', id: '${instanceId}') has been deleted since the lock has been taken.`);","    }","","    return insta;","});","","WorkflowHost.prototype._restoreInstanceState = async(function* (instanceId, workflowName, workflowVersion, actualTimestamp) {","    let self = this;","","    if (!self._persistence) {","        throw new Error(\"Cannot restore instance from persistence, because host has no persistence registered.\");","    }","","    let insta = self._knownRunningInstances.get(workflowName, instanceId);","    if (_.isUndefined(insta)) {","        let wfDesc = self._registry.getDesc(workflowName, workflowVersion);","        insta = self._createWFInstance();","        insta.setWorkflow(wfDesc.execContext, workflowVersion, instanceId);","    }","","    if (insta.updatedOn === null || insta.updatedOn.getTime() !== actualTimestamp.getTime() || self.options.alwaysLoadState) {","        let state = yield (self._persistence.loadState(workflowName, instanceId));","        insta.restoreState(state);","        return insta;","    }","    else {","        return insta;","    }","});","","WorkflowHost.prototype._checkIfInstanceRunning = async(function* (workflowName, instanceId) {","    if (this._persistence) {","        return (yield this._persistence.isRunning(workflowName, instanceId));","    }","    return this._knownRunningInstances.exists(workflowName, instanceId);","});","","WorkflowHost.prototype._getRunningInstanceHeadersForOtherVersion = async(function* (workflowName, version) {","    if (this._persistence) {","        return (yield this._persistence.getRunningInstanceHeadersForOtherVersion(workflowName, version));","    }","    return this._knownRunningInstances.getRunningInstanceHeadersForOtherVersion(workflowName, version);","});","","WorkflowHost.prototype.addTracker = function (tracker) {","    this._verify();","","    if (!_.isObject(tracker)) {","        throw new TypeError(\"Argument is not an object.\");","    }","    this._trackers.push(tracker);","    this._knownRunningInstances.addTracker(tracker);","};","","/* Wake Up*/","","WorkflowHost.prototype._continueWokeUpInstance = async(function*(wakeupable) {","    if (this._shutdown) {","        wakeupable.result.resolve();","        return;","    }","    if (!this._persistence) {","        wakeupable.result.reject(new errors.WorkflowError(\"Handling Delays in host is not supported without persistence.\"));","        return;","    }","","    assert(_.isPlainObject(wakeupable));","    assert(_.isString(wakeupable.instanceId));","    assert(_.isString(wakeupable.workflowName));","    assert(_.isPlainObject(wakeupable.activeDelay));","    assert(_.isString(wakeupable.activeDelay.methodName));","    assert(_.isDate(wakeupable.activeDelay.delayTo));","    assert(_.isFunction(wakeupable.result.resolve));","    assert(_.isFunction(wakeupable.result.reject));","","    try {","        //instanceId, workflowName, methodName, args","        debug(\"Invoking DelayTo instanceId: %s, workflowName:%s, methodName: %s\", wakeupable.instanceId, wakeupable.workflowName, wakeupable.activeDelay.methodName);","        let result = yield this._invokeMethodOnRunningInstance(wakeupable.instanceId, wakeupable.workflowName, wakeupable.activeDelay.methodName, [wakeupable.instanceId, wakeupable.activeDelay.delayTo]);","        debug(\"DelayTo instanceId: %s, workflowName:%s, methodName: %s invoked.\", wakeupable.instanceId, wakeupable.workflowName, wakeupable.activeDelay.methodName);","        wakeupable.result.resolve();","    }","    catch (e) {","        if (e instanceof errors.MethodIsNotAccessibleError || e instanceof errors.WorkflowNotFoundError) {","            debug(\"DelayTo's method is not accessible since it got selected for continuation.\");","            wakeupable.result.resolve();","            return;","        }","        debug(\"DelayTo instanceId: %s, workflowName:%s, methodName: %s error: %s\", wakeupable.instanceId, wakeupable.workflowName, wakeupable.activeDelay.methodName, e.stack);","        wakeupable.result.reject(e);","    }","});","","WorkflowHost.prototype._createWFInstance = function () {","    let self = this;","    let insta = new WorkflowInstance(this);","    insta.on(","        enums.events.workflowEvent,","        function (args) {","            self.onWorkflowEvent(args);","        });","    return insta;","};","","WorkflowHost.prototype._deleteWFInstance = function (insta) {","    insta.removeAllListeners();","    this._knownRunningInstances.remove(insta.workflowName, insta.id);","};","","/* Shutdown */","","WorkflowHost.prototype._verify = function () {","    if (this._shutdown) {","        throw new errors.WorkflowError(\"Workflow host has been shut down.\");","    }","};","","WorkflowHost.prototype.shutdown = function () {","    if (this._shutdown) {","        return;","    }","    if (this._wakeUp) {","        this._wakeUp.stop();","    }","    this._shutdown = true;","    this.removeAllListeners();","};","","module.exports = WorkflowHost;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"26":1,"27":0,"29":0,"45":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"54":0,"55":0,"56":0,"59":1,"61":1,"63":1,"64":0,"67":1,"68":0,"71":1,"72":0,"79":1,"80":0,"89":1,"90":0,"98":1,"102":0,"107":0,"112":0,"117":0,"122":0,"127":1,"128":0,"131":1,"132":0,"133":0,"134":0,"135":0,"138":1,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"148":0,"152":1,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"163":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"177":0,"178":0,"180":0,"183":0,"184":0,"188":0,"189":0,"190":0,"192":0,"196":0,"200":0,"201":0,"205":1,"206":0,"207":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"224":0,"226":0,"229":1,"230":0,"231":0,"233":0,"234":0,"236":0,"237":0,"238":0,"240":0,"242":0,"243":0,"246":0,"248":0,"250":0,"251":0,"253":0,"254":0,"255":0,"256":0,"257":0,"264":0,"265":0,"268":0,"279":0,"280":0,"282":0,"283":0,"286":0,"287":0,"288":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"300":0,"301":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"312":0,"313":0,"317":0,"318":0,"322":1,"323":0,"325":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"335":0,"341":0,"342":0,"343":0,"344":0,"346":0,"347":0,"350":0,"351":0,"352":0,"353":0,"356":0,"357":0,"358":0,"360":0,"361":0,"364":0,"365":0,"367":0,"368":0,"371":0,"374":0,"378":0,"383":1,"384":0,"385":0,"386":0,"390":1,"391":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"401":0,"402":0,"403":0,"404":0,"405":0,"408":0,"412":0,"413":0,"414":0,"415":0,"416":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"430":0,"433":0,"434":0,"435":0,"436":0,"437":0,"440":0,"441":0,"443":0,"444":0,"446":0,"447":0,"448":0,"450":0,"451":0,"453":0,"456":0,"457":0,"460":0,"464":0,"465":0,"467":0,"468":0,"469":0,"471":0,"474":0,"479":0,"480":0,"483":0,"485":0,"486":0,"487":0,"488":0,"489":0,"490":0,"491":0,"494":0,"495":0,"498":0,"499":0,"502":0,"503":0,"507":0,"509":0,"512":0,"516":0,"517":0,"518":0,"522":0,"523":0,"525":0,"526":0,"527":0,"530":0,"531":0,"534":0,"535":0,"536":0,"537":0,"539":0,"544":1,"545":0,"546":0,"547":0,"549":0,"550":0,"551":0,"554":1,"555":0,"558":1,"559":0,"560":0,"561":0,"562":0,"563":0,"564":0,"568":0,"570":0,"571":0,"574":0,"577":1,"578":0,"580":0,"581":0,"584":0,"585":0,"586":0,"587":0,"588":0,"591":0,"592":0,"593":0,"594":0,"597":0,"601":1,"602":0,"603":0,"605":0,"608":1,"609":0,"610":0,"612":0,"615":1,"616":0,"618":0,"619":0,"621":0,"622":0,"627":1,"628":0,"629":0,"630":0,"632":0,"633":0,"634":0,"637":0,"638":0,"639":0,"640":0,"641":0,"642":0,"643":0,"644":0,"646":0,"648":0,"649":0,"650":0,"651":0,"654":0,"655":0,"656":0,"657":0,"659":0,"660":0,"664":1,"665":0,"666":0,"667":0,"670":0,"672":0,"675":1,"676":0,"677":0,"682":1,"683":0,"684":0,"688":1,"689":0,"690":0,"692":0,"693":0,"695":0,"696":0,"699":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowRegistry.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowRegistry.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1,"109":0,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0,0],"35":[0,0],"36":[0,0],"37":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"WorkflowRegistry","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":38},"end":{"line":19,"column":70}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":37},"end":{"line":66,"column":62}}},"4":{"name":"(anonymous_4)","line":93,"loc":{"start":{"line":93,"column":47},"end":{"line":93,"column":71}}},"5":{"name":"(anonymous_5)","line":111,"loc":{"start":{"line":111,"column":41},"end":{"line":111,"column":91}}},"6":{"name":"(anonymous_6)","line":121,"loc":{"start":{"line":121,"column":49},"end":{"line":121,"column":81}}},"7":{"name":"(anonymous_7)","line":167,"loc":{"start":{"line":167,"column":41},"end":{"line":167,"column":78}}},"8":{"name":"(anonymous_8)","line":179,"loc":{"start":{"line":179,"column":45},"end":{"line":179,"column":67}}},"9":{"name":"add","line":183,"loc":{"start":{"line":183,"column":4},"end":{"line":183,"column":24}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":55}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":51}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":81}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":61}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":60}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":31}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"11":{"start":{"line":14,"column":0},"end":{"line":17,"column":1}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":32}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":54}},"14":{"start":{"line":19,"column":0},"end":{"line":64,"column":2}},"15":{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},"16":{"start":{"line":21,"column":8},"end":{"line":21,"column":50}},"17":{"start":{"line":23,"column":4},"end":{"line":63,"column":5}},"18":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"19":{"start":{"line":25,"column":12},"end":{"line":25,"column":66}},"20":{"start":{"line":27,"column":8},"end":{"line":27,"column":40}},"21":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"22":{"start":{"line":29,"column":12},"end":{"line":29,"column":59}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":57}},"24":{"start":{"line":32,"column":8},"end":{"line":32,"column":41}},"25":{"start":{"line":33,"column":8},"end":{"line":33,"column":56}},"26":{"start":{"line":34,"column":8},"end":{"line":34,"column":46}},"27":{"start":{"line":35,"column":8},"end":{"line":35,"column":17}},"28":{"start":{"line":36,"column":8},"end":{"line":58,"column":9}},"29":{"start":{"line":37,"column":12},"end":{"line":37,"column":38}},"30":{"start":{"line":38,"column":12},"end":{"line":51,"column":13}},"31":{"start":{"line":39,"column":16},"end":{"line":39,"column":95}},"32":{"start":{"line":42,"column":16},"end":{"line":48,"column":17}},"33":{"start":{"line":43,"column":20},"end":{"line":47,"column":21}},"34":{"start":{"line":44,"column":24},"end":{"line":46,"column":25}},"35":{"start":{"line":45,"column":28},"end":{"line":45,"column":135}},"36":{"start":{"line":49,"column":16},"end":{"line":49,"column":80}},"37":{"start":{"line":50,"column":16},"end":{"line":50,"column":41}},"38":{"start":{"line":54,"column":12},"end":{"line":54,"column":30}},"39":{"start":{"line":55,"column":12},"end":{"line":55,"column":76}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":37}},"41":{"start":{"line":57,"column":12},"end":{"line":57,"column":45}},"42":{"start":{"line":59,"column":8},"end":{"line":59,"column":20}},"43":{"start":{"line":62,"column":8},"end":{"line":62,"column":68}},"44":{"start":{"line":66,"column":0},"end":{"line":91,"column":2}},"45":{"start":{"line":67,"column":4},"end":{"line":67,"column":42}},"46":{"start":{"line":68,"column":4},"end":{"line":90,"column":5}},"47":{"start":{"line":69,"column":8},"end":{"line":89,"column":9}},"48":{"start":{"line":70,"column":12},"end":{"line":70,"column":42}},"49":{"start":{"line":71,"column":12},"end":{"line":73,"column":13}},"50":{"start":{"line":72,"column":16},"end":{"line":72,"column":28}},"51":{"start":{"line":74,"column":12},"end":{"line":74,"column":105}},"52":{"start":{"line":78,"column":12},"end":{"line":78,"column":28}},"53":{"start":{"line":79,"column":12},"end":{"line":84,"column":13}},"54":{"start":{"line":80,"column":16},"end":{"line":83,"column":17}},"55":{"start":{"line":81,"column":20},"end":{"line":81,"column":29}},"56":{"start":{"line":82,"column":20},"end":{"line":82,"column":26}},"57":{"start":{"line":85,"column":12},"end":{"line":87,"column":13}},"58":{"start":{"line":86,"column":16},"end":{"line":86,"column":28}},"59":{"start":{"line":88,"column":12},"end":{"line":88,"column":100}},"60":{"start":{"line":93,"column":0},"end":{"line":109,"column":2}},"61":{"start":{"line":94,"column":4},"end":{"line":94,"column":20}},"62":{"start":{"line":95,"column":4},"end":{"line":95,"column":50}},"63":{"start":{"line":96,"column":4},"end":{"line":107,"column":5}},"64":{"start":{"line":97,"column":8},"end":{"line":97,"column":24}},"65":{"start":{"line":98,"column":8},"end":{"line":103,"column":9}},"66":{"start":{"line":99,"column":12},"end":{"line":102,"column":13}},"67":{"start":{"line":100,"column":16},"end":{"line":100,"column":25}},"68":{"start":{"line":101,"column":16},"end":{"line":101,"column":22}},"69":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"70":{"start":{"line":105,"column":12},"end":{"line":105,"column":32}},"71":{"start":{"line":108,"column":4},"end":{"line":108,"column":16}},"72":{"start":{"line":111,"column":0},"end":{"line":119,"column":2}},"73":{"start":{"line":112,"column":4},"end":{"line":118,"column":6}},"74":{"start":{"line":121,"column":0},"end":{"line":165,"column":2}},"75":{"start":{"line":122,"column":4},"end":{"line":122,"column":20}},"76":{"start":{"line":123,"column":4},"end":{"line":123,"column":26}},"77":{"start":{"line":124,"column":4},"end":{"line":124,"column":44}},"78":{"start":{"line":125,"column":4},"end":{"line":157,"column":5}},"79":{"start":{"line":126,"column":8},"end":{"line":126,"column":48}},"80":{"start":{"line":127,"column":8},"end":{"line":127,"column":46}},"81":{"start":{"line":128,"column":8},"end":{"line":156,"column":9}},"82":{"start":{"line":129,"column":12},"end":{"line":129,"column":91}},"83":{"start":{"line":130,"column":12},"end":{"line":130,"column":103}},"84":{"start":{"line":131,"column":12},"end":{"line":155,"column":13}},"85":{"start":{"line":132,"column":16},"end":{"line":132,"column":49}},"86":{"start":{"line":133,"column":16},"end":{"line":141,"column":17}},"87":{"start":{"line":134,"column":20},"end":{"line":139,"column":22}},"88":{"start":{"line":140,"column":20},"end":{"line":140,"column":48}},"89":{"start":{"line":142,"column":16},"end":{"line":144,"column":17}},"90":{"start":{"line":143,"column":20},"end":{"line":143,"column":50}},"91":{"start":{"line":145,"column":16},"end":{"line":154,"column":17}},"92":{"start":{"line":146,"column":20},"end":{"line":153,"column":21}},"93":{"start":{"line":147,"column":24},"end":{"line":149,"column":25}},"94":{"start":{"line":148,"column":28},"end":{"line":148,"column":179}},"95":{"start":{"line":152,"column":24},"end":{"line":152,"column":61}},"96":{"start":{"line":158,"column":4},"end":{"line":158,"column":27}},"97":{"start":{"line":159,"column":4},"end":{"line":163,"column":5}},"98":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"99":{"start":{"line":161,"column":12},"end":{"line":161,"column":39}},"100":{"start":{"line":164,"column":4},"end":{"line":164,"column":18}},"101":{"start":{"line":167,"column":0},"end":{"line":177,"column":2}},"102":{"start":{"line":168,"column":4},"end":{"line":168,"column":50}},"103":{"start":{"line":169,"column":4},"end":{"line":176,"column":5}},"104":{"start":{"line":170,"column":8},"end":{"line":175,"column":9}},"105":{"start":{"line":171,"column":12},"end":{"line":171,"column":52}},"106":{"start":{"line":172,"column":12},"end":{"line":174,"column":13}},"107":{"start":{"line":173,"column":16},"end":{"line":173,"column":27}},"108":{"start":{"line":179,"column":0},"end":{"line":214,"column":2}},"109":{"start":{"line":180,"column":4},"end":{"line":180,"column":20}},"110":{"start":{"line":181,"column":4},"end":{"line":181,"column":44}},"111":{"start":{"line":182,"column":4},"end":{"line":182,"column":42}},"112":{"start":{"line":183,"column":4},"end":{"line":188,"column":5}},"113":{"start":{"line":184,"column":8},"end":{"line":187,"column":9}},"114":{"start":{"line":185,"column":12},"end":{"line":185,"column":54}},"115":{"start":{"line":186,"column":12},"end":{"line":186,"column":30}},"116":{"start":{"line":189,"column":4},"end":{"line":212,"column":5}},"117":{"start":{"line":190,"column":8},"end":{"line":190,"column":54}},"118":{"start":{"line":191,"column":8},"end":{"line":191,"column":22}},"119":{"start":{"line":192,"column":8},"end":{"line":192,"column":19}},"120":{"start":{"line":193,"column":8},"end":{"line":211,"column":9}},"121":{"start":{"line":194,"column":12},"end":{"line":210,"column":13}},"122":{"start":{"line":197,"column":16},"end":{"line":197,"column":42}},"123":{"start":{"line":198,"column":16},"end":{"line":209,"column":17}},"124":{"start":{"line":199,"column":20},"end":{"line":208,"column":21}},"125":{"start":{"line":200,"column":24},"end":{"line":204,"column":25}},"126":{"start":{"line":201,"column":28},"end":{"line":203,"column":29}},"127":{"start":{"line":202,"column":32},"end":{"line":202,"column":43}},"128":{"start":{"line":207,"column":24},"end":{"line":207,"column":35}},"129":{"start":{"line":213,"column":4},"end":{"line":213,"column":29}},"130":{"start":{"line":216,"column":0},"end":{"line":216,"column":34}}},"branchMap":{"1":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":23},"end":{"line":16,"column":33}},{"start":{"line":16,"column":37},"end":{"line":16,"column":53}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"3":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":8}},{"start":{"line":24,"column":8},"end":{"line":24,"column":8}}]},"5":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":8}},{"start":{"line":28,"column":8},"end":{"line":28,"column":8}}]},"6":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":36,"column":8}},{"start":{"line":36,"column":8},"end":{"line":36,"column":8}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":12}},{"start":{"line":38,"column":12},"end":{"line":38,"column":12}}]},"8":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":42,"column":16}},{"start":{"line":42,"column":16},"end":{"line":42,"column":16}}]},"9":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":24},"end":{"line":44,"column":24}},{"start":{"line":44,"column":24},"end":{"line":44,"column":24}}]},"10":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"11":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"12":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"13":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":16},"end":{"line":80,"column":16}},{"start":{"line":80,"column":16},"end":{"line":80,"column":16}}]},"14":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"15":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"16":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":12},"end":{"line":99,"column":12}},{"start":{"line":99,"column":12},"end":{"line":99,"column":12}}]},"17":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":8}},{"start":{"line":104,"column":8},"end":{"line":104,"column":8}}]},"18":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"19":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":12},"end":{"line":128,"column":16}},{"start":{"line":128,"column":20},"end":{"line":128,"column":24}}]},"20":{"line":129,"type":"cond-expr","locations":[{"start":{"line":129,"column":60},"end":{"line":129,"column":83}},{"start":{"line":129,"column":86},"end":{"line":129,"column":90}}]},"21":{"line":130,"type":"cond-expr","locations":[{"start":{"line":130,"column":68},"end":{"line":130,"column":95}},{"start":{"line":130,"column":98},"end":{"line":130,"column":102}}]},"22":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":12},"end":{"line":131,"column":12}},{"start":{"line":131,"column":12},"end":{"line":131,"column":12}}]},"23":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":16},"end":{"line":133,"column":16}},{"start":{"line":133,"column":16},"end":{"line":133,"column":16}}]},"24":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":16},"end":{"line":142,"column":16}},{"start":{"line":142,"column":16},"end":{"line":142,"column":16}}]},"25":{"line":142,"type":"binary-expr","locations":[{"start":{"line":142,"column":20},"end":{"line":142,"column":24}},{"start":{"line":142,"column":28},"end":{"line":142,"column":51}}]},"26":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":16},"end":{"line":145,"column":16}},{"start":{"line":145,"column":16},"end":{"line":145,"column":16}}]},"27":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":20},"end":{"line":146,"column":20}},{"start":{"line":146,"column":20},"end":{"line":146,"column":20}}]},"28":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":24},"end":{"line":147,"column":24}},{"start":{"line":147,"column":24},"end":{"line":147,"column":24}}]},"29":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":160,"column":8}},{"start":{"line":160,"column":8},"end":{"line":160,"column":8}}]},"30":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":169,"column":4}},{"start":{"line":169,"column":4},"end":{"line":169,"column":4}}]},"31":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":12},"end":{"line":172,"column":12}},{"start":{"line":172,"column":12},"end":{"line":172,"column":12}}]},"32":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":8},"end":{"line":184,"column":8}},{"start":{"line":184,"column":8},"end":{"line":184,"column":8}}]},"33":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":12},"end":{"line":194,"column":12}},{"start":{"line":194,"column":12},"end":{"line":194,"column":12}}]},"34":{"line":194,"type":"binary-expr","locations":[{"start":{"line":194,"column":16},"end":{"line":194,"column":44}},{"start":{"line":195,"column":16},"end":{"line":195,"column":54}},{"start":{"line":196,"column":16},"end":{"line":196,"column":58}}]},"35":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":16},"end":{"line":198,"column":16}},{"start":{"line":198,"column":16},"end":{"line":198,"column":16}}]},"36":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":20},"end":{"line":199,"column":20}},{"start":{"line":199,"column":20},"end":{"line":199,"column":20}}]},"37":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":28},"end":{"line":201,"column":28}},{"start":{"line":201,"column":28},"end":{"line":201,"column":28}}]}},"code":["\"use strict\";","","let Workflow = require(\"../activities/workflow\");","let _ = require(\"lodash\");","let BeginMethod = require(\"../activities/beginMethod\");","let EndMethod = require(\"../activities/endMethod\");","let is = require(\"../common/is\");","let ActivityExecutionContext = require(\"../activities/activityExecutionContext\");","let activityMarkup = require(\"../activities/activityMarkup\");","let Serializer = require(\"backpack-node\").system.Serializer;","let crypto = require(\"crypto\");","let assert = require(\"better-assert\");","","function WorkflowRegistry(serializer) {","    this._workflows = new Map();","    this._serializer = serializer || new Serializer();","}","","WorkflowRegistry.prototype.register = function (workflow, deprecated) {","    if (_.isPlainObject(workflow)) {","        workflow = activityMarkup.parse(workflow);","    }","    if (workflow instanceof Workflow) {","        if (!_(workflow.name).isString()) {","            throw new TypeError(\"Workflow name is not a string.\");","        }","        let name = workflow.name.trim();","        if (!name) {","            throw new TypeError(\"Workflow name is empty.\");","        }","        let execContext = new ActivityExecutionContext();","        execContext.initialize(workflow);","        let version = this._computeVersion(execContext);","        let entry = this._workflows.get(name);","        let desc;","        if (entry) {","            desc = entry.get(version);","            if (desc) {","                throw new Error(\"Workflow \" + name + \" (\" + version + \") already registered.\");","            }","            else {","                if (!deprecated) {","                    for (desc of entry.values()) {","                        if (!desc.deprecated) {","                            throw new Error(\"Workflow \" + name + \" (\" + version + \") has an already registered undeprecated version.\");","                        }","                    }","                }","                desc = this._createDesc(execContext, name, version, deprecated);","                entry.set(version, desc);","            }","        }","        else {","            entry = new Map();","            desc = this._createDesc(execContext, name, version, deprecated);","            entry.set(version, desc);","            this._workflows.set(name, entry);","        }","        return desc;","    }","    else {","        throw new TypeError(\"Workflow instance argument expected.\");","    }","};","","WorkflowRegistry.prototype.getDesc = function (name, version) {","    let entry = this._workflows.get(name);","    if (entry) {","        if (!_.isUndefined(version)) {","            let desc = entry.get(version);","            if (desc) {","                return desc;","            }","            throw new Error(\"Workflow \" + name + \" of version \" + version + \" has not been registered.\");","        }","        else {","            // Get undeprecated","            let desc = null;","            for (let d of entry.values()) {","                if (!d.deprecated) {","                    desc = d;","                    break;","                }","            }","            if (desc) {","                return desc;","            }","            throw new Error(\"Workflow \" + name + \" hasn't got an undeprecated version registered.\");","        }","    }","};","","WorkflowRegistry.prototype.getCurrentVersion = function (workflowName) {","    let result = [];","    let entry = this._workflows.get(workflowName);","    if (entry) {","        let desc = null;","        for (let d of entry.values()) {","            if (!d.deprecated) {","                desc = d;","                break;","            }","        }","        if (desc) {","            return desc.version;","        }","    }","    return null;","};","","WorkflowRegistry.prototype._createDesc = function (execContext, name, version, deprecated) {","    return {","        execContext: execContext,","        name: name,","        version: version,","        methods: this._collectMethodInfos(execContext, version),","        deprecated: deprecated","    };","};","","WorkflowRegistry.prototype._collectMethodInfos = function (execContext, version) {","    let self = this;","    let infos = new Map();","    let workflow = execContext.rootActivity;","    for (let child of workflow.children(execContext)) {","        let isBM = child instanceof BeginMethod;","        let isEM = child instanceof EndMethod;","        if (isBM || isEM) {","            let methodName = _.isString(child.methodName) ? child.methodName.trim() : null;","            let instanceIdPath = _.isString(child.instanceIdPath) ? child.instanceIdPath.trim() : null;","            if (methodName) {","                let info = infos.get(methodName);","                if (!info) {","                    info = {","                        execContext: execContext,","                        version: version,","                        canCreateInstance: false,","                        instanceIdPath: null","                    };","                    infos.set(methodName, info);","                }","                if (isBM && child.canCreateInstance) {","                    info.canCreateInstance = true;","                }","                if (instanceIdPath) {","                    if (info.instanceIdPath) {","                        if (info.instanceIdPath !== instanceIdPath) {","                            throw new Error(\"Method '\" + methodName + \"' in workflow '\" + workflow.name + \"' has multiple different instanceIdPath value which is not supported.\");","                        }","                    }","                    else {","                        info.instanceIdPath = instanceIdPath;","                    }","                }","            }","        }","    }","    let result = new Map();","    for (let kvp of infos.entries()) {","        if (kvp[1].instanceIdPath) {","            result.set(kvp[0], kvp[1]);","        }","    }","    return result;","};","","WorkflowRegistry.prototype.methodInfos = function* (workflowName, methodName) {","    let entry = this._workflows.get(workflowName);","    if (entry) {","        for (let desc of entry.values()) {","            let info = desc.methods.get(methodName);","            if (info) {","                yield info;","            }","        }","    }","};","","WorkflowRegistry.prototype._computeVersion = function(execContext) {","    let self = this;","    let workflow = execContext.rootActivity;","    let sha = crypto.createHash(\"sha256\");","    function add(value) {","        if (!_.isNull(value)) {","            value = self._serializer.stringify(value);","            sha.update(value);","        }","    }","    for (let activity of workflow.all(execContext)) {","        let alias = activityMarkup.getAlias(activity);","        assert(alias);","        add(alias);","        for (let key in activity) {","            if (activity.hasOwnProperty(key) &&","                !activity.nonScopedProperties.has(key) &&","                !activity.nonSerializedProperties.has(key)) {","                let value = activity[key];","                if (!is.activity(value)) {","                    if (_.isArray(value)) {","                        for (let item of value) {","                            if (!is.activity(item)) {","                                add(value);","                            }","                        }","                    }","                    else {","                        add(value);","                    }","                }","            }","        }","    }","    return sha.digest(\"hex\");","};","","module.exports = WorkflowRegistry;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"14":1,"15":0,"16":0,"19":1,"20":0,"21":0,"23":0,"24":0,"25":0,"27":0,"28":0,"29":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"42":0,"43":0,"44":0,"45":0,"49":0,"50":0,"54":0,"55":0,"56":0,"57":0,"59":0,"62":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"74":0,"78":0,"79":0,"80":0,"81":0,"82":0,"85":0,"86":0,"88":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"104":0,"105":0,"108":0,"111":1,"112":0,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"140":0,"142":0,"143":0,"145":0,"146":0,"147":0,"148":0,"152":0,"158":0,"159":0,"160":0,"161":0,"164":0,"167":1,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"179":1,"180":0,"181":0,"182":0,"183":1,"184":0,"185":0,"186":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"207":0,"213":0,"216":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowPersistence.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowPersistence.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":1},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"WorkflowPersistence","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":35}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":99}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":20}}},"4":{"name":"(anonymous_4)","line":29,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":28}}},"5":{"name":"(anonymous_5)","line":33,"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":20}}},"6":{"name":"(anonymous_6)","line":39,"loc":{"start":{"line":39,"column":42},"end":{"line":39,"column":77}}},"7":{"name":"(anonymous_7)","line":46,"loc":{"start":{"line":46,"column":41},"end":{"line":46,"column":59}}},"8":{"name":"(anonymous_8)","line":52,"loc":{"start":{"line":52,"column":42},"end":{"line":52,"column":78}}},"9":{"name":"(anonymous_9)","line":59,"loc":{"start":{"line":59,"column":45},"end":{"line":59,"column":65}}},"10":{"name":"(anonymous_10)","line":66,"loc":{"start":{"line":66,"column":59},"end":{"line":66,"column":95}}},"11":{"name":"(anonymous_11)","line":73,"loc":{"start":{"line":73,"column":48},"end":{"line":73,"column":85}}},"12":{"name":"(anonymous_12)","line":85,"loc":{"start":{"line":85,"column":44},"end":{"line":85,"column":98}}},"13":{"name":"(anonymous_13)","line":93,"loc":{"start":{"line":93,"column":55},"end":{"line":93,"column":91}}},"14":{"name":"(anonymous_14)","line":100,"loc":{"start":{"line":100,"column":51},"end":{"line":100,"column":68}}},"15":{"name":"(anonymous_15)","line":106,"loc":{"start":{"line":106,"column":73},"end":{"line":106,"column":105}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":53}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":53}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":35}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":38}},"8":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":29}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":22}},"11":{"start":{"line":17,"column":0},"end":{"line":37,"column":2}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":33}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":43}},"14":{"start":{"line":20,"column":4},"end":{"line":20,"column":39}},"15":{"start":{"line":21,"column":4},"end":{"line":21,"column":40}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"17":{"start":{"line":24,"column":4},"end":{"line":24,"column":20}},"18":{"start":{"line":25,"column":4},"end":{"line":36,"column":6}},"19":{"start":{"line":27,"column":12},"end":{"line":27,"column":85}},"20":{"start":{"line":30,"column":12},"end":{"line":30,"column":30}},"21":{"start":{"line":34,"column":12},"end":{"line":34,"column":94}},"22":{"start":{"line":39,"column":0},"end":{"line":44,"column":2}},"23":{"start":{"line":40,"column":4},"end":{"line":40,"column":21}},"24":{"start":{"line":41,"column":4},"end":{"line":41,"column":32}},"25":{"start":{"line":43,"column":4},"end":{"line":43,"column":75}},"26":{"start":{"line":46,"column":0},"end":{"line":50,"column":2}},"27":{"start":{"line":47,"column":4},"end":{"line":47,"column":21}},"28":{"start":{"line":49,"column":4},"end":{"line":49,"column":57}},"29":{"start":{"line":52,"column":0},"end":{"line":57,"column":2}},"30":{"start":{"line":53,"column":4},"end":{"line":53,"column":37}},"31":{"start":{"line":54,"column":4},"end":{"line":54,"column":25}},"32":{"start":{"line":56,"column":4},"end":{"line":56,"column":76}},"33":{"start":{"line":59,"column":0},"end":{"line":64,"column":2}},"34":{"start":{"line":60,"column":4},"end":{"line":60,"column":49}},"35":{"start":{"line":62,"column":4},"end":{"line":62,"column":44}},"36":{"start":{"line":63,"column":4},"end":{"line":63,"column":59}},"37":{"start":{"line":66,"column":0},"end":{"line":71,"column":2}},"38":{"start":{"line":67,"column":4},"end":{"line":67,"column":37}},"39":{"start":{"line":68,"column":4},"end":{"line":68,"column":25}},"40":{"start":{"line":70,"column":4},"end":{"line":70,"column":93}},"41":{"start":{"line":73,"column":0},"end":{"line":83,"column":3}},"42":{"start":{"line":74,"column":4},"end":{"line":74,"column":37}},"43":{"start":{"line":75,"column":4},"end":{"line":75,"column":25}},"44":{"start":{"line":78,"column":4},"end":{"line":78,"column":89}},"45":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"46":{"start":{"line":80,"column":8},"end":{"line":80,"column":118}},"47":{"start":{"line":82,"column":4},"end":{"line":82,"column":17}},"48":{"start":{"line":85,"column":0},"end":{"line":91,"column":2}},"49":{"start":{"line":86,"column":4},"end":{"line":86,"column":37}},"50":{"start":{"line":87,"column":4},"end":{"line":87,"column":25}},"51":{"start":{"line":88,"column":4},"end":{"line":88,"column":35}},"52":{"start":{"line":90,"column":4},"end":{"line":90,"column":96}},"53":{"start":{"line":93,"column":0},"end":{"line":98,"column":2}},"54":{"start":{"line":94,"column":4},"end":{"line":94,"column":37}},"55":{"start":{"line":95,"column":4},"end":{"line":95,"column":25}},"56":{"start":{"line":97,"column":4},"end":{"line":97,"column":89}},"57":{"start":{"line":100,"column":0},"end":{"line":104,"column":2}},"58":{"start":{"line":101,"column":4},"end":{"line":101,"column":22}},"59":{"start":{"line":103,"column":4},"end":{"line":103,"column":66}},"60":{"start":{"line":106,"column":0},"end":{"line":111,"column":2}},"61":{"start":{"line":107,"column":4},"end":{"line":107,"column":37}},"62":{"start":{"line":108,"column":4},"end":{"line":108,"column":32}},"63":{"start":{"line":110,"column":4},"end":{"line":110,"column":104}},"64":{"start":{"line":113,"column":0},"end":{"line":113,"column":37}}},"branchMap":{"1":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]}},"code":["\"use strict\";","","let _ = require(\"lodash\");","let WorkflowInstance = require(\"./workflowInstance\");","let errors = require(\"../common/errors\");","let asyncHelpers = require(\"../common/asyncHelpers\");","let Bluebird = require(\"bluebird\");","let async = asyncHelpers.async;","let assert = require(\"better-assert\");","","function WorkflowPersistence(impl) {","    assert(_.isObject(impl));","","    this._impl = impl;","}","","WorkflowPersistence.prototype.enterLock = function (lockName, enterLockTimeoutMs, inLockTimeoutMs) {","    assert(_.isString(lockName));","    assert(_.isNumber(enterLockTimeoutMs));","    assert(enterLockTimeoutMs >= 1000);","    assert(_.isNumber(inLockTimeoutMs));","    assert(inLockTimeoutMs >= 1000);","","    let self = this;","    return asyncHelpers.aggressiveRetry(","        function () {","            return Bluebird.resolve(self._impl.enterLock(lockName, inLockTimeoutMs));","        },","        function (lockInfo) {","            return !!lockInfo;","        },","        enterLockTimeoutMs,","        function () {","            return new errors.TimeoutError(\"Entering lock '\" + lockName + \"' has timed out.\");","        }","    );","};","","WorkflowPersistence.prototype.renewLock = function (lockId, inLockTimeoutMs) {","    assert(!!lockId);","    assert(inLockTimeoutMs > 0);","","    return Bluebird.resolve(this._impl.renewLock(lockId, inLockTimeoutMs));","};","","WorkflowPersistence.prototype.exitLock = function (lockId) {","    assert(!!lockId);","","    return Bluebird.resolve(this._impl.exitLock(lockId));","};","","WorkflowPersistence.prototype.isRunning = function (workflowName, instanceId) {","    assert(_.isString(workflowName));","    assert(!!instanceId);","","    return Bluebird.resolve(this._impl.isRunning(workflowName, instanceId));","};","","WorkflowPersistence.prototype.persistState = function (instance) {","    assert(instance instanceof WorkflowInstance);","","    let data = instance.getStateToPersist();","    return Bluebird.resolve(this._impl.persistState(data));","};","","WorkflowPersistence.prototype.getRunningInstanceIdHeader = function (workflowName, instanceId) {","    assert(_.isString(workflowName));","    assert(!!instanceId);","","    return Bluebird.resolve(this._impl.getRunningInstanceIdHeader(workflowName, instanceId));","};","","WorkflowPersistence.prototype.loadState = async(function* (workflowName, instanceId) {","    assert(_.isString(workflowName));","    assert(!!instanceId);","","    // Without: idleMethods, promotedProperties","    let state = yield (Bluebird.resolve(this._impl.loadState(workflowName, instanceId)));","    if (!state) {","        throw new Error(\"Instance state of workflow '\" + workflowName + \"' by id '\" + instanceId + \"' is not found.\");","    }","    return state;","});","","WorkflowPersistence.prototype.removeState = function (workflowName, instanceId, succeeded, error) {","    assert(_.isString(workflowName));","    assert(!!instanceId);","    assert(_.isBoolean(succeeded));","","    return Bluebird.resolve(this._impl.removeState(workflowName, instanceId, succeeded, error));","};","","WorkflowPersistence.prototype.loadPromotedProperties = function (workflowName, instanceId) {","    assert(_.isString(workflowName));","    assert(!!instanceId);","","    return Bluebird.resolve(this._impl.loadPromotedProperties(workflowName, instanceId));","};","","WorkflowPersistence.prototype.getNextWakeupables = function (count) {","    assert(count > 0);","","    return Bluebird.resolve(this._impl.getNextWakeupables(count));","};","","WorkflowPersistence.prototype.getRunningInstanceHeadersForOtherVersion = function(workflowName, version) {","    assert(_.isString(workflowName));","    assert(_.isString(version));","","    return Bluebird.resolve(this._impl.getRunningInstanceHeadersForOtherVersion(workflowName, version));","};","","module.exports = WorkflowPersistence;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":0,"14":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"30":0,"34":0,"39":1,"40":0,"41":0,"43":0,"46":1,"47":0,"49":0,"52":1,"53":0,"54":0,"56":0,"59":1,"60":0,"62":0,"63":0,"66":1,"67":0,"68":0,"70":0,"73":1,"74":0,"75":0,"78":0,"79":0,"80":0,"82":0,"85":1,"86":0,"87":0,"88":0,"90":0,"93":1,"94":0,"95":0,"97":0,"100":1,"101":0,"103":0,"106":1,"107":0,"108":0,"110":0,"113":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowInstance.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/workflowInstance.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":1,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0,"138":1,"139":0,"140":0,"141":0,"142":1,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":1,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":1,"176":0,"177":0,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":1,"192":0,"193":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0,0,0,0,0,0],"31":[0,0],"32":[0,0,0,0,0,0],"33":[0,0],"34":[0,0,0,0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"fnMap":{"1":{"name":"WorkflowInstance","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":32}}},"2":{"name":"(anonymous_2)","line":40,"loc":{"start":{"line":40,"column":17},"end":{"line":40,"column":29}}},"3":{"name":"(anonymous_3)","line":45,"loc":{"start":{"line":45,"column":17},"end":{"line":45,"column":29}}},"4":{"name":"(anonymous_4)","line":50,"loc":{"start":{"line":50,"column":17},"end":{"line":50,"column":29}}},"5":{"name":"(anonymous_5)","line":55,"loc":{"start":{"line":55,"column":17},"end":{"line":55,"column":28}}},"6":{"name":"(anonymous_6)","line":61,"loc":{"start":{"line":61,"column":42},"end":{"line":61,"column":111}}},"7":{"name":"(anonymous_7)","line":69,"loc":{"start":{"line":69,"column":46},"end":{"line":69,"column":64}}},"8":{"name":"(anonymous_8)","line":94,"loc":{"start":{"line":94,"column":20},"end":{"line":94,"column":41}}},"9":{"name":"(anonymous_9)","line":104,"loc":{"start":{"line":104,"column":20},"end":{"line":104,"column":38}}},"10":{"name":"(anonymous_10)","line":168,"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":25}}},"11":{"name":"(anonymous_11)","line":174,"loc":{"start":{"line":174,"column":41},"end":{"line":174,"column":93}}},"12":{"name":"(anonymous_12)","line":186,"loc":{"start":{"line":186,"column":8},"end":{"line":186,"column":24}}},"13":{"name":"(anonymous_13)","line":198,"loc":{"start":{"line":198,"column":46},"end":{"line":198,"column":75}}},"14":{"name":"(anonymous_14)","line":206,"loc":{"start":{"line":206,"column":8},"end":{"line":206,"column":29}}},"15":{"name":"(anonymous_15)","line":215,"loc":{"start":{"line":215,"column":8},"end":{"line":215,"column":26}}},"16":{"name":"(anonymous_16)","line":255,"loc":{"start":{"line":255,"column":47},"end":{"line":255,"column":59}}},"17":{"name":"(anonymous_17)","line":261,"loc":{"start":{"line":261,"column":44},"end":{"line":261,"column":56}}},"18":{"name":"(anonymous_18)","line":267,"loc":{"start":{"line":267,"column":45},"end":{"line":267,"column":57}}},"19":{"name":"(anonymous_19)","line":273,"loc":{"start":{"line":273,"column":53},"end":{"line":273,"column":65}}},"20":{"name":"(anonymous_20)","line":278,"loc":{"start":{"line":278,"column":72},"end":{"line":278,"column":84}}},"21":{"name":"(anonymous_21)","line":281,"loc":{"start":{"line":281,"column":29},"end":{"line":281,"column":45}}},"22":{"name":"(anonymous_22)","line":289,"loc":{"start":{"line":289,"column":30},"end":{"line":289,"column":46}}},"23":{"name":"(anonymous_23)","line":298,"loc":{"start":{"line":298,"column":56},"end":{"line":298,"column":68}}},"24":{"name":"(anonymous_24)","line":301,"loc":{"start":{"line":301,"column":29},"end":{"line":301,"column":45}}},"25":{"name":"(anonymous_25)","line":308,"loc":{"start":{"line":308,"column":30},"end":{"line":308,"column":46}}},"26":{"name":"(anonymous_26)","line":317,"loc":{"start":{"line":317,"column":59},"end":{"line":317,"column":71}}},"27":{"name":"(anonymous_27)","line":320,"loc":{"start":{"line":320,"column":29},"end":{"line":320,"column":45}}},"28":{"name":"(anonymous_28)","line":327,"loc":{"start":{"line":327,"column":30},"end":{"line":327,"column":46}}},"29":{"name":"(anonymous_29)","line":345,"loc":{"start":{"line":345,"column":47},"end":{"line":345,"column":59}}},"30":{"name":"(anonymous_30)","line":359,"loc":{"start":{"line":359,"column":42},"end":{"line":359,"column":58}}},"31":{"name":"(anonymous_31)","line":380,"loc":{"start":{"line":380,"column":40},"end":{"line":380,"column":58}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":81}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":79}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":41}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":39}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":51}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":26}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":47}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":35}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":33}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":53}},"14":{"start":{"line":16,"column":0},"end":{"line":16,"column":31}},"15":{"start":{"line":17,"column":0},"end":{"line":17,"column":50}},"16":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}},"17":{"start":{"line":19,"column":0},"end":{"line":19,"column":57}},"18":{"start":{"line":21,"column":0},"end":{"line":33,"column":1}},"19":{"start":{"line":22,"column":4},"end":{"line":22,"column":28}},"20":{"start":{"line":24,"column":4},"end":{"line":24,"column":22}},"21":{"start":{"line":25,"column":4},"end":{"line":25,"column":19}},"22":{"start":{"line":26,"column":4},"end":{"line":26,"column":24}},"23":{"start":{"line":27,"column":4},"end":{"line":27,"column":26}},"24":{"start":{"line":28,"column":4},"end":{"line":28,"column":51}},"25":{"start":{"line":29,"column":4},"end":{"line":29,"column":35}},"26":{"start":{"line":30,"column":4},"end":{"line":30,"column":44}},"27":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"28":{"start":{"line":32,"column":4},"end":{"line":32,"column":32}},"29":{"start":{"line":35,"column":0},"end":{"line":35,"column":46}},"30":{"start":{"line":37,"column":0},"end":{"line":59,"column":7}},"31":{"start":{"line":41,"column":16},"end":{"line":41,"column":68}},"32":{"start":{"line":46,"column":16},"end":{"line":46,"column":83}},"33":{"start":{"line":51,"column":16},"end":{"line":51,"column":68}},"34":{"start":{"line":56,"column":16},"end":{"line":56,"column":47}},"35":{"start":{"line":61,"column":0},"end":{"line":165,"column":3}},"36":{"start":{"line":62,"column":4},"end":{"line":62,"column":20}},"37":{"start":{"line":64,"column":4},"end":{"line":64,"column":51}},"38":{"start":{"line":65,"column":4},"end":{"line":65,"column":35}},"39":{"start":{"line":67,"column":4},"end":{"line":67,"column":36}},"40":{"start":{"line":68,"column":4},"end":{"line":68,"column":30}},"41":{"start":{"line":69,"column":4},"end":{"line":74,"column":6}},"42":{"start":{"line":70,"column":8},"end":{"line":73,"column":9}},"43":{"start":{"line":71,"column":12},"end":{"line":71,"column":39}},"44":{"start":{"line":72,"column":12},"end":{"line":72,"column":32}},"45":{"start":{"line":76,"column":4},"end":{"line":76,"column":32}},"46":{"start":{"line":78,"column":4},"end":{"line":164,"column":5}},"47":{"start":{"line":79,"column":8},"end":{"line":150,"column":9}},"48":{"start":{"line":80,"column":12},"end":{"line":146,"column":13}},"49":{"start":{"line":81,"column":16},"end":{"line":81,"column":47}},"50":{"start":{"line":83,"column":16},"end":{"line":88,"column":17}},"51":{"start":{"line":84,"column":20},"end":{"line":86,"column":21}},"52":{"start":{"line":85,"column":24},"end":{"line":85,"column":170}},"53":{"start":{"line":87,"column":20},"end":{"line":87,"column":72}},"54":{"start":{"line":90,"column":16},"end":{"line":90,"column":51}},"55":{"start":{"line":91,"column":16},"end":{"line":91,"column":27}},"56":{"start":{"line":92,"column":16},"end":{"line":92,"column":45}},"57":{"start":{"line":93,"column":16},"end":{"line":100,"column":22}},"58":{"start":{"line":95,"column":24},"end":{"line":99,"column":25}},"59":{"start":{"line":96,"column":28},"end":{"line":96,"column":58}},"60":{"start":{"line":97,"column":28},"end":{"line":97,"column":51}},"61":{"start":{"line":98,"column":28},"end":{"line":98,"column":39}},"62":{"start":{"line":102,"column":16},"end":{"line":102,"column":37}},"63":{"start":{"line":103,"column":16},"end":{"line":110,"column":22}},"64":{"start":{"line":105,"column":24},"end":{"line":109,"column":31}},"65":{"start":{"line":112,"column":16},"end":{"line":112,"column":146}},"66":{"start":{"line":114,"column":16},"end":{"line":129,"column":17}},"67":{"start":{"line":115,"column":20},"end":{"line":125,"column":21}},"68":{"start":{"line":116,"column":24},"end":{"line":124,"column":25}},"69":{"start":{"line":117,"column":28},"end":{"line":119,"column":29}},"70":{"start":{"line":118,"column":32},"end":{"line":118,"column":177}},"71":{"start":{"line":120,"column":28},"end":{"line":120,"column":78}},"72":{"start":{"line":123,"column":28},"end":{"line":123,"column":168}},"73":{"start":{"line":128,"column":20},"end":{"line":128,"column":169}},"74":{"start":{"line":131,"column":16},"end":{"line":140,"column":17}},"75":{"start":{"line":132,"column":20},"end":{"line":134,"column":21}},"76":{"start":{"line":133,"column":24},"end":{"line":133,"column":144}},"77":{"start":{"line":137,"column":20},"end":{"line":139,"column":21}},"78":{"start":{"line":138,"column":24},"end":{"line":138,"column":138}},"79":{"start":{"line":142,"column":16},"end":{"line":142,"column":30}},"80":{"start":{"line":145,"column":16},"end":{"line":145,"column":166}},"81":{"start":{"line":149,"column":12},"end":{"line":149,"column":133}},"82":{"start":{"line":153,"column":8},"end":{"line":153,"column":43}},"83":{"start":{"line":154,"column":8},"end":{"line":156,"column":9}},"84":{"start":{"line":155,"column":12},"end":{"line":155,"column":162}},"85":{"start":{"line":157,"column":8},"end":{"line":159,"column":9}},"86":{"start":{"line":158,"column":12},"end":{"line":158,"column":178}},"87":{"start":{"line":160,"column":8},"end":{"line":160,"column":16}},"88":{"start":{"line":163,"column":8},"end":{"line":163,"column":31}},"89":{"start":{"line":167,"column":0},"end":{"line":172,"column":7}},"90":{"start":{"line":169,"column":8},"end":{"line":171,"column":9}},"91":{"start":{"line":170,"column":12},"end":{"line":170,"column":74}},"92":{"start":{"line":174,"column":0},"end":{"line":196,"column":2}},"93":{"start":{"line":175,"column":4},"end":{"line":175,"column":20}},"94":{"start":{"line":176,"column":4},"end":{"line":178,"column":5}},"95":{"start":{"line":177,"column":8},"end":{"line":177,"column":59}},"96":{"start":{"line":179,"column":4},"end":{"line":181,"column":5}},"97":{"start":{"line":180,"column":8},"end":{"line":180,"column":58}},"98":{"start":{"line":182,"column":4},"end":{"line":182,"column":43}},"99":{"start":{"line":183,"column":4},"end":{"line":183,"column":66}},"100":{"start":{"line":184,"column":4},"end":{"line":190,"column":11}},"101":{"start":{"line":187,"column":12},"end":{"line":187,"column":38}},"102":{"start":{"line":188,"column":12},"end":{"line":188,"column":46}},"103":{"start":{"line":189,"column":12},"end":{"line":189,"column":56}},"104":{"start":{"line":191,"column":4},"end":{"line":191,"column":26}},"105":{"start":{"line":192,"column":4},"end":{"line":194,"column":5}},"106":{"start":{"line":193,"column":8},"end":{"line":193,"column":29}},"107":{"start":{"line":195,"column":4},"end":{"line":195,"column":29}},"108":{"start":{"line":198,"column":0},"end":{"line":253,"column":3}},"109":{"start":{"line":199,"column":4},"end":{"line":199,"column":20}},"110":{"start":{"line":201,"column":4},"end":{"line":201,"column":35}},"111":{"start":{"line":203,"column":4},"end":{"line":203,"column":33}},"112":{"start":{"line":204,"column":4},"end":{"line":204,"column":22}},"113":{"start":{"line":205,"column":4},"end":{"line":211,"column":10}},"114":{"start":{"line":207,"column":12},"end":{"line":210,"column":13}},"115":{"start":{"line":208,"column":16},"end":{"line":208,"column":40}},"116":{"start":{"line":209,"column":16},"end":{"line":209,"column":27}},"117":{"start":{"line":213,"column":4},"end":{"line":213,"column":25}},"118":{"start":{"line":214,"column":4},"end":{"line":221,"column":10}},"119":{"start":{"line":216,"column":12},"end":{"line":220,"column":19}},"120":{"start":{"line":223,"column":4},"end":{"line":252,"column":5}},"121":{"start":{"line":224,"column":8},"end":{"line":224,"column":136}},"122":{"start":{"line":226,"column":8},"end":{"line":228,"column":9}},"123":{"start":{"line":227,"column":12},"end":{"line":227,"column":166}},"124":{"start":{"line":230,"column":8},"end":{"line":239,"column":9}},"125":{"start":{"line":231,"column":12},"end":{"line":233,"column":13}},"126":{"start":{"line":232,"column":16},"end":{"line":232,"column":136}},"127":{"start":{"line":236,"column":12},"end":{"line":238,"column":13}},"128":{"start":{"line":237,"column":16},"end":{"line":237,"column":130}},"129":{"start":{"line":241,"column":8},"end":{"line":241,"column":22}},"130":{"start":{"line":244,"column":8},"end":{"line":244,"column":48}},"131":{"start":{"line":245,"column":8},"end":{"line":247,"column":9}},"132":{"start":{"line":246,"column":12},"end":{"line":246,"column":176}},"133":{"start":{"line":248,"column":8},"end":{"line":248,"column":16}},"134":{"start":{"line":251,"column":8},"end":{"line":251,"column":31}},"135":{"start":{"line":255,"column":0},"end":{"line":259,"column":2}},"136":{"start":{"line":256,"column":4},"end":{"line":258,"column":5}},"137":{"start":{"line":257,"column":8},"end":{"line":257,"column":35}},"138":{"start":{"line":261,"column":0},"end":{"line":265,"column":2}},"139":{"start":{"line":262,"column":4},"end":{"line":262,"column":54}},"140":{"start":{"line":263,"column":4},"end":{"line":263,"column":38}},"141":{"start":{"line":264,"column":4},"end":{"line":264,"column":41}},"142":{"start":{"line":267,"column":0},"end":{"line":271,"column":2}},"143":{"start":{"line":268,"column":4},"end":{"line":268,"column":51}},"144":{"start":{"line":269,"column":4},"end":{"line":269,"column":35}},"145":{"start":{"line":270,"column":4},"end":{"line":270,"column":44}},"146":{"start":{"line":273,"column":0},"end":{"line":276,"column":2}},"147":{"start":{"line":274,"column":4},"end":{"line":274,"column":27}},"148":{"start":{"line":275,"column":4},"end":{"line":275,"column":27}},"149":{"start":{"line":278,"column":0},"end":{"line":296,"column":2}},"150":{"start":{"line":279,"column":4},"end":{"line":279,"column":20}},"151":{"start":{"line":280,"column":4},"end":{"line":294,"column":6}},"152":{"start":{"line":282,"column":12},"end":{"line":287,"column":58}},"153":{"start":{"line":290,"column":12},"end":{"line":290,"column":58}},"154":{"start":{"line":291,"column":12},"end":{"line":291,"column":101}},"155":{"start":{"line":292,"column":12},"end":{"line":292,"column":80}},"156":{"start":{"line":295,"column":4},"end":{"line":295,"column":37}},"157":{"start":{"line":298,"column":0},"end":{"line":315,"column":2}},"158":{"start":{"line":299,"column":4},"end":{"line":299,"column":20}},"159":{"start":{"line":300,"column":4},"end":{"line":313,"column":6}},"160":{"start":{"line":302,"column":12},"end":{"line":306,"column":62}},"161":{"start":{"line":309,"column":12},"end":{"line":309,"column":58}},"162":{"start":{"line":310,"column":12},"end":{"line":310,"column":101}},"163":{"start":{"line":311,"column":12},"end":{"line":311,"column":77}},"164":{"start":{"line":314,"column":4},"end":{"line":314,"column":37}},"165":{"start":{"line":317,"column":0},"end":{"line":343,"column":2}},"166":{"start":{"line":318,"column":4},"end":{"line":318,"column":20}},"167":{"start":{"line":319,"column":4},"end":{"line":341,"column":6}},"168":{"start":{"line":321,"column":12},"end":{"line":325,"column":58}},"169":{"start":{"line":328,"column":12},"end":{"line":328,"column":58}},"170":{"start":{"line":329,"column":12},"end":{"line":329,"column":66}},"171":{"start":{"line":330,"column":12},"end":{"line":330,"column":73}},"172":{"start":{"line":334,"column":12},"end":{"line":339,"column":13}},"173":{"start":{"line":335,"column":16},"end":{"line":338,"column":19}},"174":{"start":{"line":342,"column":4},"end":{"line":342,"column":37}},"175":{"start":{"line":345,"column":0},"end":{"line":357,"column":2}},"176":{"start":{"line":346,"column":4},"end":{"line":346,"column":116}},"177":{"start":{"line":347,"column":4},"end":{"line":356,"column":6}},"178":{"start":{"line":359,"column":0},"end":{"line":378,"column":2}},"179":{"start":{"line":360,"column":4},"end":{"line":362,"column":5}},"180":{"start":{"line":361,"column":8},"end":{"line":361,"column":65}},"181":{"start":{"line":363,"column":4},"end":{"line":365,"column":5}},"182":{"start":{"line":364,"column":8},"end":{"line":364,"column":149}},"183":{"start":{"line":366,"column":4},"end":{"line":368,"column":5}},"184":{"start":{"line":367,"column":8},"end":{"line":367,"column":165}},"185":{"start":{"line":369,"column":4},"end":{"line":371,"column":5}},"186":{"start":{"line":370,"column":8},"end":{"line":370,"column":177}},"187":{"start":{"line":372,"column":4},"end":{"line":374,"column":5}},"188":{"start":{"line":373,"column":8},"end":{"line":373,"column":101}},"189":{"start":{"line":376,"column":4},"end":{"line":376,"column":36}},"190":{"start":{"line":377,"column":4},"end":{"line":377,"column":69}},"191":{"start":{"line":380,"column":0},"end":{"line":382,"column":2}},"192":{"start":{"line":381,"column":4},"end":{"line":381,"column":37}},"193":{"start":{"line":384,"column":0},"end":{"line":384,"column":34}}},"branchMap":{"1":{"line":41,"type":"cond-expr","locations":[{"start":{"line":41,"column":38},"end":{"line":41,"column":60}},{"start":{"line":41,"column":63},"end":{"line":41,"column":67}}]},"2":{"line":46,"type":"cond-expr","locations":[{"start":{"line":46,"column":38},"end":{"line":46,"column":75}},{"start":{"line":46,"column":78},"end":{"line":46,"column":82}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":38},"end":{"line":51,"column":60}},{"start":{"line":51,"column":63},"end":{"line":51,"column":67}}]},"4":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":8}},{"start":{"line":70,"column":8},"end":{"line":70,"column":8}}]},"5":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":79,"column":8}},{"start":{"line":79,"column":8},"end":{"line":79,"column":8}}]},"6":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":12},"end":{"line":80,"column":12}},{"start":{"line":80,"column":12},"end":{"line":80,"column":12}}]},"7":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":16},"end":{"line":83,"column":16}},{"start":{"line":83,"column":16},"end":{"line":83,"column":16}}]},"8":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":20},"end":{"line":84,"column":20}},{"start":{"line":84,"column":20},"end":{"line":84,"column":20}}]},"9":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":24},"end":{"line":95,"column":24}},{"start":{"line":95,"column":24},"end":{"line":95,"column":24}}]},"10":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":16},"end":{"line":114,"column":16}},{"start":{"line":114,"column":16},"end":{"line":114,"column":16}}]},"11":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":20},"end":{"line":115,"column":20}},{"start":{"line":115,"column":20},"end":{"line":115,"column":20}}]},"12":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":24},"end":{"line":116,"column":24}},{"start":{"line":116,"column":24},"end":{"line":116,"column":24}}]},"13":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":28},"end":{"line":117,"column":28}},{"start":{"line":117,"column":28},"end":{"line":117,"column":28}}]},"14":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":16},"end":{"line":131,"column":16}},{"start":{"line":131,"column":16},"end":{"line":131,"column":16}}]},"15":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":20},"end":{"line":132,"column":20}},{"start":{"line":132,"column":20},"end":{"line":132,"column":20}}]},"16":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":20},"end":{"line":137,"column":20}},{"start":{"line":137,"column":20},"end":{"line":137,"column":20}}]},"17":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"18":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":8},"end":{"line":157,"column":8}},{"start":{"line":157,"column":8},"end":{"line":157,"column":8}}]},"19":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":8},"end":{"line":169,"column":8}},{"start":{"line":169,"column":8},"end":{"line":169,"column":8}}]},"20":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"21":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":4},"end":{"line":179,"column":4}},{"start":{"line":179,"column":4},"end":{"line":179,"column":4}}]},"22":{"line":179,"type":"binary-expr","locations":[{"start":{"line":179,"column":8},"end":{"line":179,"column":38}},{"start":{"line":179,"column":42},"end":{"line":179,"column":58}}]},"23":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":4},"end":{"line":192,"column":4}},{"start":{"line":192,"column":4},"end":{"line":192,"column":4}}]},"24":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":12},"end":{"line":207,"column":12}},{"start":{"line":207,"column":12},"end":{"line":207,"column":12}}]},"25":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":8},"end":{"line":226,"column":8}},{"start":{"line":226,"column":8},"end":{"line":226,"column":8}}]},"26":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":8}},{"start":{"line":230,"column":8},"end":{"line":230,"column":8}}]},"27":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":12}},{"start":{"line":231,"column":12},"end":{"line":231,"column":12}}]},"28":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":12},"end":{"line":236,"column":12}},{"start":{"line":236,"column":12},"end":{"line":236,"column":12}}]},"29":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":8},"end":{"line":245,"column":8}},{"start":{"line":245,"column":8},"end":{"line":245,"column":8}}]},"30":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":19},"end":{"line":282,"column":58}},{"start":{"line":283,"column":16},"end":{"line":283,"column":59}},{"start":{"line":284,"column":16},"end":{"line":284,"column":44}},{"start":{"line":285,"column":16},"end":{"line":285,"column":49}},{"start":{"line":286,"column":17},"end":{"line":286,"column":43}},{"start":{"line":286,"column":47},"end":{"line":286,"column":84}},{"start":{"line":287,"column":16},"end":{"line":287,"column":57}}]},"31":{"line":291,"type":"cond-expr","locations":[{"start":{"line":291,"column":61},"end":{"line":291,"column":93}},{"start":{"line":291,"column":96},"end":{"line":291,"column":100}}]},"32":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":19},"end":{"line":302,"column":42}},{"start":{"line":303,"column":16},"end":{"line":303,"column":57}},{"start":{"line":304,"column":16},"end":{"line":304,"column":49}},{"start":{"line":305,"column":17},"end":{"line":305,"column":43}},{"start":{"line":305,"column":47},"end":{"line":305,"column":84}},{"start":{"line":306,"column":16},"end":{"line":306,"column":61}}]},"33":{"line":310,"type":"cond-expr","locations":[{"start":{"line":310,"column":61},"end":{"line":310,"column":93}},{"start":{"line":310,"column":96},"end":{"line":310,"column":100}}]},"34":{"line":321,"type":"binary-expr","locations":[{"start":{"line":321,"column":19},"end":{"line":321,"column":51}},{"start":{"line":322,"column":16},"end":{"line":322,"column":59}},{"start":{"line":323,"column":16},"end":{"line":323,"column":49}},{"start":{"line":324,"column":16},"end":{"line":324,"column":53}},{"start":{"line":325,"column":16},"end":{"line":325,"column":57}}]},"35":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":12},"end":{"line":334,"column":12}},{"start":{"line":334,"column":12},"end":{"line":334,"column":12}}]},"36":{"line":360,"type":"if","locations":[{"start":{"line":360,"column":4},"end":{"line":360,"column":4}},{"start":{"line":360,"column":4},"end":{"line":360,"column":4}}]},"37":{"line":363,"type":"if","locations":[{"start":{"line":363,"column":4},"end":{"line":363,"column":4}},{"start":{"line":363,"column":4},"end":{"line":363,"column":4}}]},"38":{"line":366,"type":"if","locations":[{"start":{"line":366,"column":4},"end":{"line":366,"column":4}},{"start":{"line":366,"column":4},"end":{"line":366,"column":4}}]},"39":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":4},"end":{"line":369,"column":4}},{"start":{"line":369,"column":4},"end":{"line":369,"column":4}}]},"40":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":4},"end":{"line":372,"column":4}},{"start":{"line":372,"column":4},"end":{"line":372,"column":4}}]}},"code":["\"use strict\";","","let Workflow = require(\"../activities/workflow\");","let ActivityExecutionContext = require(\"../activities/activityExecutionContext\");","let ActivityExecutionEngine = require(\"../activities/activityExecutionEngine\");","let BeginMethod = require(\"../activities/beginMethod\");","let EndMethod = require(\"../activities/endMethod\");","let errors = require(\"../common/errors\");","let enums = require(\"../common/enums\");","let specStrings = require(\"../common/specStrings\");","let _ = require(\"lodash\");","let constants = require(\"../common/constants\");","let Bluebird = require(\"bluebird\");","let is = require(\"../common/is\");","let asyncHelpers = require(\"../common/asyncHelpers\");","let async = asyncHelpers.async;","let EventEmitter = require('events').EventEmitter;","let util = require(\"util\");","let debug = require(\"debug\")(\"wf4node:WorkflowInstance\");","","function WorkflowInstance(host) {","    EventEmitter.call(this);","","    this._host = host;","    this.id = null;","    this._engine = null;","    this.createdOn = null;","    this._beginMethodWithCreateInstCallback = null;","    this._endMethodCallback = null;","    this._idleInstanceIdPathCallback = null;","    this.activeDelays = [];","    this.workflowVersion = null;","}","","util.inherits(WorkflowInstance, EventEmitter);","","Object.defineProperties(","    WorkflowInstance.prototype, {","        execState: {","            get: function () {","                return this._engine ? this._engine.execState : null;","            }","        },","        workflowName: {","            get: function () {","                return this._engine ? this._engine.rootActivity.name.trim() : null;","            }","        },","        updatedOn: {","            get: function () {","                return this._engine ? this._engine.updatedOn : null;","            }","        },","        persistence: {","            get: function() {","                return this._host._persistence;","            }","        }","    });","","WorkflowInstance.prototype.create = async(function* (execContext, workflowVersion, methodName, args, lockInfo) {","    let self = this;","","    self.setWorkflow(execContext, workflowVersion);","    self._resetCallbacksAndState();","","    let createMethodReached = false;","    let instanceIdPath = null;","    self._beginMethodWithCreateInstCallback = function (mn, ip) {","        if (mn === methodName) {","            createMethodReached = true;","            instanceIdPath = ip;","        }","    };","","    self.createdOn = new Date();","","    try {","        if (self._engine.isIdle(yield self._engine.invoke())) {","            if (createMethodReached) {","                self._resetCallbacksAndState();","","                if (instanceIdPath) {","                    if (_.isUndefined(self.id = self._host._instanceIdParser.parse(instanceIdPath, args))) {","                        throw new errors.WorkflowError(\"Cannot parse BeginMethod's instanceIdPath '\" + instanceIdPath + \"' on arguments of method '\" + methodName + \"'.\");","                    }","                    yield (self._enterLockForCreatedInstance(lockInfo));","                }","","                let createEndMethodReached = false;","                let result;","                let endInstanceIdPath = null;","                self._endMethodCallback =","                    function (mn, ip, r) {","                        if (mn === methodName) {","                            createEndMethodReached = true;","                            endInstanceIdPath = ip;","                            result = r;","                        }","                    };","","                let idleMethods = [];","                self._idleInstanceIdPathCallback =","                    function (mn, ip) {","                        idleMethods.push(","                            {","                                methodName: mn,","                                instanceIdPath: ip","                            });","                    };","","                yield (self._engine.resumeBookmark(specStrings.hosting.createBeginMethodBMName(methodName), enums.activityStates.complete, args));","","                if (createEndMethodReached) {","                    if (_.isUndefined(self.id)) {","                        if (endInstanceIdPath) {","                            if (_.isUndefined(self.id = self._host._instanceIdParser.parse(endInstanceIdPath, result))) {","                                throw new errors.WorkflowError(\"Cannot parse EndMethods's instanceIdPath '\" + instanceIdPath + \"' on arguments of method '\" + methodName + \"'.\");","                            }","                            yield self._enterLockForCreatedInstance(lockInfo);","                        }","                        else {","                            throw new errors.WorkflowError(\"BeginMethod or EndMethod of method '\" + methodName + \"' doesn't specify an instanceIdPath property value.\");","                        }","                    }","                }","                else {","                    throw new errors.WorkflowError(\"Workflow has been completed or gone to idle without reaching an EndMethod activity of method '\" + methodName + \"'.\");","                }","","                if (self.execState === enums.activityStates.idle) {","                    if (idleMethods.length === 0) {","                        throw new errors.WorkflowError(\"Workflow has gone to idle, but there is no active BeginMethod activities to wait for.\");","                    }","                }","                else {","                    if (idleMethods.length !== 0) {","                        throw new errors.WorkflowError(\"Workflow has completed, but there is active BeginMethod activities to wait for.\");","                    }","                }","","                return result;","            }","            else {","                throw new errors.WorkflowError(\"Workflow has gone to idle without reaching an instance creator BeginMethod activity of method '\" + methodName + \"'.\");","            }","        }","        else {","            throw new errors.WorkflowError(\"Workflow has been completed without reaching an instance creator BeginMethod activity.\");","        }","    }","    catch (e) {","        debug(\"Create error: %s\", e.stack);","        if (e instanceof errors.TimeoutError) {","            throw new errors.MethodIsNotAccessibleError(\"Cannot create instanceof workflow '\" + self.workflowName + \"', because '\" + methodName + \"' is locked.\");","        }","        if (e instanceof errors.BookmarkNotFoundError) {","            throw new errors.MethodIsNotAccessibleError(\"Cannot create instanceof workflow '\" + self.workflowName + \"', because bookmark of '\" + methodName + \"' doesn't exist.\");","        }","        throw e;","    }","    finally {","        self._resetCallbacks();","    }","});","","WorkflowInstance.prototype._enterLockForCreatedInstance = async(","    function* (lockInfo) {","        if (lockInfo) {","            yield this._host._enterLockForCreatedInstance(this, lockInfo);","        }","    });","","WorkflowInstance.prototype.setWorkflow = function (execContext, workflowVersion, instanceId) {","    let self = this;","    if (!(execContext instanceof ActivityExecutionContext)) {","        throw new TypeError(\"Workflow argument expected.\");","    }","    if (!(_.isString(workflowVersion)) || !workflowVersion) {","        throw new TypeError(\"Workflow version expected.\");","    }","    this.workflowVersion = workflowVersion;","    this._engine = new ActivityExecutionEngine(execContext, this);","    this._engine.on(","        enums.events.workflowEvent,","        function (args) {","            let arr = _.toArray(args);","            arr.splice(0, 0, self.instanceId);","            self.emit(enums.events.workflowEvent, args);","        });","    this._addMyTrackers();","    if (!_.isUndefined(instanceId)) {","        this.id = instanceId;","    }","    this._copyParsFromHost();","};","","WorkflowInstance.prototype.callMethod = async(function* (methodName, args) {","    let self = this;","","    self._resetCallbacksAndState();","","    let endMethodReached = false;","    let result = null;","    self._endMethodCallback =","        function (mn, ip, r) {","            if (mn === methodName) {","                endMethodReached = true;","                result = r;","            }","        };","","    let idleMethods = [];","    self._idleInstanceIdPathCallback =","        function (mn, ip) {","            idleMethods.push(","                {","                    methodName: mn,","                    instanceIdPath: ip","                });","        };","","    try {","        yield self._engine.resumeBookmark(specStrings.hosting.createBeginMethodBMName(methodName), enums.activityStates.complete, args);","","        if (!endMethodReached) {","            throw new errors.WorkflowError(\"Workflow has been completed or gone to idle without reaching an EndMethod activity of method name '\" + methodName + \"'.\");","        }","","        if (self.execState === enums.activityStates.idle) {","            if (idleMethods.length === 0) {","                throw new errors.WorkflowError(\"Workflow has gone to idle, but there is no active BeginMethod activities to wait for.\");","            }","        }","        else {","            if (idleMethods.length !== 0) {","                throw new errors.WorkflowError(\"Workflow has completed, but there is active BeginMethod activities to wait for.\");","            }","        }","","        return result;","    }","    catch (e) {","        debug(\"Call method error: %s\", e.stack);","        if (e instanceof errors.BookmarkNotFoundError) {","            throw new errors.MethodIsNotAccessibleError(\"Cannot call method '\" + methodName + \"' of workflow '\" + self.workflowName + \"', because its bookmark doesn't exist.\");","        }","        throw e;","    }","    finally {","        self._resetCallbacks();","    }","});","","WorkflowInstance.prototype._copyParsFromHost = function () {","    for (let t of this._host._trackers) {","        this._engine.addTracker(t);","    }","};","","WorkflowInstance.prototype._addMyTrackers = function () {","    this._addBeginMethodWithCreateInstHelperTracker();","    this._addEndMethodHelperTracker();","    this._addIdleInstanceIdPathTracker();","};","","WorkflowInstance.prototype._resetCallbacks = function () {","    this._beginMethodWithCreateInstCallback = null;","    this._endMethodCallback = null;","    this._idleInstanceIdPathCallback = null;","};","","WorkflowInstance.prototype._resetCallbacksAndState = function () {","    this._resetCallbacks();","    this.activeDelays = [];","};","","WorkflowInstance.prototype._addBeginMethodWithCreateInstHelperTracker = function () {","    let self = this;","    let tracker = {","        activityStateFilter: function (args) {","            return self._beginMethodWithCreateInstCallback &&","                args.scope.$activity instanceof BeginMethod &&","                args.scope.canCreateInstance &&","                _.isString(args.scope.methodName) &&","                (!args.scope.instanceIdPath || _.isString(args.scope.instanceIdPath)) &&","                args.reason === enums.activityStates.idle;","        },","        activityStateChanged: function (args) {","            let methodName = args.scope.methodName.trim();","            let instanceIdPath = args.scope.instanceIdPath ? args.scope.instanceIdPath.trim() : null;","            self._beginMethodWithCreateInstCallback(methodName, instanceIdPath);","        }","    };","    self._engine.addTracker(tracker);","};","","WorkflowInstance.prototype._addEndMethodHelperTracker = function () {","    let self = this;","    let tracker = {","        activityStateFilter: function (args) {","            return self._endMethodCallback &&","                args.scope.$activity instanceof EndMethod &&","                _.isString(args.scope.methodName) &&","                (!args.scope.instanceIdPath || _.isString(args.scope.instanceIdPath)) &&","                args.reason === enums.activityStates.complete;","        },","        activityStateChanged: function (args) {","            let methodName = args.scope.methodName.trim();","            let instanceIdPath = args.scope.instanceIdPath ? args.scope.instanceIdPath.trim() : null;","            self._endMethodCallback(methodName, instanceIdPath, args.result);","        }","    };","    self._engine.addTracker(tracker);","};","","WorkflowInstance.prototype._addIdleInstanceIdPathTracker = function () {","    let self = this;","    let tracker = {","        activityStateFilter: function (args) {","            return self._idleInstanceIdPathCallback &&","                args.scope.$activity instanceof BeginMethod &&","                _.isString(args.scope.methodName) &&","                _.isString(args.scope.instanceIdPath) &&","                args.reason === enums.activityStates.idle;","        },","        activityStateChanged: function (args) {","            let methodName = args.scope.methodName.trim();","            let instanceIdPath = args.scope.instanceIdPath.trim();","            self._idleInstanceIdPathCallback(methodName, instanceIdPath);","","            // This is where a method goes idle.","            // So if it a DelayTo method, we should remember that.","            if (specStrings.hosting.isDelayToMethodName(methodName)) {","                self.activeDelays.push({","                    methodName: methodName,","                    delayTo: args.scope.delayTo","                });","            }","        }","    };","    self._engine.addTracker(tracker);","};","","WorkflowInstance.prototype.getStateToPersist = function () {","    let sp = this._engine.getStateAndPromotions(this._host.options.serializer, this._host.options.enablePromotions);","    return {","        instanceId: this.id,","        createdOn: this.createdOn,","        workflowName: this.workflowName,","        workflowVersion: this.workflowVersion,","        updatedOn: this._engine.updatedOn,","        state: sp.state,","        promotedProperties: sp.promotedProperties,","        activeDelays: this.activeDelays","    };","};","","WorkflowInstance.prototype.restoreState = function (json) {","    if (!_.isObject(json)) {","        throw new TypeError(\"Argument 'json' is not an object.\");","    }","    if (json.instanceId !== this.id) {","        throw new Error(\"State instanceId property value of '\" + json.instanceId + \"' is different than the current instance id '\" + this.id + \"'.\");","    }","    if (json.workflowName !== this.workflowName) {","        throw new Error(\"State workflowName property value of '\" + json.workflowName + \"' is different than the current Workflow name '\" + this.workflowName + \"'.\");","    }","    if (json.workflowVersion !== this.workflowVersion) {","        throw new Error(\"State workflowVersion property value of '\" + json.workflowVersion + \"' is different than the current Workflow version '\" + this.workflowVersion + \"'.\");","    }","    if (!_.isDate(json.createdOn)) {","        throw new Error(\"State createdOn property value of '\" + json.createdOn + \"' is not a Date.\");","    }","","    this.createdOn = json.createdOn;","    this._engine.setState(this._host.options.serializer, json.state);","};","","WorkflowInstance.prototype.addTracker = function(tracker) {","    this._engine.addTracker(tracker);","};","","module.exports = WorkflowInstance;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"21":1,"22":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"35":1,"37":1,"41":0,"46":0,"51":0,"56":0,"61":1,"62":0,"64":0,"65":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"76":0,"78":0,"79":0,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"90":0,"91":0,"92":0,"93":0,"95":0,"96":0,"97":0,"98":0,"102":0,"103":0,"105":0,"112":0,"114":0,"115":0,"116":0,"117":0,"118":0,"120":0,"123":0,"128":0,"131":0,"132":0,"133":0,"137":0,"138":0,"142":0,"145":0,"149":0,"153":0,"154":0,"155":0,"157":0,"158":0,"160":0,"163":0,"167":1,"169":0,"170":0,"174":1,"175":0,"176":0,"177":0,"179":0,"180":0,"182":0,"183":0,"184":0,"187":0,"188":0,"189":0,"191":0,"192":0,"193":0,"195":0,"198":1,"199":0,"201":0,"203":0,"204":0,"205":0,"207":0,"208":0,"209":0,"213":0,"214":0,"216":0,"223":0,"224":0,"226":0,"227":0,"230":0,"231":0,"232":0,"236":0,"237":0,"241":0,"244":0,"245":0,"246":0,"248":0,"251":0,"255":1,"256":0,"257":0,"261":1,"262":0,"263":0,"264":0,"267":1,"268":0,"269":0,"270":0,"273":1,"274":0,"275":0,"278":1,"279":0,"280":0,"282":0,"290":0,"291":0,"292":0,"295":0,"298":1,"299":0,"300":0,"302":0,"309":0,"310":0,"311":0,"314":0,"317":1,"318":0,"319":0,"321":0,"328":0,"329":0,"330":0,"334":0,"335":0,"342":0,"345":1,"346":0,"347":0,"359":1,"360":0,"361":0,"363":0,"364":0,"366":0,"367":0,"369":0,"370":0,"372":0,"373":0,"376":0,"377":0,"380":1,"381":0,"384":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/knownInstaStore.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/knownInstaStore.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":1,"11":0,"12":1,"13":0,"14":1,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"KnownInstaStore","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":27}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":32},"end":{"line":13,"column":63}}},"3":{"name":"(anonymous_3)","line":17,"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":68}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":35},"end":{"line":21,"column":71}}},"5":{"name":"(anonymous_5)","line":25,"loc":{"start":{"line":25,"column":35},"end":{"line":25,"column":71}}},"6":{"name":"(anonymous_6)","line":29,"loc":{"start":{"line":29,"column":47},"end":{"line":29,"column":64}}},"7":{"name":"(anonymous_7)","line":48,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":34}}},"8":{"name":"(anonymous_8)","line":66,"loc":{"start":{"line":66,"column":69},"end":{"line":66,"column":101}}},"9":{"name":"(anonymous_9)","line":80,"loc":{"start":{"line":80,"column":39},"end":{"line":80,"column":57}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"6":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":32}},"8":{"start":{"line":13,"column":0},"end":{"line":15,"column":2}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":87}},"10":{"start":{"line":17,"column":0},"end":{"line":19,"column":2}},"11":{"start":{"line":18,"column":4},"end":{"line":18,"column":89}},"12":{"start":{"line":21,"column":0},"end":{"line":23,"column":2}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":89}},"14":{"start":{"line":25,"column":0},"end":{"line":27,"column":2}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":85}},"16":{"start":{"line":29,"column":0},"end":{"line":64,"column":2}},"17":{"start":{"line":30,"column":4},"end":{"line":30,"column":25}},"18":{"start":{"line":31,"column":4},"end":{"line":31,"column":20}},"19":{"start":{"line":32,"column":4},"end":{"line":47,"column":5}},"20":{"start":{"line":33,"column":8},"end":{"line":46,"column":9}},"21":{"start":{"line":34,"column":12},"end":{"line":45,"column":13}},"22":{"start":{"line":35,"column":16},"end":{"line":44,"column":17}},"23":{"start":{"line":36,"column":20},"end":{"line":43,"column":23}},"24":{"start":{"line":48,"column":4},"end":{"line":62,"column":7}},"25":{"start":{"line":49,"column":8},"end":{"line":60,"column":9}},"26":{"start":{"line":50,"column":12},"end":{"line":50,"column":22}},"27":{"start":{"line":52,"column":13},"end":{"line":60,"column":9}},"28":{"start":{"line":53,"column":12},"end":{"line":53,"column":21}},"29":{"start":{"line":55,"column":13},"end":{"line":60,"column":9}},"30":{"start":{"line":56,"column":12},"end":{"line":56,"column":22}},"31":{"start":{"line":58,"column":13},"end":{"line":60,"column":9}},"32":{"start":{"line":59,"column":12},"end":{"line":59,"column":21}},"33":{"start":{"line":61,"column":8},"end":{"line":61,"column":17}},"34":{"start":{"line":63,"column":4},"end":{"line":63,"column":33}},"35":{"start":{"line":66,"column":0},"end":{"line":78,"column":2}},"36":{"start":{"line":67,"column":4},"end":{"line":67,"column":20}},"37":{"start":{"line":68,"column":4},"end":{"line":76,"column":5}},"38":{"start":{"line":69,"column":8},"end":{"line":75,"column":9}},"39":{"start":{"line":70,"column":12},"end":{"line":74,"column":15}},"40":{"start":{"line":77,"column":4},"end":{"line":77,"column":18}},"41":{"start":{"line":80,"column":0},"end":{"line":84,"column":2}},"42":{"start":{"line":81,"column":4},"end":{"line":83,"column":5}},"43":{"start":{"line":82,"column":8},"end":{"line":82,"column":34}},"44":{"start":{"line":86,"column":0},"end":{"line":86,"column":33}}},"branchMap":{"1":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"2":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":12},"end":{"line":33,"column":57}},{"start":{"line":33,"column":61},"end":{"line":33,"column":79}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":16}},{"start":{"line":35,"column":16},"end":{"line":35,"column":16}}]},"4":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":13},"end":{"line":52,"column":13}},{"start":{"line":52,"column":13},"end":{"line":52,"column":13}}]},"6":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":13},"end":{"line":55,"column":13}},{"start":{"line":55,"column":13},"end":{"line":55,"column":13}}]},"7":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":13},"end":{"line":58,"column":13}},{"start":{"line":58,"column":13},"end":{"line":58,"column":13}}]},"8":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"9":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":47}},{"start":{"line":69,"column":51},"end":{"line":69,"column":76}}]}},"code":["\"use strict\";","","let specStrings = require(\"../common/specStrings\");","let InstIdPaths = require(\"./instIdPaths\");","let _ = require(\"lodash\");","let debug = require(\"debug\")(\"wf4node:KnownInstaStore\");","let enums = require(\"../common/enums\");","","function KnownInstaStore() {","    this._instances = new Map();","}","","KnownInstaStore.prototype.add = function (workflowName, insta) {","    this._instances.set(specStrings.hosting.doubleKeys(workflowName, insta.id), insta);","};","","KnownInstaStore.prototype.get = function (workflowName, instanceId) {","    return this._instances.get(specStrings.hosting.doubleKeys(workflowName, instanceId));","};","","KnownInstaStore.prototype.exists = function (workflowName, instanceId) {","    return this._instances.has(specStrings.hosting.doubleKeys(workflowName, instanceId));","};","","KnownInstaStore.prototype.remove = function (workflowName, instanceId) {","    this._instances.delete(specStrings.hosting.doubleKeys(workflowName, instanceId));","};","","KnownInstaStore.prototype.getNextWakeupables = function (count) {","    let now = new Date();","    let result = [];","    for (let insta of this._instances.values()) {","        if (insta.execState === enums.activityStates.idle && insta.activeDelays) {","            for (let ad of insta.activeDelays) {","                if (ad.delayTo <= now) {","                    result.push({","                        instanceId: insta.id,","                        workflowName: insta.workflowName,","                        activeDelay: {","                            methodName: ad.methodName,","                            delayTo: ad.delayTo","                        }","                    });","                }","            }","        }","    }","    result.sort(function (i1, i2) {","        if (i1.updatedOn < i2.updatedOn) {","            return -1;","        }","        else if (i1.updatedOn > i2.updatedOn) {","            return 1;","        }","        else if (i1.activeDelay.delayTo < i2.activeDelay.delayTo) {","            return -1;","        }","        else if (i1.activeDelay.delayTo > i2.activeDelay.delayTo) {","            return 1;","        }","        return 0;","    });","    return _.take(result, count);","};","","KnownInstaStore.prototype.getRunningInstanceHeadersForOtherVersion = function(workflowName, version) {","    let result = [];","    for (let insta of this._instances.values()) {","        if (insta.workflowName === workflowName && insta.version !== version) {","            result.push({","                workflowName: insta.workflowName,","                workflowVersion: insta.workflowVersion,","                instanceId: insta.id","            });","        }","    }","    return result;","};","","KnownInstaStore.prototype.addTracker = function(tracker) {","    for (let insta of this._instances.values()) {","        insta.addTracker(tracker);","    }","};","","module.exports = KnownInstaStore;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"13":1,"14":0,"17":1,"18":0,"21":1,"22":0,"25":1,"26":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"48":0,"49":0,"50":0,"52":0,"53":0,"55":0,"56":0,"58":0,"59":0,"61":0,"63":0,"66":1,"67":0,"68":0,"69":0,"70":0,"77":0,"80":1,"81":0,"82":0,"86":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/instIdPaths.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/instIdPaths.js","s":{"1":1,"2":1,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"InstIdPaths","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":23}}},"2":{"name":"(anonymous_2)","line":10,"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":80}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":31},"end":{"line":21,"column":83}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":30},"end":{"line":38,"column":67}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":51}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":33}},"3":{"start":{"line":6,"column":0},"end":{"line":8,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":26}},"5":{"start":{"line":10,"column":0},"end":{"line":19,"column":2}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":71}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":35}},"8":{"start":{"line":13,"column":4},"end":{"line":16,"column":5}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":26}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":34}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":47}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":41}},"13":{"start":{"line":21,"column":0},"end":{"line":36,"column":2}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":71}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":35}},"16":{"start":{"line":24,"column":4},"end":{"line":34,"column":5}},"17":{"start":{"line":25,"column":8},"end":{"line":25,"column":46}},"18":{"start":{"line":26,"column":8},"end":{"line":33,"column":9}},"19":{"start":{"line":27,"column":12},"end":{"line":32,"column":13}},"20":{"start":{"line":28,"column":16},"end":{"line":28,"column":38}},"21":{"start":{"line":31,"column":16},"end":{"line":31,"column":53}},"22":{"start":{"line":35,"column":4},"end":{"line":35,"column":17}},"23":{"start":{"line":38,"column":0},"end":{"line":46,"column":2}},"24":{"start":{"line":39,"column":4},"end":{"line":39,"column":71}},"25":{"start":{"line":40,"column":4},"end":{"line":40,"column":35}},"26":{"start":{"line":41,"column":4},"end":{"line":45,"column":5}},"27":{"start":{"line":42,"column":8},"end":{"line":44,"column":9}},"28":{"start":{"line":43,"column":12},"end":{"line":43,"column":21}},"29":{"start":{"line":48,"column":0},"end":{"line":48,"column":29}}},"branchMap":{"1":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":13,"column":4}},{"start":{"line":13,"column":4},"end":{"line":13,"column":4}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":16},"end":{"line":17,"column":41}},{"start":{"line":17,"column":45},"end":{"line":17,"column":46}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"4":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"5":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":27,"column":12}},{"start":{"line":27,"column":12},"end":{"line":27,"column":12}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]}},"code":["\"use strict\";","","let specStrings = require(\"../common/specStrings\");","let is = require(\"../common/is\");","","function InstIdPaths() {","    this._map = new Map();","}","","InstIdPaths.prototype.add = function (workflowName, methodName, instanceIdPath) {","    let key = specStrings.hosting.doubleKeys(workflowName, methodName);","    let inner = this._map.get(key);","    if (!inner) {","        inner = new Map();","        this._map.set(key, inner);","    }","    let count = inner.get(instanceIdPath) || 0;","    inner.set(instanceIdPath, count + 1);","};","","InstIdPaths.prototype.remove = function (workflowName, methodName, instanceIdPath) {","    let key = specStrings.hosting.doubleKeys(workflowName, methodName);","    let inner = this._map.get(key);","    if (inner) {","        let count = inner.get(instanceIdPath);","        if (!_.isUndefined(count)) {","            if (count === 1) {","                this._map.delete(key);","            }","            else {","                inner.set(instanceIdPath, count - 1);","            }","        }","    }","    return false;","};","","InstIdPaths.prototype.items = function* (workflowName, methodName) {","    let key = specStrings.hosting.doubleKeys(workflowName, methodName);","    let inner = this._map.get(key);","    if (inner) {","        for (let ik of inner.keys()) {","            yield ik;","        }","    }","};","","module.exports = InstIdPaths;",""],"l":{"3":1,"4":1,"6":1,"7":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"17":0,"18":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"31":0,"35":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"48":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/keepLockAlive.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/keepLockAlive.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"KeepLockAlive","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":74}}},"2":{"name":"(anonymous_2)","line":9,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":20}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":39}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"4":{"start":{"line":5,"column":0},"end":{"line":13,"column":1}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":20}},"6":{"start":{"line":7,"column":4},"end":{"line":12,"column":21}},"7":{"start":{"line":10,"column":12},"end":{"line":10,"column":131}},"8":{"start":{"line":10,"column":41},"end":{"line":10,"column":98}},"9":{"start":{"line":10,"column":104},"end":{"line":10,"column":131}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":40}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":31}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":10,"column":12}},{"start":{"line":10,"column":12},"end":{"line":10,"column":12}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":16},"end":{"line":10,"column":24}},{"start":{"line":10,"column":28},"end":{"line":10,"column":39}}]}},"code":["var KeepAlive = require(\"./keepAlive\");","var util = require(\"util\");","var Bluebird = require(\"bluebird\");","","function KeepLockAlive(persistence, lockInfo, inLockTimeout, renewPeriod) {","    var self = this;","    KeepAlive.call(","        self,","        function () {","            if (lockInfo && lockInfo.id) return persistence.renewLock(lockInfo.id, inLockTimeout); else return Bluebird.resolve(0);","        },","        renewPeriod);","}","","util.inherits(KeepLockAlive, KeepAlive);","","module.exports = KeepLockAlive;",""],"l":{"1":1,"2":1,"3":1,"5":1,"6":0,"7":0,"10":0,"15":1,"17":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/keepAlive.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/keepAlive.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"KeepAlive","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":45}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":21},"end":{"line":11,"column":33}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":29},"end":{"line":16,"column":41}}},"4":{"name":"(anonymous_4)","line":19,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":20}}},"5":{"name":"(anonymous_5)","line":22,"loc":{"start":{"line":22,"column":27},"end":{"line":22,"column":40}}},"6":{"name":"(anonymous_6)","line":25,"loc":{"start":{"line":25,"column":29},"end":{"line":25,"column":41}}},"7":{"name":"(anonymous_7)","line":33,"loc":{"start":{"line":33,"column":26},"end":{"line":33,"column":38}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":26}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":4,"column":0},"end":{"line":14,"column":1}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":86}},"5":{"start":{"line":5,"column":35},"end":{"line":5,"column":86}},"6":{"start":{"line":6,"column":4},"end":{"line":6,"column":34}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":38}},"8":{"start":{"line":8,"column":4},"end":{"line":8,"column":27}},"9":{"start":{"line":9,"column":4},"end":{"line":9,"column":22}},"10":{"start":{"line":10,"column":4},"end":{"line":10,"column":20}},"11":{"start":{"line":11,"column":4},"end":{"line":13,"column":7}},"12":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"13":{"start":{"line":16,"column":0},"end":{"line":31,"column":1}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"15":{"start":{"line":18,"column":4},"end":{"line":30,"column":28}},"16":{"start":{"line":20,"column":12},"end":{"line":28,"column":13}},"17":{"start":{"line":21,"column":16},"end":{"line":27,"column":23}},"18":{"start":{"line":23,"column":24},"end":{"line":23,"column":72}},"19":{"start":{"line":26,"column":24},"end":{"line":26,"column":59}},"20":{"start":{"line":26,"column":45},"end":{"line":26,"column":59}},"21":{"start":{"line":33,"column":0},"end":{"line":38,"column":1}},"22":{"start":{"line":34,"column":4},"end":{"line":34,"column":75}},"23":{"start":{"line":34,"column":26},"end":{"line":34,"column":75}},"24":{"start":{"line":36,"column":4},"end":{"line":36,"column":28}},"25":{"start":{"line":37,"column":4},"end":{"line":37,"column":45}},"26":{"start":{"line":37,"column":20},"end":{"line":37,"column":45}},"27":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}}},"branchMap":{"1":{"line":5,"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":5,"column":4}},{"start":{"line":5,"column":4},"end":{"line":5,"column":4}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":12}},{"start":{"line":20,"column":12},"end":{"line":20,"column":12}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":24}},{"start":{"line":26,"column":24},"end":{"line":26,"column":24}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":37,"column":4}},{"start":{"line":37,"column":4},"end":{"line":37,"column":4}}]}},"code":["var _ = require(\"lodash\");","var Bluebird = require(\"bluebird\");","","function KeepAlive(repeatFunc, repeatPeriod) {","    if (!_.isFunction(repeatFunc)) throw new TypeError(\"Function argument expected.\");","    this._repeatFunc = repeatFunc;","    this._repeatPeriod = repeatPeriod;","    this._isRunning = true;","    this._toId = null;","    var self = this;","    process.nextTick(function () {","        self._start.call(self);","    });","}","","KeepAlive.prototype._start = function () {","    var self = this;","    self._toId = setTimeout(","        function () {","            if (self._isRunning) {","                Bluebird.resolve(self._repeatFunc())","                    .catch(function (e) {","                        console.error(\"Keep alive failed:\\n\" + e.stack);","                    })","                    .finally(function () {","                        if (self._isRunning) self._start();","                    });","            }","        },","        self._repeatPeriod);","}","","KeepAlive.prototype.end = function () {","    if (!this._isRunning) throw new Error(\"Keep alive has already ended.\");","","    this._isRunning = false;","    if (this._toId) clearTimeout(this._toId);","}","","module.exports = KeepAlive;"],"l":{"1":1,"2":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"16":1,"17":0,"18":0,"20":0,"21":0,"23":0,"26":0,"33":1,"34":0,"36":0,"37":0,"40":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/wakeUp.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/wakeUp.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"WakeUp","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":55}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":25},"end":{"line":22,"column":37}}},"3":{"name":"(anonymous_3)","line":26,"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":47}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":24},"end":{"line":30,"column":36}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":43}}},"6":{"name":"(anonymous_6)","line":54,"loc":{"start":{"line":54,"column":37},"end":{"line":54,"column":49}}},"7":{"name":"(anonymous_7)","line":60,"loc":{"start":{"line":60,"column":51},"end":{"line":60,"column":78}}},"8":{"name":"(anonymous_8)","line":98,"loc":{"start":{"line":98,"column":39},"end":{"line":98,"column":51}}},"9":{"name":"(anonymous_9)","line":103,"loc":{"start":{"line":103,"column":45},"end":{"line":103,"column":58}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}},"6":{"start":{"line":9,"column":0},"end":{"line":18,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":28}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":43}},"9":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":33}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":26}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":25}},"13":{"start":{"line":17,"column":4},"end":{"line":17,"column":51}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":36}},"15":{"start":{"line":22,"column":0},"end":{"line":28,"column":2}},"16":{"start":{"line":23,"column":4},"end":{"line":27,"column":5}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":24}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":24}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":97}},"20":{"start":{"line":26,"column":49},"end":{"line":26,"column":62}},"21":{"start":{"line":30,"column":0},"end":{"line":36,"column":2}},"22":{"start":{"line":31,"column":4},"end":{"line":35,"column":5}},"23":{"start":{"line":32,"column":8},"end":{"line":32,"column":23}},"24":{"start":{"line":33,"column":8},"end":{"line":33,"column":36}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":29}},"26":{"start":{"line":38,"column":0},"end":{"line":101,"column":3}},"27":{"start":{"line":39,"column":4},"end":{"line":39,"column":20}},"28":{"start":{"line":40,"column":4},"end":{"line":100,"column":5}},"29":{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},"30":{"start":{"line":42,"column":12},"end":{"line":42,"column":69}},"31":{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},"32":{"start":{"line":45,"column":8},"end":{"line":45,"column":37}},"33":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"34":{"start":{"line":47,"column":8},"end":{"line":94,"column":9}},"35":{"start":{"line":48,"column":12},"end":{"line":48,"column":63}},"36":{"start":{"line":49,"column":12},"end":{"line":86,"column":13}},"37":{"start":{"line":50,"column":16},"end":{"line":50,"column":69}},"38":{"start":{"line":51,"column":16},"end":{"line":51,"column":31}},"39":{"start":{"line":52,"column":16},"end":{"line":52,"column":30}},"40":{"start":{"line":53,"column":16},"end":{"line":75,"column":17}},"41":{"start":{"line":54,"column":20},"end":{"line":74,"column":26}},"42":{"start":{"line":55,"column":24},"end":{"line":57,"column":25}},"43":{"start":{"line":56,"column":28},"end":{"line":56,"column":35}},"44":{"start":{"line":58,"column":24},"end":{"line":58,"column":111}},"45":{"start":{"line":59,"column":24},"end":{"line":59,"column":47}},"46":{"start":{"line":60,"column":24},"end":{"line":63,"column":27}},"47":{"start":{"line":61,"column":28},"end":{"line":61,"column":64}},"48":{"start":{"line":62,"column":28},"end":{"line":62,"column":62}},"49":{"start":{"line":64,"column":24},"end":{"line":64,"column":58}},"50":{"start":{"line":65,"column":24},"end":{"line":73,"column":25}},"51":{"start":{"line":66,"column":28},"end":{"line":66,"column":42}},"52":{"start":{"line":67,"column":28},"end":{"line":67,"column":36}},"53":{"start":{"line":68,"column":28},"end":{"line":68,"column":65}},"54":{"start":{"line":71,"column":28},"end":{"line":71,"column":73}},"55":{"start":{"line":72,"column":28},"end":{"line":72,"column":50}},"56":{"start":{"line":77,"column":16},"end":{"line":77,"column":59}},"57":{"start":{"line":78,"column":16},"end":{"line":82,"column":17}},"58":{"start":{"line":79,"column":20},"end":{"line":81,"column":21}},"59":{"start":{"line":80,"column":24},"end":{"line":80,"column":46}},"60":{"start":{"line":85,"column":16},"end":{"line":85,"column":58}},"61":{"start":{"line":89,"column":12},"end":{"line":89,"column":34}},"62":{"start":{"line":92,"column":12},"end":{"line":92,"column":42}},"63":{"start":{"line":93,"column":12},"end":{"line":93,"column":34}},"64":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"65":{"start":{"line":98,"column":12},"end":{"line":98,"column":101}},"66":{"start":{"line":98,"column":53},"end":{"line":98,"column":66}},"67":{"start":{"line":103,"column":0},"end":{"line":110,"column":3}},"68":{"start":{"line":104,"column":4},"end":{"line":109,"column":5}},"69":{"start":{"line":105,"column":8},"end":{"line":105,"column":80}},"70":{"start":{"line":108,"column":8},"end":{"line":108,"column":78}},"71":{"start":{"line":112,"column":0},"end":{"line":112,"column":24}}},"branchMap":{"1":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":19},"end":{"line":14,"column":26}},{"start":{"line":14,"column":30},"end":{"line":14,"column":32}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":22},"end":{"line":17,"column":44}},{"start":{"line":17,"column":48},"end":{"line":17,"column":50}}]},"3":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"4":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":66},"end":{"line":26,"column":87}},{"start":{"line":26,"column":91},"end":{"line":26,"column":95}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"7":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":49,"column":12}},{"start":{"line":49,"column":12},"end":{"line":49,"column":12}}]},"8":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":16},"end":{"line":49,"column":27}},{"start":{"line":49,"column":31},"end":{"line":49,"column":49}}]},"9":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":24},"end":{"line":55,"column":24}},{"start":{"line":55,"column":24},"end":{"line":55,"column":24}}]},"10":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":20},"end":{"line":79,"column":20}},{"start":{"line":79,"column":20},"end":{"line":79,"column":20}}]},"11":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"12":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":70},"end":{"line":98,"column":91}},{"start":{"line":98,"column":95},"end":{"line":98,"column":99}}]},"13":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":104,"column":4}},{"start":{"line":104,"column":4},"end":{"line":104,"column":4}}]}},"code":["\"use strict\";","","let EventEmitter = require(\"events\").EventEmitter;","let Bluebird = require(\"bluebird\");","let async = require(\"../common\").asyncHelpers.async;","let debug = require(\"debug\")(\"wf4node:WakeUp\");","let util = require(\"util\");","","function WakeUp(knownInstaStore, persistence, options) {","    EventEmitter.call(this);","","    this.knownInstaStore = knownInstaStore;","    this.persistence = persistence;","    this.options = options || {};","    this._working = false;","    this._timeout = null;","    this._batchSize = this.options.batchSize || 10;","}","","util.inherits(WakeUp, EventEmitter);","","WakeUp.prototype.start = function () {","    if (!this._timeout) {","        debug(\"Start.\");","        let self = this;","        this._timeout = setTimeout(function () { self._step(); }, this.options.interval || 5000);","    }","};","","WakeUp.prototype.stop = function () {","    if (this._timeout) {","        debug(\"Stop.\");","        clearTimeout(this._timeout);","        this._timeout = null;","    }","};","","WakeUp.prototype._step = async(function*() {","    let self = this;","    try {","        if (this._working) {","            debug(\"Skipping current step because work in progress.\");","            return;","        }","        debug(\"Starting next step.\");","        this._working = true;","        try {","            let wakeupables = yield this._getNextWakeupables();","            if (wakeupables && wakeupables.length) {","                debug(\"%d selected to wake up.\", wakeupables.length);","                let tasks = [];","                let count = 0;","                for (let wakeupable of wakeupables) {","                    tasks.push(async(function*() {","                        if (count >= self._batchSize) {","                            return;","                        }","                        debug(\"Waking up workflow %s, id: %s\", wakeupable.workflowName, wakeupable.instanceId);","                        wakeupable.result = {};","                        let promise = new Bluebird(function (resolve, reject) {","                            wakeupable.result.resolve = resolve;","                            wakeupable.result.reject = reject;","                        });","                        self.emit(\"continue\", wakeupable);","                        try {","                            yield promise;","                            count++;","                            debug(\"Processing delay completed.\");","                        }","                        catch (e) {","                            debug(\"Processing delay error: %s\", e.stack);","                            self.emit(\"error\", e);","                        }","                    })());","                }","","                let results = yield Bluebird.settle(tasks);","                for (let result of results) {","                    if (result.isRejected()) {","                        throw result.reason();","                    }","                }","            }","            else {","                debug(\"There is no instance to wake up.\");","            }","        }","        catch (e) {","            this.emit(\"error\", e);","        }","        finally {","            debug(\"Next step completed.\");","            this._working = false;","        }","    }","    finally {","        if (this._timeout) {","            this._timeout = setTimeout(function () { self._step(); }, this.options.interval || 5000);","        }","    }","});","","WakeUp.prototype._getNextWakeupables = async(function* () {","    if (this.persistence) {","        return yield this.persistence.getNextWakeupables(this._batchSize * 1.5);","    }","    else {","        return this.knownInstaStore.getNextWakeupables(this._batchSize * 1.5);","    }","});","","module.exports = WakeUp;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"9":1,"10":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"20":1,"22":1,"23":0,"24":0,"25":0,"26":0,"30":1,"31":0,"32":0,"33":0,"34":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"58":0,"59":0,"60":0,"61":0,"62":0,"64":0,"65":0,"66":0,"67":0,"68":0,"71":0,"72":0,"77":0,"78":0,"79":0,"80":0,"85":0,"89":0,"92":0,"93":0,"97":0,"98":0,"103":1,"104":0,"105":0,"108":0,"112":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/memoryPersistence.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/lib/es6/hosting/memoryPersistence.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":1,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"MemoryPersistence","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":29}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":36},"end":{"line":18,"column":48}}},"3":{"name":"(anonymous_3)","line":24,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":77}}},"4":{"name":"(anonymous_4)","line":49,"loc":{"start":{"line":49,"column":40},"end":{"line":49,"column":75}}},"5":{"name":"(anonymous_5)","line":57,"loc":{"start":{"line":57,"column":39},"end":{"line":57,"column":57}}},"6":{"name":"(anonymous_6)","line":67,"loc":{"start":{"line":67,"column":43},"end":{"line":67,"column":61}}},"7":{"name":"(anonymous_7)","line":76,"loc":{"start":{"line":76,"column":40},"end":{"line":76,"column":76}}},"8":{"name":"(anonymous_8)","line":82,"loc":{"start":{"line":82,"column":43},"end":{"line":82,"column":60}}},"9":{"name":"(anonymous_9)","line":91,"loc":{"start":{"line":91,"column":57},"end":{"line":91,"column":93}}},"10":{"name":"(anonymous_10)","line":106,"loc":{"start":{"line":106,"column":40},"end":{"line":106,"column":76}}},"11":{"name":"(anonymous_11)","line":115,"loc":{"start":{"line":115,"column":42},"end":{"line":115,"column":78}}},"12":{"name":"(anonymous_12)","line":121,"loc":{"start":{"line":121,"column":41},"end":{"line":121,"column":77}}},"13":{"name":"(anonymous_13)","line":129,"loc":{"start":{"line":129,"column":53},"end":{"line":129,"column":89}}},"14":{"name":"(anonymous_14)","line":136,"loc":{"start":{"line":136,"column":49},"end":{"line":136,"column":66}}},"15":{"name":"(anonymous_15)","line":158,"loc":{"start":{"line":158,"column":16},"end":{"line":158,"column":34}}},"16":{"name":"(anonymous_16)","line":176,"loc":{"start":{"line":176,"column":71},"end":{"line":176,"column":104}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":22}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":51}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":58}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":41}},"9":{"start":{"line":12,"column":0},"end":{"line":16,"column":1}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":32}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":34}},"13":{"start":{"line":18,"column":0},"end":{"line":22,"column":2}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":31}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"16":{"start":{"line":21,"column":4},"end":{"line":21,"column":30}},"17":{"start":{"line":24,"column":0},"end":{"line":47,"column":2}},"18":{"start":{"line":25,"column":4},"end":{"line":25,"column":58}},"19":{"start":{"line":27,"column":4},"end":{"line":27,"column":25}},"20":{"start":{"line":28,"column":4},"end":{"line":28,"column":53}},"21":{"start":{"line":29,"column":4},"end":{"line":29,"column":48}},"22":{"start":{"line":30,"column":4},"end":{"line":30,"column":34}},"23":{"start":{"line":31,"column":4},"end":{"line":44,"column":5}},"24":{"start":{"line":32,"column":8},"end":{"line":36,"column":10}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":51}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":55}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":43}},"28":{"start":{"line":43,"column":8},"end":{"line":43,"column":24}},"29":{"start":{"line":45,"column":4},"end":{"line":45,"column":33}},"30":{"start":{"line":46,"column":4},"end":{"line":46,"column":16}},"31":{"start":{"line":49,"column":0},"end":{"line":55,"column":2}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":56}},"33":{"start":{"line":52,"column":4},"end":{"line":52,"column":42}},"34":{"start":{"line":53,"column":4},"end":{"line":53,"column":63}},"35":{"start":{"line":54,"column":4},"end":{"line":54,"column":58}},"36":{"start":{"line":57,"column":0},"end":{"line":65,"column":2}},"37":{"start":{"line":58,"column":4},"end":{"line":58,"column":34}},"38":{"start":{"line":60,"column":4},"end":{"line":60,"column":42}},"39":{"start":{"line":61,"column":4},"end":{"line":61,"column":37}},"40":{"start":{"line":62,"column":4},"end":{"line":62,"column":41}},"41":{"start":{"line":64,"column":4},"end":{"line":64,"column":38}},"42":{"start":{"line":67,"column":0},"end":{"line":74,"column":2}},"43":{"start":{"line":68,"column":4},"end":{"line":68,"column":44}},"44":{"start":{"line":69,"column":4},"end":{"line":69,"column":25}},"45":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"46":{"start":{"line":71,"column":8},"end":{"line":71,"column":71}},"47":{"start":{"line":73,"column":4},"end":{"line":73,"column":17}},"48":{"start":{"line":76,"column":0},"end":{"line":80,"column":2}},"49":{"start":{"line":77,"column":4},"end":{"line":77,"column":57}},"50":{"start":{"line":79,"column":4},"end":{"line":79,"column":92}},"51":{"start":{"line":82,"column":0},"end":{"line":89,"column":2}},"52":{"start":{"line":83,"column":4},"end":{"line":83,"column":37}},"53":{"start":{"line":85,"column":4},"end":{"line":85,"column":27}},"54":{"start":{"line":86,"column":4},"end":{"line":86,"column":46}},"55":{"start":{"line":88,"column":4},"end":{"line":88,"column":104}},"56":{"start":{"line":91,"column":0},"end":{"line":104,"column":2}},"57":{"start":{"line":92,"column":4},"end":{"line":92,"column":74}},"58":{"start":{"line":94,"column":4},"end":{"line":94,"column":97}},"59":{"start":{"line":95,"column":4},"end":{"line":97,"column":5}},"60":{"start":{"line":96,"column":8},"end":{"line":96,"column":20}},"61":{"start":{"line":98,"column":4},"end":{"line":103,"column":6}},"62":{"start":{"line":106,"column":0},"end":{"line":113,"column":2}},"63":{"start":{"line":107,"column":4},"end":{"line":107,"column":57}},"64":{"start":{"line":109,"column":4},"end":{"line":109,"column":58}},"65":{"start":{"line":110,"column":4},"end":{"line":110,"column":27}},"66":{"start":{"line":111,"column":4},"end":{"line":111,"column":42}},"67":{"start":{"line":112,"column":4},"end":{"line":112,"column":17}},"68":{"start":{"line":115,"column":0},"end":{"line":119,"column":2}},"69":{"start":{"line":116,"column":4},"end":{"line":116,"column":59}},"70":{"start":{"line":118,"column":4},"end":{"line":118,"column":88}},"71":{"start":{"line":121,"column":0},"end":{"line":127,"column":2}},"72":{"start":{"line":122,"column":4},"end":{"line":122,"column":97}},"73":{"start":{"line":123,"column":4},"end":{"line":125,"column":5}},"74":{"start":{"line":124,"column":8},"end":{"line":124,"column":140}},"75":{"start":{"line":126,"column":4},"end":{"line":126,"column":17}},"76":{"start":{"line":129,"column":0},"end":{"line":134,"column":2}},"77":{"start":{"line":130,"column":4},"end":{"line":130,"column":70}},"78":{"start":{"line":132,"column":4},"end":{"line":132,"column":97}},"79":{"start":{"line":133,"column":4},"end":{"line":133,"column":51}},"80":{"start":{"line":136,"column":0},"end":{"line":174,"column":2}},"81":{"start":{"line":137,"column":4},"end":{"line":137,"column":43}},"82":{"start":{"line":139,"column":4},"end":{"line":139,"column":25}},"83":{"start":{"line":140,"column":4},"end":{"line":140,"column":20}},"84":{"start":{"line":141,"column":4},"end":{"line":157,"column":5}},"85":{"start":{"line":142,"column":8},"end":{"line":156,"column":9}},"86":{"start":{"line":143,"column":12},"end":{"line":155,"column":13}},"87":{"start":{"line":144,"column":16},"end":{"line":154,"column":17}},"88":{"start":{"line":145,"column":20},"end":{"line":153,"column":23}},"89":{"start":{"line":158,"column":4},"end":{"line":172,"column":7}},"90":{"start":{"line":159,"column":8},"end":{"line":170,"column":9}},"91":{"start":{"line":160,"column":12},"end":{"line":160,"column":22}},"92":{"start":{"line":162,"column":13},"end":{"line":170,"column":9}},"93":{"start":{"line":163,"column":12},"end":{"line":163,"column":21}},"94":{"start":{"line":165,"column":13},"end":{"line":170,"column":9}},"95":{"start":{"line":166,"column":12},"end":{"line":166,"column":22}},"96":{"start":{"line":168,"column":13},"end":{"line":170,"column":9}},"97":{"start":{"line":169,"column":12},"end":{"line":169,"column":21}},"98":{"start":{"line":171,"column":8},"end":{"line":171,"column":17}},"99":{"start":{"line":173,"column":4},"end":{"line":173,"column":33}},"100":{"start":{"line":176,"column":0},"end":{"line":188,"column":2}},"101":{"start":{"line":177,"column":4},"end":{"line":177,"column":20}},"102":{"start":{"line":178,"column":4},"end":{"line":186,"column":5}},"103":{"start":{"line":179,"column":8},"end":{"line":185,"column":9}},"104":{"start":{"line":180,"column":12},"end":{"line":184,"column":15}},"105":{"start":{"line":187,"column":4},"end":{"line":187,"column":18}},"106":{"start":{"line":190,"column":0},"end":{"line":190,"column":35}}},"branchMap":{"1":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"2":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":14}},{"start":{"line":31,"column":18},"end":{"line":31,"column":56}}]},"3":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"4":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},{"start":{"line":70,"column":18},"end":{"line":70,"column":49}}]},"5":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"6":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":4},"end":{"line":123,"column":4}},{"start":{"line":123,"column":4},"end":{"line":123,"column":4}}]},"7":{"line":133,"type":"cond-expr","locations":[{"start":{"line":133,"column":19},"end":{"line":133,"column":43}},{"start":{"line":133,"column":46},"end":{"line":133,"column":50}}]},"8":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":142,"column":8}},{"start":{"line":142,"column":8},"end":{"line":142,"column":8}}]},"9":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":16},"end":{"line":144,"column":16}},{"start":{"line":144,"column":16},"end":{"line":144,"column":16}}]},"10":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":8},"end":{"line":159,"column":8}},{"start":{"line":159,"column":8},"end":{"line":159,"column":8}}]},"11":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":13},"end":{"line":162,"column":13}},{"start":{"line":162,"column":13},"end":{"line":162,"column":13}}]},"12":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":13},"end":{"line":165,"column":13}},{"start":{"line":165,"column":13},"end":{"line":165,"column":13}}]},"13":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":13},"end":{"line":168,"column":13}},{"start":{"line":168,"column":13},"end":{"line":168,"column":13}}]},"14":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":8},"end":{"line":179,"column":8}},{"start":{"line":179,"column":8},"end":{"line":179,"column":8}}]},"15":{"line":179,"type":"binary-expr","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":46}},{"start":{"line":179,"column":50},"end":{"line":179,"column":74}}]}},"code":["\"use strict\";","","let uuid = require('node-uuid');","require('date-utils');","let specStrings = require(\"../common/specStrings\");","let InstIdPaths = require(\"./instIdPaths\");","let is = require(\"../common/is\");","let _ = require(\"lodash\");","let debug = require(\"debug\")(\"wf4node:MemoryPersistence\");","let errors = require(\"../common/errors\");","","function MemoryPersistence() {","    this._instanceData = new Map();","    this._locksById = new Map();","    this._locksByName = new Map();","}","","MemoryPersistence.prototype.clear = function () {","    this._instanceData.clear();","    this._locksById.clear();","    this._locksByName.clear();","};","","MemoryPersistence.prototype.enterLock = function (lockName, inLockTimeoutMs) {","    debug(\"enterLock(%s, %d)\", lockName, inLockTimeoutMs);","","    let now = new Date();","    debug(\"Searching for lock by name %s\", lockName);","    let cLock = this._locksByName.get(lockName);","    debug(\"Lock info: %j\", cLock);","    if (!cLock || cLock.heldTo.getTime() < now.getTime()) {","        let lockInfo = {","            id: uuid.v4(),","            name: lockName,","            heldTo: now.addMilliseconds(inLockTimeoutMs)","        };","","        this._locksById.set(lockInfo.id, lockInfo);","        this._locksByName.set(lockInfo.name, lockInfo);","","        debug(\"LOCKED: %s\", lockInfo.name);","","        return lockInfo;","    }","    debug(\"It is already held.\");","    return null;","};","","MemoryPersistence.prototype.renewLock = function (lockId, inLockTimeoutMs) {","    debug(\"renewLock(%s, %d)\", lockId, inLockTimeoutMs);","","    let cLock = this._getLockById(lockId);","    cLock.heldTo = new Date().addMilliseconds(inLockTimeoutMs);","    debug(\"Lock %s extended to %s\", lockId, cLock.heldTo);","};","","MemoryPersistence.prototype.exitLock = function (lockId) {","    debug(\"exitLock(%s)\", lockId);","","    let cLock = this._getLockById(lockId);","    this._locksById.delete(cLock.id);","    this._locksByName.delete(cLock.name);","","    debug(\"UNLOCKED: %s\", cLock.name);","};","","MemoryPersistence.prototype._getLockById = function (lockId) {","    let cLock = this._locksById.get(lockId);","    let now = new Date();","    if (!cLock || now.compareTo(cLock.heldTo) > 0) {","        throw new Error(\"Lock by id '\" + lockId + \"' doesn't exists.\");","    }","    return cLock;","};","","MemoryPersistence.prototype.isRunning = function (workflowName, instanceId) {","    debug(\"isRunning(%s, %s)\", workflowName, instanceId);","","    return this._instanceData.has(specStrings.hosting.doubleKeys(workflowName, instanceId));","};","","MemoryPersistence.prototype.persistState = function (state) {","    debug(\"persistState(%j)\", state);","","    state = _.clone(state);","    state.state = JSON.stringify(state.state);","","    this._instanceData.set(specStrings.hosting.doubleKeys(state.workflowName, state.instanceId), state);","};","","MemoryPersistence.prototype.getRunningInstanceIdHeader = function (workflowName, instanceId) {","    debug(\"getRunningInstanceIdHeader(%s, %s)\", workflowName, instanceId);","","    let state = this._instanceData.get(specStrings.hosting.doubleKeys(workflowName, instanceId));","    if (!state) {","        return null;","    }","    return {","        updatedOn: state.updatedOn,","        workflowName: state.workflowName,","        workflowVersion: state.workflowVersion,","        instanceId: state.instanceId","    };","};","","MemoryPersistence.prototype.loadState = function (workflowName, instanceId) {","    debug(\"loadState(%s, %s)\", workflowName, instanceId);","","    let state = this._loadState(workflowName, instanceId);","    state = _.clone(state);","    state.state = JSON.parse(state.state);","    return state;","};","","MemoryPersistence.prototype.removeState = function (workflowName, instanceId) {","    debug(\"removeState(%s, %s)\", workflowName, instanceId);","","    this._instanceData.delete(specStrings.hosting.doubleKeys(workflowName, instanceId));","};","","MemoryPersistence.prototype._loadState = function (workflowName, instanceId) {","    let state = this._instanceData.get(specStrings.hosting.doubleKeys(workflowName, instanceId));","    if (!state) {","        throw new errors.WorkflowNotFoundError(\"Instance data of workflow '\" + workflowName + \"' by id '\" + instanceId + \"' is not found.\");","    }","    return state;","};","","MemoryPersistence.prototype.loadPromotedProperties = function (workflowName, instanceId) {","    debug(\"loadPromotedProperties(%s, %s)\", workflowName, instanceId);","","    let state = this._instanceData.get(specStrings.hosting.doubleKeys(workflowName, instanceId));","    return state ? state.promotedProperties : null;","};","","MemoryPersistence.prototype.getNextWakeupables = function (count) {","    debug(\"getNextWakeupables(%d)\", count);","","    let now = new Date();","    let result = [];","    for (let data of this._instanceData.values()) {","        if (data.activeDelays) {","            for (let ad of data.activeDelays) {","                if (ad.delayTo <= now) {","                    result.push({","                        instanceId: data.instanceId,","                        workflowName: data.workflowName,","                        updatedOn: data.updatedOn,","                        activeDelay: {","                            methodName: ad.methodName,","                            delayTo: ad.delayTo","                        }","                    });","                }","            }","        }","    }","    result.sort(function (i1, i2) {","        if (i1.updatedOn < i2.updatedOn) {","            return -1;","        }","        else if (i1.updatedOn > i2.updatedOn) {","            return 1;","        }","        else if (i1.activeDelay.delayTo < i2.activeDelay.delayTo) {","            return -1;","        }","        else if (i1.activeDelay.delayTo > i2.activeDelay.delayTo) {","            return 1;","        }","        return 0;","    });","    return _.take(result, count);","};","","MemoryPersistence.prototype.getRunningInstanceHeadersForOtherVersion = function (workflowName, version) {","    let result = [];","    for (let data of this._instanceData.values()) {","        if (data.workflowName === workflowName && data.version !== version) {","            result.push({","                workflowName: data.workflowName,","                workflowVersion: data.workflowVersion,","                instanceId: data.instanceId","            });","        }","    }","    return result;","};","","module.exports = MemoryPersistence;"],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"14":0,"15":0,"18":1,"19":0,"20":0,"21":0,"24":1,"25":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"38":0,"39":0,"41":0,"43":0,"45":0,"46":0,"49":1,"50":0,"52":0,"53":0,"54":0,"57":1,"58":0,"60":0,"61":0,"62":0,"64":0,"67":1,"68":0,"69":0,"70":0,"71":0,"73":0,"76":1,"77":0,"79":0,"82":1,"83":0,"85":0,"86":0,"88":0,"91":1,"92":0,"94":0,"95":0,"96":0,"98":0,"106":1,"107":0,"109":0,"110":0,"111":0,"112":0,"115":1,"116":0,"118":0,"121":1,"122":0,"123":0,"124":0,"126":0,"129":1,"130":0,"132":0,"133":0,"136":1,"137":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"158":0,"159":0,"160":0,"162":0,"163":0,"165":0,"166":0,"168":0,"169":0,"171":0,"173":0,"176":1,"177":0,"178":0,"179":0,"180":0,"187":0,"190":1}},"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/gulpfile.js":{"path":"/home/travis/build/npmtest/node-npmtest-workflow-4-node/node_modules/workflow-4-node/gulpfile.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":26},"end":{"line":8,"column":38}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":25},"end":{"line":18,"column":37}}},"3":{"name":"(anonymous_3)","line":32,"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":41}}},"4":{"name":"(anonymous_4)","line":33,"loc":{"start":{"line":33,"column":36},"end":{"line":33,"column":48}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":44}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":44}},"6":{"start":{"line":8,"column":0},"end":{"line":16,"column":3}},"7":{"start":{"line":9,"column":4},"end":{"line":15,"column":38}},"8":{"start":{"line":18,"column":0},"end":{"line":26,"column":3}},"9":{"start":{"line":19,"column":4},"end":{"line":25,"column":36}},"10":{"start":{"line":28,"column":0},"end":{"line":28,"column":68}},"11":{"start":{"line":30,"column":0},"end":{"line":30,"column":46}},"12":{"start":{"line":32,"column":0},"end":{"line":41,"column":3}},"13":{"start":{"line":33,"column":4},"end":{"line":40,"column":7}},"14":{"start":{"line":34,"column":8},"end":{"line":39,"column":9}},"15":{"start":{"line":35,"column":12},"end":{"line":35,"column":80}},"16":{"start":{"line":38,"column":12},"end":{"line":38,"column":19}},"17":{"start":{"line":43,"column":0},"end":{"line":43,"column":61}}},"branchMap":{"1":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":8}},{"start":{"line":34,"column":8},"end":{"line":34,"column":8}}]}},"code":["\"use strict\";","let gulp = require(\"gulp\");","let babel = require(\"gulp-babel\");","let gulpSequence = require(\"gulp-sequence\");","let exec = require(\"child_process\").exec;","let sourcemaps = require(\"gulp-sourcemaps\");","","gulp.task(\"compile-test\", function () {","    return gulp.src(\"tests/es6/**/*.js\", {base: \"tests/es6\"})","        .pipe(sourcemaps.init())","        .pipe(babel({","            presets: [\"es2015\"]","        }))","        .pipe(sourcemaps.write(\".\"))","        .pipe(gulp.dest(\"tests/es5\"));","});","","gulp.task(\"compile-lib\", function () {","    return gulp.src(\"lib/es6/**/*.js\", {base: \"lib/es6\"})","        .pipe(sourcemaps.init())","        .pipe(babel({","            presets: [\"es2015\"]","        }))","        .pipe(sourcemaps.write(\".\"))","        .pipe(gulp.dest(\"lib/es5\"));","});","","gulp.task(\"compile\", gulpSequence([\"compile-test\", \"compile-lib\"]));","","gulp.task(\"default\", gulpSequence(\"compile\"));","","gulp.task(\"npm-publish\", function (done) {","    exec(\"npm publish\").on(\"close\", function(e) {","        if (e) {","            done(new Error(\"Cannot publish to the npm. Exit code: \" + e + \".\"));","        }","        else {","            done();","        }","    });","});","","gulp.task(\"publish\", gulpSequence(\"compile\", \"npm-publish\")); "],"l":{"2":2,"3":0,"4":0,"5":0,"6":0,"8":0,"9":0,"18":0,"19":0,"28":0,"30":0,"32":0,"33":0,"34":0,"35":0,"38":0,"43":0}}}